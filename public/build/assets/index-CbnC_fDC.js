(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function _0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Id={exports:{}},Tl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function DA(){if(D_)return Tl;D_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:f,ref:l!==void 0?l:null,props:c}}return Tl.Fragment=t,Tl.jsx=n,Tl.jsxs=n,Tl}var O_;function OA(){return O_||(O_=1,Id.exports=DA()),Id.exports}var b=OA(),xd={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function MA(){if(M_)return Rt;M_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),w=Symbol.iterator;function N(E){return E===null||typeof E!="object"?null:(E=w&&E[w]||E["@@iterator"],typeof E=="function"?E:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},et=Object.assign,W={};function tt(E,k,$){this.props=E,this.context=k,this.refs=W,this.updater=$||L}tt.prototype.isReactComponent={},tt.prototype.setState=function(E,k){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,k,"setState")},tt.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function ht(){}ht.prototype=tt.prototype;function gt(E,k,$){this.props=E,this.context=k,this.refs=W,this.updater=$||L}var pt=gt.prototype=new ht;pt.constructor=gt,et(pt,tt.prototype),pt.isPureReactComponent=!0;var jt=Array.isArray,at={H:null,A:null,T:null,S:null,V:null},Ct=Object.prototype.hasOwnProperty;function O(E,k,$,Y,nt,ct){return $=ct.ref,{$$typeof:r,type:E,key:k,ref:$!==void 0?$:null,props:ct}}function R(E,k){return O(E.type,k,void 0,void 0,void 0,E.props)}function I(E){return typeof E=="object"&&E!==null&&E.$$typeof===r}function V(E){var k={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function($){return k[$]})}var D=/\/+/g;function P(E,k){return typeof E=="object"&&E!==null&&E.key!=null?V(""+E.key):k.toString(36)}function C(){}function se(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(C,C):(E.status="pending",E.then(function(k){E.status==="pending"&&(E.status="fulfilled",E.value=k)},function(k){E.status==="pending"&&(E.status="rejected",E.reason=k)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function qt(E,k,$,Y,nt){var ct=typeof E;(ct==="undefined"||ct==="boolean")&&(E=null);var it=!1;if(E===null)it=!0;else switch(ct){case"bigint":case"string":case"number":it=!0;break;case"object":switch(E.$$typeof){case r:case t:it=!0;break;case T:return it=E._init,qt(it(E._payload),k,$,Y,nt)}}if(it)return nt=nt(E),it=Y===""?"."+P(E,0):Y,jt(nt)?($="",it!=null&&($=it.replace(D,"$&/")+"/"),qt(nt,k,$,"",function(hn){return hn})):nt!=null&&(I(nt)&&(nt=R(nt,$+(nt.key==null||E&&E.key===nt.key?"":(""+nt.key).replace(D,"$&/")+"/")+it)),k.push(nt)),1;it=0;var te=Y===""?".":Y+":";if(jt(E))for(var Et=0;Et<E.length;Et++)Y=E[Et],ct=te+P(Y,Et),it+=qt(Y,k,$,ct,nt);else if(Et=N(E),typeof Et=="function")for(E=Et.call(E),Et=0;!(Y=E.next()).done;)Y=Y.value,ct=te+P(Y,Et++),it+=qt(Y,k,$,ct,nt);else if(ct==="object"){if(typeof E.then=="function")return qt(se(E),k,$,Y,nt);throw k=String(E),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}return it}function F(E,k,$){if(E==null)return E;var Y=[],nt=0;return qt(E,Y,"","",function(ct){return k.call($,ct,nt++)}),Y}function st(E){if(E._status===-1){var k=E._result;k=k(),k.then(function($){(E._status===0||E._status===-1)&&(E._status=1,E._result=$)},function($){(E._status===0||E._status===-1)&&(E._status=2,E._result=$)}),E._status===-1&&(E._status=0,E._result=k)}if(E._status===1)return E._result.default;throw E._result}var ft=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var k=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(k))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)};function Pt(){}return Rt.Children={map:F,forEach:function(E,k,$){F(E,function(){k.apply(this,arguments)},$)},count:function(E){var k=0;return F(E,function(){k++}),k},toArray:function(E){return F(E,function(k){return k})||[]},only:function(E){if(!I(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},Rt.Component=tt,Rt.Fragment=n,Rt.Profiler=l,Rt.PureComponent=gt,Rt.StrictMode=s,Rt.Suspense=y,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=at,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(E){return at.H.useMemoCache(E)}},Rt.cache=function(E){return function(){return E.apply(null,arguments)}},Rt.cloneElement=function(E,k,$){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var Y=et({},E.props),nt=E.key,ct=void 0;if(k!=null)for(it in k.ref!==void 0&&(ct=void 0),k.key!==void 0&&(nt=""+k.key),k)!Ct.call(k,it)||it==="key"||it==="__self"||it==="__source"||it==="ref"&&k.ref===void 0||(Y[it]=k[it]);var it=arguments.length-2;if(it===1)Y.children=$;else if(1<it){for(var te=Array(it),Et=0;Et<it;Et++)te[Et]=arguments[Et+2];Y.children=te}return O(E.type,nt,void 0,void 0,ct,Y)},Rt.createContext=function(E){return E={$$typeof:f,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:c,_context:E},E},Rt.createElement=function(E,k,$){var Y,nt={},ct=null;if(k!=null)for(Y in k.key!==void 0&&(ct=""+k.key),k)Ct.call(k,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(nt[Y]=k[Y]);var it=arguments.length-2;if(it===1)nt.children=$;else if(1<it){for(var te=Array(it),Et=0;Et<it;Et++)te[Et]=arguments[Et+2];nt.children=te}if(E&&E.defaultProps)for(Y in it=E.defaultProps,it)nt[Y]===void 0&&(nt[Y]=it[Y]);return O(E,ct,void 0,void 0,null,nt)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(E){return{$$typeof:p,render:E}},Rt.isValidElement=I,Rt.lazy=function(E){return{$$typeof:T,_payload:{_status:-1,_result:E},_init:st}},Rt.memo=function(E,k){return{$$typeof:g,type:E,compare:k===void 0?null:k}},Rt.startTransition=function(E){var k=at.T,$={};at.T=$;try{var Y=E(),nt=at.S;nt!==null&&nt($,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(Pt,ft)}catch(ct){ft(ct)}finally{at.T=k}},Rt.unstable_useCacheRefresh=function(){return at.H.useCacheRefresh()},Rt.use=function(E){return at.H.use(E)},Rt.useActionState=function(E,k,$){return at.H.useActionState(E,k,$)},Rt.useCallback=function(E,k){return at.H.useCallback(E,k)},Rt.useContext=function(E){return at.H.useContext(E)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(E,k){return at.H.useDeferredValue(E,k)},Rt.useEffect=function(E,k,$){var Y=at.H;if(typeof $=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(E,k)},Rt.useId=function(){return at.H.useId()},Rt.useImperativeHandle=function(E,k,$){return at.H.useImperativeHandle(E,k,$)},Rt.useInsertionEffect=function(E,k){return at.H.useInsertionEffect(E,k)},Rt.useLayoutEffect=function(E,k){return at.H.useLayoutEffect(E,k)},Rt.useMemo=function(E,k){return at.H.useMemo(E,k)},Rt.useOptimistic=function(E,k){return at.H.useOptimistic(E,k)},Rt.useReducer=function(E,k,$){return at.H.useReducer(E,k,$)},Rt.useRef=function(E){return at.H.useRef(E)},Rt.useState=function(E){return at.H.useState(E)},Rt.useSyncExternalStore=function(E,k,$){return at.H.useSyncExternalStore(E,k,$)},Rt.useTransition=function(){return at.H.useTransition()},Rt.version="19.1.1",Rt}var V_;function Am(){return V_||(V_=1,xd.exports=MA()),xd.exports}var Wt=Am();const VA=_0(Wt);var Cd={exports:{}},Al={},Nd={exports:{}},Dd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_;function kA(){return k_||(k_=1,(function(r){function t(F,st){var ft=F.length;F.push(st);t:for(;0<ft;){var Pt=ft-1>>>1,E=F[Pt];if(0<l(E,st))F[Pt]=st,F[ft]=E,ft=Pt;else break t}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var st=F[0],ft=F.pop();if(ft!==st){F[0]=ft;t:for(var Pt=0,E=F.length,k=E>>>1;Pt<k;){var $=2*(Pt+1)-1,Y=F[$],nt=$+1,ct=F[nt];if(0>l(Y,ft))nt<E&&0>l(ct,Y)?(F[Pt]=ct,F[nt]=ft,Pt=nt):(F[Pt]=Y,F[$]=ft,Pt=$);else if(nt<E&&0>l(ct,ft))F[Pt]=ct,F[nt]=ft,Pt=nt;else break t}}return st}function l(F,st){var ft=F.sortIndex-st.sortIndex;return ft!==0?ft:F.id-st.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();r.unstable_now=function(){return f.now()-p}}var y=[],g=[],T=1,w=null,N=3,L=!1,et=!1,W=!1,tt=!1,ht=typeof setTimeout=="function"?setTimeout:null,gt=typeof clearTimeout=="function"?clearTimeout:null,pt=typeof setImmediate<"u"?setImmediate:null;function jt(F){for(var st=n(g);st!==null;){if(st.callback===null)s(g);else if(st.startTime<=F)s(g),st.sortIndex=st.expirationTime,t(y,st);else break;st=n(g)}}function at(F){if(W=!1,jt(F),!et)if(n(y)!==null)et=!0,Ct||(Ct=!0,P());else{var st=n(g);st!==null&&qt(at,st.startTime-F)}}var Ct=!1,O=-1,R=5,I=-1;function V(){return tt?!0:!(r.unstable_now()-I<R)}function D(){if(tt=!1,Ct){var F=r.unstable_now();I=F;var st=!0;try{t:{et=!1,W&&(W=!1,gt(O),O=-1),L=!0;var ft=N;try{e:{for(jt(F),w=n(y);w!==null&&!(w.expirationTime>F&&V());){var Pt=w.callback;if(typeof Pt=="function"){w.callback=null,N=w.priorityLevel;var E=Pt(w.expirationTime<=F);if(F=r.unstable_now(),typeof E=="function"){w.callback=E,jt(F),st=!0;break e}w===n(y)&&s(y),jt(F)}else s(y);w=n(y)}if(w!==null)st=!0;else{var k=n(g);k!==null&&qt(at,k.startTime-F),st=!1}}break t}finally{w=null,N=ft,L=!1}st=void 0}}finally{st?P():Ct=!1}}}var P;if(typeof pt=="function")P=function(){pt(D)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,se=C.port2;C.port1.onmessage=D,P=function(){se.postMessage(null)}}else P=function(){ht(D,0)};function qt(F,st){O=ht(function(){F(r.unstable_now())},st)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(F){F.callback=null},r.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(F){switch(N){case 1:case 2:case 3:var st=3;break;default:st=N}var ft=N;N=st;try{return F()}finally{N=ft}},r.unstable_requestPaint=function(){tt=!0},r.unstable_runWithPriority=function(F,st){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ft=N;N=F;try{return st()}finally{N=ft}},r.unstable_scheduleCallback=function(F,st,ft){var Pt=r.unstable_now();switch(typeof ft=="object"&&ft!==null?(ft=ft.delay,ft=typeof ft=="number"&&0<ft?Pt+ft:Pt):ft=Pt,F){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=ft+E,F={id:T++,callback:st,priorityLevel:F,startTime:ft,expirationTime:E,sortIndex:-1},ft>Pt?(F.sortIndex=ft,t(g,F),n(y)===null&&F===n(g)&&(W?(gt(O),O=-1):W=!0,qt(at,ft-Pt))):(F.sortIndex=E,t(y,F),et||L||(et=!0,Ct||(Ct=!0,P()))),F},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(F){var st=N;return function(){var ft=N;N=st;try{return F.apply(this,arguments)}finally{N=ft}}}})(Dd)),Dd}var P_;function PA(){return P_||(P_=1,Nd.exports=kA()),Nd.exports}var Od={exports:{}},Ke={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function UA(){if(U_)return Ke;U_=1;var r=Am();function t(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)g+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(y,g,T){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:y,containerInfo:g,implementation:T}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Ke.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ke.createPortal=function(y,g){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return c(y,g,null,T)},Ke.flushSync=function(y){var g=f.T,T=s.p;try{if(f.T=null,s.p=2,y)return y()}finally{f.T=g,s.p=T,s.d.f()}},Ke.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(y,g))},Ke.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},Ke.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var T=g.as,w=p(T,g.crossOrigin),N=typeof g.integrity=="string"?g.integrity:void 0,L=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;T==="style"?s.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:N,fetchPriority:L}):T==="script"&&s.d.X(y,{crossOrigin:w,integrity:N,fetchPriority:L,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Ke.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var T=p(g.as,g.crossOrigin);s.d.M(y,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(y)},Ke.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var T=g.as,w=p(T,g.crossOrigin);s.d.L(y,T,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Ke.preloadModule=function(y,g){if(typeof y=="string")if(g){var T=p(g.as,g.crossOrigin);s.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(y)},Ke.requestFormReset=function(y){s.d.r(y)},Ke.unstable_batchedUpdates=function(y,g){return y(g)},Ke.useFormState=function(y,g,T){return f.H.useFormState(y,g,T)},Ke.useFormStatus=function(){return f.H.useHostTransitionStatus()},Ke.version="19.1.1",Ke}var L_;function LA(){if(L_)return Od.exports;L_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Od.exports=UA(),Od.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j_;function jA(){if(j_)return Al;j_=1;var r=PA(),t=Am(),n=LA();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function f(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function p(e){if(c(e)!==e)throw Error(s(188))}function y(e){var i=e.alternate;if(!i){if(i=c(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,o=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return p(h),e;if(d===o)return p(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=d;else{for(var v=!1,A=h.child;A;){if(A===a){v=!0,a=h,o=d;break}if(A===o){v=!0,o=h,a=d;break}A=A.sibling}if(!v){for(A=d.child;A;){if(A===a){v=!0,a=d,o=h;break}if(A===o){v=!0,o=d,a=h;break}A=A.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function g(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=g(e),i!==null)return i;e=e.sibling}return null}var T=Object.assign,w=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),et=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),tt=Symbol.for("react.profiler"),ht=Symbol.for("react.provider"),gt=Symbol.for("react.consumer"),pt=Symbol.for("react.context"),jt=Symbol.for("react.forward_ref"),at=Symbol.for("react.suspense"),Ct=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function P(e){return e===null||typeof e!="object"?null:(e=D&&e[D]||e["@@iterator"],typeof e=="function"?e:null)}var C=Symbol.for("react.client.reference");function se(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===C?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case et:return"Fragment";case tt:return"Profiler";case W:return"StrictMode";case at:return"Suspense";case Ct:return"SuspenseList";case I:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case L:return"Portal";case pt:return(e.displayName||"Context")+".Provider";case gt:return(e._context.displayName||"Context")+".Consumer";case jt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case O:return i=e.displayName||null,i!==null?i:se(e.type)||"Memo";case R:i=e._payload,e=e._init;try{return se(e(i))}catch{}}return null}var qt=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ft={pending:!1,data:null,method:null,action:null},Pt=[],E=-1;function k(e){return{current:e}}function $(e){0>E||(e.current=Pt[E],Pt[E]=null,E--)}function Y(e,i){E++,Pt[E]=e.current,e.current=i}var nt=k(null),ct=k(null),it=k(null),te=k(null);function Et(e,i){switch(Y(it,i),Y(ct,e),Y(nt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?s_(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=s_(i),e=a_(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(nt),Y(nt,e)}function hn(){$(nt),$(ct),$(it)}function po(e){e.memoizedState!==null&&Y(te,e);var i=nt.current,a=a_(i,e.type);i!==a&&(Y(ct,e),Y(nt,a))}function $s(e){ct.current===e&&($(nt),$(ct)),te.current===e&&($(te),gl._currentValue=ft)}var Zs=Object.prototype.hasOwnProperty,Jr=r.unstable_scheduleCallback,Js=r.unstable_cancelCallback,Ih=r.unstable_shouldYield,go=r.unstable_requestPaint,sn=r.unstable_now,eu=r.unstable_getCurrentPriorityLevel,Re=r.unstable_ImmediatePriority,De=r.unstable_UserBlockingPriority,vi=r.unstable_NormalPriority,xh=r.unstable_LowPriority,yo=r.unstable_IdlePriority,Ch=r.log,Wr=r.unstable_setDisableYieldValue,$i=null,Fe=null;function Tn(e){if(typeof Ch=="function"&&Wr(e),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode($i,e)}catch{}}var We=Math.clz32?Math.clz32:iu,Nh=Math.log,nu=Math.LN2;function iu(e){return e>>>=0,e===0?32:31-(Nh(e)/nu|0)|0}var $n=256,Zi=4194304;function kn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function An(e,i,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,d=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var A=o&134217727;return A!==0?(o=A&~d,o!==0?h=kn(o):(v&=A,v!==0?h=kn(v):a||(a=A&~e,a!==0&&(h=kn(a))))):(A=o&~d,A!==0?h=kn(A):v!==0?h=kn(v):a||(a=o&~e,a!==0&&(h=kn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Ji(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Ws(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _o(){var e=$n;return $n<<=1,($n&4194048)===0&&($n=256),e}function Wi(){var e=Zi;return Zi<<=1,(Zi&62914560)===0&&(Zi=4194304),e}function ta(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function fe(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ru(e,i,a,o,h,d){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var A=e.entanglements,x=e.expirationTimes,B=e.hiddenUpdates;for(a=v&~a;0<a;){var Q=31-We(a),Z=1<<Q;A[Q]=0,x[Q]=-1;var q=B[Q];if(q!==null)for(B[Q]=null,Q=0;Q<q.length;Q++){var H=q[Q];H!==null&&(H.lane&=-536870913)}a&=~Z}o!==0&&tr(e,o,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~i))}function tr(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-We(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function er(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-We(a),h=1<<o;h&i|e[o]&i&&(e[o]|=i),a&=~h}}function vo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Eo(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ei(){var e=st.p;return e!==0?e:(e=window.event,e===void 0?32:w_(e.type))}function Dh(e,i){var a=st.p;try{return st.p=e,i()}finally{st.p=a}}var Zn=Math.random().toString(36).slice(2),de="__reactFiber$"+Zn,Ue="__reactProps$"+Zn,Ti="__reactContainer$"+Zn,ts="__reactEvents$"+Zn,es="__reactListeners$"+Zn,Oh="__reactHandles$"+Zn,Pn="__reactResources$"+Zn,nr="__reactMarker$"+Zn;function ea(e){delete e[de],delete e[Ue],delete e[ts],delete e[es],delete e[Oh]}function Jn(e){var i=e[de];if(i)return i;for(var a=e.parentNode;a;){if(i=a[Ti]||a[de]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=c_(e);e!==null;){if(a=e[de])return a;e=c_(e)}return i}e=a,a=e.parentNode}return null}function Wn(e){if(e=e[de]||e[Ti]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function ir(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function rr(e){var i=e[Pn];return i||(i=e[Pn]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function me(e){e[nr]=!0}var su=new Set,ns={};function ti(e,i){ei(e,i),ei(e+"Capture",i)}function ei(e,i){for(ns[e]=i,e=0;e<i.length;e++)su.add(i[e])}var is=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ni={},na={};function Mh(e){return Zs.call(na,e)?!0:Zs.call(ni,e)?!1:is.test(e)?na[e]=!0:(ni[e]=!0,!1)}function rs(e,i,a){if(Mh(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function ss(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function bn(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}var as,ia;function Ai(e){if(as===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);as=i&&i[1]||"",ia=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+as+e+ia}var ra=!1;function sa(e,i){if(!e||ra)return"";ra=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(H){var q=H}Reflect.construct(e,[],Z)}else{try{Z.call()}catch(H){q=H}e.call(Z.prototype)}}else{try{throw Error()}catch(H){q=H}(Z=e())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),v=d[0],A=d[1];if(v&&A){var x=v.split(`
`),B=A.split(`
`);for(h=o=0;o<x.length&&!x[o].includes("DetermineComponentFrameRoot");)o++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(o===x.length||h===B.length)for(o=x.length-1,h=B.length-1;1<=o&&0<=h&&x[o]!==B[h];)h--;for(;1<=o&&0<=h;o--,h--)if(x[o]!==B[h]){if(o!==1||h!==1)do if(o--,h--,0>h||x[o]!==B[h]){var Q=`
`+x[o].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=o&&0<=h);break}}}finally{ra=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ai(a):""}function Vh(e){switch(e.tag){case 26:case 27:case 5:return Ai(e.type);case 16:return Ai("Lazy");case 13:return Ai("Suspense");case 19:return Ai("SuspenseList");case 0:case 15:return sa(e.type,!1);case 11:return sa(e.type.render,!1);case 1:return sa(e.type,!0);case 31:return Ai("Activity");default:return""}}function Un(e){try{var i="";do i+=Vh(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function oe(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sr(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function os(e){var i=sr(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),o=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,d.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function ar(e){e._valueTracker||(e._valueTracker=os(e))}function Kt(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=sr(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function bi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ls=/[\n"\\]/g;function Oe(e){return e.replace(ls,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function To(e,i,a,o,h,d,v,A){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+oe(i)):e.value!==""+oe(i)&&(e.value=""+oe(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?bo(e,v,oe(i)):a!=null?bo(e,v,oe(a)):o!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?e.name=""+oe(A):e.removeAttribute("name")}function Ao(e,i,a,o,h,d,v,A){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+oe(a):"",i=i!=null?""+oe(i):a,A||i===e.value||(e.value=i),e.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=A?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function bo(e,i,a){i==="number"&&bi(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function or(e,i,a,o){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+oe(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function au(e,i,a){if(i!=null&&(i=""+oe(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+oe(a):""}function ou(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(qt(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=oe(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function Sn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var Si=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function So(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||Si.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function wo(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&So(e,h,o)}else for(var d in i)i.hasOwnProperty(d)&&So(e,d,i[d])}function aa(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),uu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ln(e){return uu.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ro=null;function Io(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var lr=null,tn=null;function cu(e){var i=Wn(e);if(i&&(e=i.stateNode)){var a=e[Ue]||null;t:switch(e=i.stateNode,i.type){case"input":if(To(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Oe(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var h=o[Ue]||null;if(!h)throw Error(s(90));To(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&Kt(o)}break t;case"textarea":au(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&or(e,!!a.multiple,i,!1)}}}var us=!1;function cs(e,i,a){if(us)return e(i,a);us=!0;try{var o=e(i);return o}finally{if(us=!1,(lr!==null||tn!==null)&&(Wu(),lr&&(i=lr,e=tn,tn=lr=null,cu(i),e)))for(i=0;i<e.length;i++)cu(e[i])}}function ur(e,i){var a=e.stateNode;if(a===null)return null;var o=a[Ue]||null;if(o===null)return null;a=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var en=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wi=!1;if(en)try{var cr={};Object.defineProperty(cr,"passive",{get:function(){wi=!0}}),window.addEventListener("test",cr,cr),window.removeEventListener("test",cr,cr)}catch{wi=!1}var wn=null,ee=null,oa=null;function hu(){if(oa)return oa;var e,i=ee,a=i.length,o,h="value"in wn?wn.value:wn.textContent,d=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(o=1;o<=v&&i[a-o]===h[d-o];o++);return oa=h.slice(e,1<o?1-o:void 0)}function hs(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function fs(){return!0}function xo(){return!1}function Ie(e){function i(a,o,h,d,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var A in e)e.hasOwnProperty(A)&&(a=e[A],this[A]=a?a(d):d[A]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?fs:xo,this.isPropagationStopped=xo,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=fs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=fs)},persist:function(){},isPersistent:fs}),i}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ds=Ie(Qe),ms=T({},Qe,{view:0,detail:0}),ps=Ie(ms),la,gs,ii,ys=T({},ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ha,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ii&&(ii&&e.type==="mousemove"?(la=e.screenX-ii.screenX,gs=e.screenY-ii.screenY):gs=la=0,ii=e),la)},movementY:function(e){return"movementY"in e?e.movementY:gs}}),_s=Ie(ys),kh=T({},ys,{dataTransfer:0}),fu=Ie(kh),vs=T({},ms,{relatedTarget:0}),ua=Ie(vs),du=T({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),Co=Ie(du),No=T({},Qe,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mu=Ie(No),ca=T({},Qe,{data:0}),Do=Ie(ca),pu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ri={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yu(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=gu[e])?!!i[e]:!1}function ha(){return yu}var _u=T({},ms,{key:function(e){if(e.key){var i=pu[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=hs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ri[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ha,charCode:function(e){return e.type==="keypress"?hs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?hs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fa=Ie(_u),nn=T({},ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oo=Ie(nn),vu=T({},ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ha}),hr=Ie(vu),u=T({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),m=Ie(u),_=T({},ys,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),S=Ie(_),z=T({},Qe,{newState:0,oldState:0}),G=Ie(z),rt=[9,13,27,32],St=en&&"CompositionEvent"in window,re=null;en&&"documentMode"in document&&(re=document.documentMode);var Ft=en&&"TextEvent"in window&&!re,pe=en&&(!St||re&&8<re&&11>=re),fn=" ",ri=!1;function jn(e,i){switch(e){case"keyup":return rt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bn=!1;function Mo(e,i){switch(e){case"compositionend":return zn(i);case"keypress":return i.which!==32?null:(ri=!0,fn);case"textInput":return e=i.data,e===fn&&ri?null:e;default:return null}}function r1(e,i){if(Bn)return e==="compositionend"||!St&&jn(e,i)?(e=hu(),oa=ee=wn=null,Bn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return pe&&i.locale!=="ko"?null:i.data;default:return null}}var s1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vp(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!s1[e.type]:i==="textarea"}function Ep(e,i,a,o){lr?tn?tn.push(o):tn=[o]:lr=o,i=sc(i,"onChange"),0<i.length&&(a=new ds("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var Vo=null,ko=null;function a1(e){t_(e,0)}function Eu(e){var i=ir(e);if(Kt(i))return e}function Tp(e,i){if(e==="change")return i}var Ap=!1;if(en){var Ph;if(en){var Uh="oninput"in document;if(!Uh){var bp=document.createElement("div");bp.setAttribute("oninput","return;"),Uh=typeof bp.oninput=="function"}Ph=Uh}else Ph=!1;Ap=Ph&&(!document.documentMode||9<document.documentMode)}function Sp(){Vo&&(Vo.detachEvent("onpropertychange",wp),ko=Vo=null)}function wp(e){if(e.propertyName==="value"&&Eu(ko)){var i=[];Ep(i,ko,e,Io(e)),cs(a1,i)}}function o1(e,i,a){e==="focusin"?(Sp(),Vo=i,ko=a,Vo.attachEvent("onpropertychange",wp)):e==="focusout"&&Sp()}function l1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Eu(ko)}function u1(e,i){if(e==="click")return Eu(i)}function c1(e,i){if(e==="input"||e==="change")return Eu(i)}function h1(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var dn=typeof Object.is=="function"?Object.is:h1;function Po(e,i){if(dn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Zs.call(i,h)||!dn(e[h],i[h]))return!1}return!0}function Rp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ip(e,i){var a=Rp(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Rp(a)}}function xp(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?xp(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Cp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=bi(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=bi(e.document)}return i}function Lh(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var f1=en&&"documentMode"in document&&11>=document.documentMode,da=null,jh=null,Uo=null,zh=!1;function Np(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;zh||da==null||da!==bi(o)||(o=da,"selectionStart"in o&&Lh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Uo&&Po(Uo,o)||(Uo=o,o=sc(jh,"onSelect"),0<o.length&&(i=new ds("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=da)))}function Es(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var ma={animationend:Es("Animation","AnimationEnd"),animationiteration:Es("Animation","AnimationIteration"),animationstart:Es("Animation","AnimationStart"),transitionrun:Es("Transition","TransitionRun"),transitionstart:Es("Transition","TransitionStart"),transitioncancel:Es("Transition","TransitionCancel"),transitionend:Es("Transition","TransitionEnd")},Bh={},Dp={};en&&(Dp=document.createElement("div").style,"AnimationEvent"in window||(delete ma.animationend.animation,delete ma.animationiteration.animation,delete ma.animationstart.animation),"TransitionEvent"in window||delete ma.transitionend.transition);function Ts(e){if(Bh[e])return Bh[e];if(!ma[e])return e;var i=ma[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Dp)return Bh[e]=i[a];return e}var Op=Ts("animationend"),Mp=Ts("animationiteration"),Vp=Ts("animationstart"),d1=Ts("transitionrun"),m1=Ts("transitionstart"),p1=Ts("transitioncancel"),kp=Ts("transitionend"),Pp=new Map,qh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qh.push("scrollEnd");function qn(e,i){Pp.set(e,i),ti(i,[e])}var Up=new WeakMap;function Rn(e,i){if(typeof e=="object"&&e!==null){var a=Up.get(e);return a!==void 0?a:(i={value:e,source:i,stack:Un(i)},Up.set(e,i),i)}return{value:e,source:i,stack:Un(i)}}var In=[],pa=0,Hh=0;function Tu(){for(var e=pa,i=Hh=pa=0;i<e;){var a=In[i];In[i++]=null;var o=In[i];In[i++]=null;var h=In[i];In[i++]=null;var d=In[i];if(In[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}d!==0&&Lp(a,h,d)}}function Au(e,i,a,o){In[pa++]=e,In[pa++]=i,In[pa++]=a,In[pa++]=o,Hh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Gh(e,i,a,o){return Au(e,i,a,o),bu(e)}function ga(e,i){return Au(e,null,null,i),bu(e)}function Lp(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&i!==null&&(h=31-We(a),e=d.hiddenUpdates,o=e[h],o===null?e[h]=[i]:o.push(i),i.lane=a|536870912),d):null}function bu(e){if(50<ll)throw ll=0,Zf=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var ya={};function g1(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(e,i,a,o){return new g1(e,i,a,o)}function Fh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ii(e,i){var a=e.alternate;return a===null?(a=mn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function jp(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Su(e,i,a,o,h,d){var v=0;if(o=e,typeof e=="function")Fh(e)&&(v=1);else if(typeof e=="string")v=_A(e,a,nt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case I:return e=mn(31,a,i,h),e.elementType=I,e.lanes=d,e;case et:return As(a.children,h,d,i);case W:v=8,h|=24;break;case tt:return e=mn(12,a,i,h|2),e.elementType=tt,e.lanes=d,e;case at:return e=mn(13,a,i,h),e.elementType=at,e.lanes=d,e;case Ct:return e=mn(19,a,i,h),e.elementType=Ct,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ht:case pt:v=10;break t;case gt:v=9;break t;case jt:v=11;break t;case O:v=14;break t;case R:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return i=mn(v,a,i,h),i.elementType=e,i.type=o,i.lanes=d,i}function As(e,i,a,o){return e=mn(7,e,o,i),e.lanes=a,e}function Qh(e,i,a){return e=mn(6,e,null,i),e.lanes=a,e}function Yh(e,i,a){return i=mn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var _a=[],va=0,wu=null,Ru=0,xn=[],Cn=0,bs=null,xi=1,Ci="";function Ss(e,i){_a[va++]=Ru,_a[va++]=wu,wu=e,Ru=i}function zp(e,i,a){xn[Cn++]=xi,xn[Cn++]=Ci,xn[Cn++]=bs,bs=e;var o=xi;e=Ci;var h=32-We(o)-1;o&=~(1<<h),a+=1;var d=32-We(i)+h;if(30<d){var v=h-h%5;d=(o&(1<<v)-1).toString(32),o>>=v,h-=v,xi=1<<32-We(i)+h|a<<h|o,Ci=d+e}else xi=1<<d|a<<h|o,Ci=e}function Kh(e){e.return!==null&&(Ss(e,1),zp(e,1,0))}function Xh(e){for(;e===wu;)wu=_a[--va],_a[va]=null,Ru=_a[--va],_a[va]=null;for(;e===bs;)bs=xn[--Cn],xn[Cn]=null,Ci=xn[--Cn],xn[Cn]=null,xi=xn[--Cn],xn[Cn]=null}var rn=null,ce=null,Ht=!1,ws=null,si=!1,$h=Error(s(519));function Rs(e){var i=Error(s(418,""));throw zo(Rn(i,e)),$h}function Bp(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[de]=e,i[Ue]=o,a){case"dialog":Ot("cancel",i),Ot("close",i);break;case"iframe":case"object":case"embed":Ot("load",i);break;case"video":case"audio":for(a=0;a<cl.length;a++)Ot(cl[a],i);break;case"source":Ot("error",i);break;case"img":case"image":case"link":Ot("error",i),Ot("load",i);break;case"details":Ot("toggle",i);break;case"input":Ot("invalid",i),Ao(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),ar(i);break;case"select":Ot("invalid",i);break;case"textarea":Ot("invalid",i),ou(i,o.value,o.defaultValue,o.children),ar(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||r_(i.textContent,a)?(o.popover!=null&&(Ot("beforetoggle",i),Ot("toggle",i)),o.onScroll!=null&&Ot("scroll",i),o.onScrollEnd!=null&&Ot("scrollend",i),o.onClick!=null&&(i.onclick=ac),i=!0):i=!1,i||Rs(e)}function qp(e){for(rn=e.return;rn;)switch(rn.tag){case 5:case 13:si=!1;return;case 27:case 3:si=!0;return;default:rn=rn.return}}function Lo(e){if(e!==rn)return!1;if(!Ht)return qp(e),Ht=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||dd(e.type,e.memoizedProps)),a=!a),a&&ce&&Rs(e),qp(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){ce=Gn(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}ce=null}}else i===27?(i=ce,Ir(e.type)?(e=yd,yd=null,ce=e):ce=i):ce=rn?Gn(e.stateNode.nextSibling):null;return!0}function jo(){ce=rn=null,Ht=!1}function Hp(){var e=ws;return e!==null&&(ln===null?ln=e:ln.push.apply(ln,e),ws=null),e}function zo(e){ws===null?ws=[e]:ws.push(e)}var Zh=k(null),Is=null,Ni=null;function fr(e,i,a){Y(Zh,i._currentValue),i._currentValue=a}function Di(e){e._currentValue=Zh.current,$(Zh)}function Jh(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function Wh(e,i,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;t:for(;d!==null;){var A=d;d=h;for(var x=0;x<i.length;x++)if(A.context===i[x]){d.lanes|=a,A=d.alternate,A!==null&&(A.lanes|=a),Jh(d.return,a,e),o||(v=null);break t}d=A.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Jh(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Bo(e,i,a,o){e=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var A=h.type;dn(h.pendingProps.value,v.value)||(e!==null?e.push(A):e=[A])}}else if(h===te.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(gl):e=[gl])}h=h.return}e!==null&&Wh(i,e,a,o),i.flags|=262144}function Iu(e){for(e=e.firstContext;e!==null;){if(!dn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function xs(e){Is=e,Ni=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ye(e){return Gp(Is,e)}function xu(e,i){return Is===null&&xs(e),Gp(e,i)}function Gp(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Ni===null){if(e===null)throw Error(s(308));Ni=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Ni=Ni.next=i;return a}var y1=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},_1=r.unstable_scheduleCallback,v1=r.unstable_NormalPriority,xe={$$typeof:pt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tf(){return{controller:new y1,data:new Map,refCount:0}}function qo(e){e.refCount--,e.refCount===0&&_1(v1,function(){e.controller.abort()})}var Ho=null,ef=0,Ea=0,Ta=null;function E1(e,i){if(Ho===null){var a=Ho=[];ef=0,Ea=rd(),Ta={status:"pending",value:void 0,then:function(o){a.push(o)}}}return ef++,i.then(Fp,Fp),i}function Fp(){if(--ef===0&&Ho!==null){Ta!==null&&(Ta.status="fulfilled");var e=Ho;Ho=null,Ea=0,Ta=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function T1(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Qp=F.S;F.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&E1(e,i),Qp!==null&&Qp(e,i)};var Cs=k(null);function nf(){var e=Cs.current;return e!==null?e:ne.pooledCache}function Cu(e,i){i===null?Y(Cs,Cs.current):Y(Cs,i.pool)}function Yp(){var e=nf();return e===null?null:{parent:xe._currentValue,pool:e}}var Go=Error(s(460)),Kp=Error(s(474)),Nu=Error(s(542)),rf={then:function(){}};function Xp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Du(){}function $p(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Du,Du),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Jp(e),e;default:if(typeof i.status=="string")i.then(Du,Du);else{if(e=ne,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Jp(e),e}throw Fo=i,Go}}var Fo=null;function Zp(){if(Fo===null)throw Error(s(459));var e=Fo;return Fo=null,e}function Jp(e){if(e===Go||e===Nu)throw Error(s(483))}var dr=!1;function sf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function af(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function mr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function pr(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Qt&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=bu(e),Lp(e,null,a),i}return Au(e,o,i,a),bu(e)}function Qo(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,er(e,a)}}function of(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var lf=!1;function Yo(){if(lf){var e=Ta;if(e!==null)throw e}}function Ko(e,i,a,o){lf=!1;var h=e.updateQueue;dr=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var x=A,B=x.next;x.next=null,v===null?d=B:v.next=B,v=x;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,A=Q.lastBaseUpdate,A!==v&&(A===null?Q.firstBaseUpdate=B:A.next=B,Q.lastBaseUpdate=x))}if(d!==null){var Z=h.baseState;v=0,Q=B=x=null,A=d;do{var q=A.lane&-536870913,H=q!==A.lane;if(H?(Ut&q)===q:(o&q)===q){q!==0&&q===Ea&&(lf=!0),Q!==null&&(Q=Q.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var Tt=e,yt=A;q=i;var Zt=a;switch(yt.tag){case 1:if(Tt=yt.payload,typeof Tt=="function"){Z=Tt.call(Zt,Z,q);break t}Z=Tt;break t;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=yt.payload,q=typeof Tt=="function"?Tt.call(Zt,Z,q):Tt,q==null)break t;Z=T({},Z,q);break t;case 2:dr=!0}}q=A.callback,q!==null&&(e.flags|=64,H&&(e.flags|=8192),H=h.callbacks,H===null?h.callbacks=[q]:H.push(q))}else H={lane:q,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Q===null?(B=Q=H,x=Z):Q=Q.next=H,v|=q;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;H=A,A=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);Q===null&&(x=Z),h.baseState=x,h.firstBaseUpdate=B,h.lastBaseUpdate=Q,d===null&&(h.shared.lanes=0),br|=v,e.lanes=v,e.memoizedState=Z}}function Wp(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function tg(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Wp(a[e],i)}var Aa=k(null),Ou=k(0);function eg(e,i){e=Li,Y(Ou,e),Y(Aa,i),Li=e|i.baseLanes}function uf(){Y(Ou,Li),Y(Aa,Aa.current)}function cf(){Li=Ou.current,$(Aa),$(Ou)}var gr=0,xt=null,Xt=null,Ee=null,Mu=!1,ba=!1,Ns=!1,Vu=0,Xo=0,Sa=null,A1=0;function ge(){throw Error(s(321))}function hf(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!dn(e[a],i[a]))return!1;return!0}function ff(e,i,a,o,h,d){return gr=d,xt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,F.H=e===null||e.memoizedState===null?Lg:jg,Ns=!1,d=a(o,h),Ns=!1,ba&&(d=ig(i,a,o,h)),ng(e),d}function ng(e){F.H=zu;var i=Xt!==null&&Xt.next!==null;if(gr=0,Ee=Xt=xt=null,Mu=!1,Xo=0,Sa=null,i)throw Error(s(300));e===null||Me||(e=e.dependencies,e!==null&&Iu(e)&&(Me=!0))}function ig(e,i,a,o){xt=e;var h=0;do{if(ba&&(Sa=null),Xo=0,ba=!1,25<=h)throw Error(s(301));if(h+=1,Ee=Xt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}F.H=C1,d=i(a,o)}while(ba);return d}function b1(){var e=F.H,i=e.useState()[0];return i=typeof i.then=="function"?$o(i):i,e=e.useState()[0],(Xt!==null?Xt.memoizedState:null)!==e&&(xt.flags|=1024),i}function df(){var e=Vu!==0;return Vu=0,e}function mf(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function pf(e){if(Mu){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Mu=!1}gr=0,Ee=Xt=xt=null,ba=!1,Xo=Vu=0,Sa=null}function an(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?xt.memoizedState=Ee=e:Ee=Ee.next=e,Ee}function Te(){if(Xt===null){var e=xt.alternate;e=e!==null?e.memoizedState:null}else e=Xt.next;var i=Ee===null?xt.memoizedState:Ee.next;if(i!==null)Ee=i,Xt=e;else{if(e===null)throw xt.alternate===null?Error(s(467)):Error(s(310));Xt=e,e={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},Ee===null?xt.memoizedState=Ee=e:Ee=Ee.next=e}return Ee}function gf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $o(e){var i=Xo;return Xo+=1,Sa===null&&(Sa=[]),e=$p(Sa,e,i),i=xt,(Ee===null?i.memoizedState:Ee.next)===null&&(i=i.alternate,F.H=i===null||i.memoizedState===null?Lg:jg),e}function ku(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return $o(e);if(e.$$typeof===pt)return Ye(e)}throw Error(s(438,String(e)))}function yf(e){var i=null,a=xt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=xt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=gf(),xt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=V;return i.index++,a}function Oi(e,i){return typeof i=="function"?i(e):i}function Pu(e){var i=Te();return _f(i,Xt,e)}function _f(e,i,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=e.baseQueue,d=o.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,o.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{i=h.next;var A=v=null,x=null,B=i,Q=!1;do{var Z=B.lane&-536870913;if(Z!==B.lane?(Ut&Z)===Z:(gr&Z)===Z){var q=B.revertLane;if(q===0)x!==null&&(x=x.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),Z===Ea&&(Q=!0);else if((gr&q)===q){B=B.next,q===Ea&&(Q=!0);continue}else Z={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},x===null?(A=x=Z,v=d):x=x.next=Z,xt.lanes|=q,br|=q;Z=B.action,Ns&&a(d,Z),d=B.hasEagerState?B.eagerState:a(d,Z)}else q={lane:Z,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},x===null?(A=x=q,v=d):x=x.next=q,xt.lanes|=Z,br|=Z;B=B.next}while(B!==null&&B!==i);if(x===null?v=d:x.next=A,!dn(d,e.memoizedState)&&(Me=!0,Q&&(a=Ta,a!==null)))throw a;e.memoizedState=d,e.baseState=v,e.baseQueue=x,o.lastRenderedState=d}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function vf(e){var i=Te(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=e(d,v.action),v=v.next;while(v!==h);dn(d,i.memoizedState)||(Me=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function rg(e,i,a){var o=xt,h=Te(),d=Ht;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!dn((Xt||h).memoizedState,a);v&&(h.memoizedState=a,Me=!0),h=h.queue;var A=og.bind(null,o,h,e);if(Zo(2048,8,A,[e]),h.getSnapshot!==i||v||Ee!==null&&Ee.memoizedState.tag&1){if(o.flags|=2048,wa(9,Uu(),ag.bind(null,o,h,a,i),null),ne===null)throw Error(s(349));d||(gr&124)!==0||sg(o,i,a)}return a}function sg(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=xt.updateQueue,i===null?(i=gf(),xt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function ag(e,i,a,o){i.value=a,i.getSnapshot=o,lg(i)&&ug(e)}function og(e,i,a){return a(function(){lg(i)&&ug(e)})}function lg(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!dn(e,a)}catch{return!0}}function ug(e){var i=ga(e,2);i!==null&&vn(i,e,2)}function Ef(e){var i=an();if(typeof e=="function"){var a=e;if(e=a(),Ns){Tn(!0);try{a()}finally{Tn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:e},i}function cg(e,i,a,o){return e.baseState=a,_f(e,Xt,typeof o=="function"?o:Oi)}function S1(e,i,a,o,h){if(ju(e))throw Error(s(485));if(e=i.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};F.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,hg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function hg(e,i){var a=i.action,o=i.payload,h=e.state;if(i.isTransition){var d=F.T,v={};F.T=v;try{var A=a(h,o),x=F.S;x!==null&&x(v,A),fg(e,i,A)}catch(B){Tf(e,i,B)}finally{F.T=d}}else try{d=a(h,o),fg(e,i,d)}catch(B){Tf(e,i,B)}}function fg(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){dg(e,i,o)},function(o){return Tf(e,i,o)}):dg(e,i,a)}function dg(e,i,a){i.status="fulfilled",i.value=a,mg(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,hg(e,a)))}function Tf(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,mg(i),i=i.next;while(i!==o)}e.action=null}function mg(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function pg(e,i){return i}function gg(e,i){if(Ht){var a=ne.formState;if(a!==null){t:{var o=xt;if(Ht){if(ce){e:{for(var h=ce,d=si;h.nodeType!==8;){if(!d){h=null;break e}if(h=Gn(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){ce=Gn(h.nextSibling),o=h.data==="F!";break t}}Rs(o)}o=!1}o&&(i=a[0])}}return a=an(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pg,lastRenderedState:i},a.queue=o,a=kg.bind(null,xt,o),o.dispatch=a,o=Ef(!1),d=Rf.bind(null,xt,!1,o.queue),o=an(),h={state:i,dispatch:null,action:e,pending:null},o.queue=h,a=S1.bind(null,xt,h,d,a),h.dispatch=a,o.memoizedState=e,[i,a,!1]}function yg(e){var i=Te();return _g(i,Xt,e)}function _g(e,i,a){if(i=_f(e,i,pg)[0],e=Pu(Oi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=$o(i)}catch(v){throw v===Go?Nu:v}else o=i;i=Te();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(xt.flags|=2048,wa(9,Uu(),w1.bind(null,h,a),null)),[o,d,e]}function w1(e,i){e.action=i}function vg(e){var i=Te(),a=Xt;if(a!==null)return _g(i,a,e);Te(),i=i.memoizedState,a=Te();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function wa(e,i,a,o){return e={tag:e,create:a,deps:o,inst:i,next:null},i=xt.updateQueue,i===null&&(i=gf(),xt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function Uu(){return{destroy:void 0,resource:void 0}}function Eg(){return Te().memoizedState}function Lu(e,i,a,o){var h=an();o=o===void 0?null:o,xt.flags|=e,h.memoizedState=wa(1|i,Uu(),a,o)}function Zo(e,i,a,o){var h=Te();o=o===void 0?null:o;var d=h.memoizedState.inst;Xt!==null&&o!==null&&hf(o,Xt.memoizedState.deps)?h.memoizedState=wa(i,d,a,o):(xt.flags|=e,h.memoizedState=wa(1|i,d,a,o))}function Tg(e,i){Lu(8390656,8,e,i)}function Ag(e,i){Zo(2048,8,e,i)}function bg(e,i){return Zo(4,2,e,i)}function Sg(e,i){return Zo(4,4,e,i)}function wg(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Rg(e,i,a){a=a!=null?a.concat([e]):null,Zo(4,4,wg.bind(null,i,e),a)}function Af(){}function Ig(e,i){var a=Te();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&hf(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function xg(e,i){var a=Te();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&hf(i,o[1]))return o[0];if(o=e(),Ns){Tn(!0);try{e()}finally{Tn(!1)}}return a.memoizedState=[o,i],o}function bf(e,i,a){return a===void 0||(gr&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=Dy(),xt.lanes|=e,br|=e,a)}function Cg(e,i,a,o){return dn(a,i)?a:Aa.current!==null?(e=bf(e,a,o),dn(e,i)||(Me=!0),e):(gr&42)===0?(Me=!0,e.memoizedState=a):(e=Dy(),xt.lanes|=e,br|=e,i)}function Ng(e,i,a,o,h){var d=st.p;st.p=d!==0&&8>d?d:8;var v=F.T,A={};F.T=A,Rf(e,!1,i,a);try{var x=h(),B=F.S;if(B!==null&&B(A,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var Q=T1(x,o);Jo(e,i,Q,_n(e))}else Jo(e,i,o,_n(e))}catch(Z){Jo(e,i,{then:function(){},status:"rejected",reason:Z},_n())}finally{st.p=d,F.T=v}}function R1(){}function Sf(e,i,a,o){if(e.tag!==5)throw Error(s(476));var h=Dg(e).queue;Ng(e,h,i,ft,a===null?R1:function(){return Og(e),a(o)})}function Dg(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ft,baseState:ft,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:ft},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Og(e){var i=Dg(e).next.queue;Jo(e,i,{},_n())}function wf(){return Ye(gl)}function Mg(){return Te().memoizedState}function Vg(){return Te().memoizedState}function I1(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=_n();e=mr(a);var o=pr(i,e,a);o!==null&&(vn(o,i,a),Qo(o,i,a)),i={cache:tf()},e.payload=i;return}i=i.return}}function x1(e,i,a){var o=_n();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},ju(e)?Pg(i,a):(a=Gh(e,i,a,o),a!==null&&(vn(a,e,o),Ug(a,i,o)))}function kg(e,i,a){var o=_n();Jo(e,i,a,o)}function Jo(e,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(ju(e))Pg(i,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,A=d(v,a);if(h.hasEagerState=!0,h.eagerState=A,dn(A,v))return Au(e,i,h,0),ne===null&&Tu(),!1}catch{}finally{}if(a=Gh(e,i,h,o),a!==null)return vn(a,e,o),Ug(a,i,o),!0}return!1}function Rf(e,i,a,o){if(o={lane:2,revertLane:rd(),action:o,hasEagerState:!1,eagerState:null,next:null},ju(e)){if(i)throw Error(s(479))}else i=Gh(e,a,o,2),i!==null&&vn(i,e,2)}function ju(e){var i=e.alternate;return e===xt||i!==null&&i===xt}function Pg(e,i){ba=Mu=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Ug(e,i,a){if((a&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,er(e,a)}}var zu={readContext:Ye,use:ku,useCallback:ge,useContext:ge,useEffect:ge,useImperativeHandle:ge,useLayoutEffect:ge,useInsertionEffect:ge,useMemo:ge,useReducer:ge,useRef:ge,useState:ge,useDebugValue:ge,useDeferredValue:ge,useTransition:ge,useSyncExternalStore:ge,useId:ge,useHostTransitionStatus:ge,useFormState:ge,useActionState:ge,useOptimistic:ge,useMemoCache:ge,useCacheRefresh:ge},Lg={readContext:Ye,use:ku,useCallback:function(e,i){return an().memoizedState=[e,i===void 0?null:i],e},useContext:Ye,useEffect:Tg,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Lu(4194308,4,wg.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Lu(4194308,4,e,i)},useInsertionEffect:function(e,i){Lu(4,2,e,i)},useMemo:function(e,i){var a=an();i=i===void 0?null:i;var o=e();if(Ns){Tn(!0);try{e()}finally{Tn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=an();if(a!==void 0){var h=a(i);if(Ns){Tn(!0);try{a(i)}finally{Tn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=x1.bind(null,xt,e),[o.memoizedState,e]},useRef:function(e){var i=an();return e={current:e},i.memoizedState=e},useState:function(e){e=Ef(e);var i=e.queue,a=kg.bind(null,xt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Af,useDeferredValue:function(e,i){var a=an();return bf(a,e,i)},useTransition:function(){var e=Ef(!1);return e=Ng.bind(null,xt,e.queue,!0,!1),an().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=xt,h=an();if(Ht){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),ne===null)throw Error(s(349));(Ut&124)!==0||sg(o,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,Tg(og.bind(null,o,d,e),[e]),o.flags|=2048,wa(9,Uu(),ag.bind(null,o,d,a,i),null),a},useId:function(){var e=an(),i=ne.identifierPrefix;if(Ht){var a=Ci,o=xi;a=(o&~(1<<32-We(o)-1)).toString(32)+a,i="«"+i+"R"+a,a=Vu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=A1++,i="«"+i+"r"+a.toString(32)+"»";return e.memoizedState=i},useHostTransitionStatus:wf,useFormState:gg,useActionState:gg,useOptimistic:function(e){var i=an();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Rf.bind(null,xt,!0,a),a.dispatch=i,[e,i]},useMemoCache:yf,useCacheRefresh:function(){return an().memoizedState=I1.bind(null,xt)}},jg={readContext:Ye,use:ku,useCallback:Ig,useContext:Ye,useEffect:Ag,useImperativeHandle:Rg,useInsertionEffect:bg,useLayoutEffect:Sg,useMemo:xg,useReducer:Pu,useRef:Eg,useState:function(){return Pu(Oi)},useDebugValue:Af,useDeferredValue:function(e,i){var a=Te();return Cg(a,Xt.memoizedState,e,i)},useTransition:function(){var e=Pu(Oi)[0],i=Te().memoizedState;return[typeof e=="boolean"?e:$o(e),i]},useSyncExternalStore:rg,useId:Mg,useHostTransitionStatus:wf,useFormState:yg,useActionState:yg,useOptimistic:function(e,i){var a=Te();return cg(a,Xt,e,i)},useMemoCache:yf,useCacheRefresh:Vg},C1={readContext:Ye,use:ku,useCallback:Ig,useContext:Ye,useEffect:Ag,useImperativeHandle:Rg,useInsertionEffect:bg,useLayoutEffect:Sg,useMemo:xg,useReducer:vf,useRef:Eg,useState:function(){return vf(Oi)},useDebugValue:Af,useDeferredValue:function(e,i){var a=Te();return Xt===null?bf(a,e,i):Cg(a,Xt.memoizedState,e,i)},useTransition:function(){var e=vf(Oi)[0],i=Te().memoizedState;return[typeof e=="boolean"?e:$o(e),i]},useSyncExternalStore:rg,useId:Mg,useHostTransitionStatus:wf,useFormState:vg,useActionState:vg,useOptimistic:function(e,i){var a=Te();return Xt!==null?cg(a,Xt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:yf,useCacheRefresh:Vg},Ra=null,Wo=0;function Bu(e){var i=Wo;return Wo+=1,Ra===null&&(Ra=[]),$p(Ra,e,i)}function tl(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function qu(e,i){throw i.$$typeof===w?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function zg(e){var i=e._init;return i(e._payload)}function Bg(e){function i(U,M){if(e){var j=U.deletions;j===null?(U.deletions=[M],U.flags|=16):j.push(M)}}function a(U,M){if(!e)return null;for(;M!==null;)i(U,M),M=M.sibling;return null}function o(U){for(var M=new Map;U!==null;)U.key!==null?M.set(U.key,U):M.set(U.index,U),U=U.sibling;return M}function h(U,M){return U=Ii(U,M),U.index=0,U.sibling=null,U}function d(U,M,j){return U.index=j,e?(j=U.alternate,j!==null?(j=j.index,j<M?(U.flags|=67108866,M):j):(U.flags|=67108866,M)):(U.flags|=1048576,M)}function v(U){return e&&U.alternate===null&&(U.flags|=67108866),U}function A(U,M,j,K){return M===null||M.tag!==6?(M=Qh(j,U.mode,K),M.return=U,M):(M=h(M,j),M.return=U,M)}function x(U,M,j,K){var ut=j.type;return ut===et?Q(U,M,j.props.children,K,j.key):M!==null&&(M.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===R&&zg(ut)===M.type)?(M=h(M,j.props),tl(M,j),M.return=U,M):(M=Su(j.type,j.key,j.props,null,U.mode,K),tl(M,j),M.return=U,M)}function B(U,M,j,K){return M===null||M.tag!==4||M.stateNode.containerInfo!==j.containerInfo||M.stateNode.implementation!==j.implementation?(M=Yh(j,U.mode,K),M.return=U,M):(M=h(M,j.children||[]),M.return=U,M)}function Q(U,M,j,K,ut){return M===null||M.tag!==7?(M=As(j,U.mode,K,ut),M.return=U,M):(M=h(M,j),M.return=U,M)}function Z(U,M,j){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Qh(""+M,U.mode,j),M.return=U,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case N:return j=Su(M.type,M.key,M.props,null,U.mode,j),tl(j,M),j.return=U,j;case L:return M=Yh(M,U.mode,j),M.return=U,M;case R:var K=M._init;return M=K(M._payload),Z(U,M,j)}if(qt(M)||P(M))return M=As(M,U.mode,j,null),M.return=U,M;if(typeof M.then=="function")return Z(U,Bu(M),j);if(M.$$typeof===pt)return Z(U,xu(U,M),j);qu(U,M)}return null}function q(U,M,j,K){var ut=M!==null?M.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return ut!==null?null:A(U,M,""+j,K);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case N:return j.key===ut?x(U,M,j,K):null;case L:return j.key===ut?B(U,M,j,K):null;case R:return ut=j._init,j=ut(j._payload),q(U,M,j,K)}if(qt(j)||P(j))return ut!==null?null:Q(U,M,j,K,null);if(typeof j.then=="function")return q(U,M,Bu(j),K);if(j.$$typeof===pt)return q(U,M,xu(U,j),K);qu(U,j)}return null}function H(U,M,j,K,ut){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return U=U.get(j)||null,A(M,U,""+K,ut);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case N:return U=U.get(K.key===null?j:K.key)||null,x(M,U,K,ut);case L:return U=U.get(K.key===null?j:K.key)||null,B(M,U,K,ut);case R:var Nt=K._init;return K=Nt(K._payload),H(U,M,j,K,ut)}if(qt(K)||P(K))return U=U.get(j)||null,Q(M,U,K,ut,null);if(typeof K.then=="function")return H(U,M,j,Bu(K),ut);if(K.$$typeof===pt)return H(U,M,j,xu(M,K),ut);qu(M,K)}return null}function Tt(U,M,j,K){for(var ut=null,Nt=null,dt=M,_t=M=0,ke=null;dt!==null&&_t<j.length;_t++){dt.index>_t?(ke=dt,dt=null):ke=dt.sibling;var zt=q(U,dt,j[_t],K);if(zt===null){dt===null&&(dt=ke);break}e&&dt&&zt.alternate===null&&i(U,dt),M=d(zt,M,_t),Nt===null?ut=zt:Nt.sibling=zt,Nt=zt,dt=ke}if(_t===j.length)return a(U,dt),Ht&&Ss(U,_t),ut;if(dt===null){for(;_t<j.length;_t++)dt=Z(U,j[_t],K),dt!==null&&(M=d(dt,M,_t),Nt===null?ut=dt:Nt.sibling=dt,Nt=dt);return Ht&&Ss(U,_t),ut}for(dt=o(dt);_t<j.length;_t++)ke=H(dt,U,_t,j[_t],K),ke!==null&&(e&&ke.alternate!==null&&dt.delete(ke.key===null?_t:ke.key),M=d(ke,M,_t),Nt===null?ut=ke:Nt.sibling=ke,Nt=ke);return e&&dt.forEach(function(Or){return i(U,Or)}),Ht&&Ss(U,_t),ut}function yt(U,M,j,K){if(j==null)throw Error(s(151));for(var ut=null,Nt=null,dt=M,_t=M=0,ke=null,zt=j.next();dt!==null&&!zt.done;_t++,zt=j.next()){dt.index>_t?(ke=dt,dt=null):ke=dt.sibling;var Or=q(U,dt,zt.value,K);if(Or===null){dt===null&&(dt=ke);break}e&&dt&&Or.alternate===null&&i(U,dt),M=d(Or,M,_t),Nt===null?ut=Or:Nt.sibling=Or,Nt=Or,dt=ke}if(zt.done)return a(U,dt),Ht&&Ss(U,_t),ut;if(dt===null){for(;!zt.done;_t++,zt=j.next())zt=Z(U,zt.value,K),zt!==null&&(M=d(zt,M,_t),Nt===null?ut=zt:Nt.sibling=zt,Nt=zt);return Ht&&Ss(U,_t),ut}for(dt=o(dt);!zt.done;_t++,zt=j.next())zt=H(dt,U,_t,zt.value,K),zt!==null&&(e&&zt.alternate!==null&&dt.delete(zt.key===null?_t:zt.key),M=d(zt,M,_t),Nt===null?ut=zt:Nt.sibling=zt,Nt=zt);return e&&dt.forEach(function(NA){return i(U,NA)}),Ht&&Ss(U,_t),ut}function Zt(U,M,j,K){if(typeof j=="object"&&j!==null&&j.type===et&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case N:t:{for(var ut=j.key;M!==null;){if(M.key===ut){if(ut=j.type,ut===et){if(M.tag===7){a(U,M.sibling),K=h(M,j.props.children),K.return=U,U=K;break t}}else if(M.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===R&&zg(ut)===M.type){a(U,M.sibling),K=h(M,j.props),tl(K,j),K.return=U,U=K;break t}a(U,M);break}else i(U,M);M=M.sibling}j.type===et?(K=As(j.props.children,U.mode,K,j.key),K.return=U,U=K):(K=Su(j.type,j.key,j.props,null,U.mode,K),tl(K,j),K.return=U,U=K)}return v(U);case L:t:{for(ut=j.key;M!==null;){if(M.key===ut)if(M.tag===4&&M.stateNode.containerInfo===j.containerInfo&&M.stateNode.implementation===j.implementation){a(U,M.sibling),K=h(M,j.children||[]),K.return=U,U=K;break t}else{a(U,M);break}else i(U,M);M=M.sibling}K=Yh(j,U.mode,K),K.return=U,U=K}return v(U);case R:return ut=j._init,j=ut(j._payload),Zt(U,M,j,K)}if(qt(j))return Tt(U,M,j,K);if(P(j)){if(ut=P(j),typeof ut!="function")throw Error(s(150));return j=ut.call(j),yt(U,M,j,K)}if(typeof j.then=="function")return Zt(U,M,Bu(j),K);if(j.$$typeof===pt)return Zt(U,M,xu(U,j),K);qu(U,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,M!==null&&M.tag===6?(a(U,M.sibling),K=h(M,j),K.return=U,U=K):(a(U,M),K=Qh(j,U.mode,K),K.return=U,U=K),v(U)):a(U,M)}return function(U,M,j,K){try{Wo=0;var ut=Zt(U,M,j,K);return Ra=null,ut}catch(dt){if(dt===Go||dt===Nu)throw dt;var Nt=mn(29,dt,null,U.mode);return Nt.lanes=K,Nt.return=U,Nt}finally{}}}var Ia=Bg(!0),qg=Bg(!1),Nn=k(null),ai=null;function yr(e){var i=e.alternate;Y(Ce,Ce.current&1),Y(Nn,e),ai===null&&(i===null||Aa.current!==null||i.memoizedState!==null)&&(ai=e)}function Hg(e){if(e.tag===22){if(Y(Ce,Ce.current),Y(Nn,e),ai===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(ai=e)}}else _r()}function _r(){Y(Ce,Ce.current),Y(Nn,Nn.current)}function Mi(e){$(Nn),ai===e&&(ai=null),$(Ce)}var Ce=k(0);function Hu(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||gd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function If(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var xf={enqueueSetState:function(e,i,a){e=e._reactInternals;var o=_n(),h=mr(o);h.payload=i,a!=null&&(h.callback=a),i=pr(e,h,o),i!==null&&(vn(i,e,o),Qo(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=_n(),h=mr(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=pr(e,h,o),i!==null&&(vn(i,e,o),Qo(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=_n(),o=mr(a);o.tag=2,i!=null&&(o.callback=i),i=pr(e,o,a),i!==null&&(vn(i,e,a),Qo(i,e,a))}};function Gg(e,i,a,o,h,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,v):i.prototype&&i.prototype.isPureReactComponent?!Po(a,o)||!Po(h,d):!0}function Fg(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&xf.enqueueReplaceState(i,i.state,null)}function Ds(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=T({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var Gu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Qg(e){Gu(e)}function Yg(e){console.error(e)}function Kg(e){Gu(e)}function Fu(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function Xg(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Cf(e,i,a){return a=mr(a),a.tag=3,a.payload={element:null},a.callback=function(){Fu(e,i)},a}function $g(e){return e=mr(e),e.tag=3,e}function Zg(e,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;e.payload=function(){return h(d)},e.callback=function(){Xg(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Xg(i,a,o),typeof h!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var A=o.stack;this.componentDidCatch(o.value,{componentStack:A!==null?A:""})})}function N1(e,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Bo(i,a,h,!0),a=Nn.current,a!==null){switch(a.tag){case 13:return ai===null?Wf():a.alternate===null&&he===0&&(he=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===rf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),ed(e,o,h)),!1;case 22:return a.flags|=65536,o===rf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),ed(e,o,h)),!1}throw Error(s(435,a.tag))}return ed(e,o,h),Wf(),!1}if(Ht)return i=Nn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==$h&&(e=Error(s(422),{cause:o}),zo(Rn(e,a)))):(o!==$h&&(i=Error(s(423),{cause:o}),zo(Rn(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Rn(o,a),h=Cf(e.stateNode,o,h),of(e,h),he!==4&&(he=2)),!1;var d=Error(s(520),{cause:o});if(d=Rn(d,a),ol===null?ol=[d]:ol.push(d),he!==4&&(he=2),i===null)return!0;o=Rn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Cf(a.stateNode,o,e),of(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Sr===null||!Sr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=$g(h),Zg(h,e,a,o),of(a,h),!1}a=a.return}while(a!==null);return!1}var Jg=Error(s(461)),Me=!1;function Le(e,i,a,o){i.child=e===null?qg(i,null,a,o):Ia(i,e.child,a,o)}function Wg(e,i,a,o,h){a=a.render;var d=i.ref;if("ref"in o){var v={};for(var A in o)A!=="ref"&&(v[A]=o[A])}else v=o;return xs(i),o=ff(e,i,a,v,d,h),A=df(),e!==null&&!Me?(mf(e,i,h),Vi(e,i,h)):(Ht&&A&&Kh(i),i.flags|=1,Le(e,i,o,h),i.child)}function ty(e,i,a,o,h){if(e===null){var d=a.type;return typeof d=="function"&&!Fh(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,ey(e,i,d,o,h)):(e=Su(a.type,null,o,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!Uf(e,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Po,a(v,o)&&e.ref===i.ref)return Vi(e,i,h)}return i.flags|=1,e=Ii(d,o),e.ref=i.ref,e.return=i,i.child=e}function ey(e,i,a,o,h){if(e!==null){var d=e.memoizedProps;if(Po(d,o)&&e.ref===i.ref)if(Me=!1,i.pendingProps=o=d,Uf(e,h))(e.flags&131072)!==0&&(Me=!0);else return i.lanes=e.lanes,Vi(e,i,h)}return Nf(e,i,a,o,h)}function ny(e,i,a){var o=i.pendingProps,h=o.children,d=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=d!==null?d.baseLanes|a:a,e!==null){for(h=i.child=e.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~o}else i.childLanes=0,i.child=null;return iy(e,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Cu(i,d!==null?d.cachePool:null),d!==null?eg(i,d):uf(),Hg(i);else return i.lanes=i.childLanes=536870912,iy(e,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Cu(i,d.cachePool),eg(i,d),_r(),i.memoizedState=null):(e!==null&&Cu(i,null),uf(),_r());return Le(e,i,h,a),i.child}function iy(e,i,a,o){var h=nf();return h=h===null?null:{parent:xe._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&Cu(i,null),uf(),Hg(i),e!==null&&Bo(e,i,o,!0),null}function Qu(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Nf(e,i,a,o,h){return xs(i),a=ff(e,i,a,o,void 0,h),o=df(),e!==null&&!Me?(mf(e,i,h),Vi(e,i,h)):(Ht&&o&&Kh(i),i.flags|=1,Le(e,i,a,h),i.child)}function ry(e,i,a,o,h,d){return xs(i),i.updateQueue=null,a=ig(i,o,a,h),ng(e),o=df(),e!==null&&!Me?(mf(e,i,d),Vi(e,i,d)):(Ht&&o&&Kh(i),i.flags|=1,Le(e,i,a,d),i.child)}function sy(e,i,a,o,h){if(xs(i),i.stateNode===null){var d=ya,v=a.contextType;typeof v=="object"&&v!==null&&(d=Ye(v)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=xf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},sf(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Ye(v):ya,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(If(i,a,v,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&xf.enqueueReplaceState(d,d.state,null),Ko(i,o,d,h),Yo(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){d=i.stateNode;var A=i.memoizedProps,x=Ds(a,A);d.props=x;var B=d.context,Q=a.contextType;v=ya,typeof Q=="object"&&Q!==null&&(v=Ye(Q));var Z=a.getDerivedStateFromProps;Q=typeof Z=="function"||typeof d.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(A||B!==v)&&Fg(i,d,o,v),dr=!1;var q=i.memoizedState;d.state=q,Ko(i,o,d,h),Yo(),B=i.memoizedState,A||q!==B||dr?(typeof Z=="function"&&(If(i,a,Z,o),B=i.memoizedState),(x=dr||Gg(i,a,x,o,q,B,v))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=B),d.props=o,d.state=B,d.context=v,o=x):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,af(e,i),v=i.memoizedProps,Q=Ds(a,v),d.props=Q,Z=i.pendingProps,q=d.context,B=a.contextType,x=ya,typeof B=="object"&&B!==null&&(x=Ye(B)),A=a.getDerivedStateFromProps,(B=typeof A=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==Z||q!==x)&&Fg(i,d,o,x),dr=!1,q=i.memoizedState,d.state=q,Ko(i,o,d,h),Yo();var H=i.memoizedState;v!==Z||q!==H||dr||e!==null&&e.dependencies!==null&&Iu(e.dependencies)?(typeof A=="function"&&(If(i,a,A,o),H=i.memoizedState),(Q=dr||Gg(i,a,Q,o,q,H,x)||e!==null&&e.dependencies!==null&&Iu(e.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,H,x),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,H,x)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&q===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&q===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=H),d.props=o,d.state=H,d.context=x,o=Q):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&q===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&q===e.memoizedState||(i.flags|=1024),o=!1)}return d=o,Qu(e,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&o?(i.child=Ia(i,e.child,null,h),i.child=Ia(i,null,a,h)):Le(e,i,a,h),i.memoizedState=d.state,e=i.child):e=Vi(e,i,h),e}function ay(e,i,a,o){return jo(),i.flags|=256,Le(e,i,a,o),i.child}var Df={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Of(e){return{baseLanes:e,cachePool:Yp()}}function Mf(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Dn),e}function oy(e,i,a){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(Ce.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(Ht){if(h?yr(i):_r(),Ht){var A=ce,x;if(x=A){t:{for(x=A,A=si;x.nodeType!==8;){if(!A){A=null;break t}if(x=Gn(x.nextSibling),x===null){A=null;break t}}A=x}A!==null?(i.memoizedState={dehydrated:A,treeContext:bs!==null?{id:xi,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},x=mn(18,null,null,0),x.stateNode=A,x.return=i,i.child=x,rn=i,ce=null,x=!0):x=!1}x||Rs(i)}if(A=i.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return gd(A)?i.lanes=32:i.lanes=536870912,null;Mi(i)}return A=o.children,o=o.fallback,h?(_r(),h=i.mode,A=Yu({mode:"hidden",children:A},h),o=As(o,h,a,null),A.return=i,o.return=i,A.sibling=o,i.child=A,h=i.child,h.memoizedState=Of(a),h.childLanes=Mf(e,v,a),i.memoizedState=Df,o):(yr(i),Vf(i,A))}if(x=e.memoizedState,x!==null&&(A=x.dehydrated,A!==null)){if(d)i.flags&256?(yr(i),i.flags&=-257,i=kf(e,i,a)):i.memoizedState!==null?(_r(),i.child=e.child,i.flags|=128,i=null):(_r(),h=o.fallback,A=i.mode,o=Yu({mode:"visible",children:o.children},A),h=As(h,A,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,Ia(i,e.child,null,a),o=i.child,o.memoizedState=Of(a),o.childLanes=Mf(e,v,a),i.memoizedState=Df,i=h);else if(yr(i),gd(A)){if(v=A.nextSibling&&A.nextSibling.dataset,v)var B=v.dgst;v=B,o=Error(s(419)),o.stack="",o.digest=v,zo({value:o,source:null,stack:null}),i=kf(e,i,a)}else if(Me||Bo(e,i,a,!1),v=(a&e.childLanes)!==0,Me||v){if(v=ne,v!==null&&(o=a&-a,o=(o&42)!==0?1:vo(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==x.retryLane))throw x.retryLane=o,ga(e,o),vn(v,e,o),Jg;A.data==="$?"||Wf(),i=kf(e,i,a)}else A.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=x.treeContext,ce=Gn(A.nextSibling),rn=i,Ht=!0,ws=null,si=!1,e!==null&&(xn[Cn++]=xi,xn[Cn++]=Ci,xn[Cn++]=bs,xi=e.id,Ci=e.overflow,bs=i),i=Vf(i,o.children),i.flags|=4096);return i}return h?(_r(),h=o.fallback,A=i.mode,x=e.child,B=x.sibling,o=Ii(x,{mode:"hidden",children:o.children}),o.subtreeFlags=x.subtreeFlags&65011712,B!==null?h=Ii(B,h):(h=As(h,A,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,A=e.child.memoizedState,A===null?A=Of(a):(x=A.cachePool,x!==null?(B=xe._currentValue,x=x.parent!==B?{parent:B,pool:B}:x):x=Yp(),A={baseLanes:A.baseLanes|a,cachePool:x}),h.memoizedState=A,h.childLanes=Mf(e,v,a),i.memoizedState=Df,o):(yr(i),a=e.child,e=a.sibling,a=Ii(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function Vf(e,i){return i=Yu({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Yu(e,i){return e=mn(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function kf(e,i,a){return Ia(i,e.child,null,a),e=Vf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function ly(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),Jh(e.return,i,a)}function Pf(e,i,a,o,h){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=a,d.tailMode=h)}function uy(e,i,a){var o=i.pendingProps,h=o.revealOrder,d=o.tail;if(Le(e,i,o.children,a),o=Ce.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ly(e,a,i);else if(e.tag===19)ly(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(Y(Ce,o),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&Hu(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Pf(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Hu(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Pf(i,!0,a,null,d);break;case"together":Pf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Vi(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),br|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Bo(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=Ii(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Ii(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Uf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Iu(e)))}function D1(e,i,a){switch(i.tag){case 3:Et(i,i.stateNode.containerInfo),fr(i,xe,e.memoizedState.cache),jo();break;case 27:case 5:po(i);break;case 4:Et(i,i.stateNode.containerInfo);break;case 10:fr(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(yr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?oy(e,i,a):(yr(i),e=Vi(e,i,a),e!==null?e.sibling:null);yr(i);break;case 19:var h=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Bo(e,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return uy(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Y(Ce,Ce.current),o)break;return null;case 22:case 23:return i.lanes=0,ny(e,i,a);case 24:fr(i,xe,e.memoizedState.cache)}return Vi(e,i,a)}function cy(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Me=!0;else{if(!Uf(e,a)&&(i.flags&128)===0)return Me=!1,D1(e,i,a);Me=(e.flags&131072)!==0}else Me=!1,Ht&&(i.flags&1048576)!==0&&zp(i,Ru,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")Fh(o)?(e=Ds(o,e),i.tag=1,i=sy(null,i,o,e,a)):(i.tag=0,i=Nf(null,i,o,e,a));else{if(o!=null){if(h=o.$$typeof,h===jt){i.tag=11,i=Wg(null,i,o,e,a);break t}else if(h===O){i.tag=14,i=ty(null,i,o,e,a);break t}}throw i=se(o)||o,Error(s(306,i,""))}}return i;case 0:return Nf(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=Ds(o,i.pendingProps),sy(e,i,o,h,a);case 3:t:{if(Et(i,i.stateNode.containerInfo),e===null)throw Error(s(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,af(e,i),Ko(i,o,null,a);var v=i.memoizedState;if(o=v.cache,fr(i,xe,o),o!==d.cache&&Wh(i,[xe],a,!0),Yo(),o=v.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=ay(e,i,o,a);break t}else if(o!==h){h=Rn(Error(s(424)),i),zo(h),i=ay(e,i,o,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ce=Gn(e.firstChild),rn=i,Ht=!0,ws=null,si=!0,a=qg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(jo(),o===h){i=Vi(e,i,a);break t}Le(e,i,o,a)}i=i.child}return i;case 26:return Qu(e,i),e===null?(a=m_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ht||(a=i.type,e=i.pendingProps,o=oc(it.current).createElement(a),o[de]=i,o[Ue]=e,ze(o,a,e),me(o),i.stateNode=o):i.memoizedState=m_(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return po(i),e===null&&Ht&&(o=i.stateNode=h_(i.type,i.pendingProps,it.current),rn=i,si=!0,h=ce,Ir(i.type)?(yd=h,ce=Gn(o.firstChild)):ce=h),Le(e,i,i.pendingProps.children,a),Qu(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Ht&&((h=o=ce)&&(o=sA(o,i.type,i.pendingProps,si),o!==null?(i.stateNode=o,rn=i,ce=Gn(o.firstChild),si=!1,h=!0):h=!1),h||Rs(i)),po(i),h=i.type,d=i.pendingProps,v=e!==null?e.memoizedProps:null,o=d.children,dd(h,d)?o=null:v!==null&&dd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=ff(e,i,b1,null,null,a),gl._currentValue=h),Qu(e,i),Le(e,i,o,a),i.child;case 6:return e===null&&Ht&&((e=a=ce)&&(a=aA(a,i.pendingProps,si),a!==null?(i.stateNode=a,rn=i,ce=null,e=!0):e=!1),e||Rs(i)),null;case 13:return oy(e,i,a);case 4:return Et(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=Ia(i,null,o,a):Le(e,i,o,a),i.child;case 11:return Wg(e,i,i.type,i.pendingProps,a);case 7:return Le(e,i,i.pendingProps,a),i.child;case 8:return Le(e,i,i.pendingProps.children,a),i.child;case 12:return Le(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,fr(i,i.type,o.value),Le(e,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,xs(i),h=Ye(h),o=o(h),i.flags|=1,Le(e,i,o,a),i.child;case 14:return ty(e,i,i.type,i.pendingProps,a);case 15:return ey(e,i,i.type,i.pendingProps,a);case 19:return uy(e,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},e===null?(a=Yu(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Ii(e.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return ny(e,i,a);case 24:return xs(i),o=Ye(xe),e===null?(h=nf(),h===null&&(h=ne,d=tf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:o,cache:h},sf(i),fr(i,xe,h)):((e.lanes&a)!==0&&(af(e,i),Ko(i,null,null,a),Yo()),h=e.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),fr(i,xe,o)):(o=d.cache,fr(i,xe,o),o!==h.cache&&Wh(i,[xe],a,!0))),Le(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ki(e){e.flags|=4}function hy(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!v_(i)){if(i=Nn.current,i!==null&&((Ut&4194048)===Ut?ai!==null:(Ut&62914560)!==Ut&&(Ut&536870912)===0||i!==ai))throw Fo=rf,Kp;e.flags|=8192}}function Ku(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Wi():536870912,e.lanes|=i,Da|=i)}function el(e,i){if(!Ht)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function le(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function O1(e,i,a){var o=i.pendingProps;switch(Xh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return le(i),null;case 1:return le(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Di(xe),hn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Lo(i)?ki(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Hp())),le(i),null;case 26:return a=i.memoizedState,e===null?(ki(i),a!==null?(le(i),hy(i,a)):(le(i),i.flags&=-16777217)):a?a!==e.memoizedState?(ki(i),le(i),hy(i,a)):(le(i),i.flags&=-16777217):(e.memoizedProps!==o&&ki(i),le(i),i.flags&=-16777217),null;case 27:$s(i),a=it.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==o&&ki(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return le(i),null}e=nt.current,Lo(i)?Bp(i):(e=h_(h,o,a),i.stateNode=e,ki(i))}return le(i),null;case 5:if($s(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&ki(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return le(i),null}if(e=nt.current,Lo(i))Bp(i);else{switch(h=oc(it.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}e[de]=i,e[Ue]=o;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(ze(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&ki(i)}}return le(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&ki(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(e=it.current,Lo(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,h=rn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[de]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||r_(e.nodeValue,a)),e||Rs(i)}else e=oc(e).createTextNode(o),e[de]=i,i.stateNode=e}return le(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Lo(i),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[de]=i}else jo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;le(i),h=!1}else h=Hp(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Mi(i),i):(Mi(i),null)}if(Mi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var d=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),Ku(i,i.updateQueue),le(i),null;case 4:return hn(),e===null&&ld(i.stateNode.containerInfo),le(i),null;case 10:return Di(i.type),le(i),null;case 19:if($(Ce),h=i.memoizedState,h===null)return le(i),null;if(o=(i.flags&128)!==0,d=h.rendering,d===null)if(o)el(h,!1);else{if(he!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=Hu(e),d!==null){for(i.flags|=128,el(h,!1),e=d.updateQueue,i.updateQueue=e,Ku(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)jp(a,e),a=a.sibling;return Y(Ce,Ce.current&1|2),i.child}e=e.sibling}h.tail!==null&&sn()>Zu&&(i.flags|=128,o=!0,el(h,!1),i.lanes=4194304)}else{if(!o)if(e=Hu(d),e!==null){if(i.flags|=128,o=!0,e=e.updateQueue,i.updateQueue=e,Ku(i,e),el(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Ht)return le(i),null}else 2*sn()-h.renderingStartTime>Zu&&a!==536870912&&(i.flags|=128,o=!0,el(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(e=h.last,e!==null?e.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=sn(),i.sibling=null,e=Ce.current,Y(Ce,o?e&1|2:e&1),i):(le(i),null);case 22:case 23:return Mi(i),cf(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(le(i),i.subtreeFlags&6&&(i.flags|=8192)):le(i),a=i.updateQueue,a!==null&&Ku(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&$(Cs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Di(xe),le(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function M1(e,i){switch(Xh(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Di(xe),hn(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return $s(i),null;case 13:if(Mi(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));jo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return $(Ce),null;case 4:return hn(),null;case 10:return Di(i.type),null;case 22:case 23:return Mi(i),cf(),e!==null&&$(Cs),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Di(xe),null;case 25:return null;default:return null}}function fy(e,i){switch(Xh(i),i.tag){case 3:Di(xe),hn();break;case 26:case 27:case 5:$s(i);break;case 4:hn();break;case 13:Mi(i);break;case 19:$(Ce);break;case 10:Di(i.type);break;case 22:case 23:Mi(i),cf(),e!==null&&$(Cs);break;case 24:Di(xe)}}function nl(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var d=a.create,v=a.inst;o=d(),v.destroy=o}a=a.next}while(a!==h)}}catch(A){Jt(i,i.return,A)}}function vr(e,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&e)===e){var v=o.inst,A=v.destroy;if(A!==void 0){v.destroy=void 0,h=i;var x=a,B=A;try{B()}catch(Q){Jt(h,x,Q)}}}o=o.next}while(o!==d)}}catch(Q){Jt(i,i.return,Q)}}function dy(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{tg(i,a)}catch(o){Jt(e,e.return,o)}}}function my(e,i,a){a.props=Ds(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Jt(e,i,o)}}function il(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){Jt(e,i,h)}}function oi(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Jt(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Jt(e,i,h)}else a.current=null}function py(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Jt(e,e.return,h)}}function Lf(e,i,a){try{var o=e.stateNode;tA(o,e.type,a,i),o[Ue]=i}catch(h){Jt(e,e.return,h)}}function gy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ir(e.type)||e.tag===4}function jf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||gy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ir(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zf(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ac));else if(o!==4&&(o===27&&Ir(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(zf(e,i,a),e=e.sibling;e!==null;)zf(e,i,a),e=e.sibling}function Xu(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(o===27&&Ir(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Xu(e,i,a),e=e.sibling;e!==null;)Xu(e,i,a),e=e.sibling}function yy(e){var i=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);ze(i,o,a),i[de]=e,i[Ue]=a}catch(d){Jt(e,e.return,d)}}var Pi=!1,ye=!1,Bf=!1,_y=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function V1(e,i){if(e=e.containerInfo,hd=dc,e=Cp(e),Lh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,A=-1,x=-1,B=0,Q=0,Z=e,q=null;e:for(;;){for(var H;Z!==a||h!==0&&Z.nodeType!==3||(A=v+h),Z!==d||o!==0&&Z.nodeType!==3||(x=v+o),Z.nodeType===3&&(v+=Z.nodeValue.length),(H=Z.firstChild)!==null;)q=Z,Z=H;for(;;){if(Z===e)break e;if(q===a&&++B===h&&(A=v),q===d&&++Q===o&&(x=v),(H=Z.nextSibling)!==null)break;Z=q,q=Z.parentNode}Z=H}a=A===-1||x===-1?null:{start:A,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(fd={focusedElem:e,selectionRange:a},dc=!1,Ve=i;Ve!==null;)if(i=Ve,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,Ve=e;else for(;Ve!==null;){switch(i=Ve,d=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var Tt=Ds(a.type,h,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(Tt,d),o.__reactInternalSnapshotBeforeUpdate=e}catch(yt){Jt(a,a.return,yt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)pd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":pd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Ve=e;break}Ve=i.return}}function vy(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Er(e,a),o&4&&nl(5,a);break;case 1:if(Er(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){Jt(a,a.return,v)}else{var h=Ds(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Jt(a,a.return,v)}}o&64&&dy(a),o&512&&il(a,a.return);break;case 3:if(Er(e,a),o&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{tg(e,i)}catch(v){Jt(a,a.return,v)}}break;case 27:i===null&&o&4&&yy(a);case 26:case 5:Er(e,a),i===null&&o&4&&py(a),o&512&&il(a,a.return);break;case 12:Er(e,a);break;case 13:Er(e,a),o&4&&Ay(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=H1.bind(null,a),oA(e,a))));break;case 22:if(o=a.memoizedState!==null||Pi,!o){i=i!==null&&i.memoizedState!==null||ye,h=Pi;var d=ye;Pi=o,(ye=i)&&!d?Tr(e,a,(a.subtreeFlags&8772)!==0):Er(e,a),Pi=h,ye=d}break;case 30:break;default:Er(e,a)}}function Ey(e){var i=e.alternate;i!==null&&(e.alternate=null,Ey(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&ea(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ae=null,on=!1;function Ui(e,i,a){for(a=a.child;a!==null;)Ty(e,i,a),a=a.sibling}function Ty(e,i,a){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount($i,a)}catch{}switch(a.tag){case 26:ye||oi(a,i),Ui(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ye||oi(a,i);var o=ae,h=on;Ir(a.type)&&(ae=a.stateNode,on=!1),Ui(e,i,a),fl(a.stateNode),ae=o,on=h;break;case 5:ye||oi(a,i);case 6:if(o=ae,h=on,ae=null,Ui(e,i,a),ae=o,on=h,ae!==null)if(on)try{(ae.nodeType===9?ae.body:ae.nodeName==="HTML"?ae.ownerDocument.body:ae).removeChild(a.stateNode)}catch(d){Jt(a,i,d)}else try{ae.removeChild(a.stateNode)}catch(d){Jt(a,i,d)}break;case 18:ae!==null&&(on?(e=ae,u_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),El(e)):u_(ae,a.stateNode));break;case 4:o=ae,h=on,ae=a.stateNode.containerInfo,on=!0,Ui(e,i,a),ae=o,on=h;break;case 0:case 11:case 14:case 15:ye||vr(2,a,i),ye||vr(4,a,i),Ui(e,i,a);break;case 1:ye||(oi(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&my(a,i,o)),Ui(e,i,a);break;case 21:Ui(e,i,a);break;case 22:ye=(o=ye)||a.memoizedState!==null,Ui(e,i,a),ye=o;break;default:Ui(e,i,a)}}function Ay(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{El(e)}catch(a){Jt(i,i.return,a)}}function k1(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new _y),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new _y),i;default:throw Error(s(435,e.tag))}}function qf(e,i){var a=k1(e);i.forEach(function(o){var h=G1.bind(null,e,o);a.has(o)||(a.add(o),o.then(h,h))})}function pn(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=e,v=i,A=v;t:for(;A!==null;){switch(A.tag){case 27:if(Ir(A.type)){ae=A.stateNode,on=!1;break t}break;case 5:ae=A.stateNode,on=!1;break t;case 3:case 4:ae=A.stateNode.containerInfo,on=!0;break t}A=A.return}if(ae===null)throw Error(s(160));Ty(d,v,h),ae=null,on=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)by(i,e),i=i.sibling}var Hn=null;function by(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:pn(i,e),gn(e),o&4&&(vr(3,e,e.return),nl(3,e),vr(5,e,e.return));break;case 1:pn(i,e),gn(e),o&512&&(ye||a===null||oi(a,a.return)),o&64&&Pi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Hn;if(pn(i,e),gn(e),o&512&&(ye||a===null||oi(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[nr]||d[de]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),ze(d,o,a),d[de]=e,me(d),o=d;break t;case"link":var v=y_("link","href",h).get(o+(a.href||""));if(v){for(var A=0;A<v.length;A++)if(d=v[A],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(A,1);break e}}d=h.createElement(o),ze(d,o,a),h.head.appendChild(d);break;case"meta":if(v=y_("meta","content",h).get(o+(a.content||""))){for(A=0;A<v.length;A++)if(d=v[A],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(A,1);break e}}d=h.createElement(o),ze(d,o,a),h.head.appendChild(d);break;default:throw Error(s(468,o))}d[de]=e,me(d),o=d}e.stateNode=o}else __(h,e.type,e.stateNode);else e.stateNode=g_(h,o,e.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?__(h,e.type,e.stateNode):g_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Lf(e,e.memoizedProps,a.memoizedProps)}break;case 27:pn(i,e),gn(e),o&512&&(ye||a===null||oi(a,a.return)),a!==null&&o&4&&Lf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(pn(i,e),gn(e),o&512&&(ye||a===null||oi(a,a.return)),e.flags&32){h=e.stateNode;try{Sn(h,"")}catch(H){Jt(e,e.return,H)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,Lf(e,h,a!==null?a.memoizedProps:h)),o&1024&&(Bf=!0);break;case 6:if(pn(i,e),gn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(H){Jt(e,e.return,H)}}break;case 3:if(cc=null,h=Hn,Hn=lc(i.containerInfo),pn(i,e),Hn=h,gn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{El(i.containerInfo)}catch(H){Jt(e,e.return,H)}Bf&&(Bf=!1,Sy(e));break;case 4:o=Hn,Hn=lc(e.stateNode.containerInfo),pn(i,e),gn(e),Hn=o;break;case 12:pn(i,e),gn(e);break;case 13:pn(i,e),gn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Kf=sn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,qf(e,o)));break;case 22:h=e.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,B=Pi,Q=ye;if(Pi=B||h,ye=Q||x,pn(i,e),ye=Q,Pi=B,gn(e),o&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||x||Pi||ye||Os(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){x=a=i;try{if(d=x.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{A=x.stateNode;var Z=x.memoizedProps.style,q=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;A.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(H){Jt(x,x.return,H)}}}else if(i.tag===6){if(a===null){x=i;try{x.stateNode.nodeValue=h?"":x.memoizedProps}catch(H){Jt(x,x.return,H)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,qf(e,a))));break;case 19:pn(i,e),gn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,qf(e,o)));break;case 30:break;case 21:break;default:pn(i,e),gn(e)}}function gn(e){var i=e.flags;if(i&2){try{for(var a,o=e.return;o!==null;){if(gy(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=jf(e);Xu(e,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(Sn(v,""),a.flags&=-33);var A=jf(e);Xu(e,A,v);break;case 3:case 4:var x=a.stateNode.containerInfo,B=jf(e);zf(e,B,x);break;default:throw Error(s(161))}}catch(Q){Jt(e,e.return,Q)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Sy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Sy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Er(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)vy(e,i.alternate,i),i=i.sibling}function Os(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:vr(4,i,i.return),Os(i);break;case 1:oi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&my(i,i.return,a),Os(i);break;case 27:fl(i.stateNode);case 26:case 5:oi(i,i.return),Os(i);break;case 22:i.memoizedState===null&&Os(i);break;case 30:Os(i);break;default:Os(i)}e=e.sibling}}function Tr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=e,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:Tr(h,d,a),nl(4,d);break;case 1:if(Tr(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){Jt(o,o.return,B)}if(o=d,h=o.updateQueue,h!==null){var A=o.stateNode;try{var x=h.shared.hiddenCallbacks;if(x!==null)for(h.shared.hiddenCallbacks=null,h=0;h<x.length;h++)Wp(x[h],A)}catch(B){Jt(o,o.return,B)}}a&&v&64&&dy(d),il(d,d.return);break;case 27:yy(d);case 26:case 5:Tr(h,d,a),a&&o===null&&v&4&&py(d),il(d,d.return);break;case 12:Tr(h,d,a);break;case 13:Tr(h,d,a),a&&v&4&&Ay(h,d);break;case 22:d.memoizedState===null&&Tr(h,d,a),il(d,d.return);break;case 30:break;default:Tr(h,d,a)}i=i.sibling}}function Hf(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&qo(a))}function Gf(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&qo(e))}function li(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)wy(e,i,a,o),i=i.sibling}function wy(e,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:li(e,i,a,o),h&2048&&nl(9,i);break;case 1:li(e,i,a,o);break;case 3:li(e,i,a,o),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&qo(e)));break;case 12:if(h&2048){li(e,i,a,o),e=i.stateNode;try{var d=i.memoizedProps,v=d.id,A=d.onPostCommit;typeof A=="function"&&A(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(x){Jt(i,i.return,x)}}else li(e,i,a,o);break;case 13:li(e,i,a,o);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?li(e,i,a,o):rl(e,i):d._visibility&2?li(e,i,a,o):(d._visibility|=2,xa(e,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&Hf(v,i);break;case 24:li(e,i,a,o),h&2048&&Gf(i.alternate,i);break;default:li(e,i,a,o)}}function xa(e,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=e,v=i,A=a,x=o,B=v.flags;switch(v.tag){case 0:case 11:case 15:xa(d,v,A,x,h),nl(8,v);break;case 23:break;case 22:var Q=v.stateNode;v.memoizedState!==null?Q._visibility&2?xa(d,v,A,x,h):rl(d,v):(Q._visibility|=2,xa(d,v,A,x,h)),h&&B&2048&&Hf(v.alternate,v);break;case 24:xa(d,v,A,x,h),h&&B&2048&&Gf(v.alternate,v);break;default:xa(d,v,A,x,h)}i=i.sibling}}function rl(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,h=o.flags;switch(o.tag){case 22:rl(a,o),h&2048&&Hf(o.alternate,o);break;case 24:rl(a,o),h&2048&&Gf(o.alternate,o);break;default:rl(a,o)}i=i.sibling}}var sl=8192;function Ca(e){if(e.subtreeFlags&sl)for(e=e.child;e!==null;)Ry(e),e=e.sibling}function Ry(e){switch(e.tag){case 26:Ca(e),e.flags&sl&&e.memoizedState!==null&&EA(Hn,e.memoizedState,e.memoizedProps);break;case 5:Ca(e);break;case 3:case 4:var i=Hn;Hn=lc(e.stateNode.containerInfo),Ca(e),Hn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=sl,sl=16777216,Ca(e),sl=i):Ca(e));break;default:Ca(e)}}function Iy(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function al(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Ve=o,Cy(o,e)}Iy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)xy(e),e=e.sibling}function xy(e){switch(e.tag){case 0:case 11:case 15:al(e),e.flags&2048&&vr(9,e,e.return);break;case 3:al(e);break;case 12:al(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,$u(e)):al(e);break;default:al(e)}}function $u(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Ve=o,Cy(o,e)}Iy(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:vr(8,i,i.return),$u(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,$u(i));break;default:$u(i)}e=e.sibling}}function Cy(e,i){for(;Ve!==null;){var a=Ve;switch(a.tag){case 0:case 11:case 15:vr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:qo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Ve=o;else t:for(a=e;Ve!==null;){o=Ve;var h=o.sibling,d=o.return;if(Ey(o),o===a){Ve=null;break t}if(h!==null){h.return=d,Ve=h;break t}Ve=d}}}var P1={getCacheForType:function(e){var i=Ye(xe),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},U1=typeof WeakMap=="function"?WeakMap:Map,Qt=0,ne=null,Dt=null,Ut=0,Yt=0,yn=null,Ar=!1,Na=!1,Ff=!1,Li=0,he=0,br=0,Ms=0,Qf=0,Dn=0,Da=0,ol=null,ln=null,Yf=!1,Kf=0,Zu=1/0,Ju=null,Sr=null,je=0,wr=null,Oa=null,Ma=0,Xf=0,$f=null,Ny=null,ll=0,Zf=null;function _n(){if((Qt&2)!==0&&Ut!==0)return Ut&-Ut;if(F.T!==null){var e=Ea;return e!==0?e:rd()}return Ei()}function Dy(){Dn===0&&(Dn=(Ut&536870912)===0||Ht?_o():536870912);var e=Nn.current;return e!==null&&(e.flags|=32),Dn}function vn(e,i,a){(e===ne&&(Yt===2||Yt===9)||e.cancelPendingCommit!==null)&&(Va(e,0),Rr(e,Ut,Dn,!1)),fe(e,a),((Qt&2)===0||e!==ne)&&(e===ne&&((Qt&2)===0&&(Ms|=a),he===4&&Rr(e,Ut,Dn,!1)),ui(e))}function Oy(e,i,a){if((Qt&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&e.expiredLanes)===0||Ji(e,i),h=o?z1(e,i):td(e,i,!0),d=o;do{if(h===0){Na&&!o&&Rr(e,i,0,!1);break}else{if(a=e.current.alternate,d&&!L1(a)){h=td(e,i,!1),d=!1;continue}if(h===2){if(d=i,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var A=e;h=ol;var x=A.current.memoizedState.isDehydrated;if(x&&(Va(A,v).flags|=256),v=td(A,v,!1),v!==2){if(Ff&&!x){A.errorRecoveryDisabledLanes|=d,Ms|=d,h=4;break t}d=ln,ln=h,d!==null&&(ln===null?ln=d:ln.push.apply(ln,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Va(e,0),Rr(e,i,0,!0);break}t:{switch(o=e,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Rr(o,i,Dn,!Ar);break t;case 2:ln=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Kf+300-sn(),10<h)){if(Rr(o,i,Dn,!Ar),An(o,0,!0)!==0)break t;o.timeoutHandle=o_(My.bind(null,o,a,ln,Ju,Yf,i,Dn,Ms,Da,Ar,d,2,-0,0),h);break t}My(o,a,ln,Ju,Yf,i,Dn,Ms,Da,Ar,d,0,-0,0)}}break}while(!0);ui(e)}function My(e,i,a,o,h,d,v,A,x,B,Q,Z,q,H){if(e.timeoutHandle=-1,Z=i.subtreeFlags,(Z&8192||(Z&16785408)===16785408)&&(pl={stylesheets:null,count:0,unsuspend:vA},Ry(i),Z=TA(),Z!==null)){e.cancelPendingCommit=Z(zy.bind(null,e,i,d,a,o,h,v,A,x,Q,1,q,H)),Rr(e,d,v,!B);return}zy(e,i,d,a,o,h,v,A,x)}function L1(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!dn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Rr(e,i,a,o){i&=~Qf,i&=~Ms,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var h=i;0<h;){var d=31-We(h),v=1<<d;o[d]=-1,h&=~v}a!==0&&tr(e,a,i)}function Wu(){return(Qt&6)===0?(ul(0),!1):!0}function Jf(){if(Dt!==null){if(Yt===0)var e=Dt.return;else e=Dt,Ni=Is=null,pf(e),Ra=null,Wo=0,e=Dt;for(;e!==null;)fy(e.alternate,e),e=e.return;Dt=null}}function Va(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,nA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Jf(),ne=e,Dt=a=Ii(e.current,null),Ut=i,Yt=0,yn=null,Ar=!1,Na=Ji(e,i),Ff=!1,Da=Dn=Qf=Ms=br=he=0,ln=ol=null,Yf=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var h=31-We(o),d=1<<h;i|=e[h],o&=~d}return Li=i,Tu(),a}function Vy(e,i){xt=null,F.H=zu,i===Go||i===Nu?(i=Zp(),Yt=3):i===Kp?(i=Zp(),Yt=4):Yt=i===Jg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,yn=i,Dt===null&&(he=1,Fu(e,Rn(i,e.current)))}function ky(){var e=F.H;return F.H=zu,e===null?zu:e}function Py(){var e=F.A;return F.A=P1,e}function Wf(){he=4,Ar||(Ut&4194048)!==Ut&&Nn.current!==null||(Na=!0),(br&134217727)===0&&(Ms&134217727)===0||ne===null||Rr(ne,Ut,Dn,!1)}function td(e,i,a){var o=Qt;Qt|=2;var h=ky(),d=Py();(ne!==e||Ut!==i)&&(Ju=null,Va(e,i)),i=!1;var v=he;t:do try{if(Yt!==0&&Dt!==null){var A=Dt,x=yn;switch(Yt){case 8:Jf(),v=6;break t;case 3:case 2:case 9:case 6:Nn.current===null&&(i=!0);var B=Yt;if(Yt=0,yn=null,ka(e,A,x,B),a&&Na){v=0;break t}break;default:B=Yt,Yt=0,yn=null,ka(e,A,x,B)}}j1(),v=he;break}catch(Q){Vy(e,Q)}while(!0);return i&&e.shellSuspendCounter++,Ni=Is=null,Qt=o,F.H=h,F.A=d,Dt===null&&(ne=null,Ut=0,Tu()),v}function j1(){for(;Dt!==null;)Uy(Dt)}function z1(e,i){var a=Qt;Qt|=2;var o=ky(),h=Py();ne!==e||Ut!==i?(Ju=null,Zu=sn()+500,Va(e,i)):Na=Ji(e,i);t:do try{if(Yt!==0&&Dt!==null){i=Dt;var d=yn;e:switch(Yt){case 1:Yt=0,yn=null,ka(e,i,d,1);break;case 2:case 9:if(Xp(d)){Yt=0,yn=null,Ly(i);break}i=function(){Yt!==2&&Yt!==9||ne!==e||(Yt=7),ui(e)},d.then(i,i);break t;case 3:Yt=7;break t;case 4:Yt=5;break t;case 7:Xp(d)?(Yt=0,yn=null,Ly(i)):(Yt=0,yn=null,ka(e,i,d,7));break;case 5:var v=null;switch(Dt.tag){case 26:v=Dt.memoizedState;case 5:case 27:var A=Dt;if(!v||v_(v)){Yt=0,yn=null;var x=A.sibling;if(x!==null)Dt=x;else{var B=A.return;B!==null?(Dt=B,tc(B)):Dt=null}break e}}Yt=0,yn=null,ka(e,i,d,5);break;case 6:Yt=0,yn=null,ka(e,i,d,6);break;case 8:Jf(),he=6;break t;default:throw Error(s(462))}}B1();break}catch(Q){Vy(e,Q)}while(!0);return Ni=Is=null,F.H=o,F.A=h,Qt=a,Dt!==null?0:(ne=null,Ut=0,Tu(),he)}function B1(){for(;Dt!==null&&!Ih();)Uy(Dt)}function Uy(e){var i=cy(e.alternate,e,Li);e.memoizedProps=e.pendingProps,i===null?tc(e):Dt=i}function Ly(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=ry(a,i,i.pendingProps,i.type,void 0,Ut);break;case 11:i=ry(a,i,i.pendingProps,i.type.render,i.ref,Ut);break;case 5:pf(i);default:fy(a,i),i=Dt=jp(i,Li),i=cy(a,i,Li)}e.memoizedProps=e.pendingProps,i===null?tc(e):Dt=i}function ka(e,i,a,o){Ni=Is=null,pf(i),Ra=null,Wo=0;var h=i.return;try{if(N1(e,h,i,a,Ut)){he=1,Fu(e,Rn(a,e.current)),Dt=null;return}}catch(d){if(h!==null)throw Dt=h,d;he=1,Fu(e,Rn(a,e.current)),Dt=null;return}i.flags&32768?(Ht||o===1?e=!0:Na||(Ut&536870912)!==0?e=!1:(Ar=e=!0,(o===2||o===9||o===3||o===6)&&(o=Nn.current,o!==null&&o.tag===13&&(o.flags|=16384))),jy(i,e)):tc(i)}function tc(e){var i=e;do{if((i.flags&32768)!==0){jy(i,Ar);return}e=i.return;var a=O1(i.alternate,i,Li);if(a!==null){Dt=a;return}if(i=i.sibling,i!==null){Dt=i;return}Dt=i=e}while(i!==null);he===0&&(he=5)}function jy(e,i){do{var a=M1(e.alternate,e);if(a!==null){a.flags&=32767,Dt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Dt=e;return}Dt=e=a}while(e!==null);he=6,Dt=null}function zy(e,i,a,o,h,d,v,A,x){e.cancelPendingCommit=null;do ec();while(je!==0);if((Qt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Hh,ru(e,a,d,v,A,x),e===ne&&(Dt=ne=null,Ut=0),Oa=i,wr=e,Ma=a,Xf=d,$f=h,Ny=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,F1(vi,function(){return Fy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=F.T,F.T=null,h=st.p,st.p=2,v=Qt,Qt|=4;try{V1(e,i,a)}finally{Qt=v,st.p=h,F.T=o}}je=1,By(),qy(),Hy()}}function By(){if(je===1){je=0;var e=wr,i=Oa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var o=st.p;st.p=2;var h=Qt;Qt|=4;try{by(i,e);var d=fd,v=Cp(e.containerInfo),A=d.focusedElem,x=d.selectionRange;if(v!==A&&A&&A.ownerDocument&&xp(A.ownerDocument.documentElement,A)){if(x!==null&&Lh(A)){var B=x.start,Q=x.end;if(Q===void 0&&(Q=B),"selectionStart"in A)A.selectionStart=B,A.selectionEnd=Math.min(Q,A.value.length);else{var Z=A.ownerDocument||document,q=Z&&Z.defaultView||window;if(q.getSelection){var H=q.getSelection(),Tt=A.textContent.length,yt=Math.min(x.start,Tt),Zt=x.end===void 0?yt:Math.min(x.end,Tt);!H.extend&&yt>Zt&&(v=Zt,Zt=yt,yt=v);var U=Ip(A,yt),M=Ip(A,Zt);if(U&&M&&(H.rangeCount!==1||H.anchorNode!==U.node||H.anchorOffset!==U.offset||H.focusNode!==M.node||H.focusOffset!==M.offset)){var j=Z.createRange();j.setStart(U.node,U.offset),H.removeAllRanges(),yt>Zt?(H.addRange(j),H.extend(M.node,M.offset)):(j.setEnd(M.node,M.offset),H.addRange(j))}}}}for(Z=[],H=A;H=H.parentNode;)H.nodeType===1&&Z.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<Z.length;A++){var K=Z[A];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}dc=!!hd,fd=hd=null}finally{Qt=h,st.p=o,F.T=a}}e.current=i,je=2}}function qy(){if(je===2){je=0;var e=wr,i=Oa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var o=st.p;st.p=2;var h=Qt;Qt|=4;try{vy(e,i.alternate,i)}finally{Qt=h,st.p=o,F.T=a}}je=3}}function Hy(){if(je===4||je===3){je=0,go();var e=wr,i=Oa,a=Ma,o=Ny;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?je=5:(je=0,Oa=wr=null,Gy(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Sr=null),Eo(a),i=i.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot($i,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=F.T,h=st.p,st.p=2,F.T=null;try{for(var d=e.onRecoverableError,v=0;v<o.length;v++){var A=o[v];d(A.value,{componentStack:A.stack})}}finally{F.T=i,st.p=h}}(Ma&3)!==0&&ec(),ui(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===Zf?ll++:(ll=0,Zf=e):ll=0,ul(0)}}function Gy(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,qo(i)))}function ec(e){return By(),qy(),Hy(),Fy()}function Fy(){if(je!==5)return!1;var e=wr,i=Xf;Xf=0;var a=Eo(Ma),o=F.T,h=st.p;try{st.p=32>a?32:a,F.T=null,a=$f,$f=null;var d=wr,v=Ma;if(je=0,Oa=wr=null,Ma=0,(Qt&6)!==0)throw Error(s(331));var A=Qt;if(Qt|=4,xy(d.current),wy(d,d.current,v,a),Qt=A,ul(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot($i,d)}catch{}return!0}finally{st.p=h,F.T=o,Gy(e,i)}}function Qy(e,i,a){i=Rn(a,i),i=Cf(e.stateNode,i,2),e=pr(e,i,2),e!==null&&(fe(e,2),ui(e))}function Jt(e,i,a){if(e.tag===3)Qy(e,e,a);else for(;i!==null;){if(i.tag===3){Qy(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Sr===null||!Sr.has(o))){e=Rn(a,e),a=$g(2),o=pr(i,a,2),o!==null&&(Zg(a,o,i,e),fe(o,2),ui(o));break}}i=i.return}}function ed(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new U1;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(Ff=!0,h.add(a),e=q1.bind(null,e,i,a),i.then(e,e))}function q1(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ne===e&&(Ut&a)===a&&(he===4||he===3&&(Ut&62914560)===Ut&&300>sn()-Kf?(Qt&2)===0&&Va(e,0):Qf|=a,Da===Ut&&(Da=0)),ui(e)}function Yy(e,i){i===0&&(i=Wi()),e=ga(e,i),e!==null&&(fe(e,i),ui(e))}function H1(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Yy(e,a)}function G1(e,i){var a=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),Yy(e,a)}function F1(e,i){return Jr(e,i)}var nc=null,Pa=null,nd=!1,ic=!1,id=!1,Vs=0;function ui(e){e!==Pa&&e.next===null&&(Pa===null?nc=Pa=e:Pa=Pa.next=e),ic=!0,nd||(nd=!0,Y1())}function ul(e,i){if(!id&&ic){id=!0;do for(var a=!1,o=nc;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var v=o.suspendedLanes,A=o.pingedLanes;d=(1<<31-We(42|e)+1)-1,d&=h&~(v&~A),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Zy(o,d))}else d=Ut,d=An(o,o===ne?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||Ji(o,d)||(a=!0,Zy(o,d));o=o.next}while(a);id=!1}}function Q1(){Ky()}function Ky(){ic=nd=!1;var e=0;Vs!==0&&(eA()&&(e=Vs),Vs=0);for(var i=sn(),a=null,o=nc;o!==null;){var h=o.next,d=Xy(o,i);d===0?(o.next=null,a===null?nc=h:a.next=h,h===null&&(Pa=a)):(a=o,(e!==0||(d&3)!==0)&&(ic=!0)),o=h}ul(e)}function Xy(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-We(d),A=1<<v,x=h[v];x===-1?((A&a)===0||(A&o)!==0)&&(h[v]=Ws(A,i)):x<=i&&(e.expiredLanes|=A),d&=~A}if(i=ne,a=Ut,a=An(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===i&&(Yt===2||Yt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Js(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Ji(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&Js(o),Eo(a)){case 2:case 8:a=De;break;case 32:a=vi;break;case 268435456:a=yo;break;default:a=vi}return o=$y.bind(null,e),a=Jr(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&Js(o),e.callbackPriority=2,e.callbackNode=null,2}function $y(e,i){if(je!==0&&je!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(ec()&&e.callbackNode!==a)return null;var o=Ut;return o=An(e,e===ne?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Oy(e,o,i),Xy(e,sn()),e.callbackNode!=null&&e.callbackNode===a?$y.bind(null,e):null)}function Zy(e,i){if(ec())return null;Oy(e,i,!0)}function Y1(){iA(function(){(Qt&6)!==0?Jr(Re,Q1):Ky()})}function rd(){return Vs===0&&(Vs=_o()),Vs}function Jy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ln(""+e)}function Wy(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function K1(e,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var d=Jy((h[Ue]||null).action),v=o.submitter;v&&(i=(i=v[Ue]||null)?Jy(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var A=new ds("action","action",null,o,h);e.push({event:A,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Vs!==0){var x=v?Wy(h,v):new FormData(h);Sf(a,{pending:!0,data:x,method:h.method,action:d},null,x)}}else typeof d=="function"&&(A.preventDefault(),x=v?Wy(h,v):new FormData(h),Sf(a,{pending:!0,data:x,method:h.method,action:d},d,x))},currentTarget:h}]})}}for(var sd=0;sd<qh.length;sd++){var ad=qh[sd],X1=ad.toLowerCase(),$1=ad[0].toUpperCase()+ad.slice(1);qn(X1,"on"+$1)}qn(Op,"onAnimationEnd"),qn(Mp,"onAnimationIteration"),qn(Vp,"onAnimationStart"),qn("dblclick","onDoubleClick"),qn("focusin","onFocus"),qn("focusout","onBlur"),qn(d1,"onTransitionRun"),qn(m1,"onTransitionStart"),qn(p1,"onTransitionCancel"),qn(kp,"onTransitionEnd"),ei("onMouseEnter",["mouseout","mouseover"]),ei("onMouseLeave",["mouseout","mouseover"]),ei("onPointerEnter",["pointerout","pointerover"]),ei("onPointerLeave",["pointerout","pointerover"]),ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cl));function t_(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var d=void 0;if(i)for(var v=o.length-1;0<=v;v--){var A=o[v],x=A.instance,B=A.currentTarget;if(A=A.listener,x!==d&&h.isPropagationStopped())break t;d=A,h.currentTarget=B;try{d(h)}catch(Q){Gu(Q)}h.currentTarget=null,d=x}else for(v=0;v<o.length;v++){if(A=o[v],x=A.instance,B=A.currentTarget,A=A.listener,x!==d&&h.isPropagationStopped())break t;d=A,h.currentTarget=B;try{d(h)}catch(Q){Gu(Q)}h.currentTarget=null,d=x}}}}function Ot(e,i){var a=i[ts];a===void 0&&(a=i[ts]=new Set);var o=e+"__bubble";a.has(o)||(e_(i,e,2,!1),a.add(o))}function od(e,i,a){var o=0;i&&(o|=4),e_(a,e,o,i)}var rc="_reactListening"+Math.random().toString(36).slice(2);function ld(e){if(!e[rc]){e[rc]=!0,su.forEach(function(a){a!=="selectionchange"&&(Z1.has(a)||od(a,!1,e),od(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[rc]||(i[rc]=!0,od("selectionchange",!1,i))}}function e_(e,i,a,o){switch(w_(i)){case 2:var h=SA;break;case 8:h=wA;break;default:h=Ad}a=h.bind(null,i,a,e),h=void 0,!wi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function ud(e,i,a,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var A=o.stateNode.containerInfo;if(A===h)break;if(v===4)for(v=o.return;v!==null;){var x=v.tag;if((x===3||x===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;A!==null;){if(v=Jn(A),v===null)return;if(x=v.tag,x===5||x===6||x===26||x===27){o=d=v;continue t}A=A.parentNode}}o=o.return}cs(function(){var B=d,Q=Io(a),Z=[];t:{var q=Pp.get(e);if(q!==void 0){var H=ds,Tt=e;switch(e){case"keypress":if(hs(a)===0)break t;case"keydown":case"keyup":H=fa;break;case"focusin":Tt="focus",H=ua;break;case"focusout":Tt="blur",H=ua;break;case"beforeblur":case"afterblur":H=ua;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=_s;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=hr;break;case Op:case Mp:case Vp:H=Co;break;case kp:H=m;break;case"scroll":case"scrollend":H=ps;break;case"wheel":H=S;break;case"copy":case"cut":case"paste":H=mu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Oo;break;case"toggle":case"beforetoggle":H=G}var yt=(i&4)!==0,Zt=!yt&&(e==="scroll"||e==="scrollend"),U=yt?q!==null?q+"Capture":null:q;yt=[];for(var M=B,j;M!==null;){var K=M;if(j=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||j===null||U===null||(K=ur(M,U),K!=null&&yt.push(hl(M,K,j))),Zt)break;M=M.return}0<yt.length&&(q=new H(q,Tt,null,a,Q),Z.push({event:q,listeners:yt}))}}if((i&7)===0){t:{if(q=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",q&&a!==Ro&&(Tt=a.relatedTarget||a.fromElement)&&(Jn(Tt)||Tt[Ti]))break t;if((H||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,H?(Tt=a.relatedTarget||a.toElement,H=B,Tt=Tt?Jn(Tt):null,Tt!==null&&(Zt=c(Tt),yt=Tt.tag,Tt!==Zt||yt!==5&&yt!==27&&yt!==6)&&(Tt=null)):(H=null,Tt=B),H!==Tt)){if(yt=_s,K="onMouseLeave",U="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(yt=Oo,K="onPointerLeave",U="onPointerEnter",M="pointer"),Zt=H==null?q:ir(H),j=Tt==null?q:ir(Tt),q=new yt(K,M+"leave",H,a,Q),q.target=Zt,q.relatedTarget=j,K=null,Jn(Q)===B&&(yt=new yt(U,M+"enter",Tt,a,Q),yt.target=j,yt.relatedTarget=Zt,K=yt),Zt=K,H&&Tt)e:{for(yt=H,U=Tt,M=0,j=yt;j;j=Ua(j))M++;for(j=0,K=U;K;K=Ua(K))j++;for(;0<M-j;)yt=Ua(yt),M--;for(;0<j-M;)U=Ua(U),j--;for(;M--;){if(yt===U||U!==null&&yt===U.alternate)break e;yt=Ua(yt),U=Ua(U)}yt=null}else yt=null;H!==null&&n_(Z,q,H,yt,!1),Tt!==null&&Zt!==null&&n_(Z,Zt,Tt,yt,!0)}}t:{if(q=B?ir(B):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var ut=Tp;else if(vp(q))if(Ap)ut=c1;else{ut=l1;var Nt=o1}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&aa(B.elementType)&&(ut=Tp):ut=u1;if(ut&&(ut=ut(e,B))){Ep(Z,ut,a,Q);break t}Nt&&Nt(e,q,B),e==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&bo(q,"number",q.value)}switch(Nt=B?ir(B):window,e){case"focusin":(vp(Nt)||Nt.contentEditable==="true")&&(da=Nt,jh=B,Uo=null);break;case"focusout":Uo=jh=da=null;break;case"mousedown":zh=!0;break;case"contextmenu":case"mouseup":case"dragend":zh=!1,Np(Z,a,Q);break;case"selectionchange":if(f1)break;case"keydown":case"keyup":Np(Z,a,Q)}var dt;if(St)t:{switch(e){case"compositionstart":var _t="onCompositionStart";break t;case"compositionend":_t="onCompositionEnd";break t;case"compositionupdate":_t="onCompositionUpdate";break t}_t=void 0}else Bn?jn(e,a)&&(_t="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(_t="onCompositionStart");_t&&(pe&&a.locale!=="ko"&&(Bn||_t!=="onCompositionStart"?_t==="onCompositionEnd"&&Bn&&(dt=hu()):(wn=Q,ee="value"in wn?wn.value:wn.textContent,Bn=!0)),Nt=sc(B,_t),0<Nt.length&&(_t=new Do(_t,e,null,a,Q),Z.push({event:_t,listeners:Nt}),dt?_t.data=dt:(dt=zn(a),dt!==null&&(_t.data=dt)))),(dt=Ft?Mo(e,a):r1(e,a))&&(_t=sc(B,"onBeforeInput"),0<_t.length&&(Nt=new Do("onBeforeInput","beforeinput",null,a,Q),Z.push({event:Nt,listeners:_t}),Nt.data=dt)),K1(Z,e,B,a,Q)}t_(Z,i)})}function hl(e,i,a){return{instance:e,listener:i,currentTarget:a}}function sc(e,i){for(var a=i+"Capture",o=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=ur(e,a),h!=null&&o.unshift(hl(e,h,d)),h=ur(e,i),h!=null&&o.push(hl(e,h,d))),e.tag===3)return o;e=e.return}return[]}function Ua(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function n_(e,i,a,o,h){for(var d=i._reactName,v=[];a!==null&&a!==o;){var A=a,x=A.alternate,B=A.stateNode;if(A=A.tag,x!==null&&x===o)break;A!==5&&A!==26&&A!==27||B===null||(x=B,h?(B=ur(a,d),B!=null&&v.unshift(hl(a,B,x))):h||(B=ur(a,d),B!=null&&v.push(hl(a,B,x)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var J1=/\r\n?/g,W1=/\u0000|\uFFFD/g;function i_(e){return(typeof e=="string"?e:""+e).replace(J1,`
`).replace(W1,"")}function r_(e,i){return i=i_(i),i_(e)===i}function ac(){}function $t(e,i,a,o,h,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||Sn(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&Sn(e,""+o);break;case"className":ss(e,"class",o);break;case"tabIndex":ss(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ss(e,a,o);break;case"style":wo(e,o,d);break;case"data":if(i!=="object"){ss(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Ln(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&$t(e,i,"name",h.name,h,null),$t(e,i,"formEncType",h.formEncType,h,null),$t(e,i,"formMethod",h.formMethod,h,null),$t(e,i,"formTarget",h.formTarget,h,null)):($t(e,i,"encType",h.encType,h,null),$t(e,i,"method",h.method,h,null),$t(e,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Ln(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=ac);break;case"onScroll":o!=null&&Ot("scroll",e);break;case"onScrollEnd":o!=null&&Ot("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Ln(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Ot("beforetoggle",e),Ot("toggle",e),rs(e,"popover",o);break;case"xlinkActuate":bn(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":bn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":bn(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":bn(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":bn(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":bn(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":bn(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":bn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":bn(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":rs(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=lu.get(a)||a,rs(e,a,o))}}function cd(e,i,a,o,h,d){switch(a){case"style":wo(e,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Sn(e,o):(typeof o=="number"||typeof o=="bigint")&&Sn(e,""+o);break;case"onScroll":o!=null&&Ot("scroll",e);break;case"onScrollEnd":o!=null&&Ot("scrollend",e);break;case"onClick":o!=null&&(e.onclick=ac);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ns.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=e[Ue]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):rs(e,a,o)}}}function ze(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",e),Ot("load",e);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:$t(e,i,d,v,a,null)}}h&&$t(e,i,"srcSet",a.srcSet,a,null),o&&$t(e,i,"src",a.src,a,null);return;case"input":Ot("invalid",e);var A=d=v=h=null,x=null,B=null;for(o in a)if(a.hasOwnProperty(o)){var Q=a[o];if(Q!=null)switch(o){case"name":h=Q;break;case"type":v=Q;break;case"checked":x=Q;break;case"defaultChecked":B=Q;break;case"value":d=Q;break;case"defaultValue":A=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:$t(e,i,o,Q,a,null)}}Ao(e,d,A,x,B,v,h,!1),ar(e);return;case"select":Ot("invalid",e),o=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(A=a[h],A!=null))switch(h){case"value":d=A;break;case"defaultValue":v=A;break;case"multiple":o=A;default:$t(e,i,h,A,a,null)}i=d,a=v,e.multiple=!!o,i!=null?or(e,!!o,i,!1):a!=null&&or(e,!!o,a,!0);return;case"textarea":Ot("invalid",e),d=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(A=a[v],A!=null))switch(v){case"value":o=A;break;case"defaultValue":h=A;break;case"children":d=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:$t(e,i,v,A,a,null)}ou(e,o,h,d),ar(e);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(o=a[x],o!=null))switch(x){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:$t(e,i,x,o,a,null)}return;case"dialog":Ot("beforetoggle",e),Ot("toggle",e),Ot("cancel",e),Ot("close",e);break;case"iframe":case"object":Ot("load",e);break;case"video":case"audio":for(o=0;o<cl.length;o++)Ot(cl[o],e);break;case"image":Ot("error",e),Ot("load",e);break;case"details":Ot("toggle",e);break;case"embed":case"source":case"link":Ot("error",e),Ot("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(o=a[B],o!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:$t(e,i,B,o,a,null)}return;default:if(aa(i)){for(Q in a)a.hasOwnProperty(Q)&&(o=a[Q],o!==void 0&&cd(e,i,Q,o,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(o=a[A],o!=null&&$t(e,i,A,o,a,null))}function tA(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,A=null,x=null,B=null,Q=null;for(H in a){var Z=a[H];if(a.hasOwnProperty(H)&&Z!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":x=Z;default:o.hasOwnProperty(H)||$t(e,i,H,null,o,Z)}}for(var q in o){var H=o[q];if(Z=a[q],o.hasOwnProperty(q)&&(H!=null||Z!=null))switch(q){case"type":d=H;break;case"name":h=H;break;case"checked":B=H;break;case"defaultChecked":Q=H;break;case"value":v=H;break;case"defaultValue":A=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:H!==Z&&$t(e,i,q,H,o,Z)}}To(e,v,A,x,B,Q,d,h);return;case"select":H=v=A=q=null;for(d in a)if(x=a[d],a.hasOwnProperty(d)&&x!=null)switch(d){case"value":break;case"multiple":H=x;default:o.hasOwnProperty(d)||$t(e,i,d,null,o,x)}for(h in o)if(d=o[h],x=a[h],o.hasOwnProperty(h)&&(d!=null||x!=null))switch(h){case"value":q=d;break;case"defaultValue":A=d;break;case"multiple":v=d;default:d!==x&&$t(e,i,h,d,o,x)}i=A,a=v,o=H,q!=null?or(e,!!a,q,!1):!!o!=!!a&&(i!=null?or(e,!!a,i,!0):or(e,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(A in a)if(h=a[A],a.hasOwnProperty(A)&&h!=null&&!o.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:$t(e,i,A,null,o,h)}for(v in o)if(h=o[v],d=a[v],o.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":q=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&$t(e,i,v,h,o,d)}au(e,q,H);return;case"option":for(var Tt in a)if(q=a[Tt],a.hasOwnProperty(Tt)&&q!=null&&!o.hasOwnProperty(Tt))switch(Tt){case"selected":e.selected=!1;break;default:$t(e,i,Tt,null,o,q)}for(x in o)if(q=o[x],H=a[x],o.hasOwnProperty(x)&&q!==H&&(q!=null||H!=null))switch(x){case"selected":e.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:$t(e,i,x,q,o,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in a)q=a[yt],a.hasOwnProperty(yt)&&q!=null&&!o.hasOwnProperty(yt)&&$t(e,i,yt,null,o,q);for(B in o)if(q=o[B],H=a[B],o.hasOwnProperty(B)&&q!==H&&(q!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:$t(e,i,B,q,o,H)}return;default:if(aa(i)){for(var Zt in a)q=a[Zt],a.hasOwnProperty(Zt)&&q!==void 0&&!o.hasOwnProperty(Zt)&&cd(e,i,Zt,void 0,o,q);for(Q in o)q=o[Q],H=a[Q],!o.hasOwnProperty(Q)||q===H||q===void 0&&H===void 0||cd(e,i,Q,q,o,H);return}}for(var U in a)q=a[U],a.hasOwnProperty(U)&&q!=null&&!o.hasOwnProperty(U)&&$t(e,i,U,null,o,q);for(Z in o)q=o[Z],H=a[Z],!o.hasOwnProperty(Z)||q===H||q==null&&H==null||$t(e,i,Z,q,o,H)}var hd=null,fd=null;function oc(e){return e.nodeType===9?e:e.ownerDocument}function s_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function a_(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function dd(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var md=null;function eA(){var e=window.event;return e&&e.type==="popstate"?e===md?!1:(md=e,!0):(md=null,!1)}var o_=typeof setTimeout=="function"?setTimeout:void 0,nA=typeof clearTimeout=="function"?clearTimeout:void 0,l_=typeof Promise=="function"?Promise:void 0,iA=typeof queueMicrotask=="function"?queueMicrotask:typeof l_<"u"?function(e){return l_.resolve(null).then(e).catch(rA)}:o_;function rA(e){setTimeout(function(){throw e})}function Ir(e){return e==="head"}function u_(e,i){var a=i,o=0,h=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&fl(v.documentElement),a&2&&fl(v.body),a&4)for(a=v.head,fl(a),v=a.firstChild;v;){var A=v.nextSibling,x=v.nodeName;v[nr]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=A}}if(h===0){e.removeChild(d),El(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=d}while(a);El(i)}function pd(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":pd(a),ea(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function sA(e,i,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[nr])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Gn(e.nextSibling),e===null)break}return null}function aA(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Gn(e.nextSibling),e===null))return null;return e}function gd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function oA(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Gn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var yd=null;function c_(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function h_(e,i,a){switch(i=oc(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function fl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);ea(e)}var On=new Map,f_=new Set;function lc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ji=st.d;st.d={f:lA,r:uA,D:cA,C:hA,L:fA,m:dA,X:pA,S:mA,M:gA};function lA(){var e=ji.f(),i=Wu();return e||i}function uA(e){var i=Wn(e);i!==null&&i.tag===5&&i.type==="form"?Og(i):ji.r(e)}var La=typeof document>"u"?null:document;function d_(e,i,a){var o=La;if(o&&typeof i=="string"&&i){var h=Oe(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),f_.has(h)||(f_.add(h),e={rel:e,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),ze(i,"link",e),me(i),o.head.appendChild(i)))}}function cA(e){ji.D(e),d_("dns-prefetch",e,null)}function hA(e,i){ji.C(e,i),d_("preconnect",e,i)}function fA(e,i,a){ji.L(e,i,a);var o=La;if(o&&e&&i){var h='link[rel="preload"][as="'+Oe(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Oe(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Oe(a.imageSizes)+'"]')):h+='[href="'+Oe(e)+'"]';var d=h;switch(i){case"style":d=ja(e);break;case"script":d=za(e)}On.has(d)||(e=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),On.set(d,e),o.querySelector(h)!==null||i==="style"&&o.querySelector(dl(d))||i==="script"&&o.querySelector(ml(d))||(i=o.createElement("link"),ze(i,"link",e),me(i),o.head.appendChild(i)))}}function dA(e,i){ji.m(e,i);var a=La;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Oe(o)+'"][href="'+Oe(e)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=za(e)}if(!On.has(d)&&(e=T({rel:"modulepreload",href:e},i),On.set(d,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ml(d)))return}o=a.createElement("link"),ze(o,"link",e),me(o),a.head.appendChild(o)}}}function mA(e,i,a){ji.S(e,i,a);var o=La;if(o&&e){var h=rr(o).hoistableStyles,d=ja(e);i=i||"default";var v=h.get(d);if(!v){var A={loading:0,preload:null};if(v=o.querySelector(dl(d)))A.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":i},a),(a=On.get(d))&&_d(e,a);var x=v=o.createElement("link");me(x),ze(x,"link",e),x._p=new Promise(function(B,Q){x.onload=B,x.onerror=Q}),x.addEventListener("load",function(){A.loading|=1}),x.addEventListener("error",function(){A.loading|=2}),A.loading|=4,uc(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:A},h.set(d,v)}}}function pA(e,i){ji.X(e,i);var a=La;if(a&&e){var o=rr(a).hoistableScripts,h=za(e),d=o.get(h);d||(d=a.querySelector(ml(h)),d||(e=T({src:e,async:!0},i),(i=On.get(h))&&vd(e,i),d=a.createElement("script"),me(d),ze(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function gA(e,i){ji.M(e,i);var a=La;if(a&&e){var o=rr(a).hoistableScripts,h=za(e),d=o.get(h);d||(d=a.querySelector(ml(h)),d||(e=T({src:e,async:!0,type:"module"},i),(i=On.get(h))&&vd(e,i),d=a.createElement("script"),me(d),ze(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function m_(e,i,a,o){var h=(h=it.current)?lc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ja(a.href),a=rr(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=ja(a.href);var d=rr(h).hoistableStyles,v=d.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=h.querySelector(dl(e)))&&!d._p&&(v.instance=d,v.state.loading=5),On.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},On.set(e,a),d||yA(h,e,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=za(a),a=rr(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function ja(e){return'href="'+Oe(e)+'"'}function dl(e){return'link[rel="stylesheet"]['+e+"]"}function p_(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function yA(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),ze(i,"link",a),me(i),e.head.appendChild(i))}function za(e){return'[src="'+Oe(e)+'"]'}function ml(e){return"script[async]"+e}function g_(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+Oe(a.href)+'"]');if(o)return i.instance=o,me(o),o;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),me(o),ze(o,"style",h),uc(o,a.precedence,e),i.instance=o;case"stylesheet":h=ja(a.href);var d=e.querySelector(dl(h));if(d)return i.state.loading|=4,i.instance=d,me(d),d;o=p_(a),(h=On.get(h))&&_d(o,h),d=(e.ownerDocument||e).createElement("link"),me(d);var v=d;return v._p=new Promise(function(A,x){v.onload=A,v.onerror=x}),ze(d,"link",o),i.state.loading|=4,uc(d,a.precedence,e),i.instance=d;case"script":return d=za(a.src),(h=e.querySelector(ml(d)))?(i.instance=h,me(h),h):(o=a,(h=On.get(d))&&(o=T({},a),vd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),me(h),ze(h,"link",o),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,uc(o,a.precedence,e));return i.instance}function uc(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,v=0;v<o.length;v++){var A=o[v];if(A.dataset.precedence===i)d=A;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function _d(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function vd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var cc=null;function y_(e,i,a){if(cc===null){var o=new Map,h=cc=new Map;h.set(a,o)}else h=cc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[nr]||d[de]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=e+v;var A=o.get(v);A?A.push(d):o.set(v,[d])}}return o}function __(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function _A(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function v_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var pl=null;function vA(){}function EA(e,i,a){if(pl===null)throw Error(s(475));var o=pl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=ja(a.href),d=e.querySelector(dl(h));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=hc.bind(o),e.then(o,o)),i.state.loading|=4,i.instance=d,me(d);return}d=e.ownerDocument||e,a=p_(a),(h=On.get(h))&&_d(a,h),d=d.createElement("link"),me(d);var v=d;v._p=new Promise(function(A,x){v.onload=A,v.onerror=x}),ze(d,"link",a),i.instance=d}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=hc.bind(o),e.addEventListener("load",i),e.addEventListener("error",i))}}function TA(){if(pl===null)throw Error(s(475));var e=pl;return e.stylesheets&&e.count===0&&Ed(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&Ed(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function hc(){if(this.count--,this.count===0){if(this.stylesheets)Ed(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var fc=null;function Ed(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,fc=new Map,i.forEach(AA,e),fc=null,hc.call(e))}function AA(e,i){if(!(i.state.loading&4)){var a=fc.get(e);if(a)var o=a.get(null);else{a=new Map,fc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||o,d===o&&a.set(null,h),a.set(v,h),this.count++,o=hc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var gl={$$typeof:pt,Provider:null,Consumer:null,_currentValue:ft,_currentValue2:ft,_threadCount:0};function bA(e,i,a,o,h,d,v,A){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ta(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ta(0),this.hiddenUpdates=ta(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function E_(e,i,a,o,h,d,v,A,x,B,Q,Z){return e=new bA(e,i,a,v,A,x,B,Z),i=1,d===!0&&(i|=24),d=mn(3,null,null,i),e.current=d,d.stateNode=e,i=tf(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},sf(d),e}function T_(e){return e?(e=ya,e):ya}function A_(e,i,a,o,h,d){h=T_(h),o.context===null?o.context=h:o.pendingContext=h,o=mr(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=pr(e,o,i),a!==null&&(vn(a,e,i),Qo(a,e,i))}function b_(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Td(e,i){b_(e,i),(e=e.alternate)&&b_(e,i)}function S_(e){if(e.tag===13){var i=ga(e,67108864);i!==null&&vn(i,e,67108864),Td(e,67108864)}}var dc=!0;function SA(e,i,a,o){var h=F.T;F.T=null;var d=st.p;try{st.p=2,Ad(e,i,a,o)}finally{st.p=d,F.T=h}}function wA(e,i,a,o){var h=F.T;F.T=null;var d=st.p;try{st.p=8,Ad(e,i,a,o)}finally{st.p=d,F.T=h}}function Ad(e,i,a,o){if(dc){var h=bd(o);if(h===null)ud(e,i,o,mc,a),R_(e,o);else if(IA(h,e,i,a,o))o.stopPropagation();else if(R_(e,o),i&4&&-1<RA.indexOf(e)){for(;h!==null;){var d=Wn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=kn(d.pendingLanes);if(v!==0){var A=d;for(A.pendingLanes|=2,A.entangledLanes|=2;v;){var x=1<<31-We(v);A.entanglements[1]|=x,v&=~x}ui(d),(Qt&6)===0&&(Zu=sn()+500,ul(0))}}break;case 13:A=ga(d,2),A!==null&&vn(A,d,2),Wu(),Td(d,2)}if(d=bd(o),d===null&&ud(e,i,o,mc,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else ud(e,i,o,null,a)}}function bd(e){return e=Io(e),Sd(e)}var mc=null;function Sd(e){if(mc=null,e=Jn(e),e!==null){var i=c(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=f(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return mc=e,null}function w_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(eu()){case Re:return 2;case De:return 8;case vi:case xh:return 32;case yo:return 268435456;default:return 32}default:return 32}}var wd=!1,xr=null,Cr=null,Nr=null,yl=new Map,_l=new Map,Dr=[],RA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function R_(e,i){switch(e){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":yl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(i.pointerId)}}function vl(e,i,a,o,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Wn(i),i!==null&&S_(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function IA(e,i,a,o,h){switch(i){case"focusin":return xr=vl(xr,e,i,a,o,h),!0;case"dragenter":return Cr=vl(Cr,e,i,a,o,h),!0;case"mouseover":return Nr=vl(Nr,e,i,a,o,h),!0;case"pointerover":var d=h.pointerId;return yl.set(d,vl(yl.get(d)||null,e,i,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,_l.set(d,vl(_l.get(d)||null,e,i,a,o,h)),!0}return!1}function I_(e){var i=Jn(e.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){e.blockedOn=i,Dh(e.priority,function(){if(a.tag===13){var o=_n();o=vo(o);var h=ga(a,o);h!==null&&vn(h,a,o),Td(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=bd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Ro=o,a.target.dispatchEvent(o),Ro=null}else return i=Wn(a),i!==null&&S_(i),e.blockedOn=a,!1;i.shift()}return!0}function x_(e,i,a){pc(e)&&a.delete(i)}function xA(){wd=!1,xr!==null&&pc(xr)&&(xr=null),Cr!==null&&pc(Cr)&&(Cr=null),Nr!==null&&pc(Nr)&&(Nr=null),yl.forEach(x_),_l.forEach(x_)}function gc(e,i){e.blockedOn===i&&(e.blockedOn=null,wd||(wd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,xA)))}var yc=null;function C_(e){yc!==e&&(yc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){yc===e&&(yc=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],h=e[i+2];if(typeof o!="function"){if(Sd(o||a)===null)continue;break}var d=Wn(a);d!==null&&(e.splice(i,3),i-=3,Sf(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function El(e){function i(x){return gc(x,e)}xr!==null&&gc(xr,e),Cr!==null&&gc(Cr,e),Nr!==null&&gc(Nr,e),yl.forEach(i),_l.forEach(i);for(var a=0;a<Dr.length;a++){var o=Dr[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Dr.length&&(a=Dr[0],a.blockedOn===null);)I_(a),a.blockedOn===null&&Dr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],v=h[Ue]||null;if(typeof d=="function")v||C_(a);else if(v){var A=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Ue]||null)A=v.formAction;else if(Sd(h)!==null)continue}else A=v.action;typeof A=="function"?a[o+1]=A:(a.splice(o,3),o-=3),C_(a)}}}function Rd(e){this._internalRoot=e}_c.prototype.render=Rd.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=_n();A_(a,o,e,i,null,null)},_c.prototype.unmount=Rd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;A_(e.current,2,null,e,null,null),Wu(),i[Ti]=null}};function _c(e){this._internalRoot=e}_c.prototype.unstable_scheduleHydration=function(e){if(e){var i=Ei();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Dr.length&&i!==0&&i<Dr[a].priority;a++);Dr.splice(a,0,e),a===0&&I_(e)}};var N_=t.version;if(N_!=="19.1.1")throw Error(s(527,N_,"19.1.1"));st.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=y(i),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var CA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vc.isDisabled&&vc.supportsFiber)try{$i=vc.inject(CA),Fe=vc}catch{}}return Al.createRoot=function(e,i){if(!l(e))throw Error(s(299));var a=!1,o="",h=Qg,d=Yg,v=Kg,A=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks)),i=E_(e,1,!1,null,null,a,o,h,d,v,A,null),e[Ti]=i.current,ld(e),new Rd(i)},Al.hydrateRoot=function(e,i,a){if(!l(e))throw Error(s(299));var o=!1,h="",d=Qg,v=Yg,A=Kg,x=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(x=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),i=E_(e,1,!0,i,a??null,o,h,d,v,A,x,B),i.context=T_(null),a=i.current,o=_n(),o=vo(o),h=mr(o),h.callback=null,pr(a,h,o),a=o,i.current.lanes=a,fe(i,a),ui(i),e[Ti]=i.current,ld(e),new _c(i)},Al.version="19.1.1",Al}var z_;function zA(){if(z_)return Cd.exports;z_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Cd.exports=jA(),Cd.exports}var BA=zA();const qA=_0(BA);var Md={exports:{}},It={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function HA(){if(B_)return It;B_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),w=Symbol.iterator;function N(E){return E===null||typeof E!="object"?null:(E=w&&E[w]||E["@@iterator"],typeof E=="function"?E:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},et=Object.assign,W={};function tt(E,k,$){this.props=E,this.context=k,this.refs=W,this.updater=$||L}tt.prototype.isReactComponent={},tt.prototype.setState=function(E,k){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,k,"setState")},tt.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function ht(){}ht.prototype=tt.prototype;function gt(E,k,$){this.props=E,this.context=k,this.refs=W,this.updater=$||L}var pt=gt.prototype=new ht;pt.constructor=gt,et(pt,tt.prototype),pt.isPureReactComponent=!0;var jt=Array.isArray,at={H:null,A:null,T:null,S:null,V:null},Ct=Object.prototype.hasOwnProperty;function O(E,k,$,Y,nt,ct){return $=ct.ref,{$$typeof:r,type:E,key:k,ref:$!==void 0?$:null,props:ct}}function R(E,k){return O(E.type,k,void 0,void 0,void 0,E.props)}function I(E){return typeof E=="object"&&E!==null&&E.$$typeof===r}function V(E){var k={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function($){return k[$]})}var D=/\/+/g;function P(E,k){return typeof E=="object"&&E!==null&&E.key!=null?V(""+E.key):k.toString(36)}function C(){}function se(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(C,C):(E.status="pending",E.then(function(k){E.status==="pending"&&(E.status="fulfilled",E.value=k)},function(k){E.status==="pending"&&(E.status="rejected",E.reason=k)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function qt(E,k,$,Y,nt){var ct=typeof E;(ct==="undefined"||ct==="boolean")&&(E=null);var it=!1;if(E===null)it=!0;else switch(ct){case"bigint":case"string":case"number":it=!0;break;case"object":switch(E.$$typeof){case r:case t:it=!0;break;case T:return it=E._init,qt(it(E._payload),k,$,Y,nt)}}if(it)return nt=nt(E),it=Y===""?"."+P(E,0):Y,jt(nt)?($="",it!=null&&($=it.replace(D,"$&/")+"/"),qt(nt,k,$,"",function(hn){return hn})):nt!=null&&(I(nt)&&(nt=R(nt,$+(nt.key==null||E&&E.key===nt.key?"":(""+nt.key).replace(D,"$&/")+"/")+it)),k.push(nt)),1;it=0;var te=Y===""?".":Y+":";if(jt(E))for(var Et=0;Et<E.length;Et++)Y=E[Et],ct=te+P(Y,Et),it+=qt(Y,k,$,ct,nt);else if(Et=N(E),typeof Et=="function")for(E=Et.call(E),Et=0;!(Y=E.next()).done;)Y=Y.value,ct=te+P(Y,Et++),it+=qt(Y,k,$,ct,nt);else if(ct==="object"){if(typeof E.then=="function")return qt(se(E),k,$,Y,nt);throw k=String(E),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}return it}function F(E,k,$){if(E==null)return E;var Y=[],nt=0;return qt(E,Y,"","",function(ct){return k.call($,ct,nt++)}),Y}function st(E){if(E._status===-1){var k=E._result;k=k(),k.then(function($){(E._status===0||E._status===-1)&&(E._status=1,E._result=$)},function($){(E._status===0||E._status===-1)&&(E._status=2,E._result=$)}),E._status===-1&&(E._status=0,E._result=k)}if(E._status===1)return E._result.default;throw E._result}var ft=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var k=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(k))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)};function Pt(){}return It.Children={map:F,forEach:function(E,k,$){F(E,function(){k.apply(this,arguments)},$)},count:function(E){var k=0;return F(E,function(){k++}),k},toArray:function(E){return F(E,function(k){return k})||[]},only:function(E){if(!I(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},It.Component=tt,It.Fragment=n,It.Profiler=l,It.PureComponent=gt,It.StrictMode=s,It.Suspense=y,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=at,It.__COMPILER_RUNTIME={__proto__:null,c:function(E){return at.H.useMemoCache(E)}},It.cache=function(E){return function(){return E.apply(null,arguments)}},It.cloneElement=function(E,k,$){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var Y=et({},E.props),nt=E.key,ct=void 0;if(k!=null)for(it in k.ref!==void 0&&(ct=void 0),k.key!==void 0&&(nt=""+k.key),k)!Ct.call(k,it)||it==="key"||it==="__self"||it==="__source"||it==="ref"&&k.ref===void 0||(Y[it]=k[it]);var it=arguments.length-2;if(it===1)Y.children=$;else if(1<it){for(var te=Array(it),Et=0;Et<it;Et++)te[Et]=arguments[Et+2];Y.children=te}return O(E.type,nt,void 0,void 0,ct,Y)},It.createContext=function(E){return E={$$typeof:f,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:c,_context:E},E},It.createElement=function(E,k,$){var Y,nt={},ct=null;if(k!=null)for(Y in k.key!==void 0&&(ct=""+k.key),k)Ct.call(k,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(nt[Y]=k[Y]);var it=arguments.length-2;if(it===1)nt.children=$;else if(1<it){for(var te=Array(it),Et=0;Et<it;Et++)te[Et]=arguments[Et+2];nt.children=te}if(E&&E.defaultProps)for(Y in it=E.defaultProps,it)nt[Y]===void 0&&(nt[Y]=it[Y]);return O(E,ct,void 0,void 0,null,nt)},It.createRef=function(){return{current:null}},It.forwardRef=function(E){return{$$typeof:p,render:E}},It.isValidElement=I,It.lazy=function(E){return{$$typeof:T,_payload:{_status:-1,_result:E},_init:st}},It.memo=function(E,k){return{$$typeof:g,type:E,compare:k===void 0?null:k}},It.startTransition=function(E){var k=at.T,$={};at.T=$;try{var Y=E(),nt=at.S;nt!==null&&nt($,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(Pt,ft)}catch(ct){ft(ct)}finally{at.T=k}},It.unstable_useCacheRefresh=function(){return at.H.useCacheRefresh()},It.use=function(E){return at.H.use(E)},It.useActionState=function(E,k,$){return at.H.useActionState(E,k,$)},It.useCallback=function(E,k){return at.H.useCallback(E,k)},It.useContext=function(E){return at.H.useContext(E)},It.useDebugValue=function(){},It.useDeferredValue=function(E,k){return at.H.useDeferredValue(E,k)},It.useEffect=function(E,k,$){var Y=at.H;if(typeof $=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(E,k)},It.useId=function(){return at.H.useId()},It.useImperativeHandle=function(E,k,$){return at.H.useImperativeHandle(E,k,$)},It.useInsertionEffect=function(E,k){return at.H.useInsertionEffect(E,k)},It.useLayoutEffect=function(E,k){return at.H.useLayoutEffect(E,k)},It.useMemo=function(E,k){return at.H.useMemo(E,k)},It.useOptimistic=function(E,k){return at.H.useOptimistic(E,k)},It.useReducer=function(E,k,$){return at.H.useReducer(E,k,$)},It.useRef=function(E){return at.H.useRef(E)},It.useState=function(E){return at.H.useState(E)},It.useSyncExternalStore=function(E,k,$){return at.H.useSyncExternalStore(E,k,$)},It.useTransition=function(){return at.H.useTransition()},It.version="19.1.1",It}var q_;function GA(){return q_||(q_=1,Md.exports=HA()),Md.exports}var Il=GA();/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QA=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),H_=r=>{const t=QA(r);return t.charAt(0).toUpperCase()+t.slice(1)},v0=(...r)=>r.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),YA=r=>{for(const t in r)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var KA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=Il.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:l="",children:c,iconNode:f,...p},y)=>Il.createElement("svg",{ref:y,...KA,width:t,height:t,stroke:r,strokeWidth:s?Number(n)*24/Number(t):n,className:v0("lucide",l),...!c&&!YA(p)&&{"aria-hidden":"true"},...p},[...f.map(([g,T])=>Il.createElement(g,T)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(r,t)=>{const n=Il.forwardRef(({className:s,...l},c)=>Il.createElement(XA,{ref:c,iconNode:t,className:v0(`lucide-${FA(H_(r))}`,`lucide-${r}`,s),...l}));return n.displayName=H_(r),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],E0=we("arrow-left",$A);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Vl=we("calendar",ZA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],WA=we("check",JA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],T0=we("circle-plus",tb);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],nb=we("crown",eb);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],A0=we("external-link",ib);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],sb=we("funnel",rb);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ob=we("image",ab);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],ub=we("layout-dashboard",lb);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Pc=we("loader",cb);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Yd=we("log-in",hb);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],db=we("log-out",fb);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],zs=we("map-pin",mb);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],gb=we("plane",pb);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Kd=we("plus",yb);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Xd=we("search",_b);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Eb=we("tag",vb);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],b0=we("trash-2",Tb);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],kl=we("users",Ab);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Sb=we("x",bb),Uc=({children:r,onClick:t,variant:n="primary",icon:s,disabled:l=!1,type:c="button",className:f=""})=>{const p="px-6 py-3 rounded-xl font-medium transition duration-200 flex items-center justify-center gap-2",y={primary:"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:shadow-lg transform hover:scale-105",secondary:"bg-white text-gray-700 border-2 border-gray-200 hover:border-purple-400",danger:"bg-red-500 text-white hover:bg-red-600",success:"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:shadow-lg transform hover:scale-105"};return b.jsxs("button",{type:c,onClick:t,disabled:l,className:`${p} ${y[n]} ${l?"opacity-50 cursor-not-allowed":""} ${f}`,children:[s&&b.jsx(s,{size:20}),r]})},wb=({onLogin:r,onBack:t})=>{const[n,s]=Wt.useState(""),l=c=>{c.preventDefault(),n.trim()&&r(n.trim())};return b.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[b.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-600 via-pink-500 to-orange-400"}),b.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"url(https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?w=1600)",backgroundSize:"cover",backgroundPosition:"center"}}),b.jsxs("div",{className:"relative z-10 w-full max-w-md",children:[b.jsxs("button",{type:"button",onClick:t,className:"mb-6 flex items-center gap-2 text-white hover:text-white/80 transition",children:[b.jsx(E0,{size:20}),"Back"]}),b.jsx("div",{className:"bg-white/95 backdrop-blur rounded-3xl shadow-2xl p-8",children:b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("div",{style:{textAlign:"center",fontSize:"38px",marginLeft:"20px",marginBottom:"10px"},children:"Welcome Back!"}),b.jsxs("form",{onSubmit:l,className:"space-y-6",children:[b.jsxs("span",{children:[b.jsx("label",{htmlFor:"tripId",className:"block text-sm font-large text-gray-700 mb-1",children:"Enter your Trip ID"}),b.jsx("input",{type:"text",id:"tripId",value:n,onChange:c=>s(c.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"e.g., trip123",required:!0}),b.jsx(Yd,{className:"mx-auto mb-4 text-purple-600",size:48})]}),b.jsxs(Uc,{type:"submit",className:"w-full flex items-center justify-center gap-2",children:[b.jsx(Yd,{size:16}),"Log In"]})]})]})})]})]})},Rb=({onCreateTrip:r,onBack:t})=>{const[n,s]=Wt.useState({name:"",destination:"",timezone:"America/New_York",startDate:"",endDate:""}),[l,c]=Wt.useState({}),[f,p]=Wt.useState(!1),[y,g]=Wt.useState(null),T=["America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Toronto","America/Vancouver","America/Halifax","America/St_Johns","America/Winnipeg","America/Regina","America/Edmonton","Europe/London","Europe/Paris","Europe/Berlin","Europe/Frankfurt","Europe/Madrid","Europe/Cologne","Europe/Amsterdam","Europe/Zurich","Europe/Warsaw","Europe/Prague","Europe/Vienna","Europe/Madrid","Europe/Rome","Europe/Amsterdam","Europe/Zurich","Europe/Warsaw","Europe/Prague","Europe/Vienna","Asia/Tokyo","Asia/Dubai","Australia/Sydney"],w=()=>{const L={};return n.name.trim()||(L.name="Trip name is required"),n.destination.trim()||(L.destination="Destination is required"),n.startDate||(L.startDate="Start date is required"),n.endDate||(L.endDate="End date is required"),n.startDate&&n.endDate&&new Date(n.endDate)<new Date(n.startDate)&&(L.endDate="End date must be after start date"),c(L),Object.keys(L).length===0},N=async L=>{if(L.preventDefault(),!!w()){p(!0);try{const et=await r(n);alert(`Trip created! Trip ID: ${et}

Share this ID with others to invite them.`),g(null)}catch(et){console.error("Error creating trip:",et),g(et&&et.message||"Failed to create trip. Please try again.")}finally{p(!1)}}};return b.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[b.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-600 via-pink-500 to-orange-400"}),b.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"url(https://images.unsplash.com/photo-1530789253388-582c481c54b0?w=1600)",backgroundSize:"cover",backgroundPosition:"center"}}),b.jsxs("div",{className:"relative z-10 w-full max-w-2xl",children:[y&&b.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-800 rounded-md",children:[b.jsx("strong",{className:"block font-medium",children:"Error"}),b.jsx("p",{className:"text-sm",children:y}),b.jsx("button",{className:"mt-2 text-xs text-red-600 underline",onClick:()=>g(null),children:"Dismiss"})]}),b.jsxs("button",{onClick:t,className:"mb-6 flex items-center gap-2 text-white hover:text-white/80 transition",children:[b.jsx(E0,{size:20}),"Back"]}),b.jsxs("div",{className:"bg-white/95 backdrop-blur rounded-3xl shadow-2xl p-8",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Create New Trip"}),b.jsx("p",{className:"text-gray-600",children:"Set up your trip and invite friends to join"})]}),b.jsxs("form",{onSubmit:N,className:"space-y-6",children:[b.jsxs("div",{children:[b.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Trip Name ",b.jsx("span",{className:"text-red-500",children:"*"})]}),b.jsx("input",{type:"text",value:n.name,onChange:L=>s({...n,name:L.target.value}),placeholder:"e.g., European Adventure 2025",className:`input ${l.name?"border-red-500":""}`}),l.name&&b.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.name})]}),b.jsxs("div",{children:[b.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Destination ",b.jsx("span",{className:"text-red-500",children:"*"})]}),b.jsx("input",{type:"text",value:n.destination,onChange:L=>s({...n,destination:L.target.value}),placeholder:"e.g., Paris, France",className:`input ${l.destination?"border-red-500":""}`}),l.destination&&b.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.destination})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),b.jsx("select",{value:n.timezone,onChange:L=>s({...n,timezone:L.target.value}),className:"input",children:T.map(L=>b.jsx("option",{value:L,children:L.replace(/_/g," ")},L))})]}),b.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[b.jsxs("div",{children:[b.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Start Date ",b.jsx("span",{className:"text-red-500",children:"*"})]}),b.jsx("input",{type:"date",value:n.startDate,onChange:L=>s({...n,startDate:L.target.value}),className:`input ${l.startDate?"border-red-500":""}`}),l.startDate&&b.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.startDate})]}),b.jsxs("div",{children:[b.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["End Date ",b.jsx("span",{className:"text-red-500",children:"*"})]}),b.jsx("input",{type:"date",value:n.endDate,onChange:L=>s({...n,endDate:L.target.value}),className:`input ${l.endDate?"border-red-500":""}`}),l.endDate&&b.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.endDate})]})]}),b.jsx(Uc,{type:"submit",variant:"primary",icon:f?Pc:T0,disabled:f,className:"w-full",children:f?"Creating Trip...":"Create Trip"})]}),b.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:b.jsx("p",{className:"text-sm text-gray-600 text-center",children:"💡 After creating, you'll receive a Trip ID to share with others"})})]})]})]})},Ib=({onLogin:r,onCreateTrip:t})=>{const[n,s]=Wt.useState("splash");return n==="login"?b.jsx(wb,{onLogin:r,onBack:()=>s("splash")}):n==="create"?b.jsx(Rb,{onCreateTrip:t,onBack:()=>s("splash")}):b.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[b.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-600 via-pink-500 to-orange-400 animate-gradient-xy"}),b.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"url(https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=1600)",backgroundSize:"cover",backgroundPosition:"center"}}),b.jsxs("div",{className:"relative z-10 max-w-2xl w-full",children:[b.jsxs("div",{className:"text-center mb-12 animate-fade-in",children:[b.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-white rounded-full shadow-2xl mb-6 transform hover:scale-110 transition duration-300",children:b.jsx(gb,{size:48,className:"text-purple-600"})}),b.jsx("h1",{className:"text-6xl font-bold text-white mb-4 drop-shadow-lg",children:"TripTogether"}),b.jsx("p",{className:"text-2xl text-white/90 drop-shadow",children:"Plan adventures with friends & family"})]}),b.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[b.jsx("button",{onClick:()=>s("login"),className:"group bg-white/95 backdrop-blur rounded-3xl p-8 shadow-2xl hover:shadow-purple-500/50 transform hover:scale-105 transition duration-300",children:b.jsxs("div",{className:"flex flex-col items-center text-center",children:[b.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mb-4 group-hover:rotate-12 transition duration-300",children:b.jsx(Yd,{size:32,className:"text-white"})}),b.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Join a Trip"}),b.jsx("p",{className:"text-gray-600",children:"Already have a trip ID? Sign in with Google to join your friends!"})]})}),b.jsx("button",{onClick:()=>s("create"),className:"group bg-white/95 backdrop-blur rounded-3xl p-8 shadow-2xl hover:shadow-orange-500/50 transform hover:scale-105 transition duration-300",children:b.jsxs("div",{className:"flex flex-col items-center text-center",children:[b.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-pink-500 rounded-2xl flex items-center justify-center mb-4 group-hover:rotate-12 transition duration-300",children:b.jsx(T0,{size:32,className:"text-white"})}),b.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create a Trip"}),b.jsx("p",{className:"text-gray-600",children:"Start planning a new adventure and invite others to join!"})]})})]}),b.jsx("div",{className:"mt-12 bg-white/10 backdrop-blur rounded-2xl p-6",children:b.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center text-white",children:[b.jsxs("div",{children:[b.jsx("div",{className:"text-3xl font-bold mb-1",children:"✨"}),b.jsx("div",{className:"text-sm",children:"Collaborative Planning"})]}),b.jsxs("div",{children:[b.jsx("div",{className:"text-3xl font-bold mb-1",children:"📍"}),b.jsx("div",{className:"text-sm",children:"Activity Management"})]}),b.jsxs("div",{children:[b.jsx("div",{className:"text-3xl font-bold mb-1",children:"🎉"}),b.jsx("div",{className:"text-sm",children:"Fun & Exciting"})]})]})})]}),b.jsx("style",{children:`
        @keyframes gradient-xy {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient-xy {
          animation: gradient-xy 15s ease infinite;
          background-size: 400% 400%;
        }
        @keyframes fade-in {
          from { opacity: 0; transform: translateY(-20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
          animation: fade-in 0.6s ease-out;
        }
      `})]})},xb=({trip:r,user:t,memberCount:n,onLogout:s})=>{const l=()=>{const c=new Date(r.startDate).toLocaleDateString("en-US",{month:"short",day:"numeric"}),f=new Date(r.endDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${c} - ${f}`};return b.jsx("div",{className:"relative bg-white/95 backdrop-blur shadow-lg",children:b.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("h1",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:r.name}),b.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-1 text-sm text-gray-600",children:[b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx(zs,{size:14}),b.jsx("span",{children:r.destination})]}),b.jsx("span",{className:"hidden sm:inline",children:"•"}),b.jsx("span",{children:l()}),b.jsx("span",{className:"hidden sm:inline",children:"•"}),b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx(kl,{size:14}),b.jsxs("span",{children:[n," members"]})]})]})]}),b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsxs("div",{className:"hidden md:flex items-center gap-2 px-4 py-2 bg-purple-50 rounded-lg",children:[b.jsx("img",{src:t.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(t.displayName)}`,alt:t.displayName,className:"w-8 h-8 rounded-full"}),b.jsx("span",{className:"text-sm font-medium text-gray-700",children:t.displayName})]}),b.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition",children:[b.jsx(db,{size:18}),b.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})})})},Cb=({currentView:r,onViewChange:t})=>{const n=[{id:"dashboard",label:"My Dashboard",icon:ub},{id:"browse",label:"Browse Activities",icon:Xd}];return b.jsx("div",{className:"relative max-w-7xl mx-auto px-4 py-4",children:b.jsxs("div",{className:"flex gap-2 flex-wrap",children:[n.map(s=>{const l=s.icon;return b.jsxs("button",{onClick:()=>t(s.id),className:`px-6 py-2 rounded-lg font-medium transition flex items-center gap-2 ${r===s.id?"bg-white text-purple-600 shadow-lg":"bg-white/80 text-gray-700 hover:bg-white"}`,children:[b.jsx(l,{size:18}),b.jsx("span",{className:"hidden sm:inline",children:s.label})]},s.id)}),b.jsxs("button",{onClick:()=>t("create"),className:"ml-auto px-6 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg font-medium hover:shadow-lg transform hover:scale-105 transition flex items-center gap-2",children:[b.jsx(Kd,{size:18}),b.jsx("span",{className:"hidden sm:inline",children:"Create Activity"})]})]})})},Nb=r=>new Date(r).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),Db=r=>new Date(r).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),S0=r=>`${Nb(r)} at ${Db(r)}`,G_=r=>{try{return new URL(r),!0}catch{return!1}},Ob=({activity:r,currentUser:t,onToggleOptIn:n,onDeleteActivity:s,canEdit:l})=>(r.optedInUsers.includes(t.id),b.jsx("div",{className:"border-2 border-gray-200 rounded-xl p-4 hover:border-purple-400 transition",children:b.jsxs("div",{className:"flex gap-4",children:[b.jsx("div",{className:"flex-shrink-0",children:b.jsx("img",{src:r.thumbnailUrl,alt:r.name,className:"w-32 h-32 object-cover rounded-lg shadow-md",onError:c=>{c.target.src="https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?w=400"}})}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex items-start justify-between gap-4",children:[b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:r.name}),b.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:r.description})]}),b.jsx("div",{className:"flex gap-2 flex-shrink-0",children:l&&b.jsx("button",{onClick:()=>{confirm("Are you sure you want to delete this activity?")&&s(r.id)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition",title:"Delete activity",children:b.jsx(b0,{size:18})})})]}),b.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600 mb-3",children:[b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx(Vl,{size:16}),b.jsx("span",{children:S0(r.dateTime)})]}),b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx(zs,{size:16}),b.jsx("span",{className:"truncate",children:r.location})]}),b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx(kl,{size:16}),b.jsxs("span",{children:[r.optedInUsers.length," joined"]})]})]}),b.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:r.tags.map(c=>b.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-xs rounded-full font-medium",children:c},c))}),r.mapsLink&&b.jsxs("a",{href:r.mapsLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700 font-extra-large",children:[b.jsx(zs,{size:14}),"View on Google Maps",b.jsx(A0,{size:12})]})]})]})})),Mb=({activities:r,currentUser:t,onToggleOptIn:n,onDeleteActivity:s,isOwner:l})=>{const c=r.filter(f=>f.optedInUsers.includes(t.id)).sort((f,p)=>new Date(f.dateTime).getTime()-new Date(p.dateTime).getTime());return b.jsx("div",{className:"relative max-w-7xl mx-auto px-4 pb-8",children:b.jsxs("div",{className:"bg-white/95 backdrop-blur rounded-2xl shadow-xl p-6",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[b.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl",children:b.jsx(Vl,{className:"text-white",size:24})}),b.jsxs("div",{children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"My Activities"}),b.jsxs("p",{className:"text-sm text-gray-600",children:[c.length," ",c.length===1?"activity":"activities"," you're joining"]})]})]}),c.length===0?b.jsxs("div",{className:"text-center py-12",children:[b.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:b.jsx(Vl,{size:40,className:"text-gray-400"})}),b.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No activities yet"}),b.jsx("p",{className:"text-gray-500 mb-6",children:"Browse activities to join the fun!"})]}):b.jsx("div",{className:"grid gap-4",children:c.map(f=>b.jsx(Ob,{activity:f,currentUser:t,onToggleOptIn:n,onDeleteActivity:s,canEdit:f.creatorId===t.id||l},f.id))})]})})},Vb=({activity:r,currentUser:t,onToggleOptIn:n,onDeleteActivity:s,canEdit:l})=>{const c=r.optedInUsers.includes(t.id);return b.jsx("div",{className:"border-2 border-gray-200 rounded-xl p-4 hover:border-purple-400 transition bg-white",children:b.jsxs("div",{className:"flex gap-4",children:[b.jsx("div",{className:"flex-shrink-0",children:b.jsx("img",{src:r.thumbnailUrl,alt:r.name,className:"w-40 h-40 object-cover rounded-lg shadow-md",onError:f=>{f.target.src="https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?w=400"}})}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:r.name}),b.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Created by ",r.creatorName]}),b.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:r.description})]}),b.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[b.jsx("button",{onClick:()=>n(r.id,!c),className:`px-4 py-2 rounded-lg font-medium transition flex items-center gap-2 ${c?"bg-green-500 text-white hover:bg-green-600":"bg-purple-500 text-white hover:bg-purple-600"}`,children:c?b.jsxs(b.Fragment,{children:[b.jsx(WA,{size:18}),"Joined"]}):b.jsxs(b.Fragment,{children:[b.jsx(kl,{size:18}),"Join"]})}),l&&b.jsx("button",{onClick:()=>{confirm("Are you sure you want to delete this activity?")&&s(r.id)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition",title:"Delete activity",children:b.jsx(b0,{size:18})})]})]}),b.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600 mb-3",children:[b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx(Vl,{size:16}),b.jsx("span",{children:S0(r.dateTime)})]}),b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx(zs,{size:16}),b.jsx("span",{className:"truncate",children:r.location})]}),b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx(kl,{size:16}),b.jsxs("span",{children:[r.optedInUsers.length," joined"]})]})]}),b.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:r.tags.map(f=>b.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-xs rounded-full font-medium",children:f},f))}),r.mapsLink&&b.jsxs("a",{href:r.mapsLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700 font-extra-large",children:[b.jsx(zs,{size:14}),"View on Google Maps",b.jsx(A0,{size:12})]})]})]})})},w0=["sightseeing","museum","concert","hike","shopping","food","art","culture","cruise","evening","romantic","adventure","landmark","beach","sports","family time","get together","nightlife"],kb=({filterDate:r,filterMember:t,filterTags:n,members:s,onFilterDateChange:l,onFilterMemberChange:c,onFilterTagsChange:f})=>{const p=T=>{n.includes(T)?f(n.filter(w=>w!==T)):f([...n,T])},y=()=>{l(""),c(""),f([])},g=r||t||n.length>0;return b.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-4 bg-gray-50",children:[b.jsxs("div",{className:"flex items-center justify-between mb-4",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx(sb,{size:20,className:"text-gray-600"}),b.jsx("h3",{className:"font-semibold text-gray-800",children:"Filters"})]}),g&&b.jsxs("button",{onClick:y,className:"text-sm text-purple-600 hover:text-purple-700 font-medium flex items-center gap-1",children:[b.jsx(Sb,{size:16}),"Clear all"]})]}),b.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Date"}),b.jsx("input",{type:"date",value:r,onChange:T=>l(T.target.value),className:"input"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Creator"}),b.jsxs("select",{value:t,onChange:T=>c(T.target.value),className:"input",children:[b.jsx("option",{value:"",children:"All members"}),s.map(T=>b.jsx("option",{value:T.id,children:T.displayName},T.id))]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Active Filters"}),b.jsxs("div",{className:"flex flex-wrap gap-2",children:[!g&&b.jsx("span",{className:"text-sm text-gray-500 italic",children:"No filters applied"}),r&&b.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-full",children:["Date: ",new Date(r).toLocaleDateString()]}),t&&b.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-sm rounded-full",children:s.find(T=>T.id===t)?.displayName})]})]})]}),b.jsxs("div",{className:"mt-4",children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Tags"}),b.jsx("div",{className:"flex flex-wrap gap-2",children:w0.map(T=>b.jsx("button",{onClick:()=>p(T),className:`px-4 py-2 rounded-lg text-sm font-medium transition ${n.includes(T)?"bg-purple-500 text-white":"bg-white text-gray-700 border-2 border-gray-200 hover:border-purple-300"}`,children:T},T))})]})]})},Pb=({activities:r,currentUser:t,members:n,onToggleOptIn:s,onDeleteActivity:l,isOwner:c,filterDate:f,filterMember:p,filterTags:y,onFilterDateChange:g,onFilterMemberChange:T,onFilterTagsChange:w})=>{const N=r.filter(L=>!(f&&!L.dateTime.startsWith(f)||p&&L.creatorId!==p||y.length>0&&!y.some(et=>L.tags.includes(et))));return b.jsx("div",{className:"relative max-w-7xl mx-auto px-4 pb-8",children:b.jsxs("div",{className:"bg-white/95 backdrop-blur rounded-2xl shadow-xl p-6",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[b.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-500 rounded-xl",children:b.jsx(Xd,{className:"text-white",size:24})}),b.jsxs("div",{children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Browse Activities"}),b.jsxs("p",{className:"text-sm text-gray-600",children:[N.length," ",N.length===1?"activity":"activities"," found"]})]})]}),b.jsx(kb,{filterDate:f,filterMember:p,filterTags:y,members:n,onFilterDateChange:g,onFilterMemberChange:T,onFilterTagsChange:w}),N.length===0?b.jsxs("div",{className:"text-center py-12",children:[b.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:b.jsx(Xd,{size:40,className:"text-gray-400"})}),b.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No activities found"}),b.jsx("p",{className:"text-gray-500",children:"Try adjusting your filters or create a new activity!"})]}):b.jsx("div",{className:"grid gap-4 mt-6",children:N.map(L=>b.jsx(Vb,{activity:L,currentUser:t,onToggleOptIn:s,onDeleteActivity:l,canEdit:L.creatorId===t.id||c},L.id))})]})})},Ub=({onCreateActivity:r,onCancel:t,activeTrip:n})=>{const[s,l]=Wt.useState(!1),[c,f]=Wt.useState(null);if(!n)throw new Error("CreateActivity requires an activeTrip prop (Trip).");const[p,y]=Wt.useState({name:"",description:"",thumbnailUrl:"",mapsLink:"",dateTime:"",location:"",tags:[]}),[g,T]=Wt.useState({}),w=W=>{y(tt=>({...tt,tags:tt.tags.includes(W)?tt.tags.filter(ht=>ht!==W):[...tt.tags,W]}))},N=()=>{const W={};if(p.name.trim()||(W.name="Activity name is required"),p.dateTime||(W.dateTime="Date and time are required"),p.dateTime&&n){const tt=new Date(p.dateTime).getTime(),ht=new Date(n.startDate).getTime(),gt=new Date(n.endDate).getTime();n.name,tt>gt&&(W.dateTime=`Activity date is later than the end of this trip (${new Date(gt).toDateString()}).`),tt<ht&&(W.dateTime=`Activity date is earlier than the start of this trip (${new Date(ht).toDateString()}).`)}return p.location.trim()||(W.location="Location is required"),p.thumbnailUrl&&!G_(p.thumbnailUrl)&&(W.thumbnailUrl="Please enter a valid image URL"),p.mapsLink&&!G_(p.mapsLink)&&(W.mapsLink="Please enter a valid Google Maps URL"),T(W),Object.keys(W).length===0},L=W=>{if(W.preventDefault(),!N())return;(async()=>{l(!0),f(null);try{await Promise.resolve(r(p))}catch(ht){console.error("Create activity failed",ht),f(ht&&ht.message||"Failed to create activity.")}finally{l(!1)}})()},et=n.name.charAt(0).toUpperCase()+n.name.slice(1)+" ("+new Date(n.startDate).toDateString()+" - "+new Date(n.endDate).toDateString()+")";return b.jsx("div",{className:"relative max-w-4xl mx-auto px-4 pb-8",children:b.jsxs("div",{className:"bg-white/95 backdrop-blur rounded-2xl shadow-xl p-6",children:[b.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[b.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl",children:b.jsx(Kd,{className:"text-white",size:24})}),b.jsxs("div",{children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Create New Activity"}),b.jsxs("p",{className:"text-sm text-gray-600",children:["Add a new activity to trip ",et]})]})]}),c&&b.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-800 rounded-md",children:[b.jsx("strong",{className:"block font-medium",children:"Error"}),b.jsx("p",{className:"text-sm",children:c})]}),b.jsxs("form",{onSubmit:L,className:"space-y-6",children:[b.jsxs("div",{children:[b.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Activity Name ",b.jsx("span",{className:"text-red-500",children:"*"})]}),b.jsx("input",{type:"text",value:p.name,onChange:W=>y({...p,name:W.target.value}),placeholder:"e.g., EiffelTower Visit",className:`input ${g.name?"border-red-500":""}`}),g.name&&b.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.name})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),b.jsx("textarea",{value:p.description,onChange:W=>y({...p,description:W.target.value}),placeholder:"Describe the activity...",rows:3,className:"input resize-none"})]}),b.jsxs("div",{children:[b.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[b.jsx(ob,{size:16}),"Thumbnail Image URL"]}),b.jsx("input",{type:"url",value:p.thumbnailUrl,onChange:W=>y({...p,thumbnailUrl:W.target.value}),placeholder:"https://example.com/image.jpg",className:`input ${g.thumbnailUrl?"border-red-500":""}`}),g.thumbnailUrl&&b.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.thumbnailUrl}),p.thumbnailUrl&&!g.thumbnailUrl&&b.jsx("div",{className:"mt-2",children:b.jsx("img",{src:p.thumbnailUrl,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg",onError:W=>{T({...g,thumbnailUrl:"Invalid image URL"})}})})]}),b.jsxs("div",{children:[b.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[b.jsx(Vl,{size:16}),"Date and Time ",b.jsx("span",{className:"text-red-500",children:"*"})]}),b.jsx("input",{type:"datetime-local",value:p.dateTime,onChange:W=>y({...p,dateTime:W.target.value}),className:`input ${g.dateTime?"border-red-500":""}`}),g.dateTime&&b.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.dateTime})]}),b.jsxs("div",{children:[b.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[b.jsx(zs,{size:16}),"Location ",b.jsx("span",{className:"text-red-500",children:"*"})]}),b.jsx("input",{type:"text",value:p.location,onChange:W=>y({...p,location:W.target.value}),placeholder:"e.g., Champ de Mars, Paris",className:`input ${g.location?"border-red-500":""}`}),g.location&&b.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.location})]}),b.jsxs("div",{children:[b.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[b.jsx(zs,{size:16}),"Google Maps Link"]}),b.jsx("input",{type:"url",value:p.mapsLink,onChange:W=>y({...p,mapsLink:W.target.value}),placeholder:"https://maps.google.com/?q=...",className:`input ${g.mapsLink?"border-red-500":""}`}),g.mapsLink&&b.jsx("p",{className:"mt-1 text-sm text-red-500",children:g.mapsLink}),b.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Paste a Google Maps link for easy navigation"})]}),b.jsxs("div",{children:[b.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[b.jsx(Eb,{size:16}),"Tags"]}),b.jsx("div",{className:"flex flex-wrap gap-2",children:w0.map(W=>b.jsx("button",{type:"button",onClick:()=>w(W),className:`px-4 py-2 rounded-lg text-sm font-medium transition ${p.tags.includes(W)?"bg-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:W},W))})]}),b.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[b.jsx(Uc,{type:"submit",variant:"success",icon:s?Pc:Kd,className:"flex-1",disabled:s,children:s?"Creating...":"Create Activity"}),b.jsx(Uc,{type:"button",variant:"secondary",onClick:t,className:"flex-1",children:"Cancel"})]})]})]})})},Lb=({members:r,ownerId:t,currentUserId:n})=>b.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[b.jsx(kl,{size:20,className:"text-purple-600"}),b.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Trip Members"}),b.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[r.length," members"]})]}),b.jsx("div",{className:"space-y-3",children:r.map(s=>b.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition",children:[b.jsx("img",{src:s.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(s.displayName)}`,alt:s.displayName,className:"w-10 h-10 rounded-full"}),b.jsxs("div",{className:"flex-1",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("p",{className:"font-medium text-gray-800",children:s.displayName}),s.id===t&&b.jsx(nb,{size:16,className:"text-yellow-500",title:"Trip Owner"}),s.id===n&&b.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:"You"})]}),b.jsx("p",{className:"text-sm text-gray-500",children:s.email})]})]},s.id))})]}),jb=()=>{};var F_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},zb=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];t[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],f=r[n++],p=r[n++],y=((l&7)<<18|(c&63)<<12|(f&63)<<6|p&63)-65536;t[s++]=String.fromCharCode(55296+(y>>10)),t[s++]=String.fromCharCode(56320+(y&1023))}else{const c=r[n++],f=r[n++];t[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return t.join("")},I0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],f=l+1<r.length,p=f?r[l+1]:0,y=l+2<r.length,g=y?r[l+2]:0,T=c>>2,w=(c&3)<<4|p>>4;let N=(p&15)<<2|g>>6,L=g&63;y||(L=64,f||(N=64)),s.push(n[T],n[w],n[N],n[L])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(R0(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):zb(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],p=l<r.length?n[r.charAt(l)]:0;++l;const g=l<r.length?n[r.charAt(l)]:64;++l;const w=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||p==null||g==null||w==null)throw new Bb;const N=c<<2|p>>4;if(s.push(N),g!==64){const L=p<<4&240|g>>2;if(s.push(L),w!==64){const et=g<<6&192|w;s.push(et)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Bb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qb=function(r){const t=R0(r);return I0.encodeByteArray(t,!0)},Lc=function(r){return qb(r).replace(/\./g,"")},x0=function(r){try{return I0.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=()=>Hb().__FIREBASE_DEFAULTS__,Fb=()=>{if(typeof process>"u"||typeof F_>"u")return;const r=F_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Qb=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&x0(r[1]);return t&&JSON.parse(t)},ih=()=>{try{return jb()||Gb()||Fb()||Qb()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},C0=r=>ih()?.emulatorHosts?.[r],Yb=r=>{const t=C0(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},N0=()=>ih()?.config,D0=r=>ih()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function O0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Lc(JSON.stringify(n)),Lc(JSON.stringify(f)),""].join(".")}const xl={};function $b(){const r={prod:[],emulator:[]};for(const t of Object.keys(xl))xl[t]?r.emulator.push(t):r.prod.push(t);return r}function Zb(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let Q_=!1;function M0(r,t){if(typeof window>"u"||typeof document>"u"||!ao(window.location.host)||xl[r]===t||xl[r]||Q_)return;xl[r]=t;function n(N){return`__firebase__banner__${N}`}const s="__firebase__banner",c=$b().prod.length>0;function f(){const N=document.getElementById(s);N&&N.remove()}function p(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function y(N,L){N.setAttribute("width","24"),N.setAttribute("id",L),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function g(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{Q_=!0,f()},N}function T(N,L){N.setAttribute("id",L),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function w(){const N=Zb(s),L=n("text"),et=document.getElementById(L)||document.createElement("span"),W=n("learnmore"),tt=document.getElementById(W)||document.createElement("a"),ht=n("preprendIcon"),gt=document.getElementById(ht)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const pt=N.element;p(pt),T(tt,W);const jt=g();y(gt,ht),pt.append(gt,et,tt,jt),document.body.appendChild(pt)}c?(et.innerText="Preview backend disconnected.",gt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(gt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,et.innerText="Preview backend running in this workspace."),et.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Jb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function Wb(){const r=ih()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function nS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iS(){const r=Je();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function rS(){return!Wb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sS(){try{return typeof indexedDB=="object"}catch{return!1}}function aS(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="FirebaseError";class Xi extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=oS,Object.setPrototypeOf(this,Xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hl.prototype.create)}}class Hl{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},l=`${this.service}/${t}`,c=this.errors[t],f=c?lS(c,s):"Error",p=`${this.serviceName}: ${f} (${l}).`;return new Xi(l,p,s)}}function lS(r,t){return r.replace(uS,(n,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const uS=/\{\$([^}]+)}/g;function cS(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Gi(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const l of n){if(!s.includes(l))return!1;const c=r[l],f=t[l];if(Y_(c)&&Y_(f)){if(!Gi(c,f))return!1}else if(c!==f)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function Y_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function hS(r,t){const n=new fS(r,t);return n.subscribe.bind(n)}class fS{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let l;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");dS(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:s},l.next===void 0&&(l.next=Vd),l.error===void 0&&(l.error=Vd),l.complete===void 0&&(l.complete=Vd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dS(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function Vd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(r){return r&&r._delegate?r._delegate:r}class Bs{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new Kb;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(gS(t))try{this.getOrInitializeService({instanceIdentifier:ks})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(t=ks){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ks){return this.instances.has(t)}getOptions(t=ks){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);s===p&&f.resolve(l)}return l}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&t(c,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:pS(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=ks){return this.component?this.component.multipleInstances?t:ks:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pS(r){return r===ks?void 0:r}function gS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new mS(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Mt||(Mt={}));const _S={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},vS=Mt.INFO,ES={[Mt.DEBUG]:"log",[Mt.VERBOSE]:"log",[Mt.INFO]:"info",[Mt.WARN]:"warn",[Mt.ERROR]:"error"},TS=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=ES[t];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class bm{constructor(t){this.name=t,this._logLevel=vS,this._logHandler=TS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Mt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?_S[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Mt.DEBUG,...t),this._logHandler(this,Mt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Mt.VERBOSE,...t),this._logHandler(this,Mt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Mt.INFO,...t),this._logHandler(this,Mt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Mt.WARN,...t),this._logHandler(this,Mt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Mt.ERROR,...t),this._logHandler(this,Mt.ERROR,...t)}}const AS=(r,t)=>t.some(n=>r instanceof n);let K_,X_;function bS(){return K_||(K_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SS(){return X_||(X_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const V0=new WeakMap,$d=new WeakMap,k0=new WeakMap,kd=new WeakMap,Sm=new WeakMap;function wS(r){const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",f)},c=()=>{n(Lr(r.result)),l()},f=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",f)});return t.then(n=>{n instanceof IDBCursor&&V0.set(n,r)}).catch(()=>{}),Sm.set(t,r),t}function RS(r){if($d.has(r))return;const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",f),r.removeEventListener("abort",f)},c=()=>{n(),l()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",f),r.addEventListener("abort",f)});$d.set(r,t)}let Zd={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return $d.get(r);if(t==="objectStoreNames")return r.objectStoreNames||k0.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Lr(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function IS(r){Zd=r(Zd)}function xS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(Pd(this),t,...n);return k0.set(s,t.sort?t.sort():[t]),Lr(s)}:SS().includes(r)?function(...t){return r.apply(Pd(this),t),Lr(V0.get(this))}:function(...t){return Lr(r.apply(Pd(this),t))}}function CS(r){return typeof r=="function"?xS(r):(r instanceof IDBTransaction&&RS(r),AS(r,bS())?new Proxy(r,Zd):r)}function Lr(r){if(r instanceof IDBRequest)return wS(r);if(kd.has(r))return kd.get(r);const t=CS(r);return t!==r&&(kd.set(r,t),Sm.set(t,r)),t}const Pd=r=>Sm.get(r);function NS(r,t,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const f=indexedDB.open(r,t),p=Lr(f);return s&&f.addEventListener("upgradeneeded",y=>{s(Lr(f.result),y.oldVersion,y.newVersion,Lr(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),p.then(y=>{c&&y.addEventListener("close",()=>c()),l&&y.addEventListener("versionchange",g=>l(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const DS=["get","getKey","getAll","getAllKeys","count"],OS=["put","add","delete","clear"],Ud=new Map;function $_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Ud.get(t))return Ud.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=OS.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||DS.includes(n)))return;const c=async function(f,...p){const y=this.transaction(f,l?"readwrite":"readonly");let g=y.store;return s&&(g=g.index(p.shift())),(await Promise.all([g[n](...p),l&&y.done]))[0]};return Ud.set(t,c),c}IS(r=>({...r,get:(t,n,s)=>$_(t,n)||r.get(t,n,s),has:(t,n)=>!!$_(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VS(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function VS(r){return r.getComponent()?.type==="VERSION"}const Jd="@firebase/app",Z_="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new bm("@firebase/app"),kS="@firebase/app-compat",PS="@firebase/analytics-compat",US="@firebase/analytics",LS="@firebase/app-check-compat",jS="@firebase/app-check",zS="@firebase/auth",BS="@firebase/auth-compat",qS="@firebase/database",HS="@firebase/data-connect",GS="@firebase/database-compat",FS="@firebase/functions",QS="@firebase/functions-compat",YS="@firebase/installations",KS="@firebase/installations-compat",XS="@firebase/messaging",$S="@firebase/messaging-compat",ZS="@firebase/performance",JS="@firebase/performance-compat",WS="@firebase/remote-config",tw="@firebase/remote-config-compat",ew="@firebase/storage",nw="@firebase/storage-compat",iw="@firebase/firestore",rw="@firebase/ai",sw="@firebase/firestore-compat",aw="firebase",ow="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="[DEFAULT]",lw={[Jd]:"fire-core",[kS]:"fire-core-compat",[US]:"fire-analytics",[PS]:"fire-analytics-compat",[jS]:"fire-app-check",[LS]:"fire-app-check-compat",[zS]:"fire-auth",[BS]:"fire-auth-compat",[qS]:"fire-rtdb",[HS]:"fire-data-connect",[GS]:"fire-rtdb-compat",[FS]:"fire-fn",[QS]:"fire-fn-compat",[YS]:"fire-iid",[KS]:"fire-iid-compat",[XS]:"fire-fcm",[$S]:"fire-fcm-compat",[ZS]:"fire-perf",[JS]:"fire-perf-compat",[WS]:"fire-rc",[tw]:"fire-rc-compat",[ew]:"fire-gcs",[nw]:"fire-gcs-compat",[iw]:"fire-fst",[sw]:"fire-fst-compat",[rw]:"fire-vertex","fire-js":"fire-js",[aw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new Map,uw=new Map,tm=new Map;function J_(r,t){try{r.container.addComponent(t)}catch(n){Fi.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function $a(r){const t=r.name;if(tm.has(t))return Fi.debug(`There were multiple attempts to register component ${t}.`),!1;tm.set(t,r);for(const n of jc.values())J_(n,r);for(const n of uw.values())J_(n,r);return!0}function wm(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function Fn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jr=new Hl("app","Firebase",cw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=ow;function P0(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:Wd,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw jr.create("bad-app-name",{appName:String(l)});if(n||(n=N0()),!n)throw jr.create("no-options");const c=jc.get(l);if(c){if(Gi(n,c.options)&&Gi(s,c.config))return c;throw jr.create("duplicate-app",{appName:l})}const f=new yS(l);for(const y of tm.values())f.addComponent(y);const p=new hw(n,s,f);return jc.set(l,p),p}function U0(r=Wd){const t=jc.get(r);if(!t&&r===Wd&&N0())return P0();if(!t)throw jr.create("no-app",{appName:r});return t}function zr(r,t,n){let s=lw[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const f=[`Unable to register library "${s}" with version "${t}":`];l&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Fi.warn(f.join(" "));return}$a(new Bs(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="firebase-heartbeat-database",dw=1,Pl="firebase-heartbeat-store";let Ld=null;function L0(){return Ld||(Ld=NS(fw,dw,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Pl)}catch(n){console.warn(n)}}}}).catch(r=>{throw jr.create("idb-open",{originalErrorMessage:r.message})})),Ld}async function mw(r){try{const n=(await L0()).transaction(Pl),s=await n.objectStore(Pl).get(j0(r));return await n.done,s}catch(t){if(t instanceof Xi)Fi.warn(t.message);else{const n=jr.create("idb-get",{originalErrorMessage:t?.message});Fi.warn(n.message)}}}async function W_(r,t){try{const s=(await L0()).transaction(Pl,"readwrite");await s.objectStore(Pl).put(t,j0(r)),await s.done}catch(n){if(n instanceof Xi)Fi.warn(n.message);else{const s=jr.create("idb-set",{originalErrorMessage:n?.message});Fi.warn(s.message)}}}function j0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw=1024,gw=30;class yw{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vw(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=tv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>gw){const l=Ew(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Fi.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=tv(),{heartbeatsToSend:n,unsentEntries:s}=_w(this._heartbeatsCache.heartbeats),l=Lc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Fi.warn(t),""}}}function tv(){return new Date().toISOString().substring(0,10)}function _w(r,t=pw){const n=[];let s=r.slice();for(const l of r){const c=n.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),ev(n)>t){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),ev(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class vw{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sS()?aS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mw(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return W_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return W_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function ev(r){return Lc(JSON.stringify({version:2,heartbeats:r})).length}function Ew(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(r){$a(new Bs("platform-logger",t=>new MS(t),"PRIVATE")),$a(new Bs("heartbeat",t=>new yw(t),"PRIVATE")),zr(Jd,Z_,r),zr(Jd,Z_,"esm2020"),zr("fire-js","")}Tw("");function z0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Aw=z0,B0=new Hl("auth","Firebase",z0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=new bm("@firebase/auth");function bw(r,...t){zc.logLevel<=Mt.WARN&&zc.warn(`Auth (${oo}): ${r}`,...t)}function Rc(r,...t){zc.logLevel<=Mt.ERROR&&zc.error(`Auth (${oo}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(r,...t){throw Im(r,...t)}function Yn(r,...t){return Im(r,...t)}function Rm(r,t,n){const s={...Aw(),[t]:n};return new Hl("auth","Firebase",s).create(t,{appName:r.name})}function Ls(r){return Rm(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sw(r,t,n){const s=n;if(!(t instanceof s))throw s.name!==t.constructor.name&&gi(r,"argument-error"),Rm(r,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Im(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return B0.create(r,...t)}function At(r,t,...n){if(!r)throw Im(t,...n)}function Bi(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Rc(t),new Error(t)}function Qi(r,t){r||Bi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(){return typeof self<"u"&&self.location?.href||""}function ww(){return nv()==="http:"||nv()==="https:"}function nv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ww()||eS()||"connection"in navigator)?navigator.onLine:!0}function Iw(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(t,n){this.shortDelay=t,this.longDelay=n,Qi(n>t,"Short delay should be less than long delay!"),this.isMobile=Jb()||nS()}get(){return Rw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(r,t){Qi(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Nw=new Fl(3e4,6e4);function Cm(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function lo(r,t,n,s,l={}){return H0(r,l,async()=>{let c={},f={};s&&(t==="GET"?f=s:c={body:JSON.stringify(s)});const p=Gl({key:r.config.apiKey,...f}).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const g={method:t,headers:y,...c};return tS()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&ao(r.emulatorConfig.host)&&(g.credentials="include"),q0.fetch()(await G0(r,r.config.apiHost,n,p),g)})}async function H0(r,t,n){r._canInitEmulator=!1;const s={...xw,...t};try{const l=new Ow(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw Ec(r,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const p=c.ok?f.errorMessage:f.error.message,[y,g]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ec(r,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw Ec(r,"email-already-in-use",f);if(y==="USER_DISABLED")throw Ec(r,"user-disabled",f);const T=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Rm(r,T,g);gi(r,T)}}catch(l){if(l instanceof Xi)throw l;gi(r,"network-request-failed",{message:String(l)})}}async function Dw(r,t,n,s,l={}){const c=await lo(r,t,n,s,l);return"mfaPendingCredential"in c&&gi(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function G0(r,t,n,s){const l=`${t}${n}?${s}`,c=r,f=c.config.emulator?xm(r.config,l):`${r.config.apiScheme}://${l}`;return Cw.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}class Ow{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Yn(this.auth,"network-request-failed")),Nw.get())})}}function Ec(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=Yn(r,t,s);return l.customData._tokenResponse=n,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mw(r,t){return lo(r,"POST","/v1/accounts:delete",t)}async function Bc(r,t){return lo(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Vw(r,t=!1){const n=He(r),s=await n.getIdToken(t),l=Nm(s);At(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,f=c?.sign_in_provider;return{claims:l,token:s,authTime:Cl(jd(l.auth_time)),issuedAtTime:Cl(jd(l.iat)),expirationTime:Cl(jd(l.exp)),signInProvider:f||null,signInSecondFactor:c?.sign_in_second_factor||null}}function jd(r){return Number(r)*1e3}function Nm(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return Rc("JWT malformed, contained fewer than 3 sections"),null;try{const l=x0(n);return l?JSON.parse(l):(Rc("Failed to decode base64 JWT payload"),null)}catch(l){return Rc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function iv(r){const t=Nm(r);return At(t,"internal-error"),At(typeof t.exp<"u","internal-error"),At(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ul(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Xi&&kw(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function kw({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cl(this.lastLoginAt),this.creationTime=Cl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qc(r){const t=r.auth,n=await r.getIdToken(),s=await Ul(r,Bc(t,{idToken:n}));At(s?.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?F0(l.providerUserInfo):[],f=Lw(r.providerData,c),p=r.isAnonymous,y=!(r.email&&l.passwordHash)&&!f?.length,g=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new nm(l.createdAt,l.lastLoginAt),isAnonymous:g};Object.assign(r,T)}async function Uw(r){const t=He(r);await qc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Lw(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function F0(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jw(r,t){const n=await H0(r,{},async()=>{const s=Gl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,f=await G0(r,l,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:s};return r.emulatorConfig&&ao(r.emulatorConfig.host)&&(y.credentials="include"),q0.fetch()(f,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zw(r,t){return lo(r,"POST","/v2/accounts:revokeToken",Cm(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){At(t.idToken,"internal-error"),At(typeof t.idToken<"u","internal-error"),At(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):iv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){At(t.length!==0,"internal-error");const n=iv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(At(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await jw(t,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,f=new Fa;return s&&(At(typeof s=="string","internal-error",{appName:t}),f.refreshToken=s),l&&(At(typeof l=="string","internal-error",{appName:t}),f.accessToken=l),c&&(At(typeof c=="number","internal-error",{appName:t}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Fa,this.toJSON())}_performRefresh(){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(r,t){At(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Qn{constructor({uid:t,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new Pw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new nm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await Ul(this,this.stsTokenManager.getToken(this.auth,t));return At(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Vw(this,t)}reload(){return Uw(this)}_assign(t){this!==t&&(At(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Qn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){At(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await qc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fn(this.auth.app))return Promise.reject(Ls(this.auth));const t=await this.getIdToken();return await Ul(this,Mw(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,f=n.photoURL??void 0,p=n.tenantId??void 0,y=n._redirectEventId??void 0,g=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:w,emailVerified:N,isAnonymous:L,providerData:et,stsTokenManager:W}=n;At(w&&W,t,"internal-error");const tt=Fa.fromJSON(this.name,W);At(typeof w=="string",t,"internal-error"),Mr(s,t.name),Mr(l,t.name),At(typeof N=="boolean",t,"internal-error"),At(typeof L=="boolean",t,"internal-error"),Mr(c,t.name),Mr(f,t.name),Mr(p,t.name),Mr(y,t.name),Mr(g,t.name),Mr(T,t.name);const ht=new Qn({uid:w,auth:t,email:l,emailVerified:N,displayName:s,isAnonymous:L,photoURL:f,phoneNumber:c,tenantId:p,stsTokenManager:tt,createdAt:g,lastLoginAt:T});return et&&Array.isArray(et)&&(ht.providerData=et.map(gt=>({...gt}))),y&&(ht._redirectEventId=y),ht}static async _fromIdTokenResponse(t,n,s=!1){const l=new Fa;l.updateFromServerResponse(n);const c=new Qn({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await qc(c),c}static async _fromGetAccountInfoResponse(t,n,s){const l=n.users[0];At(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?F0(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!c?.length,p=new Fa;p.updateFromIdToken(s);const y=new Qn({uid:l.localId,auth:t,stsTokenManager:p,isAnonymous:f}),g={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new nm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(y,g),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=new Map;function qi(r){Qi(r instanceof Function,"Expected a class definition");let t=rv.get(r);return t?(Qi(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,rv.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Q0.type="NONE";const sv=Q0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(r,t,n){return`firebase:${r}:${t}:${n}`}class Qa{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Ic(this.userKey,l.apiKey,c),this.fullPersistenceKey=Ic("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Bc(this.auth,{idToken:t}).catch(()=>{});return n?Qn._fromGetAccountInfoResponse(this.auth,n,t):null}return Qn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Qa(qi(sv),t,s);const l=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=l[0]||qi(sv);const f=Ic(s,t.config.apiKey,t.name);let p=null;for(const g of n)try{const T=await g._get(f);if(T){let w;if(typeof T=="string"){const N=await Bc(t,{idToken:T}).catch(()=>{});if(!N)break;w=await Qn._fromGetAccountInfoResponse(t,N,T)}else w=Qn._fromJSON(t,T);g!==c&&(p=w),c=g;break}}catch{}const y=l.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new Qa(c,t,s):(c=y[0],p&&await c._set(f,p.toJSON()),await Promise.all(n.map(async g=>{if(g!==c)try{await g._remove(f)}catch{}})),new Qa(c,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if($0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Y0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(J0(t))return"Blackberry";if(W0(t))return"Webos";if(K0(t))return"Safari";if((t.includes("chrome/")||X0(t))&&!t.includes("edge/"))return"Chrome";if(Z0(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function Y0(r=Je()){return/firefox\//i.test(r)}function K0(r=Je()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function X0(r=Je()){return/crios\//i.test(r)}function $0(r=Je()){return/iemobile/i.test(r)}function Z0(r=Je()){return/android/i.test(r)}function J0(r=Je()){return/blackberry/i.test(r)}function W0(r=Je()){return/webos/i.test(r)}function Dm(r=Je()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Bw(r=Je()){return Dm(r)&&!!window.navigator?.standalone}function qw(){return iS()&&document.documentMode===10}function tE(r=Je()){return Dm(r)||Z0(r)||W0(r)||J0(r)||/windows phone/i.test(r)||$0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(r,t=[]){let n;switch(r){case"Browser":n=av(Je());break;case"Worker":n=`${av(Je())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${oo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=c=>new Promise((f,p)=>{try{const y=t(c);f(y)}catch(y){p(y)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gw(r,t={}){return lo(r,"GET","/v2/passwordPolicy",Cm(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=6;class Qw{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Fw,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(t,n,s,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ov(this),this.idTokenSubscription=new ov(this),this.beforeStateQueue=new Hw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=B0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=qi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Qa.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Bc(this,{idToken:t}),s=await Qn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Fn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,f=s?._redirectEventId,p=await this.tryRedirectSignIn(t);(!c||c===f)&&p?.user&&(s=p.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return At(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await qc(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Iw()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Fn(this.app))return Promise.reject(Ls(this));const n=t?He(t):null;return n&&At(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&At(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Fn(this.app)?Promise.reject(Ls(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Fn(this.app)?Promise.reject(Ls(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Gw(this),n=new Qw(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Hl("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await zw(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&qi(t)||this._popupRedirectResolver;At(n,this,"argument-error"),this.redirectPersistenceManager=await Qa.create(this,[qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(At(p,this,"internal-error"),p.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const y=t.addObserver(n,s,l);return()=>{f=!0,y()}}else{const y=t.addObserver(n);return()=>{f=!0,y()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return At(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=eE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(Fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&bw(`Error while retrieving App Check token: ${t.error}`),t?.token}}function rh(r){return He(r)}class ov{constructor(t){this.auth=t,this.observer=null,this.addObserver=hS(n=>this.observer=n)}get next(){return At(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Om={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Kw(r){Om=r}function Xw(r){return Om.loadJS(r)}function $w(){return Om.gapiScript}function Zw(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(r,t){const n=wm(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Gi(c,t??{}))return l;gi(l,"already-initialized")}return n.initialize({options:t})}function Ww(r,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(qi);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function tR(r,t,n){const s=rh(r);At(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,c=nE(t),{host:f,port:p}=eR(t),y=p===null?"":`:${p}`,g={url:`${c}//${f}${y}/`},T=Object.freeze({host:f,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){At(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),At(Gi(g,s.config.emulator)&&Gi(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,ao(f)?(O0(`${c}//${f}${y}`),M0("Auth",!0)):nR()}function nE(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function eR(r){const t=nE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:lv(s.substr(c.length+1))}}else{const[c,f]=s.split(":");return{host:c,port:lv(f)}}}function lv(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function nR(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Bi("not implemented")}_getIdTokenResponse(t){return Bi("not implemented")}_linkToIdToken(t,n){return Bi("not implemented")}_getReauthenticationResolver(t){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(r,t){return Dw(r,"POST","/v1/accounts:signInWithIdp",Cm(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="http://localhost";class qs extends iE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new qs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):gi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l,...c}=n;if(!s||!l)return null;const f=new qs(s,l);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(t){const n=this.buildRequest();return Ya(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Ya(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ya(t,n)}buildRequest(){const t={requestUri:iR,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Gl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends Mm{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Ql{constructor(){super("facebook.com")}static credential(t){return qs._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Vr.credentialFromTaggedObject(t)}static credentialFromError(t){return Vr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Vr.credential(t.oauthAccessToken)}catch{return null}}}Vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Ql{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return qs._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return zi.credentialFromTaggedObject(t)}static credentialFromError(t){return zi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return zi.credential(n,s)}catch{return null}}}zi.GOOGLE_SIGN_IN_METHOD="google.com";zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Ql{constructor(){super("github.com")}static credential(t){return qs._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return kr.credentialFromTaggedObject(t)}static credentialFromError(t){return kr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return kr.credential(t.oauthAccessToken)}catch{return null}}}kr.GITHUB_SIGN_IN_METHOD="github.com";kr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Ql{constructor(){super("twitter.com")}static credential(t,n){return qs._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Pr.credentialFromTaggedObject(t)}static credentialFromError(t){return Pr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Pr.credential(n,s)}catch{return null}}}Pr.TWITTER_SIGN_IN_METHOD="twitter.com";Pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,l=!1){const c=await Qn._fromIdTokenResponse(t,s,l),f=uv(s);return new Za({user:c,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const l=uv(s);return new Za({user:t,providerId:l,_tokenResponse:s,operationType:n})}}function uv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc extends Xi{constructor(t,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Hc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,l){return new Hc(t,n,s,l)}}function rE(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Hc._fromErrorAndOperation(r,c,t,s):c})}async function rR(r,t,n=!1){const s=await Ul(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return Za._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(r,t,n=!1){const{auth:s}=r;if(Fn(s.app))return Promise.reject(Ls(s));const l="reauthenticate";try{const c=await Ul(r,rE(s,l,t,r),n);At(c.idToken,s,"internal-error");const f=Nm(c.idToken);At(f,s,"internal-error");const{sub:p}=f;return At(r.uid===p,s,"user-mismatch"),Za._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&gi(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(r,t,n=!1){if(Fn(r.app))return Promise.reject(Ls(r));const s="signIn",l=await rE(r,s,t),c=await Za._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}function oR(r,t,n,s){return He(r).onIdTokenChanged(t,n,s)}function lR(r,t,n){return He(r).beforeAuthStateChanged(t,n)}function uR(r,t,n,s){return He(r).onAuthStateChanged(t,n,s)}function cR(r){return He(r).signOut()}const Gc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gc,"1"),this.storage.removeItem(Gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=1e3,fR=10;class aE extends sE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&t(n,l,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((f,p,y)=>{this.notifyListeners(f,y)});return}const s=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},c=this.storage.getItem(s);qw()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,fR):l()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},hR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}aE.type="LOCAL";const dR=aE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE extends sE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}oE.type="SESSION";const lE=oE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const s=new sh(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:l,data:c}=n.data,f=this.handlersMap[l];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const p=Array.from(f).map(async g=>g(n.origin,c)),y=await mR(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:y})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,f;return new Promise((p,y)=>{const g=Vm("",20);l.port1.start();const T=setTimeout(()=>{y(new Error("unsupported_event"))},s);f={messageChannel:l,onMessage(w){const N=w;if(N.data.eventId===g)switch(N.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(N.data.response);break;default:clearTimeout(T),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:g,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(){return window}function gR(r){hi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(){return typeof hi().WorkerGlobalScope<"u"&&typeof hi().importScripts=="function"}async function yR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _R(){return navigator?.serviceWorker?.controller||null}function vR(){return uE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="firebaseLocalStorageDb",ER=1,Fc="firebaseLocalStorage",hE="fbase_key";class Yl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ah(r,t){return r.transaction([Fc],t?"readwrite":"readonly").objectStore(Fc)}function TR(){const r=indexedDB.deleteDatabase(cE);return new Yl(r).toPromise()}function im(){const r=indexedDB.open(cE,ER);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Fc,{keyPath:hE})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Fc)?t(s):(s.close(),await TR(),t(await im()))})})}async function cv(r,t,n){const s=ah(r,!0).put({[hE]:t,value:n});return new Yl(s).toPromise()}async function AR(r,t){const n=ah(r,!1).get(t),s=await new Yl(n).toPromise();return s===void 0?null:s.value}function hv(r,t){const n=ah(r,!0).delete(t);return new Yl(n).toPromise()}const bR=800,SR=3;class fE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await im(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>SR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sh._getInstance(vR()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await yR(),!this.activeServiceWorker)return;this.sender=new pR(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||_R()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await im();return await cv(t,Gc,"1"),await hv(t,Gc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>cv(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>AR(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>hv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=ah(l,!1).getAll();return new Yl(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fE.type="LOCAL";const wR=fE;new Fl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(r,t){return t?qi(t):(At(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends iE{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ya(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ya(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ya(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function RR(r){return aR(r.auth,new km(r),r.bypassAuthState)}function IR(r){const{auth:t,user:n}=r;return At(n,t,"internal-error"),sR(n,new km(r),r.bypassAuthState)}async function xR(r){const{auth:t,user:n}=r;return At(n,t,"internal-error"),rR(n,new km(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(t,n,s,l,c=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:f,type:p}=t;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return RR;case"linkViaPopup":case"linkViaRedirect":return xR;case"reauthViaPopup":case"reauthViaRedirect":return IR;default:gi(this.auth,"internal-error")}}resolve(t){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=new Fl(2e3,1e4);async function NR(r,t,n){if(Fn(r.app))return Promise.reject(Yn(r,"operation-not-supported-in-this-environment"));const s=rh(r);Sw(r,t,Mm);const l=dE(s,n);return new Ps(s,"signInViaPopup",t,l).executeNotNull()}class Ps extends mE{constructor(t,n,s,l,c){super(t,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Ps.currentPopupAction&&Ps.currentPopupAction.cancel(),Ps.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return At(t,this.auth,"internal-error"),t}async onExecution(){Qi(this.filter.length===1,"Popup operations only handle one event");const t=Vm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ps.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,CR.get())};t()}}Ps.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="pendingRedirect",xc=new Map;class OR extends mE{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=xc.get(this.auth._key());if(!t){try{const s=await MR(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}xc.set(this.auth._key(),t)}return this.bypassAuthState||xc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MR(r,t){const n=PR(t),s=kR(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function VR(r,t){xc.set(r._key(),t)}function kR(r){return qi(r._redirectPersistence)}function PR(r){return Ic(DR,r.config.apiKey,r.name)}async function UR(r,t,n=!1){if(Fn(r.app))return Promise.reject(Ls(r));const s=rh(r),l=dE(s,t),f=await new OR(s,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,t)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=600*1e3;class jR{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!zR(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!pE(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Yn(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=LR&&this.cachedEventUids.clear(),this.cachedEventUids.has(fv(t))}saveEventToCache(t){this.cachedEventUids.add(fv(t)),this.lastProcessedEventTime=Date.now()}}function fv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function pE({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function zR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BR(r,t={}){return lo(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HR=/^https?/;async function GR(r){if(r.config.emulator)return;const{authorizedDomains:t}=await BR(r);for(const n of t)try{if(FR(n))return}catch{}gi(r,"unauthorized-domain")}function FR(r){const t=em(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!HR.test(n))return!1;if(qR.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=new Fl(3e4,6e4);function dv(){const r=hi().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function YR(r){return new Promise((t,n)=>{function s(){dv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{dv(),n(Yn(r,"network-request-failed"))},timeout:QR.get()})}if(hi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(hi().gapi?.load)s();else{const l=Zw("iframefcb");return hi()[l]=()=>{gapi.load?s():n(Yn(r,"network-request-failed"))},Xw(`${$w()}?onload=${l}`).catch(c=>n(c))}}).catch(t=>{throw Cc=null,t})}let Cc=null;function KR(r){return Cc=Cc||YR(r),Cc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=new Fl(5e3,15e3),$R="__/auth/iframe",ZR="emulator/auth/iframe",JR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t2(r){const t=r.config;At(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?xm(t,ZR):`https://${r.config.authDomain}/${$R}`,s={apiKey:t.apiKey,appName:r.name,v:oo},l=WR.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Gl(s).slice(1)}`}async function e2(r){const t=await KR(r),n=hi().gapi;return At(n,r,"internal-error"),t.open({where:document.body,url:t2(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JR,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const f=Yn(r,"network-request-failed"),p=hi().setTimeout(()=>{c(f)},XR.get());function y(){hi().clearTimeout(p),l(s)}s.ping(y).then(y,()=>{c(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},i2=500,r2=600,s2="_blank",a2="http://localhost";class mv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function o2(r,t,n,s=i2,l=r2){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const y={...n2,width:s.toString(),height:l.toString(),top:c,left:f},g=Je().toLowerCase();n&&(p=X0(g)?s2:n),Y0(g)&&(t=t||a2,y.scrollbars="yes");const T=Object.entries(y).reduce((N,[L,et])=>`${N}${L}=${et},`,"");if(Bw(g)&&p!=="_self")return l2(t||"",p),new mv(null);const w=window.open(t||"",p,T);At(w,r,"popup-blocked");try{w.focus()}catch{}return new mv(w)}function l2(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2="__/auth/handler",c2="emulator/auth/handler",h2=encodeURIComponent("fac");async function pv(r,t,n,s,l,c){At(r.config.authDomain,r,"auth-domain-config-required"),At(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:oo,eventId:l};if(t instanceof Mm){t.setDefaultLanguage(r.languageCode),f.providerId=t.providerId||"",cS(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,w]of Object.entries({}))f[T]=w}if(t instanceof Ql){const T=t.getScopes().filter(w=>w!=="");T.length>0&&(f.scopes=T.join(","))}r.tenantId&&(f.tid=r.tenantId);const p=f;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const y=await r._getAppCheckToken(),g=y?`#${h2}=${encodeURIComponent(y)}`:"";return`${f2(r)}?${Gl(p).slice(1)}${g}`}function f2({config:r}){return r.emulator?xm(r,c2):`https://${r.authDomain}/${u2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="webStorageSupport";class d2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lE,this._completeRedirectFn=UR,this._overrideRedirectResult=VR}async _openPopup(t,n,s,l){Qi(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const c=await pv(t,n,s,em(),l);return o2(t,c,Vm())}async _openRedirect(t,n,s,l){await this._originValidation(t);const c=await pv(t,n,s,em(),l);return gR(c),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Qi(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await e2(t),s=new jR(t);return n.register("authEvent",l=>(At(l?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(zd,{type:zd},l=>{const c=l?.[0]?.[zd];c!==void 0&&n(!!c),gi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=GR(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return tE()||K0()||Dm()}}const m2=d2;var gv="@firebase/auth",yv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){At(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function y2(r){$a(new Bs("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=s.options;At(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:f,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eE(r)},g=new Yw(s,l,c,y);return Ww(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),$a(new Bs("auth-internal",t=>{const n=rh(t.getProvider("auth").getImmediate());return(s=>new p2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zr(gv,yv,g2(r)),zr(gv,yv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=300,v2=D0("authIdTokenMaxAge")||_2;let _v=null;const E2=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>v2)return;const l=n?.token;_v!==l&&(_v=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function T2(r=U0()){const t=wm(r,"auth");if(t.isInitialized())return t.getImmediate();const n=Jw(r,{popupRedirectResolver:m2,persistence:[wR,dR,lE]}),s=D0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const f=E2(c.toString());lR(n,f,()=>f(n.currentUser)),oR(n,p=>f(p))}}const l=C0("auth");return l&&tR(n,`http://${l}`),n}function A2(){return document.getElementsByTagName("head")?.[0]??document}Kw({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const c=Yn("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",A2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});y2("Browser");var b2="firebase",S2="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zr(b2,S2,"app");var vv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Br,gE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,R){function I(){}I.prototype=R.prototype,O.F=R.prototype,O.prototype=new I,O.prototype.constructor=O,O.D=function(V,D,P){for(var C=Array(arguments.length-2),se=2;se<arguments.length;se++)C[se-2]=arguments[se];return R.prototype[D].apply(V,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(O,R,I){I||(I=0);const V=Array(16);if(typeof R=="string")for(var D=0;D<16;++D)V[D]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(D=0;D<16;++D)V[D]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=O.g[0],I=O.g[1],D=O.g[2];let P=O.g[3],C;C=R+(P^I&(D^P))+V[0]+3614090360&4294967295,R=I+(C<<7&4294967295|C>>>25),C=P+(D^R&(I^D))+V[1]+3905402710&4294967295,P=R+(C<<12&4294967295|C>>>20),C=D+(I^P&(R^I))+V[2]+606105819&4294967295,D=P+(C<<17&4294967295|C>>>15),C=I+(R^D&(P^R))+V[3]+3250441966&4294967295,I=D+(C<<22&4294967295|C>>>10),C=R+(P^I&(D^P))+V[4]+4118548399&4294967295,R=I+(C<<7&4294967295|C>>>25),C=P+(D^R&(I^D))+V[5]+1200080426&4294967295,P=R+(C<<12&4294967295|C>>>20),C=D+(I^P&(R^I))+V[6]+2821735955&4294967295,D=P+(C<<17&4294967295|C>>>15),C=I+(R^D&(P^R))+V[7]+4249261313&4294967295,I=D+(C<<22&4294967295|C>>>10),C=R+(P^I&(D^P))+V[8]+1770035416&4294967295,R=I+(C<<7&4294967295|C>>>25),C=P+(D^R&(I^D))+V[9]+2336552879&4294967295,P=R+(C<<12&4294967295|C>>>20),C=D+(I^P&(R^I))+V[10]+4294925233&4294967295,D=P+(C<<17&4294967295|C>>>15),C=I+(R^D&(P^R))+V[11]+2304563134&4294967295,I=D+(C<<22&4294967295|C>>>10),C=R+(P^I&(D^P))+V[12]+1804603682&4294967295,R=I+(C<<7&4294967295|C>>>25),C=P+(D^R&(I^D))+V[13]+4254626195&4294967295,P=R+(C<<12&4294967295|C>>>20),C=D+(I^P&(R^I))+V[14]+2792965006&4294967295,D=P+(C<<17&4294967295|C>>>15),C=I+(R^D&(P^R))+V[15]+1236535329&4294967295,I=D+(C<<22&4294967295|C>>>10),C=R+(D^P&(I^D))+V[1]+4129170786&4294967295,R=I+(C<<5&4294967295|C>>>27),C=P+(I^D&(R^I))+V[6]+3225465664&4294967295,P=R+(C<<9&4294967295|C>>>23),C=D+(R^I&(P^R))+V[11]+643717713&4294967295,D=P+(C<<14&4294967295|C>>>18),C=I+(P^R&(D^P))+V[0]+3921069994&4294967295,I=D+(C<<20&4294967295|C>>>12),C=R+(D^P&(I^D))+V[5]+3593408605&4294967295,R=I+(C<<5&4294967295|C>>>27),C=P+(I^D&(R^I))+V[10]+38016083&4294967295,P=R+(C<<9&4294967295|C>>>23),C=D+(R^I&(P^R))+V[15]+3634488961&4294967295,D=P+(C<<14&4294967295|C>>>18),C=I+(P^R&(D^P))+V[4]+3889429448&4294967295,I=D+(C<<20&4294967295|C>>>12),C=R+(D^P&(I^D))+V[9]+568446438&4294967295,R=I+(C<<5&4294967295|C>>>27),C=P+(I^D&(R^I))+V[14]+3275163606&4294967295,P=R+(C<<9&4294967295|C>>>23),C=D+(R^I&(P^R))+V[3]+4107603335&4294967295,D=P+(C<<14&4294967295|C>>>18),C=I+(P^R&(D^P))+V[8]+1163531501&4294967295,I=D+(C<<20&4294967295|C>>>12),C=R+(D^P&(I^D))+V[13]+2850285829&4294967295,R=I+(C<<5&4294967295|C>>>27),C=P+(I^D&(R^I))+V[2]+4243563512&4294967295,P=R+(C<<9&4294967295|C>>>23),C=D+(R^I&(P^R))+V[7]+1735328473&4294967295,D=P+(C<<14&4294967295|C>>>18),C=I+(P^R&(D^P))+V[12]+2368359562&4294967295,I=D+(C<<20&4294967295|C>>>12),C=R+(I^D^P)+V[5]+4294588738&4294967295,R=I+(C<<4&4294967295|C>>>28),C=P+(R^I^D)+V[8]+2272392833&4294967295,P=R+(C<<11&4294967295|C>>>21),C=D+(P^R^I)+V[11]+1839030562&4294967295,D=P+(C<<16&4294967295|C>>>16),C=I+(D^P^R)+V[14]+4259657740&4294967295,I=D+(C<<23&4294967295|C>>>9),C=R+(I^D^P)+V[1]+2763975236&4294967295,R=I+(C<<4&4294967295|C>>>28),C=P+(R^I^D)+V[4]+1272893353&4294967295,P=R+(C<<11&4294967295|C>>>21),C=D+(P^R^I)+V[7]+4139469664&4294967295,D=P+(C<<16&4294967295|C>>>16),C=I+(D^P^R)+V[10]+3200236656&4294967295,I=D+(C<<23&4294967295|C>>>9),C=R+(I^D^P)+V[13]+681279174&4294967295,R=I+(C<<4&4294967295|C>>>28),C=P+(R^I^D)+V[0]+3936430074&4294967295,P=R+(C<<11&4294967295|C>>>21),C=D+(P^R^I)+V[3]+3572445317&4294967295,D=P+(C<<16&4294967295|C>>>16),C=I+(D^P^R)+V[6]+76029189&4294967295,I=D+(C<<23&4294967295|C>>>9),C=R+(I^D^P)+V[9]+3654602809&4294967295,R=I+(C<<4&4294967295|C>>>28),C=P+(R^I^D)+V[12]+3873151461&4294967295,P=R+(C<<11&4294967295|C>>>21),C=D+(P^R^I)+V[15]+530742520&4294967295,D=P+(C<<16&4294967295|C>>>16),C=I+(D^P^R)+V[2]+3299628645&4294967295,I=D+(C<<23&4294967295|C>>>9),C=R+(D^(I|~P))+V[0]+4096336452&4294967295,R=I+(C<<6&4294967295|C>>>26),C=P+(I^(R|~D))+V[7]+1126891415&4294967295,P=R+(C<<10&4294967295|C>>>22),C=D+(R^(P|~I))+V[14]+2878612391&4294967295,D=P+(C<<15&4294967295|C>>>17),C=I+(P^(D|~R))+V[5]+4237533241&4294967295,I=D+(C<<21&4294967295|C>>>11),C=R+(D^(I|~P))+V[12]+1700485571&4294967295,R=I+(C<<6&4294967295|C>>>26),C=P+(I^(R|~D))+V[3]+2399980690&4294967295,P=R+(C<<10&4294967295|C>>>22),C=D+(R^(P|~I))+V[10]+4293915773&4294967295,D=P+(C<<15&4294967295|C>>>17),C=I+(P^(D|~R))+V[1]+2240044497&4294967295,I=D+(C<<21&4294967295|C>>>11),C=R+(D^(I|~P))+V[8]+1873313359&4294967295,R=I+(C<<6&4294967295|C>>>26),C=P+(I^(R|~D))+V[15]+4264355552&4294967295,P=R+(C<<10&4294967295|C>>>22),C=D+(R^(P|~I))+V[6]+2734768916&4294967295,D=P+(C<<15&4294967295|C>>>17),C=I+(P^(D|~R))+V[13]+1309151649&4294967295,I=D+(C<<21&4294967295|C>>>11),C=R+(D^(I|~P))+V[4]+4149444226&4294967295,R=I+(C<<6&4294967295|C>>>26),C=P+(I^(R|~D))+V[11]+3174756917&4294967295,P=R+(C<<10&4294967295|C>>>22),C=D+(R^(P|~I))+V[2]+718787259&4294967295,D=P+(C<<15&4294967295|C>>>17),C=I+(P^(D|~R))+V[9]+3951481745&4294967295,O.g[0]=O.g[0]+R&4294967295,O.g[1]=O.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,O.g[2]=O.g[2]+D&4294967295,O.g[3]=O.g[3]+P&4294967295}s.prototype.v=function(O,R){R===void 0&&(R=O.length);const I=R-this.blockSize,V=this.C;let D=this.h,P=0;for(;P<R;){if(D==0)for(;P<=I;)l(this,O,P),P+=this.blockSize;if(typeof O=="string"){for(;P<R;)if(V[D++]=O.charCodeAt(P++),D==this.blockSize){l(this,V),D=0;break}}else for(;P<R;)if(V[D++]=O[P++],D==this.blockSize){l(this,V),D=0;break}}this.h=D,this.o+=R},s.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var R=1;R<O.length-8;++R)O[R]=0;R=this.o*8;for(var I=O.length-8;I<O.length;++I)O[I]=R&255,R/=256;for(this.v(O),O=Array(16),R=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)O[R++]=this.g[I]>>>V&255;return O};function c(O,R){var I=p;return Object.prototype.hasOwnProperty.call(I,O)?I[O]:I[O]=R(O)}function f(O,R){this.h=R;const I=[];let V=!0;for(let D=O.length-1;D>=0;D--){const P=O[D]|0;V&&P==R||(I[D]=P,V=!1)}this.g=I}var p={};function y(O){return-128<=O&&O<128?c(O,function(R){return new f([R|0],R<0?-1:0)}):new f([O|0],O<0?-1:0)}function g(O){if(isNaN(O)||!isFinite(O))return w;if(O<0)return tt(g(-O));const R=[];let I=1;for(let V=0;O>=I;V++)R[V]=O/I|0,I*=4294967296;return new f(R,0)}function T(O,R){if(O.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(O.charAt(0)=="-")return tt(T(O.substring(1),R));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=g(Math.pow(R,8));let V=w;for(let P=0;P<O.length;P+=8){var D=Math.min(8,O.length-P);const C=parseInt(O.substring(P,P+D),R);D<8?(D=g(Math.pow(R,D)),V=V.j(D).add(g(C))):(V=V.j(I),V=V.add(g(C)))}return V}var w=y(0),N=y(1),L=y(16777216);r=f.prototype,r.m=function(){if(W(this))return-tt(this).m();let O=0,R=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);O+=(V>=0?V:4294967296+V)*R,R*=4294967296}return O},r.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(et(this))return"0";if(W(this))return"-"+tt(this).toString(O);const R=g(Math.pow(O,6));var I=this;let V="";for(;;){const D=jt(I,R).g;I=ht(I,D.j(R));let P=((I.g.length>0?I.g[0]:I.h)>>>0).toString(O);if(I=D,et(I))return P+V;for(;P.length<6;)P="0"+P;V=P+V}},r.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function et(O){if(O.h!=0)return!1;for(let R=0;R<O.g.length;R++)if(O.g[R]!=0)return!1;return!0}function W(O){return O.h==-1}r.l=function(O){return O=ht(this,O),W(O)?-1:et(O)?0:1};function tt(O){const R=O.g.length,I=[];for(let V=0;V<R;V++)I[V]=~O.g[V];return new f(I,~O.h).add(N)}r.abs=function(){return W(this)?tt(this):this},r.add=function(O){const R=Math.max(this.g.length,O.g.length),I=[];let V=0;for(let D=0;D<=R;D++){let P=V+(this.i(D)&65535)+(O.i(D)&65535),C=(P>>>16)+(this.i(D)>>>16)+(O.i(D)>>>16);V=C>>>16,P&=65535,C&=65535,I[D]=C<<16|P}return new f(I,I[I.length-1]&-2147483648?-1:0)};function ht(O,R){return O.add(tt(R))}r.j=function(O){if(et(this)||et(O))return w;if(W(this))return W(O)?tt(this).j(tt(O)):tt(tt(this).j(O));if(W(O))return tt(this.j(tt(O)));if(this.l(L)<0&&O.l(L)<0)return g(this.m()*O.m());const R=this.g.length+O.g.length,I=[];for(var V=0;V<2*R;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let D=0;D<O.g.length;D++){const P=this.i(V)>>>16,C=this.i(V)&65535,se=O.i(D)>>>16,qt=O.i(D)&65535;I[2*V+2*D]+=C*qt,gt(I,2*V+2*D),I[2*V+2*D+1]+=P*qt,gt(I,2*V+2*D+1),I[2*V+2*D+1]+=C*se,gt(I,2*V+2*D+1),I[2*V+2*D+2]+=P*se,gt(I,2*V+2*D+2)}for(O=0;O<R;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=R;O<2*R;O++)I[O]=0;return new f(I,0)};function gt(O,R){for(;(O[R]&65535)!=O[R];)O[R+1]+=O[R]>>>16,O[R]&=65535,R++}function pt(O,R){this.g=O,this.h=R}function jt(O,R){if(et(R))throw Error("division by zero");if(et(O))return new pt(w,w);if(W(O))return R=jt(tt(O),R),new pt(tt(R.g),tt(R.h));if(W(R))return R=jt(O,tt(R)),new pt(tt(R.g),R.h);if(O.g.length>30){if(W(O)||W(R))throw Error("slowDivide_ only works with positive integers.");for(var I=N,V=R;V.l(O)<=0;)I=at(I),V=at(V);var D=Ct(I,1),P=Ct(V,1);for(V=Ct(V,2),I=Ct(I,2);!et(V);){var C=P.add(V);C.l(O)<=0&&(D=D.add(I),P=C),V=Ct(V,1),I=Ct(I,1)}return R=ht(O,D.j(R)),new pt(D,R)}for(D=w;O.l(R)>=0;){for(I=Math.max(1,Math.floor(O.m()/R.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),P=g(I),C=P.j(R);W(C)||C.l(O)>0;)I-=V,P=g(I),C=P.j(R);et(P)&&(P=N),D=D.add(P),O=ht(O,C)}return new pt(D,O)}r.B=function(O){return jt(this,O).h},r.and=function(O){const R=Math.max(this.g.length,O.g.length),I=[];for(let V=0;V<R;V++)I[V]=this.i(V)&O.i(V);return new f(I,this.h&O.h)},r.or=function(O){const R=Math.max(this.g.length,O.g.length),I=[];for(let V=0;V<R;V++)I[V]=this.i(V)|O.i(V);return new f(I,this.h|O.h)},r.xor=function(O){const R=Math.max(this.g.length,O.g.length),I=[];for(let V=0;V<R;V++)I[V]=this.i(V)^O.i(V);return new f(I,this.h^O.h)};function at(O){const R=O.g.length+1,I=[];for(let V=0;V<R;V++)I[V]=O.i(V)<<1|O.i(V-1)>>>31;return new f(I,O.h)}function Ct(O,R){const I=R>>5;R%=32;const V=O.g.length-I,D=[];for(let P=0;P<V;P++)D[P]=R>0?O.i(P+I)>>>R|O.i(P+I+1)<<32-R:O.i(P+I);return new f(D,O.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,gE=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=T,Br=f}).apply(typeof vv<"u"?vv:typeof self<"u"?self:typeof window<"u"?window:{});var Tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yE,bl,_E,Nc,rm,vE,EE,TE;(function(){var r,t=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tc=="object"&&Tc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)t:{var _=s;u=u.split(".");for(var S=0;S<u.length-1;S++){var z=u[S];if(!(z in _))break t;_=_[z]}u=u[u.length-1],S=_[u],m=m(S),m!=S&&m!=null&&t(_,u,{configurable:!0,writable:!0,value:m})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(m){var _=[],S;for(S in m)Object.prototype.hasOwnProperty.call(m,S)&&_.push([S,m[S]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function p(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function y(u,m,_){return u.call.apply(u.bind,arguments)}function g(u,m,_){return g=y,g.apply(null,arguments)}function T(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function w(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(S,z,G){for(var rt=Array(arguments.length-2),St=2;St<arguments.length;St++)rt[St-2]=arguments[St];return m.prototype[z].apply(S,rt)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function L(u){const m=u.length;if(m>0){const _=Array(m);for(let S=0;S<m;S++)_[S]=u[S];return _}return[]}function et(u,m){for(let S=1;S<arguments.length;S++){const z=arguments[S];var _=typeof z;if(_=_!="object"?_:z?Array.isArray(z)?"array":_:"null",_=="array"||_=="object"&&typeof z.length=="number"){_=u.length||0;const G=z.length||0;u.length=_+G;for(let rt=0;rt<G;rt++)u[_+rt]=z[rt]}else u.push(z)}}class W{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function tt(u){f.setTimeout(()=>{throw u},0)}function ht(){var u=O;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class gt{constructor(){this.h=this.g=null}add(m,_){const S=pt.get();S.set(m,_),this.h?this.h.next=S:this.g=S,this.h=S}}var pt=new W(()=>new jt,u=>u.reset());class jt{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let at,Ct=!1,O=new gt,R=()=>{const u=Promise.resolve(void 0);at=()=>{u.then(I)}};function I(){for(var u;u=ht();){try{u.h.call(u.g)}catch(_){tt(_)}var m=pt;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}Ct=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};f.addEventListener("test",_,m),f.removeEventListener("test",_,m)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function se(u,m){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}w(se,D),se.prototype.init=function(u,m){const _=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var qt="closure_listenable_"+(Math.random()*1e6|0),F=0;function st(u,m,_,S,z){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!S,this.ha=z,this.key=++F,this.da=this.fa=!1}function ft(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Pt(u,m,_){for(const S in u)m.call(_,u[S],S,u)}function E(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function k(u){const m={};for(const _ in u)m[_]=u[_];return m}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(u,m){let _,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(_ in S)u[_]=S[_];for(let G=0;G<$.length;G++)_=$[G],Object.prototype.hasOwnProperty.call(S,_)&&(u[_]=S[_])}}function nt(u){this.src=u,this.g={},this.h=0}nt.prototype.add=function(u,m,_,S,z){const G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);const rt=it(u,m,S,z);return rt>-1?(m=u[rt],_||(m.fa=!1)):(m=new st(m,this.src,G,!!S,z),m.fa=_,u.push(m)),m};function ct(u,m){const _=m.type;if(_ in u.g){var S=u.g[_],z=Array.prototype.indexOf.call(S,m,void 0),G;(G=z>=0)&&Array.prototype.splice.call(S,z,1),G&&(ft(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function it(u,m,_,S){for(let z=0;z<u.length;++z){const G=u[z];if(!G.da&&G.listener==m&&G.capture==!!_&&G.ha==S)return z}return-1}var te="closure_lm_"+(Math.random()*1e6|0),Et={};function hn(u,m,_,S,z){if(Array.isArray(m)){for(let G=0;G<m.length;G++)hn(u,m[G],_,S,z);return null}return _=eu(_),u&&u[qt]?u.J(m,_,p(S)?!!S.capture:!1,z):po(u,m,_,!1,S,z)}function po(u,m,_,S,z,G){if(!m)throw Error("Invalid event type");const rt=p(z)?!!z.capture:!!z;let St=go(u);if(St||(u[te]=St=new nt(u)),_=St.add(m,_,S,rt,G),_.proxy)return _;if(S=$s(),_.proxy=S,S.src=u,S.listener=_,u.addEventListener)P||(z=rt),z===void 0&&(z=!1),u.addEventListener(m.toString(),S,z);else if(u.attachEvent)u.attachEvent(Js(m.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function $s(){function u(_){return m.call(u.src,u.listener,_)}const m=Ih;return u}function Zs(u,m,_,S,z){if(Array.isArray(m))for(var G=0;G<m.length;G++)Zs(u,m[G],_,S,z);else S=p(S)?!!S.capture:!!S,_=eu(_),u&&u[qt]?(u=u.i,G=String(m).toString(),G in u.g&&(m=u.g[G],_=it(m,_,S,z),_>-1&&(ft(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[G],u.h--)))):u&&(u=go(u))&&(m=u.g[m.toString()],u=-1,m&&(u=it(m,_,S,z)),(_=u>-1?m[u]:null)&&Jr(_))}function Jr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[qt])ct(m.i,u);else{var _=u.type,S=u.proxy;m.removeEventListener?m.removeEventListener(_,S,u.capture):m.detachEvent?m.detachEvent(Js(_),S):m.addListener&&m.removeListener&&m.removeListener(S),(_=go(m))?(ct(_,u),_.h==0&&(_.src=null,m[te]=null)):ft(u)}}}function Js(u){return u in Et?Et[u]:Et[u]="on"+u}function Ih(u,m){if(u.da)u=!0;else{m=new se(m,this);const _=u.listener,S=u.ha||u.src;u.fa&&Jr(u),u=_.call(S,m)}return u}function go(u){return u=u[te],u instanceof nt?u:null}var sn="__closure_events_fn_"+(Math.random()*1e9>>>0);function eu(u){return typeof u=="function"?u:(u[sn]||(u[sn]=function(m){return u.handleEvent(m)}),u[sn])}function Re(){V.call(this),this.i=new nt(this),this.M=this,this.G=null}w(Re,V),Re.prototype[qt]=!0,Re.prototype.removeEventListener=function(u,m,_,S){Zs(this,u,m,_,S)};function De(u,m){var _,S=u.G;if(S)for(_=[];S;S=S.G)_.push(S);if(u=u.M,S=m.type||m,typeof m=="string")m=new D(m,u);else if(m instanceof D)m.target=m.target||u;else{var z=m;m=new D(S,u),Y(m,z)}z=!0;let G,rt;if(_)for(rt=_.length-1;rt>=0;rt--)G=m.g=_[rt],z=vi(G,S,!0,m)&&z;if(G=m.g=u,z=vi(G,S,!0,m)&&z,z=vi(G,S,!1,m)&&z,_)for(rt=0;rt<_.length;rt++)G=m.g=_[rt],z=vi(G,S,!1,m)&&z}Re.prototype.N=function(){if(Re.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let S=0;S<_.length;S++)ft(_[S]);delete u.g[m],u.h--}}this.G=null},Re.prototype.J=function(u,m,_,S){return this.i.add(String(u),m,!1,_,S)},Re.prototype.K=function(u,m,_,S){return this.i.add(String(u),m,!0,_,S)};function vi(u,m,_,S){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let z=!0;for(let G=0;G<m.length;++G){const rt=m[G];if(rt&&!rt.da&&rt.capture==_){const St=rt.listener,re=rt.ha||rt.src;rt.fa&&ct(u.i,rt),z=St.call(re,S)!==!1&&z}}return z&&!S.defaultPrevented}function xh(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:f.setTimeout(u,m||0)}function yo(u){u.g=xh(()=>{u.g=null,u.i&&(u.i=!1,yo(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Ch extends V{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:yo(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wr(u){V.call(this),this.h=u,this.g={}}w(Wr,V);var $i=[];function Fe(u){Pt(u.g,function(m,_){this.g.hasOwnProperty(_)&&Jr(m)},u),u.g={}}Wr.prototype.N=function(){Wr.Z.N.call(this),Fe(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tn=f.JSON.stringify,We=f.JSON.parse,Nh=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function nu(){}function iu(){}var $n={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zi(){D.call(this,"d")}w(Zi,D);function kn(){D.call(this,"c")}w(kn,D);var An={},Ji=null;function Ws(){return Ji=Ji||new Re}An.Ia="serverreachability";function _o(u){D.call(this,An.Ia,u)}w(_o,D);function Wi(u){const m=Ws();De(m,new _o(m))}An.STAT_EVENT="statevent";function ta(u,m){D.call(this,An.STAT_EVENT,u),this.stat=m}w(ta,D);function fe(u){const m=Ws();De(m,new ta(m,u))}An.Ja="timingevent";function ru(u,m){D.call(this,An.Ja,u),this.size=m}w(ru,D);function tr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},m)}function er(){this.g=!0}er.prototype.ua=function(){this.g=!1};function vo(u,m,_,S,z,G){u.info(function(){if(u.g)if(G){var rt="",St=G.split("&");for(let Ft=0;Ft<St.length;Ft++){var re=St[Ft].split("=");if(re.length>1){const pe=re[0];re=re[1];const fn=pe.split("_");rt=fn.length>=2&&fn[1]=="type"?rt+(pe+"="+re+"&"):rt+(pe+"=redacted&")}}}else rt=null;else rt=G;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+m+`
`+_+`
`+rt})}function Eo(u,m,_,S,z,G,rt){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+m+`
`+_+`
`+G+" "+rt})}function Ei(u,m,_,S){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Zn(u,_)+(S?" "+S:"")})}function Dh(u,m){u.info(function(){return"TIMEOUT: "+m})}er.prototype.info=function(){};function Zn(u,m){if(!u.g)return m;if(!m)return null;try{const G=JSON.parse(m);if(G){for(u=0;u<G.length;u++)if(Array.isArray(G[u])){var _=G[u];if(!(_.length<2)){var S=_[1];if(Array.isArray(S)&&!(S.length<1)){var z=S[0];if(z!="noop"&&z!="stop"&&z!="close")for(let rt=1;rt<S.length;rt++)S[rt]=""}}}}return Tn(G)}catch{return m}}var de={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ue={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ti;function ts(){}w(ts,nu),ts.prototype.g=function(){return new XMLHttpRequest},Ti=new ts;function es(u){return encodeURIComponent(String(u))}function Oh(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function Pn(u,m,_,S){this.j=u,this.i=m,this.l=_,this.S=S||1,this.V=new Wr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new nr}function nr(){this.i=null,this.g="",this.h=!1}var ea={},Jn={};function Wn(u,m,_){u.M=1,u.A=bi(oe(m)),u.u=_,u.R=!0,ir(u,null)}function ir(u,m){u.F=Date.now(),ns(u),u.B=oe(u.A);var _=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),lu(_.i,"t",S),u.C=0,_=u.j.L,u.h=new nr,u.g=ha(u.j,_?m:null,!u.u),u.P>0&&(u.O=new Ch(g(u.Y,u,u.g),u.P)),m=u.V,_=u.g,S=u.ba;var z="readystatechange";Array.isArray(z)||(z&&($i[0]=z.toString()),z=$i);for(let G=0;G<z.length;G++){const rt=hn(_,z[G],S||m.handleEvent,!1,m.h||m);if(!rt)break;m.g[rt.key]=rt}m=u.J?k(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Wi(),vo(u.i,u.v,u.B,u.l,u.S,u.u)}Pn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Qe(u)==3?m.j():this.Y(u)},Pn.prototype.Y=function(u){try{if(u==this.g)t:{const St=Qe(this.g),re=this.g.ya(),Ft=this.g.ca();if(!(St<3)&&(St!=3||this.g&&(this.h.h||this.g.la()||ds(this.g)))){this.K||St!=4||re==7||(re==8||Ft<=0?Wi(3):Wi(2)),ei(this);var m=this.g.ca();this.X=m;var _=rr(this);if(this.o=m==200,Eo(this.i,this.v,this.B,this.l,this.S,St,m),this.o){if(this.U&&!this.L){e:{if(this.g){var S,z=this.g;if((S=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(S)){var G=S;break e}}G=null}if(u=G)Ei(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,na(this,u);else{this.o=!1,this.m=3,fe(12),ni(this),is(this);break t}}if(this.R){u=!0;let pe;for(;!this.K&&this.C<_.length;)if(pe=su(this,_),pe==Jn){St==4&&(this.m=4,fe(14),u=!1),Ei(this.i,this.l,null,"[Incomplete Response]");break}else if(pe==ea){this.m=4,fe(15),Ei(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Ei(this.i,this.l,pe,null),na(this,pe);if(me(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||_.length!=0||this.h.h||(this.m=1,fe(16),u=!1),this.o=this.o&&u,!u)Ei(this.i,this.l,_,"[Invalid Chunked Response]"),ni(this),is(this);else if(_.length>0&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.aa&&!rt.P&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),No(rt),rt.P=!0,fe(11))}}else Ei(this.i,this.l,_,null),na(this,_);St==4&&ni(this),this.o&&!this.K&&(St==4?Do(this.j,this):(this.o=!1,ns(this)))}else ms(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,fe(12)):(this.m=0,fe(13)),ni(this),is(this)}}}catch{}finally{}};function rr(u){if(!me(u))return u.g.la();const m=ds(u.g);if(m==="")return"";let _="";const S=m.length,z=Qe(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ni(u),is(u),"";u.h.i=new f.TextDecoder}for(let G=0;G<S;G++)u.h.h=!0,_+=u.h.i.decode(m[G],{stream:!(z&&G==S-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function me(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function su(u,m){var _=u.C,S=m.indexOf(`
`,_);return S==-1?Jn:(_=Number(m.substring(_,S)),isNaN(_)?ea:(S+=1,S+_>m.length?Jn:(m=m.slice(S,S+_),u.C=S+_,m)))}Pn.prototype.cancel=function(){this.K=!0,ni(this)};function ns(u){u.T=Date.now()+u.H,ti(u,u.H)}function ti(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=tr(g(u.aa,u),m)}function ei(u){u.D&&(f.clearTimeout(u.D),u.D=null)}Pn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Dh(this.i,this.B),this.M!=2&&(Wi(),fe(17)),ni(this),this.m=2,is(this)):ti(this,this.T-u)};function is(u){u.j.I==0||u.K||Do(u.j,u)}function ni(u){ei(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Fe(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function na(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||as(_.h,u))){if(!u.L&&as(_.h,u)&&_.I==3){try{var S=_.Ba.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){t:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)ca(_),ii(_);else break t;Co(_),fe(18)}}else _.xa=z[1],0<_.xa-_.K&&z[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=tr(g(_.Va,_),6e3));bn(_.h)<=1&&_.ta&&(_.ta=void 0)}else Ri(_,11)}else if((u.L||_.g==u)&&ca(_),!C(m))for(z=_.Ba.g.parse(m),m=0;m<z.length;m++){let Ft=z[m];const pe=Ft[0];if(!(pe<=_.K))if(_.K=pe,Ft=Ft[1],_.I==2)if(Ft[0]=="c"){_.M=Ft[1],_.ba=Ft[2];const fn=Ft[3];fn!=null&&(_.ka=fn,_.j.info("VER="+_.ka));const ri=Ft[4];ri!=null&&(_.za=ri,_.j.info("SVER="+_.za));const jn=Ft[5];jn!=null&&typeof jn=="number"&&jn>0&&(S=1.5*jn,_.O=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const zn=u.g;if(zn){const Bn=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bn){var G=S.h;G.g||Bn.indexOf("spdy")==-1&&Bn.indexOf("quic")==-1&&Bn.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(ia(G,G.h),G.h=null))}if(S.G){const Mo=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;Mo&&(S.wa=Mo,Kt(S.J,S.G,Mo))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),S=_;var rt=u;if(S.na=yu(S,S.L?S.ba:null,S.W),rt.L){Ai(S.h,rt);var St=rt,re=S.O;re&&(St.H=re),St.D&&(ei(St),ns(St)),S.g=rt}else du(S);_.i.length>0&&_s(_)}else Ft[0]!="stop"&&Ft[0]!="close"||Ri(_,7);else _.I==3&&(Ft[0]=="stop"||Ft[0]=="close"?Ft[0]=="stop"?Ri(_,7):gs(_):Ft[0]!="noop"&&_.l&&_.l.qa(Ft),_.A=0)}}Wi(4)}catch{}}var Mh=class{constructor(u,m){this.g=u,this.map=m}};function rs(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ss(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function bn(u){return u.h?1:u.g?u.g.size:0}function as(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ia(u,m){u.g?u.g.add(m):u.h=m}function Ai(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}rs.prototype.cancel=function(){if(this.i=ra(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ra(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return L(u.i)}var sa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vh(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const S=u[_].indexOf("=");let z,G=null;S>=0?(z=u[_].substring(0,S),G=u[_].substring(S+1)):z=u[_],m(z,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Un(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Un?(this.l=u.l,sr(this,u.j),this.o=u.o,this.g=u.g,os(this,u.u),this.h=u.h,ar(this,uu(u.i)),this.m=u.m):u&&(m=String(u).match(sa))?(this.l=!1,sr(this,m[1]||"",!0),this.o=ls(m[2]||""),this.g=ls(m[3]||"",!0),os(this,m[4]),this.h=ls(m[5]||"",!0),ar(this,m[6]||"",!0),this.m=ls(m[7]||"")):(this.l=!1,this.i=new Sn(null,this.l))}Un.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Oe(m,Ao,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Oe(m,Ao,!0),"@"),u.push(es(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Oe(_,_.charAt(0)=="/"?or:bo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Oe(_,ou)),u.join("")},Un.prototype.resolve=function(u){const m=oe(this);let _=!!u.j;_?sr(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var S=u.h;if(_)os(m,u.u);else if(_=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var z=m.h.lastIndexOf("/");z!=-1&&(S=m.h.slice(0,z+1)+S)}if(z=S,z==".."||z==".")S="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){S=z.lastIndexOf("/",0)==0,z=z.split("/");const G=[];for(let rt=0;rt<z.length;){const St=z[rt++];St=="."?S&&rt==z.length&&G.push(""):St==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),S&&rt==z.length&&G.push("")):(G.push(St),S=!0)}S=G.join("/")}else S=z}return _?m.h=S:_=u.i.toString()!=="",_?ar(m,uu(u.i)):_=!!u.m,_&&(m.m=u.m),m};function oe(u){return new Un(u)}function sr(u,m,_){u.j=_?ls(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function os(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function ar(u,m,_){m instanceof Sn?(u.i=m,Ro(u.i,u.l)):(_||(m=Oe(m,au)),u.i=new Sn(m,u.l))}function Kt(u,m,_){u.i.set(m,_)}function bi(u){return Kt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ls(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Oe(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,To),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function To(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ao=/[#\/\?@]/g,bo=/[#\?:]/g,or=/[#\?]/g,au=/[#\?@]/g,ou=/#/g;function Sn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Si(u){u.g||(u.g=new Map,u.h=0,u.i&&Vh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Sn.prototype,r.add=function(u,m){Si(this),this.i=null,u=Ln(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function So(u,m){Si(u),m=Ln(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function wo(u,m){return Si(u),m=Ln(u,m),u.g.has(m)}r.forEach=function(u,m){Si(this),this.g.forEach(function(_,S){_.forEach(function(z){u.call(m,z,S,this)},this)},this)};function aa(u,m){Si(u);let _=[];if(typeof m=="string")wo(u,m)&&(_=_.concat(u.g.get(Ln(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}r.set=function(u,m){return Si(this),this.i=null,u=Ln(this,u),wo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=aa(this,u),u.length>0?String(u[0]):m):m};function lu(u,m,_){So(u,m),_.length>0&&(u.i=null,u.g.set(Ln(u,m),L(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let S=0;S<m.length;S++){var _=m[S];const z=es(_);_=aa(this,_);for(let G=0;G<_.length;G++){let rt=z;_[G]!==""&&(rt+="="+es(_[G])),u.push(rt)}}return this.i=u.join("&")};function uu(u){const m=new Sn;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Ln(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Ro(u,m){m&&!u.j&&(Si(u),u.i=null,u.g.forEach(function(_,S){const z=S.toLowerCase();S!=z&&(So(this,S),lu(this,z,_))},u)),u.j=m}function Io(u,m){const _=new er;if(f.Image){const S=new Image;S.onload=T(tn,_,"TestLoadImage: loaded",!0,m,S),S.onerror=T(tn,_,"TestLoadImage: error",!1,m,S),S.onabort=T(tn,_,"TestLoadImage: abort",!1,m,S),S.ontimeout=T(tn,_,"TestLoadImage: timeout",!1,m,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else m(!1)}function lr(u,m){const _=new er,S=new AbortController,z=setTimeout(()=>{S.abort(),tn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:S.signal}).then(G=>{clearTimeout(z),G.ok?tn(_,"TestPingServer: ok",!0,m):tn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(z),tn(_,"TestPingServer: error",!1,m)})}function tn(u,m,_,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(_)}catch{}}function cu(){this.g=new Nh}function us(u){this.i=u.Sb||null,this.h=u.ab||!1}w(us,nu),us.prototype.g=function(){return new cs(this.i,this.h)};function cs(u,m){Re.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(cs,Re),r=cs.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,wi(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||f).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,en(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,wi(this)),this.g&&(this.readyState=3,wi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ur(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ur(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?en(this):wi(this),this.readyState==3&&ur(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,en(this))},r.Na=function(u){this.g&&(this.response=u,en(this))},r.ga=function(){this.g&&en(this)};function en(u){u.readyState=4,u.l=null,u.j=null,u.B=null,wi(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function wi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(cs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function cr(u){let m="";return Pt(u,function(_,S){m+=S,m+=":",m+=_,m+=`\r
`}),m}function wn(u,m,_){t:{for(S in _){var S=!1;break t}S=!0}S||(_=cr(_),typeof u=="string"?_!=null&&es(_):Kt(u,m,_))}function ee(u){Re.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(ee,Re);var oa=/^https?$/i,hu=["POST","PUT"];r=ee.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ti.g(),this.g.onreadystatechange=N(g(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(G){hs(this,G);return}if(u=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)_.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const G of S.keys())_.set(G,S.get(G));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(G=>G.toLowerCase()=="content-type"),z=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(hu,m,void 0)>=0)||S||z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,rt]of _)this.g.setRequestHeader(G,rt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(G){hs(this,G)}};function hs(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,fs(u),Ie(u)}function fs(u){u.A||(u.A=!0,De(u,"complete"),De(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,De(this,"complete"),De(this,"abort"),Ie(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ie(this,!0)),ee.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?xo(this):this.Xa())},r.Xa=function(){xo(this)};function xo(u){if(u.h&&typeof c<"u"){if(u.v&&Qe(u)==4)setTimeout(u.Ca.bind(u),0);else if(De(u,"readystatechange"),Qe(u)==4){u.h=!1;try{const G=u.ca();t:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var _;if(!(_=m)){var S;if(S=G===0){let rt=String(u.D).match(sa)[1]||null;!rt&&f.self&&f.self.location&&(rt=f.self.location.protocol.slice(0,-1)),S=!oa.test(rt?rt.toLowerCase():"")}_=S}if(_)De(u,"complete"),De(u,"success");else{u.o=6;try{var z=Qe(u)>2?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.ca()+"]",fs(u)}}finally{Ie(u)}}}}function Ie(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||De(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Qe(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Qe(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),We(m)}};function ds(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ms(u){const m={};u=(u.g&&Qe(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(C(u[S]))continue;var _=Oh(u[S]);const z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const G=m[z]||[];m[z]=G,G.push(_)}E(m,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ps(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function la(u){this.za=0,this.i=[],this.j=new er,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ps("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ps("baseRetryDelayMs",5e3,u),this.Za=ps("retryDelaySeedMs",1e4,u),this.Ta=ps("forwardChannelMaxRetries",2,u),this.va=ps("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new rs(u&&u.concurrentRequestLimit),this.Ba=new cu,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=la.prototype,r.ka=8,r.I=1,r.connect=function(u,m,_,S){fe(0),this.W=u,this.H=m||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.J=yu(this,null,this.W),_s(this)};function gs(u){if(ys(u),u.I==3){var m=u.V++,_=oe(u.J);if(Kt(_,"SID",u.M),Kt(_,"RID",m),Kt(_,"TYPE","terminate"),vs(u,_),m=new Pn(u,u.j,m),m.M=2,m.A=bi(oe(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&f.Image&&(new Image().src=m.A,_=!0),_||(m.g=ha(m.j,null),m.g.ea(m.A)),m.F=Date.now(),ns(m)}gu(u)}function ii(u){u.g&&(No(u),u.g.cancel(),u.g=null)}function ys(u){ii(u),u.v&&(f.clearTimeout(u.v),u.v=null),ca(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function _s(u){if(!ss(u.h)&&!u.m){u.m=!0;var m=u.Ea;at||R(),Ct||(at(),Ct=!0),O.add(m,u),u.D=0}}function kh(u,m){return bn(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=tr(g(u.Ea,u,m),pu(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const z=new Pn(this,this.j,u);let G=this.o;if(this.U&&(G?(G=k(G),Y(G,this.U)):G=this.U),this.u!==null||this.R||(z.J=G,G=null),this.S)t:{for(var m=0,_=0;_<this.i.length;_++){e:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break e}S=void 0}if(S===void 0)break;if(m+=S,m>4096){m=_;break t}if(m===4096||_===this.i.length-1){m=_+1;break t}}m=1e3}else m=1e3;m=ua(this,z,m),_=oe(this.J),Kt(_,"RID",u),Kt(_,"CVER",22),this.G&&Kt(_,"X-HTTP-Session-Id",this.G),vs(this,_),G&&(this.R?m="headers="+es(cr(G))+"&"+m:this.u&&wn(_,this.u,G)),ia(this.h,z),this.Ra&&Kt(_,"TYPE","init"),this.S?(Kt(_,"$req",m),Kt(_,"SID","null"),z.U=!0,Wn(z,_,null)):Wn(z,_,m),this.I=2}}else this.I==3&&(u?fu(this,u):this.i.length==0||ss(this.h)||fu(this))};function fu(u,m){var _;m?_=m.l:_=u.V++;const S=oe(u.J);Kt(S,"SID",u.M),Kt(S,"RID",_),Kt(S,"AID",u.K),vs(u,S),u.u&&u.o&&wn(S,u.u,u.o),_=new Pn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=ua(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ia(u.h,_),Wn(_,S,m)}function vs(u,m){u.H&&Pt(u.H,function(_,S){Kt(m,S,_)}),u.l&&Pt({},function(_,S){Kt(m,S,_)})}function ua(u,m,_){_=Math.min(u.i.length,_);const S=u.l?g(u.l.Ka,u.l,u):null;t:{var z=u.i;let St=-1;for(;;){const re=["count="+_];St==-1?_>0?(St=z[0].g,re.push("ofs="+St)):St=0:re.push("ofs="+St);let Ft=!0;for(let pe=0;pe<_;pe++){var G=z[pe].g;const fn=z[pe].map;if(G-=St,G<0)St=Math.max(0,z[pe].g-100),Ft=!1;else try{G="req"+G+"_"||"";try{var rt=fn instanceof Map?fn:Object.entries(fn);for(const[ri,jn]of rt){let zn=jn;p(jn)&&(zn=Tn(jn)),re.push(G+ri+"="+encodeURIComponent(zn))}}catch(ri){throw re.push(G+"type="+encodeURIComponent("_badmap")),ri}}catch{S&&S(fn)}}if(Ft){rt=re.join("&");break t}}rt=void 0}return u=u.i.splice(0,_),m.G=u,rt}function du(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;at||R(),Ct||(at(),Ct=!0),O.add(m,u),u.A=0}}function Co(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=tr(g(u.Da,u),pu(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,mu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=tr(g(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,fe(10),ii(this),mu(this))};function No(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function mu(u){u.g=new Pn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=oe(u.na);Kt(m,"RID","rpc"),Kt(m,"SID",u.M),Kt(m,"AID",u.K),Kt(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Kt(m,"TO",u.ia),Kt(m,"TYPE","xmlhttp"),vs(u,m),u.u&&u.o&&wn(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=bi(oe(m)),_.u=null,_.R=!0,ir(_,u)}r.Va=function(){this.C!=null&&(this.C=null,ii(this),Co(this),fe(19))};function ca(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Do(u,m){var _=null;if(u.g==m){ca(u),No(u),u.g=null;var S=2}else if(as(u.h,m))_=m.G,Ai(u.h,m),S=1;else return;if(u.I!=0){if(m.o)if(S==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var z=u.D;S=Ws(),De(S,new ru(S,_)),_s(u)}else du(u);else if(z=m.m,z==3||z==0&&m.X>0||!(S==1&&kh(u,m)||S==2&&Co(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),z){case 1:Ri(u,5);break;case 4:Ri(u,10);break;case 3:Ri(u,6);break;default:Ri(u,2)}}}function pu(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function Ri(u,m){if(u.j.info("Error code "+m),m==2){var _=g(u.bb,u),S=u.Ua;const z=!S;S=new Un(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||sr(S,"https"),bi(S),z?Io(S.toString(),_):lr(S.toString(),_)}else fe(2);u.I=0,u.l&&u.l.pa(m),gu(u),ys(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),fe(2)):(this.j.info("Failed to ping google.com"),fe(1))};function gu(u){if(u.I=0,u.ja=[],u.l){const m=ra(u.h);(m.length!=0||u.i.length!=0)&&(et(u.ja,m),et(u.ja,u.i),u.h.i.length=0,L(u.i),u.i.length=0),u.l.oa()}}function yu(u,m,_){var S=_ instanceof Un?oe(_):new Un(_);if(S.g!="")m&&(S.g=m+"."+S.g),os(S,S.u);else{var z=f.location;S=z.protocol,m=m?m+"."+z.hostname:z.hostname,z=+z.port;const G=new Un(null);S&&sr(G,S),m&&(G.g=m),z&&os(G,z),_&&(G.h=_),S=G}return _=u.G,m=u.wa,_&&m&&Kt(S,_,m),Kt(S,"VER",u.ka),vs(u,S),S}function ha(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new ee(new us({ab:_})):new ee(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function _u(){}r=_u.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function fa(){}fa.prototype.g=function(u,m){return new nn(u,m)};function nn(u,m){Re.call(this),this.g=new la(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!C(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new hr(this)}w(nn,Re),nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){gs(this.g)},nn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Tn(u),u=_);m.i.push(new Mh(m.Ya++,u)),m.I==3&&_s(m)},nn.prototype.N=function(){this.g.l=null,delete this.j,gs(this.g),delete this.g,nn.Z.N.call(this)};function Oo(u){Zi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const _ in m){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}w(Oo,Zi);function vu(){kn.call(this),this.status=1}w(vu,kn);function hr(u){this.g=u}w(hr,_u),hr.prototype.ra=function(){De(this.g,"a")},hr.prototype.qa=function(u){De(this.g,new Oo(u))},hr.prototype.pa=function(u){De(this.g,new vu)},hr.prototype.oa=function(){De(this.g,"b")},fa.prototype.createWebChannel=fa.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,TE=function(){return new fa},EE=function(){return Ws()},vE=An,rm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},de.NO_ERROR=0,de.TIMEOUT=8,de.HTTP_ERROR=6,Nc=de,Ue.COMPLETE="complete",_E=Ue,iu.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",Re.prototype.listen=Re.prototype.J,bl=iu,ee.prototype.listenOnce=ee.prototype.K,ee.prototype.getLastError=ee.prototype.Ha,ee.prototype.getLastErrorCode=ee.prototype.ya,ee.prototype.getStatus=ee.prototype.ca,ee.prototype.getResponseJson=ee.prototype.La,ee.prototype.getResponseText=ee.prototype.la,ee.prototype.send=ee.prototype.ea,ee.prototype.setWithCredentials=ee.prototype.Fa,yE=ee}).apply(typeof Tc<"u"?Tc:typeof self<"u"?self:typeof window<"u"?window:{});const Ev="@firebase/firestore",Tv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}$e.UNAUTHENTICATED=new $e(null),$e.GOOGLE_CREDENTIALS=new $e("google-credentials-uid"),$e.FIRST_PARTY=new $e("first-party-uid"),$e.MOCK_USER=new $e("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=new bm("@firebase/firestore");function Ba(){return Hs.logLevel}function lt(r,...t){if(Hs.logLevel<=Mt.DEBUG){const n=t.map(Pm);Hs.debug(`Firestore (${uo}): ${r}`,...n)}}function Yi(r,...t){if(Hs.logLevel<=Mt.ERROR){const n=t.map(Pm);Hs.error(`Firestore (${uo}): ${r}`,...n)}}function Ja(r,...t){if(Hs.logLevel<=Mt.WARN){const n=t.map(Pm);Hs.warn(`Firestore (${uo}): ${r}`,...n)}}function Pm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,AE(r,s,n)}function AE(r,t,n){let s=`FIRESTORE (${uo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Yi(s),new Error(s)}function Gt(r,t,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||AE(t,l,s)}function wt(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ot extends Xi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class w2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n($e.UNAUTHENTICATED)))}shutdown(){}}class R2{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class I2{constructor(t){this.t=t,this.currentUser=$e.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Gt(this.o===void 0,42304);let s=this.i;const l=y=>this.i!==s?(s=this.i,n(y)):Promise.resolve();let c=new Hi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Hi,t.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const y=c;t.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},p=y=>{lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Hi)}}),0),f()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Gt(typeof s.accessToken=="string",31837,{l:s}),new bE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Gt(t===null||typeof t=="string",2055,{h:t}),new $e(t)}}class x2{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=$e.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class C2{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new x2(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n($e.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Av{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class N2{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Fn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Gt(this.o===void 0,3512);const s=c=>{c.error!=null&&lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,lt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>s(c)))};const l=c=>{lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Av(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Gt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Av(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=D2(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=t.charAt(l[c]%62))}return s}}function Vt(r,t){return r<t?-1:r>t?1:0}function sm(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const l=r.charAt(s),c=t.charAt(s);if(l!==c)return Bd(l)===Bd(c)?Vt(l,c):Bd(l)?1:-1}return Vt(r.length,t.length)}const O2=55296,M2=57343;function Bd(r){const t=r.charCodeAt(0);return t>=O2&&t<=M2}function Wa(r,t,n){return r.length===t.length&&r.every(((s,l)=>n(s,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="__name__";class ci{constructor(t,n,s){n===void 0?n=0:n>t.length&&vt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&vt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return ci.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ci?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let l=0;l<s;l++){const c=ci.compareSegments(t.get(l),n.get(l));if(c!==0)return c}return Vt(t.length,n.length)}static compareSegments(t,n){const s=ci.isNumericId(t),l=ci.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?ci.extractNumericId(t).compare(ci.extractNumericId(n)):sm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Br.fromString(t.substring(4,t.length-2))}}class ie extends ci{construct(t,n,s){return new ie(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new ot(X.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new ie(n)}static emptyPath(){return new ie([])}}const V2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qe extends ci{construct(t,n,s){return new qe(t,n,s)}static isValidIdentifier(t){return V2.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qe.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bv}static keyField(){return new qe([bv])}static fromServerFormat(t){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new ot(X.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;l<t.length;){const p=t[l];if(p==="\\"){if(l+1===t.length)throw new ot(X.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ot(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=y,l+=2}else p==="`"?(f=!f,l++):p!=="."||f?(s+=p,l++):(c(),l++)}if(c(),f)throw new ot(X.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new qe(n)}static emptyPath(){return new qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(t){this.path=t}static fromPath(t){return new mt(ie.fromString(t))}static fromName(t){return new mt(ie.fromString(t).popFirst(5))}static empty(){return new mt(ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ie.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ie.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new mt(new ie(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(r,t,n){if(!n)throw new ot(X.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function k2(r,t,n,s){if(t===!0&&s===!0)throw new ot(X.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Sv(r){if(!mt.isDocumentKey(r))throw new ot(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function wv(r){if(mt.isDocumentKey(r))throw new ot(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function wE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function oh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":vt(12329,{type:typeof r})}function Kn(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new ot(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=oh(r);throw new ot(X.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(r,t){const n={typeString:r};return t&&(n.value=t),n}function Kl(r,t){if(!wE(r))throw new ot(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const l=t[s].typeString,c="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(l&&typeof f!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new ot(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=-62135596800,Iv=1e6;class Bt{static now(){return Bt.fromMillis(Date.now())}static fromDate(t){return Bt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*Iv);return new Bt(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ot(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ot(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Rv)throw new ot(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ot(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Iv}_compareTo(t){return this.seconds===t.seconds?Vt(this.nanoseconds,t.nanoseconds):Vt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Kl(t,Bt._jsonSchema))return new Bt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Rv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Bt._jsonSchemaVersion="firestore/timestamp/1.0",Bt._jsonSchema={type:Se("string",Bt._jsonSchemaVersion),seconds:Se("number"),nanoseconds:Se("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{static fromTimestamp(t){return new bt(t)}static min(){return new bt(new Bt(0,0))}static max(){return new bt(new Bt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=-1;function P2(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=bt.fromTimestamp(s===1e9?new Bt(n+1,0):new Bt(n,s));return new Hr(l,mt.empty(),t)}function U2(r){return new Hr(r.readTime,r.key,Ll)}class Hr{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Hr(bt.min(),mt.empty(),Ll)}static max(){return new Hr(bt.max(),mt.empty(),Ll)}}function L2(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=mt.comparator(r.documentKey,t.documentKey),n!==0?n:Vt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class z2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(r){if(r.code!==X.FAILED_PRECONDITION||r.message!==j2)throw r;lt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new J(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):J.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):J.reject(n)}static resolve(t){return new J(((n,s)=>{n(t)}))}static reject(t){return new J(((n,s)=>{s(t)}))}static waitFor(t){return new J(((n,s)=>{let l=0,c=0,f=!1;t.forEach((p=>{++l,p.next((()=>{++c,f&&c===l&&n()}),(y=>s(y)))})),f=!0,c===l&&n()}))}static or(t){let n=J.resolve(!1);for(const s of t)n=n.next((l=>l?J.resolve(l):s()));return n}static forEach(t,n){const s=[];return t.forEach(((l,c)=>{s.push(n.call(this,l,c))})),this.waitFor(s)}static mapArray(t,n){return new J(((s,l)=>{const c=t.length,f=new Array(c);let p=0;for(let y=0;y<c;y++){const g=y;n(t[g]).next((T=>{f[g]=T,++p,p===c&&s(f)}),(T=>l(T)))}}))}static doWhile(t,n){return new J(((s,l)=>{const c=()=>{t()===!0?n().next((()=>{c()}),l):s()};c()}))}}function B2(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ho(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}lh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm=-1;function uh(r){return r==null}function Qc(r){return r===0&&1/r==-1/0}function q2(r){return typeof r=="number"&&Number.isInteger(r)&&!Qc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="";function H2(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=xv(t)),t=G2(r.get(n),t);return xv(t)}function G2(r,t){let n=t;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case RE:n+="";break;default:n+=c}}return n}function xv(r){return r+RE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function Xr(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function IE(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t,n){this.comparator=t,this.root=n||Be.EMPTY}insert(t,n){return new ue(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Be.BLACK,null,null))}remove(t){return new ue(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Be.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ac(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ac(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ac(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ac(this.root,t,this.comparator,!0)}}class Ac{constructor(t,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=n?s(t.key,n):1,n&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Be{constructor(t,n,s,l,c){this.key=t,this.value=n,this.color=s??Be.RED,this.left=l??Be.EMPTY,this.right=c??Be.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,l,c){return new Be(t??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const c=s(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Be.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return Be.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Be.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw vt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw vt(27949);return t+(this.isRed()?0:1)}}Be.EMPTY=null,Be.RED=!0,Be.BLACK=!1;Be.EMPTY=new class{constructor(){this.size=0}get key(){throw vt(57766)}get value(){throw vt(16141)}get color(){throw vt(16727)}get left(){throw vt(29726)}get right(){throw vt(36894)}copy(t,n,s,l,c){return this}insert(t,n,s){return new Be(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(t){this.comparator=t,this.data=new ue(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nv(this.data.getIterator())}getIteratorFrom(t){return new Nv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof Ne)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Ne(this.comparator);return n.data=t,n}}class Nv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this.fields=t,t.sort(qe.comparator)}static empty(){return new En([])}unionWith(t){let n=new Ne(qe.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new En(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Wa(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new xE("Invalid base64 string: "+c):c}})(t);return new Ge(n)}static fromUint8Array(t){const n=(function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c})(t);return new Ge(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Vt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ge.EMPTY_BYTE_STRING=new Ge("");const F2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gr(r){if(Gt(!!r,39018),typeof r=="string"){let t=0;const n=F2.exec(r);if(Gt(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:_e(r.seconds),nanos:_e(r.nanos)}}function _e(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Fr(r){return typeof r=="string"?Ge.fromBase64String(r):Ge.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="server_timestamp",NE="__type__",DE="__previous_value__",OE="__local_write_time__";function jm(r){return(r?.mapValue?.fields||{})[NE]?.stringValue===CE}function ch(r){const t=r.mapValue.fields[DE];return jm(t)?ch(t):t}function jl(r){const t=Gr(r.mapValue.fields[OE].timestampValue);return new Bt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(t,n,s,l,c,f,p,y,g,T){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=T}}const Yc="(default)";class zl{constructor(t,n){this.projectId=t,this.database=n||Yc}static empty(){return new zl("","")}get isDefaultDatabase(){return this.database===Yc}isEqual(t){return t instanceof zl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="__type__",Y2="__max__",bc={mapValue:{}},VE="__vector__",Kc="value";function Qr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?jm(r)?4:X2(r)?9007199254740991:K2(r)?10:11:vt(28295,{value:r})}function yi(r,t){if(r===t)return!0;const n=Qr(r);if(n!==Qr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return jl(r).isEqual(jl(t));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=Gr(l.timestampValue),p=Gr(c.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(l,c){return Fr(l.bytesValue).isEqual(Fr(c.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(l,c){return _e(l.geoPointValue.latitude)===_e(c.geoPointValue.latitude)&&_e(l.geoPointValue.longitude)===_e(c.geoPointValue.longitude)})(r,t);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return _e(l.integerValue)===_e(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=_e(l.doubleValue),p=_e(c.doubleValue);return f===p?Qc(f)===Qc(p):isNaN(f)&&isNaN(p)}return!1})(r,t);case 9:return Wa(r.arrayValue.values||[],t.arrayValue.values||[],yi);case 10:case 11:return(function(l,c){const f=l.mapValue.fields||{},p=c.mapValue.fields||{};if(Cv(f)!==Cv(p))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(p[y]===void 0||!yi(f[y],p[y])))return!1;return!0})(r,t);default:return vt(52216,{left:r})}}function Bl(r,t){return(r.values||[]).find((n=>yi(n,t)))!==void 0}function to(r,t){if(r===t)return 0;const n=Qr(r),s=Qr(t);if(n!==s)return Vt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Vt(r.booleanValue,t.booleanValue);case 2:return(function(c,f){const p=_e(c.integerValue||c.doubleValue),y=_e(f.integerValue||f.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(r,t);case 3:return Dv(r.timestampValue,t.timestampValue);case 4:return Dv(jl(r),jl(t));case 5:return sm(r.stringValue,t.stringValue);case 6:return(function(c,f){const p=Fr(c),y=Fr(f);return p.compareTo(y)})(r.bytesValue,t.bytesValue);case 7:return(function(c,f){const p=c.split("/"),y=f.split("/");for(let g=0;g<p.length&&g<y.length;g++){const T=Vt(p[g],y[g]);if(T!==0)return T}return Vt(p.length,y.length)})(r.referenceValue,t.referenceValue);case 8:return(function(c,f){const p=Vt(_e(c.latitude),_e(f.latitude));return p!==0?p:Vt(_e(c.longitude),_e(f.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return Ov(r.arrayValue,t.arrayValue);case 10:return(function(c,f){const p=c.fields||{},y=f.fields||{},g=p[Kc]?.arrayValue,T=y[Kc]?.arrayValue,w=Vt(g?.values?.length||0,T?.values?.length||0);return w!==0?w:Ov(g,T)})(r.mapValue,t.mapValue);case 11:return(function(c,f){if(c===bc.mapValue&&f===bc.mapValue)return 0;if(c===bc.mapValue)return 1;if(f===bc.mapValue)return-1;const p=c.fields||{},y=Object.keys(p),g=f.fields||{},T=Object.keys(g);y.sort(),T.sort();for(let w=0;w<y.length&&w<T.length;++w){const N=sm(y[w],T[w]);if(N!==0)return N;const L=to(p[y[w]],g[T[w]]);if(L!==0)return L}return Vt(y.length,T.length)})(r.mapValue,t.mapValue);default:throw vt(23264,{he:n})}}function Dv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Vt(r,t);const n=Gr(r),s=Gr(t),l=Vt(n.seconds,s.seconds);return l!==0?l:Vt(n.nanos,s.nanos)}function Ov(r,t){const n=r.values||[],s=t.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=to(n[l],s[l]);if(c)return c}return Vt(n.length,s.length)}function eo(r){return am(r)}function am(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Gr(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Fr(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return mt.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=am(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const f of s)c?c=!1:l+=",",l+=`${f}:${am(n.fields[f])}`;return l+"}"})(r.mapValue):vt(61005,{value:r})}function Dc(r){switch(Qr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ch(r);return t?16+Dc(t):16;case 5:return 2*r.stringValue.length;case 6:return Fr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+Dc(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return Xr(s.fields,((c,f)=>{l+=c.length+Dc(f)})),l})(r.mapValue);default:throw vt(13486,{value:r})}}function Mv(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function om(r){return!!r&&"integerValue"in r}function zm(r){return!!r&&"arrayValue"in r}function Vv(r){return!!r&&"nullValue"in r}function kv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Oc(r){return!!r&&"mapValue"in r}function K2(r){return(r?.mapValue?.fields||{})[ME]?.stringValue===VE}function Nl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Xr(r.mapValue.fields,((n,s)=>t.mapValue.fields[n]=Nl(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Nl(r.arrayValue.values[n]);return t}return{...r}}function X2(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Y2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t){this.value=t}static empty(){return new cn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Oc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Nl(n)}setAll(t){let n=qe.emptyPath(),s={},l=[];t.forEach(((f,p)=>{if(!n.isImmediateParentOf(p)){const y=this.getFieldsMap(n);this.applyChanges(y,s,l),s={},l=[],n=p.popLast()}f?s[p.lastSegment()]=Nl(f):l.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(t){const n=this.field(t.popLast());Oc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return yi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=n.mapValue.fields[t.get(s)];Oc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,s){Xr(n,((l,c)=>t[l]=c));for(const l of s)delete t[l]}clone(){return new cn(Nl(this.value))}}function kE(r){const t=[];return Xr(r.fields,((n,s)=>{const l=new qe([n]);if(Oc(s)){const c=kE(s.mapValue).fields;if(c.length===0)t.push(l);else for(const f of c)t.push(l.child(f))}else t.push(l)})),new En(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t,n,s,l,c,f,p){this.key=t,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=f,this.documentState=p}static newInvalidDocument(t){return new Ze(t,0,bt.min(),bt.min(),bt.min(),cn.empty(),0)}static newFoundDocument(t,n,s,l){return new Ze(t,1,n,bt.min(),s,l,0)}static newNoDocument(t,n){return new Ze(t,2,n,bt.min(),bt.min(),cn.empty(),0)}static newUnknownDocument(t,n){return new Ze(t,3,n,bt.min(),bt.min(),cn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ze&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(t,n){this.position=t,this.inclusive=n}}function Pv(r,t,n){let s=0;for(let l=0;l<r.position.length;l++){const c=t[l],f=r.position[l];if(c.field.isKeyField()?s=mt.comparator(mt.fromName(f.referenceValue),n.key):s=to(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Uv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!yi(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(t,n="asc"){this.field=t,this.dir=n}}function $2(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{}class be extends PE{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new J2(t,n,s):n==="array-contains"?new eI(t,s):n==="in"?new nI(t,s):n==="not-in"?new iI(t,s):n==="array-contains-any"?new rI(t,s):new be(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new W2(t,s):new tI(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(to(n,this.value)):n!==null&&Qr(this.value)===Qr(n)&&this.matchesComparison(to(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xn extends PE{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Xn(t,n)}matches(t){return UE(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function UE(r){return r.op==="and"}function LE(r){return Z2(r)&&UE(r)}function Z2(r){for(const t of r.filters)if(t instanceof Xn)return!1;return!0}function lm(r){if(r instanceof be)return r.field.canonicalString()+r.op.toString()+eo(r.value);if(LE(r))return r.filters.map((t=>lm(t))).join(",");{const t=r.filters.map((n=>lm(n))).join(",");return`${r.op}(${t})`}}function jE(r,t){return r instanceof be?(function(s,l){return l instanceof be&&s.op===l.op&&s.field.isEqual(l.field)&&yi(s.value,l.value)})(r,t):r instanceof Xn?(function(s,l){return l instanceof Xn&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,f,p)=>c&&jE(f,l.filters[p])),!0):!1})(r,t):void vt(19439)}function zE(r){return r instanceof be?(function(n){return`${n.field.canonicalString()} ${n.op} ${eo(n.value)}`})(r):r instanceof Xn?(function(n){return n.op.toString()+" {"+n.getFilters().map(zE).join(" ,")+"}"})(r):"Filter"}class J2 extends be{constructor(t,n,s){super(t,n,s),this.key=mt.fromName(s.referenceValue)}matches(t){const n=mt.comparator(t.key,this.key);return this.matchesComparison(n)}}class W2 extends be{constructor(t,n){super(t,"in",n),this.keys=BE("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class tI extends be{constructor(t,n){super(t,"not-in",n),this.keys=BE("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function BE(r,t){return(t.arrayValue?.values||[]).map((n=>mt.fromName(n.referenceValue)))}class eI extends be{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return zm(n)&&Bl(n.arrayValue,this.value)}}class nI extends be{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Bl(this.value.arrayValue,n)}}class iI extends be{constructor(t,n){super(t,"not-in",n)}matches(t){if(Bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Bl(this.value.arrayValue,n)}}class rI extends be{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!zm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Bl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(t,n=null,s=[],l=[],c=null,f=null,p=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=f,this.endAt=p,this.Te=null}}function Lv(r,t=null,n=[],s=[],l=null,c=null,f=null){return new sI(r,t,n,s,l,c,f)}function Bm(r){const t=wt(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>lm(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),uh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>eo(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>eo(s))).join(",")),t.Te=n}return t.Te}function qm(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!$2(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!jE(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Uv(r.startAt,t.startAt)&&Uv(r.endAt,t.endAt)}function um(r){return mt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(t,n=null,s=[],l=[],c=null,f="F",p=null,y=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=f,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aI(r,t,n,s,l,c,f,p){return new fo(r,t,n,s,l,c,f,p)}function Hm(r){return new fo(r)}function jv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function qE(r){return r.collectionGroup!==null}function Dl(r){const t=wt(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),n.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Ne(qe.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((g=>{g.isInequality()&&(p=p.add(g.field))}))})),p})(t).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new ql(c,s))})),n.has(qe.keyField().canonicalString())||t.Ie.push(new ql(qe.keyField(),s))}return t.Ie}function fi(r){const t=wt(r);return t.Ee||(t.Ee=oI(t,Dl(r))),t.Ee}function oI(r,t){if(r.limitType==="F")return Lv(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new ql(l.field,c)}));const n=r.endAt?new Xc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Xc(r.startAt.position,r.startAt.inclusive):null;return Lv(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function cm(r,t){const n=r.filters.concat([t]);return new fo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function hm(r,t,n){return new fo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function hh(r,t){return qm(fi(r),fi(t))&&r.limitType===t.limitType}function HE(r){return`${Bm(fi(r))}|lt:${r.limitType}`}function qa(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>zE(l))).join(", ")}]`),uh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>eo(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>eo(l))).join(",")),`Target(${s})`})(fi(r))}; limitType=${r.limitType})`}function fh(r,t){return t.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):mt.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,t)&&(function(s,l){for(const c of Dl(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,t)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,t)&&(function(s,l){return!(s.startAt&&!(function(f,p,y){const g=Pv(f,p,y);return f.inclusive?g<=0:g<0})(s.startAt,Dl(s),l)||s.endAt&&!(function(f,p,y){const g=Pv(f,p,y);return f.inclusive?g>=0:g>0})(s.endAt,Dl(s),l))})(r,t)}function lI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function GE(r){return(t,n)=>{let s=!1;for(const l of Dl(r)){const c=uI(l,t,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function uI(r,t,n){const s=r.field.isKeyField()?mt.comparator(t.key,n.key):(function(c,f,p){const y=f.data.field(c),g=p.data.field(c);return y!==null&&g!==null?to(y,g):vt(42886)})(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return vt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Xr(this.inner,((n,s)=>{for(const[l,c]of s)t(l,c)}))}isEmpty(){return IE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=new ue(mt.comparator);function Ki(){return cI}const FE=new ue(mt.comparator);function Sl(...r){let t=FE;for(const n of r)t=t.insert(n.key,n);return t}function QE(r){let t=FE;return r.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function Us(){return Ol()}function YE(){return Ol()}function Ol(){return new Fs((r=>r.toString()),((r,t)=>r.isEqual(t)))}const hI=new ue(mt.comparator),fI=new Ne(mt.comparator);function kt(...r){let t=fI;for(const n of r)t=t.add(n);return t}const dI=new Ne(Vt);function mI(){return dI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qc(t)?"-0":t}}function KE(r){return{integerValue:""+r}}function pI(r,t){return q2(t)?KE(t):Gm(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(){this._=void 0}}function gI(r,t,n){return r instanceof $c?(function(l,c){const f={fields:{[NE]:{stringValue:CE},[OE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&jm(c)&&(c=ch(c)),c&&(f.fields[DE]=c),{mapValue:f}})(n,t):r instanceof no?$E(r,t):r instanceof io?ZE(r,t):(function(l,c){const f=XE(l,c),p=zv(f)+zv(l.Ae);return om(f)&&om(l.Ae)?KE(p):Gm(l.serializer,p)})(r,t)}function yI(r,t,n){return r instanceof no?$E(r,t):r instanceof io?ZE(r,t):n}function XE(r,t){return r instanceof Zc?(function(s){return om(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(t)?t:{integerValue:0}:null}class $c extends dh{}class no extends dh{constructor(t){super(),this.elements=t}}function $E(r,t){const n=JE(t);for(const s of r.elements)n.some((l=>yi(l,s)))||n.push(s);return{arrayValue:{values:n}}}class io extends dh{constructor(t){super(),this.elements=t}}function ZE(r,t){let n=JE(t);for(const s of r.elements)n=n.filter((l=>!yi(l,s)));return{arrayValue:{values:n}}}class Zc extends dh{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function zv(r){return _e(r.integerValue||r.doubleValue)}function JE(r){return zm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(t,n){this.field=t,this.transform=n}}function _I(r,t){return r.field.isEqual(t.field)&&(function(s,l){return s instanceof no&&l instanceof no||s instanceof io&&l instanceof io?Wa(s.elements,l.elements,yi):s instanceof Zc&&l instanceof Zc?yi(s.Ae,l.Ae):s instanceof $c&&l instanceof $c})(r.transform,t.transform)}class vI{constructor(t,n){this.version=t,this.transformResults=n}}class Vn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Vn}static exists(t){return new Vn(void 0,t)}static updateTime(t){return new Vn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Mc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class mh{}function tT(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Fm(r.key,Vn.none()):new Xl(r.key,r.data,Vn.none());{const n=r.data,s=cn.empty();let l=new Ne(qe.comparator);for(let c of t.fields)if(!l.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),l=l.add(c)}return new $r(r.key,s,new En(l.toArray()),Vn.none())}}function EI(r,t,n){r instanceof Xl?(function(l,c,f){const p=l.value.clone(),y=qv(l.fieldTransforms,c,f.transformResults);p.setAll(y),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(r,t,n):r instanceof $r?(function(l,c,f){if(!Mc(l.precondition,c))return void c.convertToUnknownDocument(f.version);const p=qv(l.fieldTransforms,c,f.transformResults),y=c.data;y.setAll(eT(l)),y.setAll(p),c.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(r,t,n):(function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,t,n)}function Ml(r,t,n,s){return r instanceof Xl?(function(c,f,p,y){if(!Mc(c.precondition,f))return p;const g=c.value.clone(),T=Hv(c.fieldTransforms,y,f);return g.setAll(T),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null})(r,t,n,s):r instanceof $r?(function(c,f,p,y){if(!Mc(c.precondition,f))return p;const g=Hv(c.fieldTransforms,y,f),T=f.data;return T.setAll(eT(c)),T.setAll(g),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(r,t,n,s):(function(c,f,p){return Mc(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(r,t,n)}function TI(r,t){let n=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),c=XE(s.transform,l||null);c!=null&&(n===null&&(n=cn.empty()),n.set(s.field,c))}return n||null}function Bv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Wa(s,l,((c,f)=>_I(c,f)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Xl extends mh{constructor(t,n,s,l=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class $r extends mh{constructor(t,n,s,l,c=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function eT(r){const t=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}})),t}function qv(r,t,n){const s=new Map;Gt(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const c=r[l],f=c.transform,p=t.data.field(c.field);s.set(c.field,yI(f,p,n[l]))}return s}function Hv(r,t,n){const s=new Map;for(const l of r){const c=l.transform,f=n.data.field(l.field);s.set(l.field,gI(c,f,t))}return s}class Fm extends mh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AI extends mh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(t,n,s,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&EI(c,t,s[l])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Ml(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Ml(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=YE();return this.mutations.forEach((l=>{const c=t.get(l.key),f=c.overlayedDocument;let p=this.applyToLocalView(f,c.mutatedFields);p=n.has(l.key)?null:p;const y=tT(f,p);y!==null&&s.set(l.key,y),f.isValidDocument()||f.convertToNoDocument(bt.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),kt())}isEqual(t){return this.batchId===t.batchId&&Wa(this.mutations,t.mutations,((n,s)=>Bv(n,s)))&&Wa(this.baseMutations,t.baseMutations,((n,s)=>Bv(n,s)))}}class Qm{constructor(t,n,s,l){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(t,n,s){Gt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=(function(){return hI})();const c=t.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,s[f].version);return new Qm(t,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae,Lt;function RI(r){switch(r){case X.OK:return vt(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return vt(15467,{code:r})}}function nT(r){if(r===void 0)return Yi("GRPC error has no .code"),X.UNKNOWN;switch(r){case Ae.OK:return X.OK;case Ae.CANCELLED:return X.CANCELLED;case Ae.UNKNOWN:return X.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return X.INTERNAL;case Ae.UNAVAILABLE:return X.UNAVAILABLE;case Ae.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Ae.NOT_FOUND:return X.NOT_FOUND;case Ae.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Ae.ABORTED:return X.ABORTED;case Ae.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Ae.DATA_LOSS:return X.DATA_LOSS;default:return vt(39323,{code:r})}}(Lt=Ae||(Ae={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=new Br([4294967295,4294967295],0);function Gv(r){const t=II().encode(r),n=new gE;return n.update(t),new Uint8Array(n.digest())}function Fv(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Br([n,s],0),new Br([l,c],0)]}class Ym{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new wl(`Invalid padding: ${n}`);if(s<0)throw new wl(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new wl(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new wl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Br.fromNumber(this.ge)}ye(t,n,s){let l=t.add(n.multiply(Br.fromNumber(s)));return l.compare(xI)===1&&(l=new Br([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Gv(t),[s,l]=Fv(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,l,c);if(!this.we(f))return!1}return!0}static create(t,n,s){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),f=new Ym(c,l,n);return s.forEach((p=>f.insert(p))),f}insert(t){if(this.ge===0)return;const n=Gv(t),[s,l]=Fv(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,l,c);this.Se(f)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(t,n,s,l,c){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const l=new Map;return l.set(t,$l.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new ph(bt.min(),l,new ue(Vt),Ki(),kt())}}class $l{constructor(t,n,s,l,c){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new $l(s,n,kt(),kt(),kt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(t,n,s,l){this.be=t,this.removedTargetIds=n,this.key=s,this.De=l}}class iT{constructor(t,n){this.targetId=t,this.Ce=n}}class rT{constructor(t,n,s=Ge.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=l}}class Qv{constructor(){this.ve=0,this.Fe=Yv(),this.Me=Ge.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=kt(),n=kt(),s=kt();return this.Fe.forEach(((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:vt(38017,{changeType:c})}})),new $l(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=Yv()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class CI{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ki(),this.Je=Sc(),this.He=Sc(),this.Ye=new ue(Vt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:vt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,s=t.Ce.count,l=this.ot(n);if(l){const c=l.target;if(um(c))if(s===0){const f=new mt(c.path);this.et(n,f,Ze.newNoDocument(f,bt.min()))}else Gt(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const p=this.ut(t),y=p?this.ct(p,t,f):1;if(y!==0){this.it(n);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let f,p;try{f=Fr(s).toUint8Array()}catch(y){if(y instanceof xE)return Ja("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new Ym(f,l,c)}catch(y){return Ja(y instanceof wl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((c=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;t.mightContain(p)||(this.et(n,c,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((c,f)=>{const p=this.ot(f);if(p){if(c.current&&um(p.target)){const y=new mt(p.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,Ze.newNoDocument(y,t))}c.Be&&(n.set(f,c.ke()),c.qe())}}));let s=kt();this.He.forEach(((c,f)=>{let p=!0;f.forEachWhile((y=>{const g=this.ot(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(t)));const l=new ph(t,n,this.Ye,this.je,s);return this.je=Ki(),this.Je=Sc(),this.He=Sc(),this.Ye=new ue(Vt),l}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Qv,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Ne(Vt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Ne(Vt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||lt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Qv),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Sc(){return new ue(mt.comparator)}function Yv(){return new ue(mt.comparator)}const NI={asc:"ASCENDING",desc:"DESCENDING"},DI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OI={and:"AND",or:"OR"};class MI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function fm(r,t){return r.useProto3Json||uh(t)?t:{value:t}}function Jc(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function sT(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function VI(r,t){return Jc(r,t.toTimestamp())}function di(r){return Gt(!!r,49232),bt.fromTimestamp((function(n){const s=Gr(n);return new Bt(s.seconds,s.nanos)})(r))}function Km(r,t){return dm(r,t).canonicalString()}function dm(r,t){const n=(function(l){return new ie(["projects",l.projectId,"databases",l.database])})(r).child("documents");return t===void 0?n:n.child(t)}function aT(r){const t=ie.fromString(r);return Gt(hT(t),10190,{key:t.toString()}),t}function mm(r,t){return Km(r.databaseId,t.path)}function qd(r,t){const n=aT(t);if(n.get(1)!==r.databaseId.projectId)throw new ot(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new ot(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new mt(lT(n))}function oT(r,t){return Km(r.databaseId,t)}function kI(r){const t=aT(r);return t.length===4?ie.emptyPath():lT(t)}function pm(r){return new ie(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function lT(r){return Gt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Kv(r,t,n){return{name:mm(r,t),fields:n.value.mapValue.fields}}function PI(r,t){let n;if("targetChange"in t){t.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:vt(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=(function(g,T){return g.useProto3Json?(Gt(T===void 0||typeof T=="string",58123),Ge.fromBase64String(T||"")):(Gt(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Ge.fromUint8Array(T||new Uint8Array))})(r,t.targetChange.resumeToken),f=t.targetChange.cause,p=f&&(function(g){const T=g.code===void 0?X.UNKNOWN:nT(g.code);return new ot(T,g.message||"")})(f);n=new rT(s,l,c,p||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=qd(r,s.document.name),c=di(s.document.updateTime),f=s.document.createTime?di(s.document.createTime):bt.min(),p=new cn({mapValue:{fields:s.document.fields}}),y=Ze.newFoundDocument(l,c,f,p),g=s.targetIds||[],T=s.removedTargetIds||[];n=new Vc(g,T,y.key,y)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=qd(r,s.document),c=s.readTime?di(s.readTime):bt.min(),f=Ze.newNoDocument(l,c),p=s.removedTargetIds||[];n=new Vc([],p,f.key,f)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=qd(r,s.document),c=s.removedTargetIds||[];n=new Vc([],c,l,null)}else{if(!("filter"in t))return vt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,f=new wI(l,c),p=s.targetId;n=new iT(p,f)}}return n}function UI(r,t){let n;if(t instanceof Xl)n={update:Kv(r,t.key,t.value)};else if(t instanceof Fm)n={delete:mm(r,t.key)};else if(t instanceof $r)n={update:Kv(r,t.key,t.data),updateMask:QI(t.fieldMask)};else{if(!(t instanceof AI))return vt(16599,{Vt:t.type});n={verify:mm(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(c,f){const p=f.transform;if(p instanceof $c)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof no)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof io)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Zc)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw vt(20930,{transform:f.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:VI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:vt(27497)})(r,t.precondition)),n}function LI(r,t){return r&&r.length>0?(Gt(t!==void 0,14353),r.map((n=>(function(l,c){let f=l.updateTime?di(l.updateTime):di(c);return f.isEqual(bt.min())&&(f=di(c)),new vI(f,l.transformResults||[])})(n,t)))):[]}function jI(r,t){return{documents:[oT(r,t.path)]}}function zI(r,t){const n={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=oT(r,l);const c=(function(g){if(g.length!==0)return cT(Xn.create(g,"and"))})(t.filters);c&&(n.structuredQuery.where=c);const f=(function(g){if(g.length!==0)return g.map((T=>(function(N){return{field:Ha(N.field),direction:HI(N.dir)}})(T)))})(t.orderBy);f&&(n.structuredQuery.orderBy=f);const p=fm(r,t.limit);return p!==null&&(n.structuredQuery.limit=p),t.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{ft:n,parent:l}}function BI(r){let t=kI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Gt(s===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:t=t.child(T.collectionId)}let c=[];n.where&&(c=(function(w){const N=uT(w);return N instanceof Xn&&LE(N)?N.getFilters():[N]})(n.where));let f=[];n.orderBy&&(f=(function(w){return w.map((N=>(function(et){return new ql(Ga(et.field),(function(tt){switch(tt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(et.direction))})(N)))})(n.orderBy));let p=null;n.limit&&(p=(function(w){let N;return N=typeof w=="object"?w.value:w,uh(N)?null:N})(n.limit));let y=null;n.startAt&&(y=(function(w){const N=!!w.before,L=w.values||[];return new Xc(L,N)})(n.startAt));let g=null;return n.endAt&&(g=(function(w){const N=!w.before,L=w.values||[];return new Xc(L,N)})(n.endAt)),aI(t,l,f,c,p,"F",y,g)}function qI(r,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function uT(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ga(n.unaryFilter.field);return be.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Ga(n.unaryFilter.field);return be.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ga(n.unaryFilter.field);return be.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ga(n.unaryFilter.field);return be.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return vt(61313);default:return vt(60726)}})(r):r.fieldFilter!==void 0?(function(n){return be.create(Ga(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return vt(58110);default:return vt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Xn.create(n.compositeFilter.filters.map((s=>uT(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return vt(1026)}})(n.compositeFilter.op))})(r):vt(30097,{filter:r})}function HI(r){return NI[r]}function GI(r){return DI[r]}function FI(r){return OI[r]}function Ha(r){return{fieldPath:r.canonicalString()}}function Ga(r){return qe.fromServerFormat(r.fieldPath)}function cT(r){return r instanceof be?(function(n){if(n.op==="=="){if(kv(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NAN"}};if(Vv(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kv(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NAN"}};if(Vv(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ha(n.field),op:GI(n.op),value:n.value}}})(r):r instanceof Xn?(function(n){const s=n.getFilters().map((l=>cT(l)));return s.length===1?s[0]:{compositeFilter:{op:FI(n.op),filters:s}}})(r):vt(54877,{filter:r})}function QI(r){const t=[];return r.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function hT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t,n,s,l,c=bt.min(),f=bt.min(),p=Ge.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(t){return new Ur(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(t){this.yt=t}}function KI(r){const t=BI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?hm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.Cn=new $I}addToCollectionParentIndex(t,n){return this.Cn.add(n),J.resolve()}getCollectionParents(t,n){return J.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return J.resolve()}deleteFieldIndex(t,n){return J.resolve()}deleteAllFieldIndexes(t){return J.resolve()}createTargetIndexes(t,n){return J.resolve()}getDocumentsMatchingTarget(t,n){return J.resolve(null)}getIndexType(t,n){return J.resolve(0)}getFieldIndexes(t,n){return J.resolve([])}getNextCollectionGroupToUpdate(t){return J.resolve(null)}getMinOffset(t,n){return J.resolve(Hr.min())}getMinOffsetFromCollectionGroup(t,n){return J.resolve(Hr.min())}updateCollectionGroup(t,n,s){return J.resolve()}updateIndexEntries(t,n){return J.resolve()}}class $I{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n]||new Ne(ie.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Ne(ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fT=41943040;class un{static withCacheSize(t){return new un(t,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(fT,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ro(0)}static cr(){return new ro(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="LruGarbageCollector",ZI=1048576;function Zv([r,t],[n,s]){const l=Vt(r,n);return l===0?Vt(t,s):l}class JI{constructor(t){this.Ir=t,this.buffer=new Ne(Zv),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Zv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class WI{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){lt($v,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ho(n)?lt($v,"Ignoring IndexedDB error during garbage collection: ",n):await co(n)}await this.Vr(3e5)}))}}class tx{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return J.resolve(lh.ce);const s=new JI(n);return this.mr.forEachTarget(t,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(lt("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(Xv)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(lt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xv):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,l,c,f,p,y,g;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(lt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,f=Date.now(),this.nthSequenceNumber(t,l)))).next((w=>(s=w,p=Date.now(),this.removeTargets(t,s,n)))).next((w=>(c=w,y=Date.now(),this.removeOrphanedDocuments(t,s)))).next((w=>(g=Date.now(),Ba()<=Mt.DEBUG&&lt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${l} in `+(p-f)+`ms
	Removed ${c} targets in `+(y-p)+`ms
	Removed ${w} documents in `+(g-y)+`ms
Total Duration: ${g-T}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:w}))))}}function ex(r,t){return new tx(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this.changes=new Fs((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ze.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?J.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(t,n,s,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(s!==null&&Ml(s.mutation,l,En.empty(),Bt.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,kt()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=kt()){const l=Us();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,s).next((c=>{let f=Sl();return c.forEach(((p,y)=>{f=f.insert(p,y.overlayedDocument)})),f}))))}getOverlayedDocuments(t,n){const s=Us();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,kt())))}populateOverlays(t,n,s){const l=[];return s.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(t,l).next((c=>{c.forEach(((f,p)=>{n.set(f,p)}))}))}computeViews(t,n,s,l){let c=Ki();const f=Ol(),p=(function(){return Ol()})();return n.forEach(((y,g)=>{const T=s.get(g.key);l.has(g.key)&&(T===void 0||T.mutation instanceof $r)?c=c.insert(g.key,g):T!==void 0?(f.set(g.key,T.mutation.getFieldMask()),Ml(T.mutation,g,T.mutation.getFieldMask(),Bt.now())):f.set(g.key,En.empty())})),this.recalculateAndSaveOverlays(t,c).next((y=>(y.forEach(((g,T)=>f.set(g,T))),n.forEach(((g,T)=>p.set(g,new ix(T,f.get(g)??null)))),p)))}recalculateAndSaveOverlays(t,n){const s=Ol();let l=new ue(((f,p)=>f-p)),c=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((f=>{for(const p of f)p.keys().forEach((y=>{const g=n.get(y);if(g===null)return;let T=s.get(y)||En.empty();T=p.applyToLocalView(g,T),s.set(y,T);const w=(l.get(p.batchId)||kt()).add(y);l=l.insert(p.batchId,w)}))})).next((()=>{const f=[],p=l.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),g=y.key,T=y.value,w=YE();T.forEach((N=>{if(!c.has(N)){const L=tT(n.get(N),s.get(N));L!==null&&w.set(N,L),c=c.add(N)}})),f.push(this.documentOverlayCache.saveOverlays(t,g,w))}return J.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,l){return(function(f){return mt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):qE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,l):this.getDocumentsMatchingCollectionQuery(t,n,s,l)}getNextDocuments(t,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,l).next((c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,l-c.size):J.resolve(Us());let p=Ll,y=c;return f.next((g=>J.forEach(g,((T,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),c.get(T)?J.resolve():this.remoteDocumentCache.getEntry(t,T).next((N=>{y=y.insert(T,N)}))))).next((()=>this.populateOverlays(t,g,c))).next((()=>this.computeViews(t,y,g,kt()))).next((T=>({batchId:p,changes:QE(T)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new mt(n)).next((s=>{let l=Sl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,l){const c=n.collectionGroup;let f=Sl();return this.indexManager.getCollectionParents(t,c).next((p=>J.forEach(p,(y=>{const g=(function(w,N){return new fo(N,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(t,g,s,l).next((T=>{T.forEach(((w,N)=>{f=f.insert(w,N)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(t,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,c,l)))).next((f=>{c.forEach(((y,g)=>{const T=g.getKey();f.get(T)===null&&(f=f.insert(T,Ze.newInvalidDocument(T)))}));let p=Sl();return f.forEach(((y,g)=>{const T=c.get(y);T!==void 0&&Ml(T.mutation,g,En.empty(),Bt.now()),fh(n,g)&&(p=p.insert(y,g))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return J.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:di(l.createTime)}})(n)),J.resolve()}getNamedQuery(t,n){return J.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:KI(l.bundledQuery),readTime:di(l.readTime)}})(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(){this.overlays=new ue(mt.comparator),this.qr=new Map}getOverlay(t,n){return J.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Us();return J.forEach(n,(l=>this.getOverlay(t,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((l,c)=>{this.St(t,n,c)})),J.resolve()}removeOverlaysForBatchId(t,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),J.resolve()}getOverlaysForCollection(t,n,s){const l=Us(),c=n.length+1,f=new mt(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const y=p.getNext().value,g=y.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===c&&y.largestBatchId>s&&l.set(y.getKey(),y)}return J.resolve(l)}getOverlaysForCollectionGroup(t,n,s,l){let c=new ue(((g,T)=>g-T));const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let T=c.get(g.largestBatchId);T===null&&(T=Us(),c=c.insert(g.largestBatchId,T)),T.set(g.getKey(),g)}}const p=Us(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((g,T)=>p.set(g,T))),!(p.size()>=l)););return J.resolve(p)}St(t,n,s){const l=this.overlays.get(s.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new SI(n,s));let c=this.qr.get(n);c===void 0&&(c=kt(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(t){return J.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(){this.Qr=new Ne(Pe.$r),this.Ur=new Ne(Pe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new Pe(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new Pe(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new mt(new ie([])),s=new Pe(n,t),l=new Pe(n,t+1),c=[];return this.Ur.forEachInRange([s,l],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new mt(new ie([])),s=new Pe(n,t),l=new Pe(n,t+1);let c=kt();return this.Ur.forEachInRange([s,l],(f=>{c=c.add(f.key)})),c}containsKey(t){const n=new Pe(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Pe{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return mt.comparator(t.key,n.key)||Vt(t.Yr,n.Yr)}static Kr(t,n){return Vt(t.Yr,n.Yr)||mt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ne(Pe.$r)}checkEmpty(t){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new bI(c,n,s,l);this.mutationQueue.push(f);for(const p of l)this.Zr=this.Zr.add(new Pe(p.key,c)),this.indexManager.addToCollectionParentIndex(t,p.key.path.popLast());return J.resolve(f)}lookupMutationBatch(t,n){return J.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,l=this.ei(s),c=l<0?0:l;return J.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?Lm:this.tr-1)}getAllMutationBatches(t){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Pe(n,0),l=new Pe(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(f=>{const p=this.Xr(f.Yr);c.push(p)})),J.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ne(Vt);return n.forEach((l=>{const c=new Pe(l,0),f=new Pe(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(p=>{s=s.add(p.Yr)}))})),J.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,l=s.length+1;let c=s;mt.isDocumentKey(c)||(c=c.child(""));const f=new Pe(new mt(c),0);let p=new Ne(Vt);return this.Zr.forEachWhile((y=>{const g=y.key.path;return!!s.isPrefixOf(g)&&(g.length===l&&(p=p.add(y.Yr)),!0)}),f),J.resolve(this.ti(p))}ti(t){const n=[];return t.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){Gt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return J.forEach(n.mutations,(l=>{const c=new Pe(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new Pe(n,0),l=this.Zr.firstAfterOrEqual(s);return J.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,J.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(t){this.ri=t,this.docs=(function(){return new ue(mt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return J.resolve(s?s.document.mutableCopy():Ze.newInvalidDocument(n))}getEntries(t,n){let s=Ki();return n.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():Ze.newInvalidDocument(l))})),J.resolve(s)}getDocumentsMatchingQuery(t,n,s,l){let c=Ki();const f=n.path,p=new mt(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:g,value:{document:T}}=y.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||L2(U2(T),s)<=0||(l.has(T.key)||fh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return J.resolve(c)}getAllFromCollectionGroup(t,n,s,l){vt(9500)}ii(t,n){return J.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new cx(this)}getSize(t){return J.resolve(this.size)}}class cx extends nx{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)})),J.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(t){this.persistence=t,this.si=new Fs((n=>Bm(n)),qm),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.oi=0,this._i=new Xm,this.targetCount=0,this.ai=ro.ur()}forEachTarget(t,n){return this.si.forEach(((s,l)=>n(l))),J.resolve()}getLastRemoteSnapshotVersion(t){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return J.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),J.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new ro(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,J.resolve()}updateTargetData(t,n){return this.Pr(n),J.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(t,n,s){let l=0;const c=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(t,p.targetId)),l++)})),J.waitFor(c).next((()=>l))}getTargetCount(t){return J.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return J.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),J.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((f=>{c.push(l.markPotentiallyOrphaned(t,f))})),J.waitFor(c)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),J.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return J.resolve(s)}containsKey(t,n){return J.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(t,n){this.ui={},this.overlays={},this.ci=new lh(0),this.li=!1,this.li=!0,this.hi=new ox,this.referenceDelegate=t(this),this.Pi=new hx(this),this.indexManager=new XI,this.remoteDocumentCache=(function(l){return new ux(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new YI(n),this.Ii=new sx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new ax,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new lx(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){lt("MemoryPersistence","Starting transaction:",t);const l=new fx(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(t,n){return J.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class fx extends z2{constructor(t){super(),this.currentSequenceNumber=t}}class $m{constructor(t){this.persistence=t,this.Ri=new Xm,this.Vi=null}static mi(t){return new $m(t)}get fi(){if(this.Vi)return this.Vi;throw vt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),J.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),J.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),J.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.fi,(s=>{const l=mt.fromPath(s);return this.gi(t,l).next((c=>{c||n.removeEntry(l,bt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return J.or([()=>J.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Wc{constructor(t,n){this.persistence=t,this.pi=new Fs((s=>H2(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=ex(this,n)}static mi(t,n){return new Wc(t,n)}Ei(){}di(t){return J.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((l=>s+l))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return J.forEach(this.pi,((s,l)=>this.br(t,s,l).next((c=>c?J.resolve():n(l)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(t,(f=>this.br(t,f,n).next((p=>{p||(s++,c.removeEntry(f,bt.min()))})))).next((()=>c.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),J.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),J.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),J.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),J.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Dc(t.data.value)),n}br(t,n,s){return J.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return J.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(t,n,s,l){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=l}static As(t,n){let s=kt(),l=kt();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Zm(t,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return rS()?8:B2(Je())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,l){const c={result:null};return this.ys(t,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(t,n,l,s).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new dx;return this.Ss(t,n,f).next((p=>{if(c.result=p,this.Vs)return this.bs(t,n,f,p.size)}))})).next((()=>c.result))}bs(t,n,s,l){return s.documentReadCount<this.fs?(Ba()<=Mt.DEBUG&&lt("QueryEngine","SDK will not create cache indexes for query:",qa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),J.resolve()):(Ba()<=Mt.DEBUG&&lt("QueryEngine","Query:",qa(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Ba()<=Mt.DEBUG&&lt("QueryEngine","The SDK decides to create cache indexes for query:",qa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,fi(n))):J.resolve())}ys(t,n){if(jv(n))return J.resolve(null);let s=fi(n);return this.indexManager.getIndexType(t,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=hm(n,null,"F"),s=fi(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((c=>{const f=kt(...c);return this.ps.getDocuments(t,f).next((p=>this.indexManager.getMinOffset(t,s).next((y=>{const g=this.Ds(n,p);return this.Cs(n,g,f,y.readTime)?this.ys(t,hm(n,null,"F")):this.vs(t,g,n,y)}))))})))))}ws(t,n,s,l){return jv(n)||l.isEqual(bt.min())?J.resolve(null):this.ps.getDocuments(t,s).next((c=>{const f=this.Ds(n,c);return this.Cs(n,f,s,l)?J.resolve(null):(Ba()<=Mt.DEBUG&&lt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),qa(n)),this.vs(t,f,n,P2(l,Ll)).next((p=>p)))}))}Ds(t,n){let s=new Ne(GE(t));return n.forEach(((l,c)=>{fh(t,c)&&(s=s.add(c))})),s}Cs(t,n,s,l){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const c=t.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(t,n,s){return Ba()<=Mt.DEBUG&&lt("QueryEngine","Using full collection scan to execute query:",qa(n)),this.ps.getDocumentsMatchingQuery(t,n,Hr.min(),s)}vs(t,n,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="LocalStore",px=3e8;class gx{constructor(t,n,s,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new ue(Vt),this.xs=new Fs((c=>Bm(c)),qm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new rx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function yx(r,t,n,s){return new gx(r,t,n,s)}async function mT(r,t){const n=wt(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const f=[],p=[];let y=kt();for(const g of l){f.push(g.batchId);for(const T of g.mutations)y=y.add(T.key)}for(const g of c){p.push(g.batchId);for(const T of g.mutations)y=y.add(T.key)}return n.localDocuments.getDocuments(s,y).next((g=>({Ls:g,removedBatchIds:f,addedBatchIds:p})))}))}))}function _x(r,t){const n=wt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=t.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,g,T){const w=g.batch,N=w.keys();let L=J.resolve();return N.forEach((et=>{L=L.next((()=>T.getEntry(y,et))).next((W=>{const tt=g.docVersions.get(et);Gt(tt!==null,48541),W.version.compareTo(tt)<0&&(w.applyToRemoteDocument(W,g),W.isValidDocument()&&(W.setReadTime(g.commitVersion),T.addEntry(W)))}))})),L.next((()=>p.mutationQueue.removeMutationBatch(y,w)))})(n,s,t,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let y=kt();for(let g=0;g<p.mutationResults.length;++g)p.mutationResults[g].transformResults.length>0&&(y=y.add(p.batch.mutations[g].key));return y})(t)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function pT(r){const t=wt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function vx(r,t){const n=wt(r),s=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];t.targetChanges.forEach(((T,w)=>{const N=l.get(w);if(!N)return;p.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,w))));let L=N.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(w)!==null?L=L.withResumeToken(Ge.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):T.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(T.resumeToken,s)),l=l.insert(w,L),(function(W,tt,ht){return W.resumeToken.approximateByteSize()===0||tt.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=px?!0:ht.addedDocuments.size+ht.modifiedDocuments.size+ht.removedDocuments.size>0})(N,L,T)&&p.push(n.Pi.updateTargetData(c,L))}));let y=Ki(),g=kt();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),p.push(Ex(c,f,t.documentUpdates).next((T=>{y=T.ks,g=T.qs}))),!s.isEqual(bt.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((w=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));p.push(T)}return J.waitFor(p).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,y,g))).next((()=>y))})).then((c=>(n.Ms=l,c)))}function Ex(r,t,n){let s=kt(),l=kt();return n.forEach((c=>s=s.add(c))),t.getEntries(r,s).next((c=>{let f=Ki();return n.forEach(((p,y)=>{const g=c.get(p);y.isFoundDocument()!==g.isFoundDocument()&&(l=l.add(p)),y.isNoDocument()&&y.version.isEqual(bt.min())?(t.removeEntry(p,y.readTime),f=f.insert(p,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(y),f=f.insert(p,y)):lt(Jm,"Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",y.version)})),{ks:f,qs:l}}))}function Tx(r,t){const n=wt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Lm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function Ax(r,t){const n=wt(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,t).next((c=>c?(l=c,J.resolve(l)):n.Pi.allocateTargetId(s).next((f=>(l=new Ur(t,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function gm(r,t,n){const s=wt(r),l=s.Ms.get(t),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(f=>s.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!ho(f))throw f;lt(Jm,`Failed to update sequence numbers for target ${t}: ${f}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function Jv(r,t,n){const s=wt(r);let l=bt.min(),c=kt();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,g,T){const w=wt(y),N=w.xs.get(T);return N!==void 0?J.resolve(w.Ms.get(N)):w.Pi.getTargetData(g,T)})(s,f,fi(t)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,p.targetId).next((y=>{c=y}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,t,n?l:bt.min(),n?c:kt()))).next((p=>(bx(s,lI(t),p),{documents:p,Qs:c})))))}function bx(r,t,n){let s=r.Os.get(t)||bt.min();n.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(t,s)}class Wv{constructor(){this.activeTargetIds=mI()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Sx{constructor(){this.Mo=new Wv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Wv,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="ConnectivityMonitor";class e0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){lt(t0,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){lt(t0,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wc=null;function ym(){return wc===null?wc=(function(){return 268435456+Math.round(2147483648*Math.random())})():wc++,"0x"+wc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="RestConnection",Rx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ix{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Yc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,n,s,l,c){const f=ym(),p=this.zo(t,n.toUriEncodedString());lt(Hd,`Sending RPC '${t}' ${f}:`,p,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,c);const{host:g}=new URL(p),T=ao(g);return this.Jo(t,p,y,s,T).then((w=>(lt(Hd,`Received RPC '${t}' ${f}: `,w),w)),(w=>{throw Ja(Hd,`RPC '${t}' ${f} failed with error: `,w,"url: ",p,"request:",s),w}))}Ho(t,n,s,l,c,f){return this.Go(t,n,s,l,c)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+uo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>t[c]=l)),s&&s.headers.forEach(((l,c)=>t[c]=l))}zo(t,n){const s=Rx[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xe="WebChannelConnection";class Cx extends Ix{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,l,c){const f=ym();return new Promise(((p,y)=>{const g=new yE;g.setWithCredentials(!0),g.listenOnce(_E.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Nc.NO_ERROR:const w=g.getResponseJson();lt(Xe,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(w)),p(w);break;case Nc.TIMEOUT:lt(Xe,`RPC '${t}' ${f} timed out`),y(new ot(X.DEADLINE_EXCEEDED,"Request time out"));break;case Nc.HTTP_ERROR:const N=g.getStatus();if(lt(Xe,`RPC '${t}' ${f} failed with status:`,N,"response text:",g.getResponseText()),N>0){let L=g.getResponseJson();Array.isArray(L)&&(L=L[0]);const et=L?.error;if(et&&et.status&&et.message){const W=(function(ht){const gt=ht.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(gt)>=0?gt:X.UNKNOWN})(et.status);y(new ot(W,et.message))}else y(new ot(X.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new ot(X.UNAVAILABLE,"Connection failed."));break;default:vt(9055,{l_:t,streamId:f,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{lt(Xe,`RPC '${t}' ${f} completed.`)}}));const T=JSON.stringify(l);lt(Xe,`RPC '${t}' ${f} sending request:`,l),g.send(n,"POST",T,s,15)}))}T_(t,n,s){const l=ym(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=TE(),p=EE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const T=c.join("");lt(Xe,`Creating RPC '${t}' stream ${l}: ${T}`,y);const w=f.createWebChannel(T,y);this.I_(w);let N=!1,L=!1;const et=new xx({Yo:tt=>{L?lt(Xe,`Not sending because RPC '${t}' stream ${l} is closed:`,tt):(N||(lt(Xe,`Opening RPC '${t}' stream ${l} transport.`),w.open(),N=!0),lt(Xe,`RPC '${t}' stream ${l} sending:`,tt),w.send(tt))},Zo:()=>w.close()}),W=(tt,ht,gt)=>{tt.listen(ht,(pt=>{try{gt(pt)}catch(jt){setTimeout((()=>{throw jt}),0)}}))};return W(w,bl.EventType.OPEN,(()=>{L||(lt(Xe,`RPC '${t}' stream ${l} transport opened.`),et.o_())})),W(w,bl.EventType.CLOSE,(()=>{L||(L=!0,lt(Xe,`RPC '${t}' stream ${l} transport closed`),et.a_(),this.E_(w))})),W(w,bl.EventType.ERROR,(tt=>{L||(L=!0,Ja(Xe,`RPC '${t}' stream ${l} transport errored. Name:`,tt.name,"Message:",tt.message),et.a_(new ot(X.UNAVAILABLE,"The operation could not be completed")))})),W(w,bl.EventType.MESSAGE,(tt=>{if(!L){const ht=tt.data[0];Gt(!!ht,16349);const gt=ht,pt=gt?.error||gt[0]?.error;if(pt){lt(Xe,`RPC '${t}' stream ${l} received error:`,pt);const jt=pt.status;let at=(function(R){const I=Ae[R];if(I!==void 0)return nT(I)})(jt),Ct=pt.message;at===void 0&&(at=X.INTERNAL,Ct="Unknown error status: "+jt+" with message "+pt.message),L=!0,et.a_(new ot(at,Ct)),w.close()}else lt(Xe,`RPC '${t}' stream ${l} received:`,ht),et.u_(ht)}})),W(p,vE.STAT_EVENT,(tt=>{tt.stat===rm.PROXY?lt(Xe,`RPC '${t}' stream ${l} detected buffering proxy`):tt.stat===rm.NOPROXY&&lt(Xe,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{et.__()}),0),et}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Gd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(r){return new MI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(t,n,s=1e3,l=1.5,c=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&lt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="PersistentStream";class yT{constructor(t,n,s,l,c,f,p,y){this.Mi=t,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new gT(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(Yi(n.toString()),Yi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{t((()=>{const l=new ot(X.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return lt(n0,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(lt(n0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Nx extends yT{constructor(t,n,s,l,c,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=PI(this.serializer,t),s=(function(c){if(!("targetChange"in c))return bt.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?bt.min():f.readTime?di(f.readTime):bt.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=pm(this.serializer),n.addTarget=(function(c,f){let p;const y=f.target;if(p=um(y)?{documents:jI(c,y)}:{query:zI(c,y).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=sT(c,f.resumeToken);const g=fm(c,f.expectedCount);g!==null&&(p.expectedCount=g)}else if(f.snapshotVersion.compareTo(bt.min())>0){p.readTime=Jc(c,f.snapshotVersion.toTimestamp());const g=fm(c,f.expectedCount);g!==null&&(p.expectedCount=g)}return p})(this.serializer,t);const s=qI(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=pm(this.serializer),n.removeTarget=t,this.q_(n)}}class Dx extends yT{constructor(t,n,s,l,c,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Gt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Gt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Gt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=LI(t.writeResults,t.commitTime),s=di(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=pm(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>UI(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{}class Mx extends Ox{constructor(t,n,s,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ot(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(t,dm(n,s),l,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ot(X.UNKNOWN,c.toString())}))}Ho(t,n,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(t,dm(n,s),l,f,p,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ot(X.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Vx{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Yi(n),this.aa=!1):lt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="RemoteStore";class kx{constructor(t,n,s,l,c){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{Qs(this)&&(lt(Gs,"Restarting streams for network reachability change."),await(async function(y){const g=wt(y);g.Ea.add(4),await Zl(g),g.Ra.set("Unknown"),g.Ea.delete(4),await yh(g)})(this))}))})),this.Ra=new Vx(s,l)}}async function yh(r){if(Qs(r))for(const t of r.da)await t(!0)}async function Zl(r){for(const t of r.da)await t(!1)}function _T(r,t){const n=wt(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),np(n)?ep(n):mo(n).O_()&&tp(n,t))}function Wm(r,t){const n=wt(r),s=mo(n);n.Ia.delete(t),s.O_()&&vT(n,t),n.Ia.size===0&&(s.O_()?s.L_():Qs(n)&&n.Ra.set("Unknown"))}function tp(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(bt.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}mo(r).Y_(t)}function vT(r,t){r.Va.Ue(t),mo(r).Z_(t)}function ep(r){r.Va=new CI({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),mo(r).start(),r.Ra.ua()}function np(r){return Qs(r)&&!mo(r).x_()&&r.Ia.size>0}function Qs(r){return wt(r).Ea.size===0}function ET(r){r.Va=void 0}async function Px(r){r.Ra.set("Online")}async function Ux(r){r.Ia.forEach(((t,n)=>{tp(r,t)}))}async function Lx(r,t){ET(r),np(r)?(r.Ra.ha(t),ep(r)):r.Ra.set("Unknown")}async function jx(r,t,n){if(r.Ra.set("Online"),t instanceof rT&&t.state===2&&t.cause)try{await(async function(l,c){const f=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,f),l.Ia.delete(p),l.Va.removeTarget(p))})(r,t)}catch(s){lt(Gs,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await th(r,s)}else if(t instanceof Vc?r.Va.Ze(t):t instanceof iT?r.Va.st(t):r.Va.tt(t),!n.isEqual(bt.min()))try{const s=await pT(r.localStore);n.compareTo(s)>=0&&await(function(c,f){const p=c.Va.Tt(f);return p.targetChanges.forEach(((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const T=c.Ia.get(g);T&&c.Ia.set(g,T.withResumeToken(y.resumeToken,f))}})),p.targetMismatches.forEach(((y,g)=>{const T=c.Ia.get(y);if(!T)return;c.Ia.set(y,T.withResumeToken(Ge.EMPTY_BYTE_STRING,T.snapshotVersion)),vT(c,y);const w=new Ur(T.target,y,g,T.sequenceNumber);tp(c,w)})),c.remoteSyncer.applyRemoteEvent(p)})(r,n)}catch(s){lt(Gs,"Failed to raise snapshot:",s),await th(r,s)}}async function th(r,t,n){if(!ho(t))throw t;r.Ea.add(1),await Zl(r),r.Ra.set("Offline"),n||(n=()=>pT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{lt(Gs,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await yh(r)}))}function TT(r,t){return t().catch((n=>th(r,n,t)))}async function _h(r){const t=wt(r),n=Yr(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Lm;for(;zx(t);)try{const l=await Tx(t.localStore,s);if(l===null){t.Ta.length===0&&n.L_();break}s=l.batchId,Bx(t,l)}catch(l){await th(t,l)}AT(t)&&bT(t)}function zx(r){return Qs(r)&&r.Ta.length<10}function Bx(r,t){r.Ta.push(t);const n=Yr(r);n.O_()&&n.X_&&n.ea(t.mutations)}function AT(r){return Qs(r)&&!Yr(r).x_()&&r.Ta.length>0}function bT(r){Yr(r).start()}async function qx(r){Yr(r).ra()}async function Hx(r){const t=Yr(r);for(const n of r.Ta)t.ea(n.mutations)}async function Gx(r,t,n){const s=r.Ta.shift(),l=Qm.from(s,t,n);await TT(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await _h(r)}async function Fx(r,t){t&&Yr(r).X_&&await(async function(s,l){if((function(f){return RI(f)&&f!==X.ABORTED})(l.code)){const c=s.Ta.shift();Yr(s).B_(),await TT(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await _h(s)}})(r,t),AT(r)&&bT(r)}async function i0(r,t){const n=wt(r);n.asyncQueue.verifyOperationInProgress(),lt(Gs,"RemoteStore received new credentials");const s=Qs(n);n.Ea.add(3),await Zl(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await yh(n)}async function Qx(r,t){const n=wt(r);t?(n.Ea.delete(2),await yh(n)):t||(n.Ea.add(2),await Zl(n),n.Ra.set("Unknown"))}function mo(r){return r.ma||(r.ma=(function(n,s,l){const c=wt(n);return c.sa(),new Nx(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:Px.bind(null,r),t_:Ux.bind(null,r),r_:Lx.bind(null,r),H_:jx.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),np(r)?ep(r):r.Ra.set("Unknown")):(await r.ma.stop(),ET(r))}))),r.ma}function Yr(r){return r.fa||(r.fa=(function(n,s,l){const c=wt(n);return c.sa(),new Dx(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:qx.bind(null,r),r_:Fx.bind(null,r),ta:Hx.bind(null,r),na:Gx.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await _h(r)):(await r.fa.stop(),r.Ta.length>0&&(lt(Gs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(t,n,s,l,c){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,l,c){const f=Date.now()+s,p=new ip(t,n,f,l,c);return p.start(s),p}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ot(X.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rp(r,t){if(Yi("AsyncQueue",`${t}: ${r}`),ho(r))return new ot(X.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{static emptySet(t){return new Ka(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||mt.comparator(n.key,s.key):(n,s)=>mt.comparator(n.key,s.key),this.keyedMap=Sl(),this.sortedSet=new ue(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ka)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Ka;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(){this.ga=new ue(mt.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):vt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class so{constructor(t,n,s,l,c,f,p,y,g){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(t,n,s,l,c){const f=[];return n.forEach((p=>{f.push({type:0,doc:p})})),new so(t,n,Ka.emptySet(n),f,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&hh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class Kx{constructor(){this.queries=s0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=wt(n),c=l.queries;l.queries=s0(),c.forEach(((f,p)=>{for(const y of p.Sa)y.onError(s)}))})(this,new ot(X.ABORTED,"Firestore shutting down"))}}function s0(){return new Fs((r=>HE(r)),hh)}async function ST(r,t){const n=wt(r);let s=3;const l=t.query;let c=n.queries.get(l);c?!c.ba()&&t.Da()&&(s=2):(c=new Yx,s=t.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const p=rp(f,`Initialization of query '${qa(t.query)}' failed`);return void t.onError(p)}n.queries.set(l,c),c.Sa.push(t),t.va(n.onlineState),c.wa&&t.Fa(c.wa)&&sp(n)}async function wT(r,t){const n=wt(r),s=t.query;let l=3;const c=n.queries.get(s);if(c){const f=c.Sa.indexOf(t);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?l=t.Da()?0:1:!c.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Xx(r,t){const n=wt(r);let s=!1;for(const l of t){const c=l.query,f=n.queries.get(c);if(f){for(const p of f.Sa)p.Fa(l)&&(s=!0);f.wa=l}}s&&sp(n)}function $x(r,t,n){const s=wt(r),l=s.queries.get(t);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(t)}function sp(r){r.Ca.forEach((t=>{t.next()}))}var _m,a0;(a0=_m||(_m={})).Ma="default",a0.Cache="cache";class RT{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new so(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=so.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==_m.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(t){this.key=t}}class xT{constructor(t){this.key=t}}class Zx{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=kt(),this.mutatedKeys=kt(),this.eu=GE(t),this.tu=new Ka(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new r0,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=l,p=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,g=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((T,w)=>{const N=l.get(T),L=fh(this.query,w)?w:null,et=!!N&&this.mutatedKeys.has(N.key),W=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let tt=!1;N&&L?N.data.isEqual(L.data)?et!==W&&(s.track({type:3,doc:L}),tt=!0):this.su(N,L)||(s.track({type:2,doc:L}),tt=!0,(y&&this.eu(L,y)>0||g&&this.eu(L,g)<0)&&(p=!0)):!N&&L?(s.track({type:0,doc:L}),tt=!0):N&&!L&&(s.track({type:1,doc:N}),tt=!0,(y||g)&&(p=!0)),tt&&(L?(f=f.add(L),c=W?c.add(T):c.delete(T)):(f=f.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{tu:f,iu:s,Cs:p,mutatedKeys:c}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,l){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort(((T,w)=>(function(L,et){const W=tt=>{switch(tt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt(20277,{Rt:tt})}};return W(L)-W(et)})(T.type,w.type)||this.eu(T.doc,w.doc))),this.ou(s),l=l??!1;const p=n&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,g=y!==this.Za;return this.Za=y,f.length!==0||g?{snapshot:new so(this.query,t.tu,c,f,t.mutatedKeys,y===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new r0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=kt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new xT(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new IT(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=kt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return so.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ap="SyncEngine";class Jx{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class Wx{constructor(t){this.key=t,this.hu=!1}}class tC{constructor(t,n,s,l,c,f){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Fs((p=>HE(p)),hh),this.Iu=new Map,this.Eu=new Set,this.du=new ue(mt.comparator),this.Au=new Map,this.Ru=new Xm,this.Vu={},this.mu=new Map,this.fu=ro.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function eC(r,t,n=!0){const s=VT(r);let l;const c=s.Tu.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await CT(s,t,n,!0),l}async function nC(r,t){const n=VT(r);await CT(n,t,!0,!1)}async function CT(r,t,n,s){const l=await Ax(r.localStore,fi(t)),c=l.targetId,f=r.sharedClientState.addLocalQueryTarget(c,n);let p;return s&&(p=await iC(r,t,c,f==="current",l.resumeToken)),r.isPrimaryClient&&n&&_T(r.remoteStore,l),p}async function iC(r,t,n,s,l){r.pu=(w,N,L)=>(async function(W,tt,ht,gt){let pt=tt.view.ru(ht);pt.Cs&&(pt=await Jv(W.localStore,tt.query,!1).then((({documents:O})=>tt.view.ru(O,pt))));const jt=gt&&gt.targetChanges.get(tt.targetId),at=gt&&gt.targetMismatches.get(tt.targetId)!=null,Ct=tt.view.applyChanges(pt,W.isPrimaryClient,jt,at);return l0(W,tt.targetId,Ct.au),Ct.snapshot})(r,w,N,L);const c=await Jv(r.localStore,t,!0),f=new Zx(t,c.Qs),p=f.ru(c.documents),y=$l.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),g=f.applyChanges(p,r.isPrimaryClient,y);l0(r,n,g.au);const T=new Jx(t,n,f);return r.Tu.set(t,T),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),g.snapshot}async function rC(r,t,n){const s=wt(r),l=s.Tu.get(t),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((f=>!hh(f,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await gm(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&Wm(s.remoteStore,l.targetId),vm(s,l.targetId)})).catch(co)):(vm(s,l.targetId),await gm(s.localStore,l.targetId,!0))}async function sC(r,t){const n=wt(r),s=n.Tu.get(t),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Wm(n.remoteStore,s.targetId))}async function aC(r,t,n){const s=dC(r);try{const l=await(function(f,p){const y=wt(f),g=Bt.now(),T=p.reduce(((L,et)=>L.add(et.key)),kt());let w,N;return y.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let et=Ki(),W=kt();return y.Ns.getEntries(L,T).next((tt=>{et=tt,et.forEach(((ht,gt)=>{gt.isValidDocument()||(W=W.add(ht))}))})).next((()=>y.localDocuments.getOverlayedDocuments(L,et))).next((tt=>{w=tt;const ht=[];for(const gt of p){const pt=TI(gt,w.get(gt.key).overlayedDocument);pt!=null&&ht.push(new $r(gt.key,pt,kE(pt.value.mapValue),Vn.exists(!0)))}return y.mutationQueue.addMutationBatch(L,g,ht,p)})).next((tt=>{N=tt;const ht=tt.applyToLocalDocumentSet(w,W);return y.documentOverlayCache.saveOverlays(L,tt.batchId,ht)}))})).then((()=>({batchId:N.batchId,changes:QE(w)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),(function(f,p,y){let g=f.Vu[f.currentUser.toKey()];g||(g=new ue(Vt)),g=g.insert(p,y),f.Vu[f.currentUser.toKey()]=g})(s,l.batchId,n),await Jl(s,l.changes),await _h(s.remoteStore)}catch(l){const c=rp(l,"Failed to persist write");n.reject(c)}}async function NT(r,t){const n=wt(r);try{const s=await vx(n.localStore,t);t.targetChanges.forEach(((l,c)=>{const f=n.Au.get(c);f&&(Gt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?Gt(f.hu,14607):l.removedDocuments.size>0&&(Gt(f.hu,42227),f.hu=!1))})),await Jl(n,s,t)}catch(s){await co(s)}}function o0(r,t,n){const s=wt(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((c,f)=>{const p=f.view.va(t);p.snapshot&&l.push(p.snapshot)})),(function(f,p){const y=wt(f);y.onlineState=p;let g=!1;y.queries.forEach(((T,w)=>{for(const N of w.Sa)N.va(p)&&(g=!0)})),g&&sp(y)})(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function oC(r,t,n){const s=wt(r);s.sharedClientState.updateQueryState(t,"rejected",n);const l=s.Au.get(t),c=l&&l.key;if(c){let f=new ue(mt.comparator);f=f.insert(c,Ze.newNoDocument(c,bt.min()));const p=kt().add(c),y=new ph(bt.min(),new Map,new ue(Vt),f,p);await NT(s,y),s.du=s.du.remove(c),s.Au.delete(t),op(s)}else await gm(s.localStore,t,!1).then((()=>vm(s,t,n))).catch(co)}async function lC(r,t){const n=wt(r),s=t.batch.batchId;try{const l=await _x(n.localStore,t);OT(n,s,null),DT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Jl(n,l)}catch(l){await co(l)}}async function uC(r,t,n){const s=wt(r);try{const l=await(function(f,p){const y=wt(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let T;return y.mutationQueue.lookupMutationBatch(g,p).next((w=>(Gt(w!==null,37113),T=w.keys(),y.mutationQueue.removeMutationBatch(g,w)))).next((()=>y.mutationQueue.performConsistencyCheck(g))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(g,T,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,T))).next((()=>y.localDocuments.getDocuments(g,T)))}))})(s.localStore,t);OT(s,t,n),DT(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Jl(s,l)}catch(l){await co(l)}}function DT(r,t){(r.mu.get(t)||[]).forEach((n=>{n.resolve()})),r.mu.delete(t)}function OT(r,t,n){const s=wt(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(t);c&&(n?c.reject(n):c.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function vm(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||MT(r,s)}))}function MT(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(Wm(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),op(r))}function l0(r,t,n){for(const s of n)s instanceof IT?(r.Ru.addReference(s.key,t),cC(r,s)):s instanceof xT?(lt(ap,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||MT(r,s.key)):vt(19791,{wu:s})}function cC(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(lt(ap,"New document in limbo: "+n),r.Eu.add(s),op(r))}function op(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new mt(ie.fromString(t)),s=r.fu.next();r.Au.set(s,new Wx(n)),r.du=r.du.insert(n,s),_T(r.remoteStore,new Ur(fi(Hm(n.path)),s,"TargetPurposeLimboResolution",lh.ce))}}async function Jl(r,t,n){const s=wt(r),l=[],c=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,y)=>{f.push(s.pu(y,t,n).then((g=>{if((g||n)&&s.isPrimaryClient){const T=g?!g.fromCache:n?.targetChanges.get(y.targetId)?.current;s.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(g){l.push(g);const T=Zm.As(y.targetId,g);c.push(T)}})))})),await Promise.all(f),s.Pu.H_(l),await(async function(y,g){const T=wt(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>J.forEach(g,(N=>J.forEach(N.Es,(L=>T.persistence.referenceDelegate.addReference(w,N.targetId,L))).next((()=>J.forEach(N.ds,(L=>T.persistence.referenceDelegate.removeReference(w,N.targetId,L)))))))))}catch(w){if(!ho(w))throw w;lt(Jm,"Failed to update sequence numbers: "+w)}for(const w of g){const N=w.targetId;if(!w.fromCache){const L=T.Ms.get(N),et=L.snapshotVersion,W=L.withLastLimboFreeSnapshotVersion(et);T.Ms=T.Ms.insert(N,W)}}})(s.localStore,c))}async function hC(r,t){const n=wt(r);if(!n.currentUser.isEqual(t)){lt(ap,"User change. New user:",t.toKey());const s=await mT(n.localStore,t);n.currentUser=t,(function(c,f){c.mu.forEach((p=>{p.forEach((y=>{y.reject(new ot(X.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Jl(n,s.Ls)}}function fC(r,t){const n=wt(r),s=n.Au.get(t);if(s&&s.hu)return kt().add(s.key);{let l=kt();const c=n.Iu.get(t);if(!c)return l;for(const f of c){const p=n.Tu.get(f);l=l.unionWith(p.view.nu)}return l}}function VT(r){const t=wt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=NT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=fC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=oC.bind(null,t),t.Pu.H_=Xx.bind(null,t.eventManager),t.Pu.yu=$x.bind(null,t.eventManager),t}function dC(r){const t=wt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=lC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=uC.bind(null,t),t}class eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=gh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return yx(this.persistence,new mx,t.initialUser,this.serializer)}Cu(t){return new dT($m.mi,this.serializer)}Du(t){return new Sx}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}eh.provider={build:()=>new eh};class mC extends eh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Gt(this.persistence.referenceDelegate instanceof Wc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new WI(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new dT((s=>Wc.mi(s,n)),this.serializer)}}class Em{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>o0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=hC.bind(null,this.syncEngine),await Qx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Kx})()}createDatastore(t){const n=gh(t.databaseInfo.databaseId),s=(function(c){return new Cx(c)})(t.databaseInfo);return(function(c,f,p,y){return new Mx(c,f,p,y)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,l,c,f,p){return new kx(s,l,c,f,p)})(this.localStore,this.datastore,t.asyncQueue,(n=>o0(this.syncEngine,n,0)),(function(){return e0.v()?new e0:new wx})())}createSyncEngine(t,n){return(function(l,c,f,p,y,g,T){const w=new tC(l,c,f,p,y,g);return T&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=wt(n);lt(Gs,"RemoteStore shutting down."),s.Ea.add(5),await Zl(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Em.provider={build:()=>new Em};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Yi("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="FirestoreClient";class pC{constructor(t,n,s,l,c){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=$e.UNAUTHENTICATED,this.clientId=Um.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async f=>{lt(Kr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(lt(Kr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=rp(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Fd(r,t){r.asyncQueue.verifyOperationInProgress(),lt(Kr,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await mT(t.localStore,l),s=l)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function u0(r,t){r.asyncQueue.verifyOperationInProgress();const n=await gC(r);lt(Kr,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener((s=>i0(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>i0(t.remoteStore,l))),r._onlineComponents=t}async function gC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){lt(Kr,"Using user provided OfflineComponentProvider");try{await Fd(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===X.FAILED_PRECONDITION||l.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Ja("Error using user provided cache. Falling back to memory cache: "+n),await Fd(r,new eh)}}else lt(Kr,"Using default OfflineComponentProvider"),await Fd(r,new mC(void 0));return r._offlineComponents}async function PT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(lt(Kr,"Using user provided OnlineComponentProvider"),await u0(r,r._uninitializedComponentsProvider._online)):(lt(Kr,"Using default OnlineComponentProvider"),await u0(r,new Em))),r._onlineComponents}function yC(r){return PT(r).then((t=>t.syncEngine))}async function UT(r){const t=await PT(r),n=t.eventManager;return n.onListen=eC.bind(null,t.syncEngine),n.onUnlisten=rC.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=nC.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=sC.bind(null,t.syncEngine),n}function _C(r,t,n={}){const s=new Hi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,p,y,g){const T=new kT({next:N=>{T.Nu(),f.enqueueAndForget((()=>wT(c,w)));const L=N.docs.has(p);!L&&N.fromCache?g.reject(new ot(X.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&N.fromCache&&y&&y.source==="server"?g.reject(new ot(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(N)},error:N=>g.reject(N)}),w=new RT(Hm(p.path),T,{includeMetadataChanges:!0,qa:!0});return ST(c,w)})(await UT(r),r.asyncQueue,t,n,s))),s.promise}function vC(r,t,n={}){const s=new Hi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,p,y,g){const T=new kT({next:N=>{T.Nu(),f.enqueueAndForget((()=>wT(c,w))),N.fromCache&&y.source==="server"?g.reject(new ot(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(N)},error:N=>g.reject(N)}),w=new RT(p,T,{includeMetadataChanges:!0,qa:!0});return ST(c,w)})(await UT(r),r.asyncQueue,t,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="firestore.googleapis.com",h0=!0;class f0{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ot(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jT,this.ssl=h0}else this.host=t.host,this.ssl=t.ssl??h0;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=fT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<ZI)throw new ot(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}k2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LT(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ot(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ot(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ot(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class vh{constructor(t,n,s,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new f0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ot(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ot(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new f0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new w2;switch(s.type){case"firstParty":return new C2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ot(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=c0.get(n);s&&(lt("ComponentProvider","Removing Datastore"),c0.delete(n),s.terminate())})(this),Promise.resolve()}}function EC(r,t,n,s={}){r=Kn(r,vh);const l=ao(t),c=r._getSettings(),f={...c,emulatorOptions:r._getEmulatorOptions()},p=`${t}:${n}`;l&&(O0(`https://${p}`),M0("Firestore",!0)),c.host!==jT&&c.host!==p&&Ja("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:p,ssl:l,emulatorOptions:s};if(!Gi(y,f)&&(r._setSettings(y),s.mockUserToken)){let g,T;if(typeof s.mockUserToken=="string")g=s.mockUserToken,T=$e.MOCK_USER;else{g=Xb(s.mockUserToken,r._app?.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new ot(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new $e(w)}r._authCredentials=new R2(new bE(g,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Ys(this.firestore,t,this._query)}}class ve{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ve(this.firestore,t,this._key)}toJSON(){return{type:ve._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(Kl(n,ve._jsonSchema))return new ve(t,s||null,new mt(ie.fromString(n.referencePath)))}}ve._jsonSchemaVersion="firestore/documentReference/1.0",ve._jsonSchema={type:Se("string",ve._jsonSchemaVersion),referencePath:Se("string")};class qr extends Ys{constructor(t,n,s){super(t,n,Hm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ve(this.firestore,null,new mt(t))}withConverter(t){return new qr(this.firestore,t,this._path)}}function lp(r,t,...n){if(r=He(r),SE("collection","path",t),r instanceof vh){const s=ie.fromString(t,...n);return wv(s),new qr(r,null,s)}{if(!(r instanceof ve||r instanceof qr))throw new ot(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ie.fromString(t,...n));return wv(s),new qr(r.firestore,null,s)}}function Zr(r,t,...n){if(r=He(r),arguments.length===1&&(t=Um.newId()),SE("doc","path",t),r instanceof vh){const s=ie.fromString(t,...n);return Sv(s),new ve(r,null,new mt(s))}{if(!(r instanceof ve||r instanceof qr))throw new ot(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ie.fromString(t,...n));return Sv(s),new ve(r.firestore,r instanceof qr?r.converter:null,new mt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="AsyncQueue";class m0{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new gT(this,"async_queue_retry"),this._c=()=>{const s=Gd();s&&lt(d0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Gd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Gd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Hi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ho(t))throw t;lt(d0,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Yi("INTERNAL UNHANDLED ERROR: ",p0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=ip.createAndSchedule(this,t,n,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&vt(47125,{Pc:p0(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function p0(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class Ks extends vh{constructor(t,n,s,l){super(t,n,s,l),this.type="firestore",this._queue=new m0,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new m0(t),this._firestoreClient=void 0,await t}}}function TC(r,t){const n=typeof r=="object"?r:U0(),s=typeof r=="string"?r:Yc,l=wm(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=Yb("firestore");c&&EC(l,...c)}return l}function up(r){if(r._terminated)throw new ot(X.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||AC(r),r._firestoreClient}function AC(r){const t=r._freezeSettings(),n=(function(l,c,f,p){return new Q2(l,c,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,LT(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new pC(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Mn(Ge.fromBase64String(t))}catch(n){throw new ot(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Mn(Ge.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Mn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Kl(t,Mn._jsonSchema))return Mn.fromBase64String(t.bytes)}}Mn._jsonSchemaVersion="firestore/bytes/1.0",Mn._jsonSchema={type:Se("string",Mn._jsonSchemaVersion),bytes:Se("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ot(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ot(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ot(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Vt(this._lat,t._lat)||Vt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mi._jsonSchemaVersion}}static fromJSON(t){if(Kl(t,mi._jsonSchema))return new mi(t.latitude,t.longitude)}}mi._jsonSchemaVersion="firestore/geoPoint/1.0",mi._jsonSchema={type:Se("string",mi._jsonSchemaVersion),latitude:Se("number"),longitude:Se("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Kl(t,pi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new pi(t.vectorValues);throw new ot(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pi._jsonSchemaVersion="firestore/vectorValue/1.0",pi._jsonSchema={type:Se("string",pi._jsonSchemaVersion),vectorValues:Se("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=/^__.*__$/;class SC{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new $r(t,this.data,this.fieldMask,n,this.fieldTransforms):new Xl(t,this.data,n,this.fieldTransforms)}}class zT{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new $r(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function BT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt(40011,{Ac:r})}}class Th{constructor(t,n,s,l,c,f){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Th({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return nh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(BT(this.Ac)&&bC.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class wC{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||gh(t)}Cc(t,n,s,l=!1){return new Th({Ac:t,methodName:n,Dc:s,path:qe.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ah(r){const t=r._freezeSettings(),n=gh(r._databaseId);return new wC(r._databaseId,!!t.ignoreUndefinedProperties,n)}function qT(r,t,n,s,l,c={}){const f=r.Cc(c.merge||c.mergeFields?2:0,t,n,l);fp("Data must be an object, but it was:",f,s);const p=GT(s,f);let y,g;if(c.merge)y=new En(f.fieldMask),g=f.fieldTransforms;else if(c.mergeFields){const T=[];for(const w of c.mergeFields){const N=Tm(t,w,n);if(!f.contains(N))throw new ot(X.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);QT(T,N)||T.push(N)}y=new En(T),g=f.fieldTransforms.filter((w=>y.covers(w.field)))}else y=null,g=f.fieldTransforms;return new SC(new cn(p),y,g)}class bh extends Wl{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof bh}}function HT(r,t,n){return new Th({Ac:3,Dc:t.settings.Dc,methodName:r._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class cp extends Wl{constructor(t,n){super(t),this.vc=n}_toFieldTransform(t){const n=HT(this,t,!0),s=this.vc.map((c=>Xs(c,n))),l=new no(s);return new WE(t.path,l)}isEqual(t){return t instanceof cp&&Gi(this.vc,t.vc)}}class hp extends Wl{constructor(t,n){super(t),this.vc=n}_toFieldTransform(t){const n=HT(this,t,!0),s=this.vc.map((c=>Xs(c,n))),l=new io(s);return new WE(t.path,l)}isEqual(t){return t instanceof hp&&Gi(this.vc,t.vc)}}function RC(r,t,n,s){const l=r.Cc(1,t,n);fp("Data must be an object, but it was:",l,s);const c=[],f=cn.empty();Xr(s,((y,g)=>{const T=dp(t,y,n);g=He(g);const w=l.yc(T);if(g instanceof bh)c.push(T);else{const N=Xs(g,w);N!=null&&(c.push(T),f.set(T,N))}}));const p=new En(c);return new zT(f,p,l.fieldTransforms)}function IC(r,t,n,s,l,c){const f=r.Cc(1,t,n),p=[Tm(t,s,n)],y=[l];if(c.length%2!=0)throw new ot(X.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<c.length;N+=2)p.push(Tm(t,c[N])),y.push(c[N+1]);const g=[],T=cn.empty();for(let N=p.length-1;N>=0;--N)if(!QT(g,p[N])){const L=p[N];let et=y[N];et=He(et);const W=f.yc(L);if(et instanceof bh)g.push(L);else{const tt=Xs(et,W);tt!=null&&(g.push(L),T.set(L,tt))}}const w=new En(g);return new zT(T,w,f.fieldTransforms)}function xC(r,t,n,s=!1){return Xs(n,r.Cc(s?4:3,t))}function Xs(r,t){if(FT(r=He(r)))return fp("Unsupported field value:",t,r),GT(r,t);if(r instanceof Wl)return(function(s,l){if(!BT(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let f=0;for(const p of s){let y=Xs(p,l.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),f++}return{arrayValue:{values:c}}})(r,t)}return(function(s,l){if((s=He(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return pI(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Bt.fromDate(s);return{timestampValue:Jc(l.serializer,c)}}if(s instanceof Bt){const c=new Bt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Jc(l.serializer,c)}}if(s instanceof mi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Mn)return{bytesValue:sT(l.serializer,s._byteString)};if(s instanceof ve){const c=l.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Km(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof pi)return(function(f,p){return{mapValue:{fields:{[ME]:{stringValue:VE},[Kc]:{arrayValue:{values:f.toArray().map((g=>{if(typeof g!="number")throw p.Sc("VectorValues must only contain numeric values.");return Gm(p.serializer,g)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${oh(s)}`)})(r,t)}function GT(r,t){const n={};return IE(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xr(r,((s,l)=>{const c=Xs(l,t.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function FT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Bt||r instanceof mi||r instanceof Mn||r instanceof ve||r instanceof Wl||r instanceof pi)}function fp(r,t,n){if(!FT(n)||!wE(n)){const s=oh(n);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function Tm(r,t,n){if((t=He(t))instanceof Eh)return t._internalPath;if(typeof t=="string")return dp(r,t);throw nh("Field path arguments must be of type string or ",r,!1,void 0,n)}const CC=new RegExp("[~\\*/\\[\\]]");function dp(r,t,n){if(t.search(CC)>=0)throw nh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Eh(...t.split("."))._internalPath}catch{throw nh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function nh(r,t,n,s,l){const c=s&&!s.isEmpty(),f=l!==void 0;let p=`Function ${t}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(c||f)&&(y+=" (found",c&&(y+=` in field ${s}`),f&&(y+=` in document ${l}`),y+=")"),new ot(X.INVALID_ARGUMENT,p+r+y)}function QT(r,t){return r.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(t,n,s,l,c){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new NC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Sh("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class NC extends YT{data(){return super.data()}}function Sh(r,t){return typeof t=="string"?dp(r,t):t instanceof Eh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ot(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mp{}class KT extends mp{}function OC(r,t,...n){let s=[];t instanceof mp&&s.push(t),s=s.concat(n),(function(c){const f=c.filter((y=>y instanceof pp)).length,p=c.filter((y=>y instanceof wh)).length;if(f>1||f>0&&p>0)throw new ot(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class wh extends KT{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new wh(t,n,s)}_apply(t){const n=this._parse(t);return XT(t._query,n),new Ys(t.firestore,t.converter,cm(t._query,n))}_parse(t){const n=Ah(t.firestore);return(function(c,f,p,y,g,T,w){let N;if(g.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ot(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){y0(w,T);const et=[];for(const W of w)et.push(g0(y,c,W));N={arrayValue:{values:et}}}else N=g0(y,c,w)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||y0(w,T),N=xC(p,f,w,T==="in"||T==="not-in");return be.create(g,T,N)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function MC(r,t,n){const s=t,l=Sh("where",r);return wh._create(l,s,n)}class pp extends mp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new pp(t,n)}_parse(t){const n=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Xn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(l,c){let f=l;const p=c.getFlattenedFilters();for(const y of p)XT(f,y),f=cm(f,y)})(t._query,n),new Ys(t.firestore,t.converter,cm(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gp extends KT{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new gp(t,n)}_apply(t){const n=(function(l,c,f){if(l.startAt!==null)throw new ot(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new ot(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ql(c,f)})(t._query,this._field,this._direction);return new Ys(t.firestore,t.converter,(function(l,c){const f=l.explicitOrderBy.concat([c]);return new fo(l.path,l.collectionGroup,f,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(t._query,n))}}function VC(r,t="asc"){const n=t,s=Sh("orderBy",r);return gp._create(s,n)}function g0(r,t,n){if(typeof(n=He(n))=="string"){if(n==="")throw new ot(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qE(t)&&n.indexOf("/")!==-1)throw new ot(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(ie.fromString(n));if(!mt.isDocumentKey(s))throw new ot(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Mv(r,new mt(s))}if(n instanceof ve)return Mv(r,n._key);throw new ot(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${oh(n)}.`)}function y0(r,t){if(!Array.isArray(r)||r.length===0)throw new ot(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function XT(r,t){const n=(function(l,c){for(const f of l)for(const p of f.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new ot(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ot(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class kC{convertValue(t,n="none"){switch(Qr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _e(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Fr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw vt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Xr(t,((l,c)=>{s[l]=this.convertValue(c,n)})),s}convertVectorValue(t){const n=t.fields?.[Kc].arrayValue?.values?.map((s=>_e(s.doubleValue)));return new pi(n)}convertGeoPoint(t){return new mi(_e(t.latitude),_e(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=ch(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(jl(t));default:return null}}convertTimestamp(t){const n=Gr(t);return new Bt(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=ie.fromString(t);Gt(hT(s),9688,{name:t});const l=new zl(s.get(1),s.get(3)),c=new mt(s.popFirst(5));return l.isEqual(n)||Yi(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(r,t,n){let s;return s=r?r.toFirestore(t):t,s}class Rl{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class js extends YT{constructor(t,n,s,l,c,f){super(t,n,s,l,f),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new kc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(Sh("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ot(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=js._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}js._jsonSchemaVersion="firestore/documentSnapshot/1.0",js._jsonSchema={type:Se("string",js._jsonSchemaVersion),bundleSource:Se("string","DocumentSnapshot"),bundleName:Se("string"),bundle:Se("string")};class kc extends js{data(t={}){return super.data(t)}}class Xa{constructor(t,n,s,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new Rl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new kc(this._firestore,this._userDataWriter,s.key,s,new Rl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ot(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((p=>{const y=new kc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Rl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const y=new kc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Rl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let g=-1,T=-1;return p.type!==0&&(g=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),T=f.indexOf(p.doc.key)),{type:PC(p.type),doc:y,oldIndex:g,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ot(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Xa._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Um.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function PC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(r){r=Kn(r,ve);const t=Kn(r.firestore,Ks);return _C(up(t),r._key).then((n=>zC(t,r,n)))}Xa._jsonSchemaVersion="firestore/querySnapshot/1.0",Xa._jsonSchema={type:Se("string",Xa._jsonSchemaVersion),bundleSource:Se("string","QuerySnapshot"),bundleName:Se("string"),bundle:Se("string")};class JT extends kC{constructor(t){super(),this.firestore=t}convertBytes(t){return new Mn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ve(this.firestore,null,n)}}function UC(r){r=Kn(r,Ys);const t=Kn(r.firestore,Ks),n=up(t),s=new JT(t);return DC(r._query),vC(n,r._query).then((l=>new Xa(t,s,r,l)))}function LC(r,t,n){r=Kn(r,ve);const s=Kn(r.firestore,Ks),l=$T(r.converter,t);return Rh(s,[qT(Ah(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,Vn.none())])}function yp(r,t,n,...s){r=Kn(r,ve);const l=Kn(r.firestore,Ks),c=Ah(l);let f;return f=typeof(t=He(t))=="string"||t instanceof Eh?IC(c,"updateDoc",r._key,t,n,s):RC(c,"updateDoc",r._key,t),Rh(l,[f.toMutation(r._key,Vn.exists(!0))])}function jC(r){return Rh(Kn(r.firestore,Ks),[new Fm(r._key,Vn.none())])}function WT(r,t){const n=Kn(r.firestore,Ks),s=Zr(r),l=$T(r.converter,t);return Rh(n,[qT(Ah(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,Vn.exists(!1))]).then((()=>s))}function Rh(r,t){return(function(s,l){const c=new Hi;return s.asyncQueue.enqueueAndForget((async()=>aC(await yC(s),l,c))),c.promise})(up(r),t)}function zC(r,t,n){const s=n.docs.get(t._key),l=new JT(r);return new js(r,l,t._key,s,new Rl(n.hasPendingWrites,n.fromCache),t.converter)}function t1(...r){return new cp("arrayUnion",r)}function BC(...r){return new hp("arrayRemove",r)}(function(t,n=!0){(function(l){uo=l})(oo),$a(new Bs("firestore",((s,{instanceIdentifier:l,options:c})=>{const f=s.getProvider("app").getImmediate(),p=new Ks(new I2(s.getProvider("auth-internal")),new N2(f,s.getProvider("app-check-internal")),(function(g,T){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ot(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zl(g.options.projectId,T)})(f,l),f);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),zr(Ev,Tv,t),zr(Ev,Tv,"esm2020")})();const qC={apiKey:"AIzaSyDoTiH6E-xnygIzDsJ65_ENvI87IRzFOpo",authDomain:"trip-together-planner.firebaseapp.com",projectId:"trip-together-planner",storageBucket:"trip-together-planner.firebasestorage.app",messagingSenderId:"848679252517",appId:"1:848679252517:web:e56bc9f0eeb918ad3b45cc"},e1=P0(qC),Qd=T2(e1),_i=TC(e1),n1=new zi;n1.setCustomParameters({prompt:"select_account"});const _p="trips",tu="activities",i1="users",HC=async r=>(await WT(lp(_i,_p),{...r,createdAt:Bt.now(),updatedAt:Bt.now()})).id,GC=async r=>{const t=await ZT(Zr(_i,_p,r));return t.exists()?{id:t.id,...t.data()}:null},FC=async(r,t)=>{await yp(Zr(_i,_p,r),{memberIds:t1(t),updatedAt:Bt.now()})},QC=async r=>(await WT(lp(_i,tu),{...r,createdAt:Bt.now(),updatedAt:Bt.now()})).id,YC=async r=>{const t=OC(lp(_i,tu),MC("tripId","==",r),VC("dateTime","asc"));return(await UC(t)).docs.map(s=>({id:s.id,...s.data()}))},KC=async(r,t)=>{await yp(Zr(_i,tu,r),{...t,updatedAt:Bt.now()})},XC=async r=>{await jC(Zr(_i,tu,r))},$C=async(r,t,n)=>{await yp(Zr(_i,tu,r),{optedInUsers:n?t1(t):BC(t),updatedAt:Bt.now()})},ZC=async r=>{await LC(Zr(_i,i1,r.id),r)},JC=async r=>{const t=await ZT(Zr(_i,i1,r));return t.exists()?t.data():null},WC=async r=>{if(r.length===0)return[];const t=[];for(const n of r){const s=await JC(n);s&&t.push(s)}return t},tN=()=>{const[r,t]=Wt.useState(null),[n,s]=Wt.useState(!0);return Wt.useEffect(()=>{const f=uR(Qd,async p=>{if(p){const y={id:p.uid,email:p.email||"",displayName:p.displayName||"Anonymous",photoURL:p.photoURL||void 0};await ZC(y),t(y)}else t(null);s(!1)});return()=>f()},[]),{user:r,loading:n,signInWithGoogle:async()=>{try{await NR(Qd,n1)}catch(f){throw console.error("Error signing in with Google:",f),f}},signOut:async()=>{try{await cR(Qd)}catch(f){throw console.error("Error signing out:",f),f}}}},eN=(r,t)=>{const[n,s]=Wt.useState(null),[l,c]=Wt.useState([]),[f,p]=Wt.useState(!1),[y,g]=Wt.useState(null);return Wt.useEffect(()=>{if(!r||!t){s(null),c([]);return}(async()=>{p(!0),g(null);try{const w=await GC(r);if(!w){g("Trip not found"),s(null),c([]);return}w.memberIds.includes(t)||(await FC(r,t),w.memberIds.push(t)),s(w);const N=await WC(w.memberIds);c(N)}catch(w){console.error("Error loading trip:",w),g("Failed to load trip")}finally{p(!1)}})()},[r,t]),{currentTrip:n,members:l,loading:f,error:y}},nN=r=>{const[t,n]=Wt.useState([]),[s,l]=Wt.useState(!1),c=async()=>{if(!r){n([]);return}l(!0);try{const T=await YC(r);n(T)}catch(T){console.error("Error loading activities:",T)}finally{l(!1)}};return Wt.useEffect(()=>{c()},[r]),{activities:t,loading:s,createActivity:async T=>{try{await QC(T),await c()}catch(w){throw console.error("Error creating activity:",w),w}},updateActivity:async(T,w)=>{try{await KC(T,w),await c()}catch(N){throw console.error("Error updating activity:",N),N}},deleteActivity:async T=>{try{await XC(T),await c()}catch(w){throw console.error("Error deleting activity:",w),w}},toggleOptIn:async(T,w,N)=>{try{await $C(T,w,N),await c()}catch(L){throw console.error("Error toggling opt-in:",L),L}},refresh:c}};function iN(){const{user:r,loading:t,signInWithGoogle:n}=tN(),[s,l]=Wt.useState(null),{currentTrip:c,members:f,loading:p}=eN(s,r?.id||null),{activities:y,createActivity:g,deleteActivity:T,toggleOptIn:w}=nN(s),[N,L]=Wt.useState("dashboard"),[et,W]=Wt.useState(""),[tt,ht]=Wt.useState(""),[gt,pt]=Wt.useState([]);if(t)return b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-600 to-pink-600",children:b.jsxs("div",{className:"text-center",children:[b.jsx(Pc,{className:"animate-spin text-white mx-auto mb-4",size:48}),b.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})});if(!r||!s){const I=async D=>{try{await n(),l(D)}catch(P){console.error("Login error:",P),alert("Failed to login. Please try again.")}},V=async D=>{try{await n();const P=await HC({...D,ownerId:r.id,memberIds:[r.id]});return l(P),P}catch(P){throw console.error("Create trip error:",P),P}};return b.jsx(Ib,{onLogin:I,onCreateTrip:V})}if(p||!c)return b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-600 to-pink-600",children:b.jsxs("div",{className:"text-center",children:[b.jsx(Pc,{className:"animate-spin text-white mx-auto mb-4",size:48}),b.jsx("p",{className:"text-white text-lg",children:"Loading trip..."})]})});const jt=c.ownerId===r.id,at=async I=>{try{await g({...I,tripId:c.id,creatorId:r.id,creatorName:r.displayName,optedInUsers:[r.id]}),L("dashboard")}catch(V){console.error("Error creating activity:",V),alert("Failed to create activity. Please try again.")}},Ct=async(I,V)=>{try{await w(I,r.id,V)}catch(D){console.error("Error toggling opt-in:",D),alert("Failed to update activity. Please try again.")}},O=async I=>{try{await T(I)}catch(V){console.error("Error deleting activity:",V),alert("Failed to delete activity. Please try again.")}},R=()=>{l(null),L("dashboard")};return b.jsxs("div",{className:"min-h-screen",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[b.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"url(https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1600)",backgroundSize:"cover",backgroundPosition:"center"}}),b.jsx(xb,{trip:c,user:r,memberCount:f.length,onLogout:R}),b.jsx(Cb,{currentView:N,onViewChange:L}),b.jsxs("div",{className:"relative",children:[N==="dashboard"&&b.jsxs("div",{className:"grid lg:grid-cols-3 gap-6 max-w-7xl mx-auto px-4 pb-8",children:[b.jsx("div",{className:"lg:col-span-2",children:b.jsx(Mb,{activities:y,currentUser:r,onToggleOptIn:Ct,onDeleteActivity:O,isOwner:jt})}),b.jsx("div",{children:b.jsx(Lb,{members:f,ownerId:c.ownerId,currentUserId:r.id})})]}),N==="browse"&&b.jsx(Pb,{activities:y,currentUser:r,members:f,onToggleOptIn:Ct,onDeleteActivity:O,isOwner:jt,filterDate:et,filterMember:tt,filterTags:gt,onFilterDateChange:W,onFilterMemberChange:ht,onFilterTagsChange:pt}),N==="create"&&b.jsx(Ub,{onCreateActivity:at,onCancel:()=>L("dashboard"),activeTrip:c})]})]})}qA.createRoot(document.getElementById("root")).render(b.jsx(VA.StrictMode,{children:b.jsx(iN,{})}));
