const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/quill-BzY4kI8E.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();var gC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function w0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Id={exports:{}},Al={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function Bb(){if(P_)return Al;P_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:f,ref:l!==void 0?l:null,props:c}}return Al.Fragment=t,Al.jsx=n,Al.jsxs=n,Al}var U_;function qb(){return U_||(U_=1,Id.exports=Bb()),Id.exports}var E=qb(),Nd={exports:{}},xt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function Hb(){if(L_)return xt;L_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.iterator;function x(T){return T===null||typeof T!="object"?null:(T=w&&T[w]||T["@@iterator"],typeof T=="function"?T:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,X={};function tt(T,V,Z){this.props=T,this.context=V,this.refs=X,this.updater=Z||L}tt.prototype.isReactComponent={},tt.prototype.setState=function(T,V){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,V,"setState")},tt.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function nt(){}nt.prototype=tt.prototype;function ft(T,V,Z){this.props=T,this.context=V,this.refs=X,this.updater=Z||L}var ht=ft.prototype=new nt;ht.constructor=ft,W(ht,tt.prototype),ht.isPureReactComponent=!0;var jt=Array.isArray,ot={H:null,A:null,T:null,S:null,V:null},Mt=Object.prototype.hasOwnProperty;function O(T,V,Z,Y,it,dt){return Z=dt.ref,{$$typeof:r,type:T,key:V,ref:Z!==void 0?Z:null,props:dt}}function R(T,V){return O(T.type,V,void 0,void 0,void 0,T.props)}function C(T){return typeof T=="object"&&T!==null&&T.$$typeof===r}function k(T){var V={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(Z){return V[Z]})}var D=/\/+/g;function P(T,V){return typeof T=="object"&&T!==null&&T.key!=null?k(""+T.key):V.toString(36)}function N(){}function Dt(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(N,N):(T.status="pending",T.then(function(V){T.status==="pending"&&(T.status="fulfilled",T.value=V)},function(V){T.status==="pending"&&(T.status="rejected",T.reason=V)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function Rt(T,V,Z,Y,it){var dt=typeof T;(dt==="undefined"||dt==="boolean")&&(T=null);var rt=!1;if(T===null)rt=!0;else switch(dt){case"bigint":case"string":case"number":rt=!0;break;case"object":switch(T.$$typeof){case r:case t:rt=!0;break;case b:return rt=T._init,Rt(rt(T._payload),V,Z,Y,it)}}if(rt)return it=it(T),rt=Y===""?"."+P(T,0):Y,jt(it)?(Z="",rt!=null&&(Z=rt.replace(D,"$&/")+"/"),Rt(it,V,Z,"",function(hn){return hn})):it!=null&&(C(it)&&(it=R(it,Z+(it.key==null||T&&T.key===it.key?"":(""+it.key).replace(D,"$&/")+"/")+rt)),V.push(it)),1;rt=0;var ee=Y===""?".":Y+":";if(jt(T))for(var Et=0;Et<T.length;Et++)Y=T[Et],dt=ee+P(Y,Et),rt+=Rt(Y,V,Z,dt,it);else if(Et=x(T),typeof Et=="function")for(T=Et.call(T),Et=0;!(Y=T.next()).done;)Y=Y.value,dt=ee+P(Y,Et++),rt+=Rt(Y,V,Z,dt,it);else if(dt==="object"){if(typeof T.then=="function")return Rt(Dt(T),V,Z,Y,it);throw V=String(T),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return rt}function F(T,V,Z){if(T==null)return T;var Y=[],it=0;return Rt(T,Y,"","",function(dt){return V.call(Z,dt,it++)}),Y}function st(T){if(T._status===-1){var V=T._result;V=V(),V.then(function(Z){(T._status===0||T._status===-1)&&(T._status=1,T._result=Z)},function(Z){(T._status===0||T._status===-1)&&(T._status=2,T._result=Z)}),T._status===-1&&(T._status=0,T._result=V)}if(T._status===1)return T._result.default;throw T._result}var mt=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function zt(){}return xt.Children={map:F,forEach:function(T,V,Z){F(T,function(){V.apply(this,arguments)},Z)},count:function(T){var V=0;return F(T,function(){V++}),V},toArray:function(T){return F(T,function(V){return V})||[]},only:function(T){if(!C(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},xt.Component=tt,xt.Fragment=n,xt.Profiler=l,xt.PureComponent=ft,xt.StrictMode=s,xt.Suspense=g,xt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ot,xt.__COMPILER_RUNTIME={__proto__:null,c:function(T){return ot.H.useMemoCache(T)}},xt.cache=function(T){return function(){return T.apply(null,arguments)}},xt.cloneElement=function(T,V,Z){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var Y=W({},T.props),it=T.key,dt=void 0;if(V!=null)for(rt in V.ref!==void 0&&(dt=void 0),V.key!==void 0&&(it=""+V.key),V)!Mt.call(V,rt)||rt==="key"||rt==="__self"||rt==="__source"||rt==="ref"&&V.ref===void 0||(Y[rt]=V[rt]);var rt=arguments.length-2;if(rt===1)Y.children=Z;else if(1<rt){for(var ee=Array(rt),Et=0;Et<rt;Et++)ee[Et]=arguments[Et+2];Y.children=ee}return O(T.type,it,void 0,void 0,dt,Y)},xt.createContext=function(T){return T={$$typeof:f,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:c,_context:T},T},xt.createElement=function(T,V,Z){var Y,it={},dt=null;if(V!=null)for(Y in V.key!==void 0&&(dt=""+V.key),V)Mt.call(V,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(it[Y]=V[Y]);var rt=arguments.length-2;if(rt===1)it.children=Z;else if(1<rt){for(var ee=Array(rt),Et=0;Et<rt;Et++)ee[Et]=arguments[Et+2];it.children=ee}if(T&&T.defaultProps)for(Y in rt=T.defaultProps,rt)it[Y]===void 0&&(it[Y]=rt[Y]);return O(T,dt,void 0,void 0,null,it)},xt.createRef=function(){return{current:null}},xt.forwardRef=function(T){return{$$typeof:p,render:T}},xt.isValidElement=C,xt.lazy=function(T){return{$$typeof:b,_payload:{_status:-1,_result:T},_init:st}},xt.memo=function(T,V){return{$$typeof:y,type:T,compare:V===void 0?null:V}},xt.startTransition=function(T){var V=ot.T,Z={};ot.T=Z;try{var Y=T(),it=ot.S;it!==null&&it(Z,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(zt,mt)}catch(dt){mt(dt)}finally{ot.T=V}},xt.unstable_useCacheRefresh=function(){return ot.H.useCacheRefresh()},xt.use=function(T){return ot.H.use(T)},xt.useActionState=function(T,V,Z){return ot.H.useActionState(T,V,Z)},xt.useCallback=function(T,V){return ot.H.useCallback(T,V)},xt.useContext=function(T){return ot.H.useContext(T)},xt.useDebugValue=function(){},xt.useDeferredValue=function(T,V){return ot.H.useDeferredValue(T,V)},xt.useEffect=function(T,V,Z){var Y=ot.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(T,V)},xt.useId=function(){return ot.H.useId()},xt.useImperativeHandle=function(T,V,Z){return ot.H.useImperativeHandle(T,V,Z)},xt.useInsertionEffect=function(T,V){return ot.H.useInsertionEffect(T,V)},xt.useLayoutEffect=function(T,V){return ot.H.useLayoutEffect(T,V)},xt.useMemo=function(T,V){return ot.H.useMemo(T,V)},xt.useOptimistic=function(T,V){return ot.H.useOptimistic(T,V)},xt.useReducer=function(T,V,Z){return ot.H.useReducer(T,V,Z)},xt.useRef=function(T){return ot.H.useRef(T)},xt.useState=function(T){return ot.H.useState(T)},xt.useSyncExternalStore=function(T,V,Z){return ot.H.useSyncExternalStore(T,V,Z)},xt.useTransition=function(){return ot.H.useTransition()},xt.version="19.1.1",xt}var j_;function wm(){return j_||(j_=1,Nd.exports=Hb()),Nd.exports}var Ct=wm();const Rm=w0(Ct);var Cd={exports:{}},Sl={},Dd={exports:{}},Od={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_;function Gb(){return z_||(z_=1,(function(r){function t(F,st){var mt=F.length;F.push(st);t:for(;0<mt;){var zt=mt-1>>>1,T=F[zt];if(0<l(T,st))F[zt]=st,F[mt]=T,mt=zt;else break t}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var st=F[0],mt=F.pop();if(mt!==st){F[0]=mt;t:for(var zt=0,T=F.length,V=T>>>1;zt<V;){var Z=2*(zt+1)-1,Y=F[Z],it=Z+1,dt=F[it];if(0>l(Y,mt))it<T&&0>l(dt,Y)?(F[zt]=dt,F[it]=mt,zt=it):(F[zt]=Y,F[Z]=mt,zt=Z);else if(it<T&&0>l(dt,mt))F[zt]=dt,F[it]=mt,zt=it;else break t}}return st}function l(F,st){var mt=F.sortIndex-st.sortIndex;return mt!==0?mt:F.id-st.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();r.unstable_now=function(){return f.now()-p}}var g=[],y=[],b=1,w=null,x=3,L=!1,W=!1,X=!1,tt=!1,nt=typeof setTimeout=="function"?setTimeout:null,ft=typeof clearTimeout=="function"?clearTimeout:null,ht=typeof setImmediate<"u"?setImmediate:null;function jt(F){for(var st=n(y);st!==null;){if(st.callback===null)s(y);else if(st.startTime<=F)s(y),st.sortIndex=st.expirationTime,t(g,st);else break;st=n(y)}}function ot(F){if(X=!1,jt(F),!W)if(n(g)!==null)W=!0,Mt||(Mt=!0,P());else{var st=n(y);st!==null&&Rt(ot,st.startTime-F)}}var Mt=!1,O=-1,R=5,C=-1;function k(){return tt?!0:!(r.unstable_now()-C<R)}function D(){if(tt=!1,Mt){var F=r.unstable_now();C=F;var st=!0;try{t:{W=!1,X&&(X=!1,ft(O),O=-1),L=!0;var mt=x;try{e:{for(jt(F),w=n(g);w!==null&&!(w.expirationTime>F&&k());){var zt=w.callback;if(typeof zt=="function"){w.callback=null,x=w.priorityLevel;var T=zt(w.expirationTime<=F);if(F=r.unstable_now(),typeof T=="function"){w.callback=T,jt(F),st=!0;break e}w===n(g)&&s(g),jt(F)}else s(g);w=n(g)}if(w!==null)st=!0;else{var V=n(y);V!==null&&Rt(ot,V.startTime-F),st=!1}}break t}finally{w=null,x=mt,L=!1}st=void 0}}finally{st?P():Mt=!1}}}var P;if(typeof ht=="function")P=function(){ht(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Dt=N.port2;N.port1.onmessage=D,P=function(){Dt.postMessage(null)}}else P=function(){nt(D,0)};function Rt(F,st){O=nt(function(){F(r.unstable_now())},st)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(F){F.callback=null},r.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_next=function(F){switch(x){case 1:case 2:case 3:var st=3;break;default:st=x}var mt=x;x=st;try{return F()}finally{x=mt}},r.unstable_requestPaint=function(){tt=!0},r.unstable_runWithPriority=function(F,st){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var mt=x;x=F;try{return st()}finally{x=mt}},r.unstable_scheduleCallback=function(F,st,mt){var zt=r.unstable_now();switch(typeof mt=="object"&&mt!==null?(mt=mt.delay,mt=typeof mt=="number"&&0<mt?zt+mt:zt):mt=zt,F){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=mt+T,F={id:b++,callback:st,priorityLevel:F,startTime:mt,expirationTime:T,sortIndex:-1},mt>zt?(F.sortIndex=mt,t(y,F),n(g)===null&&F===n(y)&&(X?(ft(O),O=-1):X=!0,Rt(ot,mt-zt))):(F.sortIndex=T,t(g,F),W||L||(W=!0,Mt||(Mt=!0,P()))),F},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(F){var st=x;return function(){var mt=x;x=st;try{return F.apply(this,arguments)}finally{x=mt}}}})(Od)),Od}var B_;function Fb(){return B_||(B_=1,Dd.exports=Gb()),Dd.exports}var Md={exports:{}},Ke={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function Qb(){if(q_)return Ke;q_=1;var r=wm();function t(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,y,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:g,containerInfo:y,implementation:b}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ke.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ke.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return c(g,y,null,b)},Ke.flushSync=function(g){var y=f.T,b=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=y,s.p=b,s.d.f()}},Ke.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},Ke.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Ke.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,w=p(b,y.crossOrigin),x=typeof y.integrity=="string"?y.integrity:void 0,L=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:x,fetchPriority:L}):b==="script"&&s.d.X(g,{crossOrigin:w,integrity:x,fetchPriority:L,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ke.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},Ke.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,w=p(b,y.crossOrigin);s.d.L(g,b,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ke.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=p(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},Ke.requestFormReset=function(g){s.d.r(g)},Ke.unstable_batchedUpdates=function(g,y){return g(y)},Ke.useFormState=function(g,y,b){return f.H.useFormState(g,y,b)},Ke.useFormStatus=function(){return f.H.useHostTransitionStatus()},Ke.version="19.1.1",Ke}var H_;function Yb(){if(H_)return Md.exports;H_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Md.exports=Qb(),Md.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function Kb(){if(G_)return Sl;G_=1;var r=Fb(),t=wm(),n=Yb();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function f(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function p(e){if(c(e)!==e)throw Error(s(188))}function g(e){var i=e.alternate;if(!i){if(i=c(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,o=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return p(h),e;if(d===o)return p(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=d;else{for(var v=!1,A=h.child;A;){if(A===a){v=!0,a=h,o=d;break}if(A===o){v=!0,o=h,a=d;break}A=A.sibling}if(!v){for(A=d.child;A;){if(A===a){v=!0,a=d,o=h;break}if(A===o){v=!0,o=d,a=h;break}A=A.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function y(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=y(e),i!==null)return i;e=e.sibling}return null}var b=Object.assign,w=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),tt=Symbol.for("react.profiler"),nt=Symbol.for("react.provider"),ft=Symbol.for("react.consumer"),ht=Symbol.for("react.context"),jt=Symbol.for("react.forward_ref"),ot=Symbol.for("react.suspense"),Mt=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function P(e){return e===null||typeof e!="object"?null:(e=D&&e[D]||e["@@iterator"],typeof e=="function"?e:null)}var N=Symbol.for("react.client.reference");function Dt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===N?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case tt:return"Profiler";case X:return"StrictMode";case ot:return"Suspense";case Mt:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case L:return"Portal";case ht:return(e.displayName||"Context")+".Provider";case ft:return(e._context.displayName||"Context")+".Consumer";case jt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case O:return i=e.displayName||null,i!==null?i:Dt(e.type)||"Memo";case R:i=e._payload,e=e._init;try{return Dt(e(i))}catch{}}return null}var Rt=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mt={pending:!1,data:null,method:null,action:null},zt=[],T=-1;function V(e){return{current:e}}function Z(e){0>T||(e.current=zt[T],zt[T]=null,T--)}function Y(e,i){T++,zt[T]=e.current,e.current=i}var it=V(null),dt=V(null),rt=V(null),ee=V(null);function Et(e,i){switch(Y(rt,i),Y(dt,e),Y(it,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?c_(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=c_(i),e=h_(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Z(it),Y(it,e)}function hn(){Z(it),Z(dt),Z(rt)}function yo(e){e.memoizedState!==null&&Y(ee,e);var i=it.current,a=h_(i,e.type);i!==a&&(Y(dt,e),Y(it,a))}function Xs(e){dt.current===e&&(Z(it),Z(dt)),ee.current===e&&(Z(ee),_l._currentValue=mt)}var Zs=Object.prototype.hasOwnProperty,Wr=r.unstable_scheduleCallback,Js=r.unstable_cancelCallback,Ih=r.unstable_shouldYield,_o=r.unstable_requestPaint,sn=r.unstable_now,iu=r.unstable_getCurrentPriorityLevel,Re=r.unstable_ImmediatePriority,De=r.unstable_UserBlockingPriority,vi=r.unstable_NormalPriority,Nh=r.unstable_LowPriority,vo=r.unstable_IdlePriority,Ch=r.log,ts=r.unstable_setDisableYieldValue,Zi=null,Fe=null;function Tn(e){if(typeof Ch=="function"&&ts(e),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(Zi,e)}catch{}}var We=Math.clz32?Math.clz32:su,Dh=Math.log,ru=Math.LN2;function su(e){return e>>>=0,e===0?32:31-(Dh(e)/ru|0)|0}var Xn=256,Ji=4194304;function kn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function bn(e,i,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,d=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var A=o&134217727;return A!==0?(o=A&~d,o!==0?h=kn(o):(v&=A,v!==0?h=kn(v):a||(a=A&~e,a!==0&&(h=kn(a))))):(A=o&~d,A!==0?h=kn(A):v!==0?h=kn(v):a||(a=o&~e,a!==0&&(h=kn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Wi(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Ws(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Eo(){var e=Xn;return Xn<<=1,(Xn&4194048)===0&&(Xn=256),e}function tr(){var e=Ji;return Ji<<=1,(Ji&62914560)===0&&(Ji=4194304),e}function ta(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function de(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function au(e,i,a,o,h,d){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var A=e.entanglements,I=e.expirationTimes,B=e.hiddenUpdates;for(a=v&~a;0<a;){var Q=31-We(a),J=1<<Q;A[Q]=0,I[Q]=-1;var q=B[Q];if(q!==null)for(B[Q]=null,Q=0;Q<q.length;Q++){var H=q[Q];H!==null&&(H.lane&=-536870913)}a&=~J}o!==0&&er(e,o,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~i))}function er(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-We(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function nr(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-We(a),h=1<<o;h&i|e[o]&i&&(e[o]|=i),a&=~h}}function To(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function bo(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ei(){var e=st.p;return e!==0?e:(e=window.event,e===void 0?32:C_(e.type))}function Oh(e,i){var a=st.p;try{return st.p=e,i()}finally{st.p=a}}var Zn=Math.random().toString(36).slice(2),me="__reactFiber$"+Zn,Ue="__reactProps$"+Zn,Ti="__reactContainer$"+Zn,es="__reactEvents$"+Zn,ns="__reactListeners$"+Zn,Mh="__reactHandles$"+Zn,Pn="__reactResources$"+Zn,ir="__reactMarker$"+Zn;function ea(e){delete e[me],delete e[Ue],delete e[es],delete e[ns],delete e[Mh]}function Jn(e){var i=e[me];if(i)return i;for(var a=e.parentNode;a;){if(i=a[Ti]||a[me]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=p_(e);e!==null;){if(a=e[me])return a;e=p_(e)}return i}e=a,a=e.parentNode}return null}function Wn(e){if(e=e[me]||e[Ti]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function rr(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function sr(e){var i=e[Pn];return i||(i=e[Pn]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function pe(e){e[ir]=!0}var ou=new Set,is={};function ti(e,i){ei(e,i),ei(e+"Capture",i)}function ei(e,i){for(is[e]=i,e=0;e<i.length;e++)ou.add(i[e])}var rs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ni={},na={};function Vh(e){return Zs.call(na,e)?!0:Zs.call(ni,e)?!1:rs.test(e)?na[e]=!0:(ni[e]=!0,!1)}function ss(e,i,a){if(Vh(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function as(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function An(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}var os,ia;function bi(e){if(os===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);os=i&&i[1]||"",ia=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+os+e+ia}var ra=!1;function sa(e,i){if(!e||ra)return"";ra=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(H){var q=H}Reflect.construct(e,[],J)}else{try{J.call()}catch(H){q=H}e.call(J.prototype)}}else{try{throw Error()}catch(H){q=H}(J=e())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),v=d[0],A=d[1];if(v&&A){var I=v.split(`
`),B=A.split(`
`);for(h=o=0;o<I.length&&!I[o].includes("DetermineComponentFrameRoot");)o++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(o===I.length||h===B.length)for(o=I.length-1,h=B.length-1;1<=o&&0<=h&&I[o]!==B[h];)h--;for(;1<=o&&0<=h;o--,h--)if(I[o]!==B[h]){if(o!==1||h!==1)do if(o--,h--,0>h||I[o]!==B[h]){var Q=`
`+I[o].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=o&&0<=h);break}}}finally{ra=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?bi(a):""}function kh(e){switch(e.tag){case 26:case 27:case 5:return bi(e.type);case 16:return bi("Lazy");case 13:return bi("Suspense");case 19:return bi("SuspenseList");case 0:case 15:return sa(e.type,!1);case 11:return sa(e.type.render,!1);case 1:return sa(e.type,!0);case 31:return bi("Activity");default:return""}}function Un(e){try{var i="";do i+=kh(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function oe(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ar(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ls(e){var i=ar(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),o=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,d.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function or(e){e._valueTracker||(e._valueTracker=ls(e))}function Xt(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=ar(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function Ai(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var us=/[\n"\\]/g;function Oe(e){return e.replace(us,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ao(e,i,a,o,h,d,v,A){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+oe(i)):e.value!==""+oe(i)&&(e.value=""+oe(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?wo(e,v,oe(i)):a!=null?wo(e,v,oe(a)):o!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?e.name=""+oe(A):e.removeAttribute("name")}function So(e,i,a,o,h,d,v,A){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+oe(a):"",i=i!=null?""+oe(i):a,A||i===e.value||(e.value=i),e.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=A?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function wo(e,i,a){i==="number"&&Ai(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function lr(e,i,a,o){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+oe(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function lu(e,i,a){if(i!=null&&(i=""+oe(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+oe(a):""}function uu(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(Rt(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=oe(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function Sn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var Si=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ro(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||Si.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function xo(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&Ro(e,h,o)}else for(var d in i)i.hasOwnProperty(d)&&Ro(e,d,i[d])}function aa(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ln(e){return hu.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Io=null;function No(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ur=null,tn=null;function fu(e){var i=Wn(e);if(i&&(e=i.stateNode)){var a=e[Ue]||null;t:switch(e=i.stateNode,i.type){case"input":if(Ao(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Oe(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var h=o[Ue]||null;if(!h)throw Error(s(90));Ao(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&Xt(o)}break t;case"textarea":lu(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&lr(e,!!a.multiple,i,!1)}}}var cs=!1;function hs(e,i,a){if(cs)return e(i,a);cs=!0;try{var o=e(i);return o}finally{if(cs=!1,(ur!==null||tn!==null)&&(ec(),ur&&(i=ur,e=tn,tn=ur=null,fu(i),e)))for(i=0;i<e.length;i++)fu(e[i])}}function cr(e,i){var a=e.stateNode;if(a===null)return null;var o=a[Ue]||null;if(o===null)return null;a=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var en=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wi=!1;if(en)try{var hr={};Object.defineProperty(hr,"passive",{get:function(){wi=!0}}),window.addEventListener("test",hr,hr),window.removeEventListener("test",hr,hr)}catch{wi=!1}var wn=null,ne=null,oa=null;function du(){if(oa)return oa;var e,i=ne,a=i.length,o,h="value"in wn?wn.value:wn.textContent,d=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(o=1;o<=v&&i[a-o]===h[d-o];o++);return oa=h.slice(e,1<o?1-o:void 0)}function fs(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function ds(){return!0}function Co(){return!1}function xe(e){function i(a,o,h,d,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var A in e)e.hasOwnProperty(A)&&(a=e[A],this[A]=a?a(d):d[A]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ds:Co,this.isPropagationStopped=Co,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ds)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ds)},persist:function(){},isPersistent:ds}),i}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ms=xe(Qe),ps=b({},Qe,{view:0,detail:0}),gs=xe(ps),la,ys,ii,_s=b({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ha,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ii&&(ii&&e.type==="mousemove"?(la=e.screenX-ii.screenX,ys=e.screenY-ii.screenY):ys=la=0,ii=e),la)},movementY:function(e){return"movementY"in e?e.movementY:ys}}),vs=xe(_s),Ph=b({},_s,{dataTransfer:0}),mu=xe(Ph),Es=b({},ps,{relatedTarget:0}),ua=xe(Es),pu=b({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),Do=xe(pu),Oo=b({},Qe,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gu=xe(Oo),ca=b({},Qe,{data:0}),Mo=xe(ca),yu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ri={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_u={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vu(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=_u[e])?!!i[e]:!1}function ha(){return vu}var Eu=b({},ps,{key:function(e){if(e.key){var i=yu[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=fs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ri[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ha,charCode:function(e){return e.type==="keypress"?fs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fa=xe(Eu),nn=b({},_s,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vo=xe(nn),Tu=b({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ha}),fr=xe(Tu),u=b({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),m=xe(u),_=b({},_s,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),S=xe(_),z=b({},Qe,{newState:0,oldState:0}),G=xe(z),at=[9,13,27,32],St=en&&"CompositionEvent"in window,se=null;en&&"documentMode"in document&&(se=document.documentMode);var Yt=en&&"TextEvent"in window&&!se,ge=en&&(!St||se&&8<se&&11>=se),fn=" ",ri=!1;function jn(e,i){switch(e){case"keyup":return at.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bn=!1;function ko(e,i){switch(e){case"compositionend":return zn(i);case"keypress":return i.which!==32?null:(ri=!0,fn);case"textInput":return e=i.data,e===fn&&ri?null:e;default:return null}}function m1(e,i){if(Bn)return e==="compositionend"||!St&&jn(e,i)?(e=du(),oa=ne=wn=null,Bn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ge&&i.locale!=="ko"?null:i.data;default:return null}}var p1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sp(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!p1[e.type]:i==="textarea"}function wp(e,i,a,o){ur?tn?tn.push(o):tn=[o]:ur=o,i=oc(i,"onChange"),0<i.length&&(a=new ms("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var Po=null,Uo=null;function g1(e){s_(e,0)}function bu(e){var i=rr(e);if(Xt(i))return e}function Rp(e,i){if(e==="change")return i}var xp=!1;if(en){var Uh;if(en){var Lh="oninput"in document;if(!Lh){var Ip=document.createElement("div");Ip.setAttribute("oninput","return;"),Lh=typeof Ip.oninput=="function"}Uh=Lh}else Uh=!1;xp=Uh&&(!document.documentMode||9<document.documentMode)}function Np(){Po&&(Po.detachEvent("onpropertychange",Cp),Uo=Po=null)}function Cp(e){if(e.propertyName==="value"&&bu(Uo)){var i=[];wp(i,Uo,e,No(e)),hs(g1,i)}}function y1(e,i,a){e==="focusin"?(Np(),Po=i,Uo=a,Po.attachEvent("onpropertychange",Cp)):e==="focusout"&&Np()}function _1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bu(Uo)}function v1(e,i){if(e==="click")return bu(i)}function E1(e,i){if(e==="input"||e==="change")return bu(i)}function T1(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var dn=typeof Object.is=="function"?Object.is:T1;function Lo(e,i){if(dn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Zs.call(i,h)||!dn(e[h],i[h]))return!1}return!0}function Dp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Op(e,i){var a=Dp(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Dp(a)}}function Mp(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Mp(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Vp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Ai(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=Ai(e.document)}return i}function jh(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var b1=en&&"documentMode"in document&&11>=document.documentMode,da=null,zh=null,jo=null,Bh=!1;function kp(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Bh||da==null||da!==Ai(o)||(o=da,"selectionStart"in o&&jh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),jo&&Lo(jo,o)||(jo=o,o=oc(zh,"onSelect"),0<o.length&&(i=new ms("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=da)))}function Ts(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var ma={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionrun:Ts("Transition","TransitionRun"),transitionstart:Ts("Transition","TransitionStart"),transitioncancel:Ts("Transition","TransitionCancel"),transitionend:Ts("Transition","TransitionEnd")},qh={},Pp={};en&&(Pp=document.createElement("div").style,"AnimationEvent"in window||(delete ma.animationend.animation,delete ma.animationiteration.animation,delete ma.animationstart.animation),"TransitionEvent"in window||delete ma.transitionend.transition);function bs(e){if(qh[e])return qh[e];if(!ma[e])return e;var i=ma[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Pp)return qh[e]=i[a];return e}var Up=bs("animationend"),Lp=bs("animationiteration"),jp=bs("animationstart"),A1=bs("transitionrun"),S1=bs("transitionstart"),w1=bs("transitioncancel"),zp=bs("transitionend"),Bp=new Map,Hh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hh.push("scrollEnd");function qn(e,i){Bp.set(e,i),ti(i,[e])}var qp=new WeakMap;function Rn(e,i){if(typeof e=="object"&&e!==null){var a=qp.get(e);return a!==void 0?a:(i={value:e,source:i,stack:Un(i)},qp.set(e,i),i)}return{value:e,source:i,stack:Un(i)}}var xn=[],pa=0,Gh=0;function Au(){for(var e=pa,i=Gh=pa=0;i<e;){var a=xn[i];xn[i++]=null;var o=xn[i];xn[i++]=null;var h=xn[i];xn[i++]=null;var d=xn[i];if(xn[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}d!==0&&Hp(a,h,d)}}function Su(e,i,a,o){xn[pa++]=e,xn[pa++]=i,xn[pa++]=a,xn[pa++]=o,Gh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Fh(e,i,a,o){return Su(e,i,a,o),wu(e)}function ga(e,i){return Su(e,null,null,i),wu(e)}function Hp(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&i!==null&&(h=31-We(a),e=d.hiddenUpdates,o=e[h],o===null?e[h]=[i]:o.push(i),i.lane=a|536870912),d):null}function wu(e){if(50<cl)throw cl=0,Jf=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var ya={};function R1(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(e,i,a,o){return new R1(e,i,a,o)}function Qh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xi(e,i){var a=e.alternate;return a===null?(a=mn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Gp(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Ru(e,i,a,o,h,d){var v=0;if(o=e,typeof e=="function")Qh(e)&&(v=1);else if(typeof e=="string")v=Ib(e,a,it.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case C:return e=mn(31,a,i,h),e.elementType=C,e.lanes=d,e;case W:return As(a.children,h,d,i);case X:v=8,h|=24;break;case tt:return e=mn(12,a,i,h|2),e.elementType=tt,e.lanes=d,e;case ot:return e=mn(13,a,i,h),e.elementType=ot,e.lanes=d,e;case Mt:return e=mn(19,a,i,h),e.elementType=Mt,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nt:case ht:v=10;break t;case ft:v=9;break t;case jt:v=11;break t;case O:v=14;break t;case R:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return i=mn(v,a,i,h),i.elementType=e,i.type=o,i.lanes=d,i}function As(e,i,a,o){return e=mn(7,e,o,i),e.lanes=a,e}function Yh(e,i,a){return e=mn(6,e,null,i),e.lanes=a,e}function Kh(e,i,a){return i=mn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var _a=[],va=0,xu=null,Iu=0,In=[],Nn=0,Ss=null,Ii=1,Ni="";function ws(e,i){_a[va++]=Iu,_a[va++]=xu,xu=e,Iu=i}function Fp(e,i,a){In[Nn++]=Ii,In[Nn++]=Ni,In[Nn++]=Ss,Ss=e;var o=Ii;e=Ni;var h=32-We(o)-1;o&=~(1<<h),a+=1;var d=32-We(i)+h;if(30<d){var v=h-h%5;d=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Ii=1<<32-We(i)+h|a<<h|o,Ni=d+e}else Ii=1<<d|a<<h|o,Ni=e}function $h(e){e.return!==null&&(ws(e,1),Fp(e,1,0))}function Xh(e){for(;e===xu;)xu=_a[--va],_a[va]=null,Iu=_a[--va],_a[va]=null;for(;e===Ss;)Ss=In[--Nn],In[Nn]=null,Ni=In[--Nn],In[Nn]=null,Ii=In[--Nn],In[Nn]=null}var rn=null,ce=null,Ft=!1,Rs=null,si=!1,Zh=Error(s(519));function xs(e){var i=Error(s(418,""));throw qo(Rn(i,e)),Zh}function Qp(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[me]=e,i[Ue]=o,a){case"dialog":kt("cancel",i),kt("close",i);break;case"iframe":case"object":case"embed":kt("load",i);break;case"video":case"audio":for(a=0;a<fl.length;a++)kt(fl[a],i);break;case"source":kt("error",i);break;case"img":case"image":case"link":kt("error",i),kt("load",i);break;case"details":kt("toggle",i);break;case"input":kt("invalid",i),So(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),or(i);break;case"select":kt("invalid",i);break;case"textarea":kt("invalid",i),uu(i,o.value,o.defaultValue,o.children),or(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||u_(i.textContent,a)?(o.popover!=null&&(kt("beforetoggle",i),kt("toggle",i)),o.onScroll!=null&&kt("scroll",i),o.onScrollEnd!=null&&kt("scrollend",i),o.onClick!=null&&(i.onclick=lc),i=!0):i=!1,i||xs(e)}function Yp(e){for(rn=e.return;rn;)switch(rn.tag){case 5:case 13:si=!1;return;case 27:case 3:si=!0;return;default:rn=rn.return}}function zo(e){if(e!==rn)return!1;if(!Ft)return Yp(e),Ft=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||md(e.type,e.memoizedProps)),a=!a),a&&ce&&xs(e),Yp(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){ce=Gn(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}ce=null}}else i===27?(i=ce,Ir(e.type)?(e=_d,_d=null,ce=e):ce=i):ce=rn?Gn(e.stateNode.nextSibling):null;return!0}function Bo(){ce=rn=null,Ft=!1}function Kp(){var e=Rs;return e!==null&&(ln===null?ln=e:ln.push.apply(ln,e),Rs=null),e}function qo(e){Rs===null?Rs=[e]:Rs.push(e)}var Jh=V(null),Is=null,Ci=null;function dr(e,i,a){Y(Jh,i._currentValue),i._currentValue=a}function Di(e){e._currentValue=Jh.current,Z(Jh)}function Wh(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function tf(e,i,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;t:for(;d!==null;){var A=d;d=h;for(var I=0;I<i.length;I++)if(A.context===i[I]){d.lanes|=a,A=d.alternate,A!==null&&(A.lanes|=a),Wh(d.return,a,e),o||(v=null);break t}d=A.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Wh(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Ho(e,i,a,o){e=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var A=h.type;dn(h.pendingProps.value,v.value)||(e!==null?e.push(A):e=[A])}}else if(h===ee.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(_l):e=[_l])}h=h.return}e!==null&&tf(i,e,a,o),i.flags|=262144}function Nu(e){for(e=e.firstContext;e!==null;){if(!dn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ns(e){Is=e,Ci=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ye(e){return $p(Is,e)}function Cu(e,i){return Is===null&&Ns(e),$p(e,i)}function $p(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Ci===null){if(e===null)throw Error(s(308));Ci=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Ci=Ci.next=i;return a}var x1=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},I1=r.unstable_scheduleCallback,N1=r.unstable_NormalPriority,Ie={$$typeof:ht,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ef(){return{controller:new x1,data:new Map,refCount:0}}function Go(e){e.refCount--,e.refCount===0&&I1(N1,function(){e.controller.abort()})}var Fo=null,nf=0,Ea=0,Ta=null;function C1(e,i){if(Fo===null){var a=Fo=[];nf=0,Ea=sd(),Ta={status:"pending",value:void 0,then:function(o){a.push(o)}}}return nf++,i.then(Xp,Xp),i}function Xp(){if(--nf===0&&Fo!==null){Ta!==null&&(Ta.status="fulfilled");var e=Fo;Fo=null,Ea=0,Ta=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function D1(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Zp=F.S;F.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&C1(e,i),Zp!==null&&Zp(e,i)};var Cs=V(null);function rf(){var e=Cs.current;return e!==null?e:ie.pooledCache}function Du(e,i){i===null?Y(Cs,Cs.current):Y(Cs,i.pool)}function Jp(){var e=rf();return e===null?null:{parent:Ie._currentValue,pool:e}}var Qo=Error(s(460)),Wp=Error(s(474)),Ou=Error(s(542)),sf={then:function(){}};function tg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Mu(){}function eg(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Mu,Mu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,ig(e),e;default:if(typeof i.status=="string")i.then(Mu,Mu);else{if(e=ie,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,ig(e),e}throw Yo=i,Qo}}var Yo=null;function ng(){if(Yo===null)throw Error(s(459));var e=Yo;return Yo=null,e}function ig(e){if(e===Qo||e===Ou)throw Error(s(483))}var mr=!1;function af(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function of(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function pr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function gr(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Kt&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=wu(e),Hp(e,null,a),i}return Su(e,o,i,a),wu(e)}function Ko(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,nr(e,a)}}function lf(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var uf=!1;function $o(){if(uf){var e=Ta;if(e!==null)throw e}}function Xo(e,i,a,o){uf=!1;var h=e.updateQueue;mr=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var I=A,B=I.next;I.next=null,v===null?d=B:v.next=B,v=I;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,A=Q.lastBaseUpdate,A!==v&&(A===null?Q.firstBaseUpdate=B:A.next=B,Q.lastBaseUpdate=I))}if(d!==null){var J=h.baseState;v=0,Q=B=I=null,A=d;do{var q=A.lane&-536870913,H=q!==A.lane;if(H?(Bt&q)===q:(o&q)===q){q!==0&&q===Ea&&(uf=!0),Q!==null&&(Q=Q.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var Tt=e,yt=A;q=i;var Wt=a;switch(yt.tag){case 1:if(Tt=yt.payload,typeof Tt=="function"){J=Tt.call(Wt,J,q);break t}J=Tt;break t;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=yt.payload,q=typeof Tt=="function"?Tt.call(Wt,J,q):Tt,q==null)break t;J=b({},J,q);break t;case 2:mr=!0}}q=A.callback,q!==null&&(e.flags|=64,H&&(e.flags|=8192),H=h.callbacks,H===null?h.callbacks=[q]:H.push(q))}else H={lane:q,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Q===null?(B=Q=H,I=J):Q=Q.next=H,v|=q;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;H=A,A=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);Q===null&&(I=J),h.baseState=I,h.firstBaseUpdate=B,h.lastBaseUpdate=Q,d===null&&(h.shared.lanes=0),Sr|=v,e.lanes=v,e.memoizedState=J}}function rg(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function sg(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)rg(a[e],i)}var ba=V(null),Vu=V(0);function ag(e,i){e=Li,Y(Vu,e),Y(ba,i),Li=e|i.baseLanes}function cf(){Y(Vu,Li),Y(ba,ba.current)}function hf(){Li=Vu.current,Z(ba),Z(Vu)}var yr=0,Nt=null,Zt=null,Te=null,ku=!1,Aa=!1,Ds=!1,Pu=0,Zo=0,Sa=null,O1=0;function ye(){throw Error(s(321))}function ff(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!dn(e[a],i[a]))return!1;return!0}function df(e,i,a,o,h,d){return yr=d,Nt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,F.H=e===null||e.memoizedState===null?Hg:Gg,Ds=!1,d=a(o,h),Ds=!1,Aa&&(d=lg(i,a,o,h)),og(e),d}function og(e){F.H=qu;var i=Zt!==null&&Zt.next!==null;if(yr=0,Te=Zt=Nt=null,ku=!1,Zo=0,Sa=null,i)throw Error(s(300));e===null||Me||(e=e.dependencies,e!==null&&Nu(e)&&(Me=!0))}function lg(e,i,a,o){Nt=e;var h=0;do{if(Aa&&(Sa=null),Zo=0,Aa=!1,25<=h)throw Error(s(301));if(h+=1,Te=Zt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}F.H=j1,d=i(a,o)}while(Aa);return d}function M1(){var e=F.H,i=e.useState()[0];return i=typeof i.then=="function"?Jo(i):i,e=e.useState()[0],(Zt!==null?Zt.memoizedState:null)!==e&&(Nt.flags|=1024),i}function mf(){var e=Pu!==0;return Pu=0,e}function pf(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function gf(e){if(ku){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}ku=!1}yr=0,Te=Zt=Nt=null,Aa=!1,Zo=Pu=0,Sa=null}function an(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?Nt.memoizedState=Te=e:Te=Te.next=e,Te}function be(){if(Zt===null){var e=Nt.alternate;e=e!==null?e.memoizedState:null}else e=Zt.next;var i=Te===null?Nt.memoizedState:Te.next;if(i!==null)Te=i,Zt=e;else{if(e===null)throw Nt.alternate===null?Error(s(467)):Error(s(310));Zt=e,e={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},Te===null?Nt.memoizedState=Te=e:Te=Te.next=e}return Te}function yf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jo(e){var i=Zo;return Zo+=1,Sa===null&&(Sa=[]),e=eg(Sa,e,i),i=Nt,(Te===null?i.memoizedState:Te.next)===null&&(i=i.alternate,F.H=i===null||i.memoizedState===null?Hg:Gg),e}function Uu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Jo(e);if(e.$$typeof===ht)return Ye(e)}throw Error(s(438,String(e)))}function _f(e){var i=null,a=Nt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=Nt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=yf(),Nt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=k;return i.index++,a}function Oi(e,i){return typeof i=="function"?i(e):i}function Lu(e){var i=be();return vf(i,Zt,e)}function vf(e,i,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=e.baseQueue,d=o.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,o.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{i=h.next;var A=v=null,I=null,B=i,Q=!1;do{var J=B.lane&-536870913;if(J!==B.lane?(Bt&J)===J:(yr&J)===J){var q=B.revertLane;if(q===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),J===Ea&&(Q=!0);else if((yr&q)===q){B=B.next,q===Ea&&(Q=!0);continue}else J={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},I===null?(A=I=J,v=d):I=I.next=J,Nt.lanes|=q,Sr|=q;J=B.action,Ds&&a(d,J),d=B.hasEagerState?B.eagerState:a(d,J)}else q={lane:J,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},I===null?(A=I=q,v=d):I=I.next=q,Nt.lanes|=J,Sr|=J;B=B.next}while(B!==null&&B!==i);if(I===null?v=d:I.next=A,!dn(d,e.memoizedState)&&(Me=!0,Q&&(a=Ta,a!==null)))throw a;e.memoizedState=d,e.baseState=v,e.baseQueue=I,o.lastRenderedState=d}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Ef(e){var i=be(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=e(d,v.action),v=v.next;while(v!==h);dn(d,i.memoizedState)||(Me=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,o]}function ug(e,i,a){var o=Nt,h=be(),d=Ft;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!dn((Zt||h).memoizedState,a);v&&(h.memoizedState=a,Me=!0),h=h.queue;var A=fg.bind(null,o,h,e);if(Wo(2048,8,A,[e]),h.getSnapshot!==i||v||Te!==null&&Te.memoizedState.tag&1){if(o.flags|=2048,wa(9,ju(),hg.bind(null,o,h,a,i),null),ie===null)throw Error(s(349));d||(yr&124)!==0||cg(o,i,a)}return a}function cg(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=Nt.updateQueue,i===null?(i=yf(),Nt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function hg(e,i,a,o){i.value=a,i.getSnapshot=o,dg(i)&&mg(e)}function fg(e,i,a){return a(function(){dg(i)&&mg(e)})}function dg(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!dn(e,a)}catch{return!0}}function mg(e){var i=ga(e,2);i!==null&&vn(i,e,2)}function Tf(e){var i=an();if(typeof e=="function"){var a=e;if(e=a(),Ds){Tn(!0);try{a()}finally{Tn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:e},i}function pg(e,i,a,o){return e.baseState=a,vf(e,Zt,typeof o=="function"?o:Oi)}function V1(e,i,a,o,h){if(Bu(e))throw Error(s(485));if(e=i.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};F.T!==null?a(!0):d.isTransition=!1,o(d),a=i.pending,a===null?(d.next=i.pending=d,gg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function gg(e,i){var a=i.action,o=i.payload,h=e.state;if(i.isTransition){var d=F.T,v={};F.T=v;try{var A=a(h,o),I=F.S;I!==null&&I(v,A),yg(e,i,A)}catch(B){bf(e,i,B)}finally{F.T=d}}else try{d=a(h,o),yg(e,i,d)}catch(B){bf(e,i,B)}}function yg(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){_g(e,i,o)},function(o){return bf(e,i,o)}):_g(e,i,a)}function _g(e,i,a){i.status="fulfilled",i.value=a,vg(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,gg(e,a)))}function bf(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,vg(i),i=i.next;while(i!==o)}e.action=null}function vg(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Eg(e,i){return i}function Tg(e,i){if(Ft){var a=ie.formState;if(a!==null){t:{var o=Nt;if(Ft){if(ce){e:{for(var h=ce,d=si;h.nodeType!==8;){if(!d){h=null;break e}if(h=Gn(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){ce=Gn(h.nextSibling),o=h.data==="F!";break t}}xs(o)}o=!1}o&&(i=a[0])}}return a=an(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eg,lastRenderedState:i},a.queue=o,a=zg.bind(null,Nt,o),o.dispatch=a,o=Tf(!1),d=xf.bind(null,Nt,!1,o.queue),o=an(),h={state:i,dispatch:null,action:e,pending:null},o.queue=h,a=V1.bind(null,Nt,h,d,a),h.dispatch=a,o.memoizedState=e,[i,a,!1]}function bg(e){var i=be();return Ag(i,Zt,e)}function Ag(e,i,a){if(i=vf(e,i,Eg)[0],e=Lu(Oi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Jo(i)}catch(v){throw v===Qo?Ou:v}else o=i;i=be();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Nt.flags|=2048,wa(9,ju(),k1.bind(null,h,a),null)),[o,d,e]}function k1(e,i){e.action=i}function Sg(e){var i=be(),a=Zt;if(a!==null)return Ag(i,a,e);be(),i=i.memoizedState,a=be();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function wa(e,i,a,o){return e={tag:e,create:a,deps:o,inst:i,next:null},i=Nt.updateQueue,i===null&&(i=yf(),Nt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function ju(){return{destroy:void 0,resource:void 0}}function wg(){return be().memoizedState}function zu(e,i,a,o){var h=an();o=o===void 0?null:o,Nt.flags|=e,h.memoizedState=wa(1|i,ju(),a,o)}function Wo(e,i,a,o){var h=be();o=o===void 0?null:o;var d=h.memoizedState.inst;Zt!==null&&o!==null&&ff(o,Zt.memoizedState.deps)?h.memoizedState=wa(i,d,a,o):(Nt.flags|=e,h.memoizedState=wa(1|i,d,a,o))}function Rg(e,i){zu(8390656,8,e,i)}function xg(e,i){Wo(2048,8,e,i)}function Ig(e,i){return Wo(4,2,e,i)}function Ng(e,i){return Wo(4,4,e,i)}function Cg(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Dg(e,i,a){a=a!=null?a.concat([e]):null,Wo(4,4,Cg.bind(null,i,e),a)}function Af(){}function Og(e,i){var a=be();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&ff(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function Mg(e,i){var a=be();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&ff(i,o[1]))return o[0];if(o=e(),Ds){Tn(!0);try{e()}finally{Tn(!1)}}return a.memoizedState=[o,i],o}function Sf(e,i,a){return a===void 0||(yr&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=Py(),Nt.lanes|=e,Sr|=e,a)}function Vg(e,i,a,o){return dn(a,i)?a:ba.current!==null?(e=Sf(e,a,o),dn(e,i)||(Me=!0),e):(yr&42)===0?(Me=!0,e.memoizedState=a):(e=Py(),Nt.lanes|=e,Sr|=e,i)}function kg(e,i,a,o,h){var d=st.p;st.p=d!==0&&8>d?d:8;var v=F.T,A={};F.T=A,xf(e,!1,i,a);try{var I=h(),B=F.S;if(B!==null&&B(A,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var Q=D1(I,o);tl(e,i,Q,_n(e))}else tl(e,i,o,_n(e))}catch(J){tl(e,i,{then:function(){},status:"rejected",reason:J},_n())}finally{st.p=d,F.T=v}}function P1(){}function wf(e,i,a,o){if(e.tag!==5)throw Error(s(476));var h=Pg(e).queue;kg(e,h,i,mt,a===null?P1:function(){return Ug(e),a(o)})}function Pg(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:mt,baseState:mt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:mt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Ug(e){var i=Pg(e).next.queue;tl(e,i,{},_n())}function Rf(){return Ye(_l)}function Lg(){return be().memoizedState}function jg(){return be().memoizedState}function U1(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=_n();e=pr(a);var o=gr(i,e,a);o!==null&&(vn(o,i,a),Ko(o,i,a)),i={cache:ef()},e.payload=i;return}i=i.return}}function L1(e,i,a){var o=_n();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Bu(e)?Bg(i,a):(a=Fh(e,i,a,o),a!==null&&(vn(a,e,o),qg(a,i,o)))}function zg(e,i,a){var o=_n();tl(e,i,a,o)}function tl(e,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Bu(e))Bg(i,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,A=d(v,a);if(h.hasEagerState=!0,h.eagerState=A,dn(A,v))return Su(e,i,h,0),ie===null&&Au(),!1}catch{}finally{}if(a=Fh(e,i,h,o),a!==null)return vn(a,e,o),qg(a,i,o),!0}return!1}function xf(e,i,a,o){if(o={lane:2,revertLane:sd(),action:o,hasEagerState:!1,eagerState:null,next:null},Bu(e)){if(i)throw Error(s(479))}else i=Fh(e,a,o,2),i!==null&&vn(i,e,2)}function Bu(e){var i=e.alternate;return e===Nt||i!==null&&i===Nt}function Bg(e,i){Aa=ku=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function qg(e,i,a){if((a&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,nr(e,a)}}var qu={readContext:Ye,use:Uu,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useLayoutEffect:ye,useInsertionEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useSyncExternalStore:ye,useId:ye,useHostTransitionStatus:ye,useFormState:ye,useActionState:ye,useOptimistic:ye,useMemoCache:ye,useCacheRefresh:ye},Hg={readContext:Ye,use:Uu,useCallback:function(e,i){return an().memoizedState=[e,i===void 0?null:i],e},useContext:Ye,useEffect:Rg,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,zu(4194308,4,Cg.bind(null,i,e),a)},useLayoutEffect:function(e,i){return zu(4194308,4,e,i)},useInsertionEffect:function(e,i){zu(4,2,e,i)},useMemo:function(e,i){var a=an();i=i===void 0?null:i;var o=e();if(Ds){Tn(!0);try{e()}finally{Tn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=an();if(a!==void 0){var h=a(i);if(Ds){Tn(!0);try{a(i)}finally{Tn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=L1.bind(null,Nt,e),[o.memoizedState,e]},useRef:function(e){var i=an();return e={current:e},i.memoizedState=e},useState:function(e){e=Tf(e);var i=e.queue,a=zg.bind(null,Nt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Af,useDeferredValue:function(e,i){var a=an();return Sf(a,e,i)},useTransition:function(){var e=Tf(!1);return e=kg.bind(null,Nt,e.queue,!0,!1),an().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=Nt,h=an();if(Ft){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),ie===null)throw Error(s(349));(Bt&124)!==0||cg(o,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,Rg(fg.bind(null,o,d,e),[e]),o.flags|=2048,wa(9,ju(),hg.bind(null,o,d,a,i),null),a},useId:function(){var e=an(),i=ie.identifierPrefix;if(Ft){var a=Ni,o=Ii;a=(o&~(1<<32-We(o)-1)).toString(32)+a,i=""+i+"R"+a,a=Pu++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=O1++,i=""+i+"r"+a.toString(32)+"";return e.memoizedState=i},useHostTransitionStatus:Rf,useFormState:Tg,useActionState:Tg,useOptimistic:function(e){var i=an();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=xf.bind(null,Nt,!0,a),a.dispatch=i,[e,i]},useMemoCache:_f,useCacheRefresh:function(){return an().memoizedState=U1.bind(null,Nt)}},Gg={readContext:Ye,use:Uu,useCallback:Og,useContext:Ye,useEffect:xg,useImperativeHandle:Dg,useInsertionEffect:Ig,useLayoutEffect:Ng,useMemo:Mg,useReducer:Lu,useRef:wg,useState:function(){return Lu(Oi)},useDebugValue:Af,useDeferredValue:function(e,i){var a=be();return Vg(a,Zt.memoizedState,e,i)},useTransition:function(){var e=Lu(Oi)[0],i=be().memoizedState;return[typeof e=="boolean"?e:Jo(e),i]},useSyncExternalStore:ug,useId:Lg,useHostTransitionStatus:Rf,useFormState:bg,useActionState:bg,useOptimistic:function(e,i){var a=be();return pg(a,Zt,e,i)},useMemoCache:_f,useCacheRefresh:jg},j1={readContext:Ye,use:Uu,useCallback:Og,useContext:Ye,useEffect:xg,useImperativeHandle:Dg,useInsertionEffect:Ig,useLayoutEffect:Ng,useMemo:Mg,useReducer:Ef,useRef:wg,useState:function(){return Ef(Oi)},useDebugValue:Af,useDeferredValue:function(e,i){var a=be();return Zt===null?Sf(a,e,i):Vg(a,Zt.memoizedState,e,i)},useTransition:function(){var e=Ef(Oi)[0],i=be().memoizedState;return[typeof e=="boolean"?e:Jo(e),i]},useSyncExternalStore:ug,useId:Lg,useHostTransitionStatus:Rf,useFormState:Sg,useActionState:Sg,useOptimistic:function(e,i){var a=be();return Zt!==null?pg(a,Zt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:_f,useCacheRefresh:jg},Ra=null,el=0;function Hu(e){var i=el;return el+=1,Ra===null&&(Ra=[]),eg(Ra,e,i)}function nl(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Gu(e,i){throw i.$$typeof===w?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Fg(e){var i=e._init;return i(e._payload)}function Qg(e){function i(U,M){if(e){var j=U.deletions;j===null?(U.deletions=[M],U.flags|=16):j.push(M)}}function a(U,M){if(!e)return null;for(;M!==null;)i(U,M),M=M.sibling;return null}function o(U){for(var M=new Map;U!==null;)U.key!==null?M.set(U.key,U):M.set(U.index,U),U=U.sibling;return M}function h(U,M){return U=xi(U,M),U.index=0,U.sibling=null,U}function d(U,M,j){return U.index=j,e?(j=U.alternate,j!==null?(j=j.index,j<M?(U.flags|=67108866,M):j):(U.flags|=67108866,M)):(U.flags|=1048576,M)}function v(U){return e&&U.alternate===null&&(U.flags|=67108866),U}function A(U,M,j,K){return M===null||M.tag!==6?(M=Yh(j,U.mode,K),M.return=U,M):(M=h(M,j),M.return=U,M)}function I(U,M,j,K){var ct=j.type;return ct===W?Q(U,M,j.props.children,K,j.key):M!==null&&(M.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===R&&Fg(ct)===M.type)?(M=h(M,j.props),nl(M,j),M.return=U,M):(M=Ru(j.type,j.key,j.props,null,U.mode,K),nl(M,j),M.return=U,M)}function B(U,M,j,K){return M===null||M.tag!==4||M.stateNode.containerInfo!==j.containerInfo||M.stateNode.implementation!==j.implementation?(M=Kh(j,U.mode,K),M.return=U,M):(M=h(M,j.children||[]),M.return=U,M)}function Q(U,M,j,K,ct){return M===null||M.tag!==7?(M=As(j,U.mode,K,ct),M.return=U,M):(M=h(M,j),M.return=U,M)}function J(U,M,j){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Yh(""+M,U.mode,j),M.return=U,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case x:return j=Ru(M.type,M.key,M.props,null,U.mode,j),nl(j,M),j.return=U,j;case L:return M=Kh(M,U.mode,j),M.return=U,M;case R:var K=M._init;return M=K(M._payload),J(U,M,j)}if(Rt(M)||P(M))return M=As(M,U.mode,j,null),M.return=U,M;if(typeof M.then=="function")return J(U,Hu(M),j);if(M.$$typeof===ht)return J(U,Cu(U,M),j);Gu(U,M)}return null}function q(U,M,j,K){var ct=M!==null?M.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return ct!==null?null:A(U,M,""+j,K);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case x:return j.key===ct?I(U,M,j,K):null;case L:return j.key===ct?B(U,M,j,K):null;case R:return ct=j._init,j=ct(j._payload),q(U,M,j,K)}if(Rt(j)||P(j))return ct!==null?null:Q(U,M,j,K,null);if(typeof j.then=="function")return q(U,M,Hu(j),K);if(j.$$typeof===ht)return q(U,M,Cu(U,j),K);Gu(U,j)}return null}function H(U,M,j,K,ct){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return U=U.get(j)||null,A(M,U,""+K,ct);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case x:return U=U.get(K.key===null?j:K.key)||null,I(M,U,K,ct);case L:return U=U.get(K.key===null?j:K.key)||null,B(M,U,K,ct);case R:var Ot=K._init;return K=Ot(K._payload),H(U,M,j,K,ct)}if(Rt(K)||P(K))return U=U.get(j)||null,Q(M,U,K,ct,null);if(typeof K.then=="function")return H(U,M,j,Hu(K),ct);if(K.$$typeof===ht)return H(U,M,j,Cu(M,K),ct);Gu(M,K)}return null}function Tt(U,M,j,K){for(var ct=null,Ot=null,pt=M,_t=M=0,ke=null;pt!==null&&_t<j.length;_t++){pt.index>_t?(ke=pt,pt=null):ke=pt.sibling;var Ht=q(U,pt,j[_t],K);if(Ht===null){pt===null&&(pt=ke);break}e&&pt&&Ht.alternate===null&&i(U,pt),M=d(Ht,M,_t),Ot===null?ct=Ht:Ot.sibling=Ht,Ot=Ht,pt=ke}if(_t===j.length)return a(U,pt),Ft&&ws(U,_t),ct;if(pt===null){for(;_t<j.length;_t++)pt=J(U,j[_t],K),pt!==null&&(M=d(pt,M,_t),Ot===null?ct=pt:Ot.sibling=pt,Ot=pt);return Ft&&ws(U,_t),ct}for(pt=o(pt);_t<j.length;_t++)ke=H(pt,U,_t,j[_t],K),ke!==null&&(e&&ke.alternate!==null&&pt.delete(ke.key===null?_t:ke.key),M=d(ke,M,_t),Ot===null?ct=ke:Ot.sibling=ke,Ot=ke);return e&&pt.forEach(function(Mr){return i(U,Mr)}),Ft&&ws(U,_t),ct}function yt(U,M,j,K){if(j==null)throw Error(s(151));for(var ct=null,Ot=null,pt=M,_t=M=0,ke=null,Ht=j.next();pt!==null&&!Ht.done;_t++,Ht=j.next()){pt.index>_t?(ke=pt,pt=null):ke=pt.sibling;var Mr=q(U,pt,Ht.value,K);if(Mr===null){pt===null&&(pt=ke);break}e&&pt&&Mr.alternate===null&&i(U,pt),M=d(Mr,M,_t),Ot===null?ct=Mr:Ot.sibling=Mr,Ot=Mr,pt=ke}if(Ht.done)return a(U,pt),Ft&&ws(U,_t),ct;if(pt===null){for(;!Ht.done;_t++,Ht=j.next())Ht=J(U,Ht.value,K),Ht!==null&&(M=d(Ht,M,_t),Ot===null?ct=Ht:Ot.sibling=Ht,Ot=Ht);return Ft&&ws(U,_t),ct}for(pt=o(pt);!Ht.done;_t++,Ht=j.next())Ht=H(pt,U,_t,Ht.value,K),Ht!==null&&(e&&Ht.alternate!==null&&pt.delete(Ht.key===null?_t:Ht.key),M=d(Ht,M,_t),Ot===null?ct=Ht:Ot.sibling=Ht,Ot=Ht);return e&&pt.forEach(function(zb){return i(U,zb)}),Ft&&ws(U,_t),ct}function Wt(U,M,j,K){if(typeof j=="object"&&j!==null&&j.type===W&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case x:t:{for(var ct=j.key;M!==null;){if(M.key===ct){if(ct=j.type,ct===W){if(M.tag===7){a(U,M.sibling),K=h(M,j.props.children),K.return=U,U=K;break t}}else if(M.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===R&&Fg(ct)===M.type){a(U,M.sibling),K=h(M,j.props),nl(K,j),K.return=U,U=K;break t}a(U,M);break}else i(U,M);M=M.sibling}j.type===W?(K=As(j.props.children,U.mode,K,j.key),K.return=U,U=K):(K=Ru(j.type,j.key,j.props,null,U.mode,K),nl(K,j),K.return=U,U=K)}return v(U);case L:t:{for(ct=j.key;M!==null;){if(M.key===ct)if(M.tag===4&&M.stateNode.containerInfo===j.containerInfo&&M.stateNode.implementation===j.implementation){a(U,M.sibling),K=h(M,j.children||[]),K.return=U,U=K;break t}else{a(U,M);break}else i(U,M);M=M.sibling}K=Kh(j,U.mode,K),K.return=U,U=K}return v(U);case R:return ct=j._init,j=ct(j._payload),Wt(U,M,j,K)}if(Rt(j))return Tt(U,M,j,K);if(P(j)){if(ct=P(j),typeof ct!="function")throw Error(s(150));return j=ct.call(j),yt(U,M,j,K)}if(typeof j.then=="function")return Wt(U,M,Hu(j),K);if(j.$$typeof===ht)return Wt(U,M,Cu(U,j),K);Gu(U,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,M!==null&&M.tag===6?(a(U,M.sibling),K=h(M,j),K.return=U,U=K):(a(U,M),K=Yh(j,U.mode,K),K.return=U,U=K),v(U)):a(U,M)}return function(U,M,j,K){try{el=0;var ct=Wt(U,M,j,K);return Ra=null,ct}catch(pt){if(pt===Qo||pt===Ou)throw pt;var Ot=mn(29,pt,null,U.mode);return Ot.lanes=K,Ot.return=U,Ot}finally{}}}var xa=Qg(!0),Yg=Qg(!1),Cn=V(null),ai=null;function _r(e){var i=e.alternate;Y(Ne,Ne.current&1),Y(Cn,e),ai===null&&(i===null||ba.current!==null||i.memoizedState!==null)&&(ai=e)}function Kg(e){if(e.tag===22){if(Y(Ne,Ne.current),Y(Cn,e),ai===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(ai=e)}}else vr()}function vr(){Y(Ne,Ne.current),Y(Cn,Cn.current)}function Mi(e){Z(Cn),ai===e&&(ai=null),Z(Ne)}var Ne=V(0);function Fu(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||yd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function If(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:b({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Nf={enqueueSetState:function(e,i,a){e=e._reactInternals;var o=_n(),h=pr(o);h.payload=i,a!=null&&(h.callback=a),i=gr(e,h,o),i!==null&&(vn(i,e,o),Ko(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=_n(),h=pr(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=gr(e,h,o),i!==null&&(vn(i,e,o),Ko(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=_n(),o=pr(a);o.tag=2,i!=null&&(o.callback=i),i=gr(e,o,a),i!==null&&(vn(i,e,a),Ko(i,e,a))}};function $g(e,i,a,o,h,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,v):i.prototype&&i.prototype.isPureReactComponent?!Lo(a,o)||!Lo(h,d):!0}function Xg(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&Nf.enqueueReplaceState(i,i.state,null)}function Os(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=b({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var Qu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Zg(e){Qu(e)}function Jg(e){console.error(e)}function Wg(e){Qu(e)}function Yu(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function ty(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Cf(e,i,a){return a=pr(a),a.tag=3,a.payload={element:null},a.callback=function(){Yu(e,i)},a}function ey(e){return e=pr(e),e.tag=3,e}function ny(e,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;e.payload=function(){return h(d)},e.callback=function(){ty(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){ty(i,a,o),typeof h!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var A=o.stack;this.componentDidCatch(o.value,{componentStack:A!==null?A:""})})}function z1(e,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Ho(i,a,h,!0),a=Cn.current,a!==null){switch(a.tag){case 13:return ai===null?td():a.alternate===null&&he===0&&(he=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===sf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),nd(e,o,h)),!1;case 22:return a.flags|=65536,o===sf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),nd(e,o,h)),!1}throw Error(s(435,a.tag))}return nd(e,o,h),td(),!1}if(Ft)return i=Cn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==Zh&&(e=Error(s(422),{cause:o}),qo(Rn(e,a)))):(o!==Zh&&(i=Error(s(423),{cause:o}),qo(Rn(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Rn(o,a),h=Cf(e.stateNode,o,h),lf(e,h),he!==4&&(he=2)),!1;var d=Error(s(520),{cause:o});if(d=Rn(d,a),ul===null?ul=[d]:ul.push(d),he!==4&&(he=2),i===null)return!0;o=Rn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Cf(a.stateNode,o,e),lf(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(wr===null||!wr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=ey(h),ny(h,e,a,o),lf(a,h),!1}a=a.return}while(a!==null);return!1}var iy=Error(s(461)),Me=!1;function Le(e,i,a,o){i.child=e===null?Yg(i,null,a,o):xa(i,e.child,a,o)}function ry(e,i,a,o,h){a=a.render;var d=i.ref;if("ref"in o){var v={};for(var A in o)A!=="ref"&&(v[A]=o[A])}else v=o;return Ns(i),o=df(e,i,a,v,d,h),A=mf(),e!==null&&!Me?(pf(e,i,h),Vi(e,i,h)):(Ft&&A&&$h(i),i.flags|=1,Le(e,i,o,h),i.child)}function sy(e,i,a,o,h){if(e===null){var d=a.type;return typeof d=="function"&&!Qh(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,ay(e,i,d,o,h)):(e=Ru(a.type,null,o,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!Lf(e,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Lo,a(v,o)&&e.ref===i.ref)return Vi(e,i,h)}return i.flags|=1,e=xi(d,o),e.ref=i.ref,e.return=i,i.child=e}function ay(e,i,a,o,h){if(e!==null){var d=e.memoizedProps;if(Lo(d,o)&&e.ref===i.ref)if(Me=!1,i.pendingProps=o=d,Lf(e,h))(e.flags&131072)!==0&&(Me=!0);else return i.lanes=e.lanes,Vi(e,i,h)}return Df(e,i,a,o,h)}function oy(e,i,a){var o=i.pendingProps,h=o.children,d=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=d!==null?d.baseLanes|a:a,e!==null){for(h=i.child=e.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~o}else i.childLanes=0,i.child=null;return ly(e,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Du(i,d!==null?d.cachePool:null),d!==null?ag(i,d):cf(),Kg(i);else return i.lanes=i.childLanes=536870912,ly(e,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Du(i,d.cachePool),ag(i,d),vr(),i.memoizedState=null):(e!==null&&Du(i,null),cf(),vr());return Le(e,i,h,a),i.child}function ly(e,i,a,o){var h=rf();return h=h===null?null:{parent:Ie._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&Du(i,null),cf(),Kg(i),e!==null&&Ho(e,i,o,!0),null}function Ku(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Df(e,i,a,o,h){return Ns(i),a=df(e,i,a,o,void 0,h),o=mf(),e!==null&&!Me?(pf(e,i,h),Vi(e,i,h)):(Ft&&o&&$h(i),i.flags|=1,Le(e,i,a,h),i.child)}function uy(e,i,a,o,h,d){return Ns(i),i.updateQueue=null,a=lg(i,o,a,h),og(e),o=mf(),e!==null&&!Me?(pf(e,i,d),Vi(e,i,d)):(Ft&&o&&$h(i),i.flags|=1,Le(e,i,a,d),i.child)}function cy(e,i,a,o,h){if(Ns(i),i.stateNode===null){var d=ya,v=a.contextType;typeof v=="object"&&v!==null&&(d=Ye(v)),d=new a(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Nf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},af(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Ye(v):ya,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(If(i,a,v,o),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Nf.enqueueReplaceState(d,d.state,null),Xo(i,o,d,h),$o(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){d=i.stateNode;var A=i.memoizedProps,I=Os(a,A);d.props=I;var B=d.context,Q=a.contextType;v=ya,typeof Q=="object"&&Q!==null&&(v=Ye(Q));var J=a.getDerivedStateFromProps;Q=typeof J=="function"||typeof d.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(A||B!==v)&&Xg(i,d,o,v),mr=!1;var q=i.memoizedState;d.state=q,Xo(i,o,d,h),$o(),B=i.memoizedState,A||q!==B||mr?(typeof J=="function"&&(If(i,a,J,o),B=i.memoizedState),(I=mr||$g(i,a,I,o,q,B,v))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=B),d.props=o,d.state=B,d.context=v,o=I):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,of(e,i),v=i.memoizedProps,Q=Os(a,v),d.props=Q,J=i.pendingProps,q=d.context,B=a.contextType,I=ya,typeof B=="object"&&B!==null&&(I=Ye(B)),A=a.getDerivedStateFromProps,(B=typeof A=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==J||q!==I)&&Xg(i,d,o,I),mr=!1,q=i.memoizedState,d.state=q,Xo(i,o,d,h),$o();var H=i.memoizedState;v!==J||q!==H||mr||e!==null&&e.dependencies!==null&&Nu(e.dependencies)?(typeof A=="function"&&(If(i,a,A,o),H=i.memoizedState),(Q=mr||$g(i,a,Q,o,q,H,I)||e!==null&&e.dependencies!==null&&Nu(e.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,H,I),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,H,I)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&q===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&q===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=H),d.props=o,d.state=H,d.context=I,o=Q):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&q===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&q===e.memoizedState||(i.flags|=1024),o=!1)}return d=o,Ku(e,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&o?(i.child=xa(i,e.child,null,h),i.child=xa(i,null,a,h)):Le(e,i,a,h),i.memoizedState=d.state,e=i.child):e=Vi(e,i,h),e}function hy(e,i,a,o){return Bo(),i.flags|=256,Le(e,i,a,o),i.child}var Of={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mf(e){return{baseLanes:e,cachePool:Jp()}}function Vf(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Dn),e}function fy(e,i,a){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(Ne.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(Ft){if(h?_r(i):vr(),Ft){var A=ce,I;if(I=A){t:{for(I=A,A=si;I.nodeType!==8;){if(!A){A=null;break t}if(I=Gn(I.nextSibling),I===null){A=null;break t}}A=I}A!==null?(i.memoizedState={dehydrated:A,treeContext:Ss!==null?{id:Ii,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},I=mn(18,null,null,0),I.stateNode=A,I.return=i,i.child=I,rn=i,ce=null,I=!0):I=!1}I||xs(i)}if(A=i.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return yd(A)?i.lanes=32:i.lanes=536870912,null;Mi(i)}return A=o.children,o=o.fallback,h?(vr(),h=i.mode,A=$u({mode:"hidden",children:A},h),o=As(o,h,a,null),A.return=i,o.return=i,A.sibling=o,i.child=A,h=i.child,h.memoizedState=Mf(a),h.childLanes=Vf(e,v,a),i.memoizedState=Of,o):(_r(i),kf(i,A))}if(I=e.memoizedState,I!==null&&(A=I.dehydrated,A!==null)){if(d)i.flags&256?(_r(i),i.flags&=-257,i=Pf(e,i,a)):i.memoizedState!==null?(vr(),i.child=e.child,i.flags|=128,i=null):(vr(),h=o.fallback,A=i.mode,o=$u({mode:"visible",children:o.children},A),h=As(h,A,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,xa(i,e.child,null,a),o=i.child,o.memoizedState=Mf(a),o.childLanes=Vf(e,v,a),i.memoizedState=Of,i=h);else if(_r(i),yd(A)){if(v=A.nextSibling&&A.nextSibling.dataset,v)var B=v.dgst;v=B,o=Error(s(419)),o.stack="",o.digest=v,qo({value:o,source:null,stack:null}),i=Pf(e,i,a)}else if(Me||Ho(e,i,a,!1),v=(a&e.childLanes)!==0,Me||v){if(v=ie,v!==null&&(o=a&-a,o=(o&42)!==0?1:To(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==I.retryLane))throw I.retryLane=o,ga(e,o),vn(v,e,o),iy;A.data==="$?"||td(),i=Pf(e,i,a)}else A.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=I.treeContext,ce=Gn(A.nextSibling),rn=i,Ft=!0,Rs=null,si=!1,e!==null&&(In[Nn++]=Ii,In[Nn++]=Ni,In[Nn++]=Ss,Ii=e.id,Ni=e.overflow,Ss=i),i=kf(i,o.children),i.flags|=4096);return i}return h?(vr(),h=o.fallback,A=i.mode,I=e.child,B=I.sibling,o=xi(I,{mode:"hidden",children:o.children}),o.subtreeFlags=I.subtreeFlags&65011712,B!==null?h=xi(B,h):(h=As(h,A,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,A=e.child.memoizedState,A===null?A=Mf(a):(I=A.cachePool,I!==null?(B=Ie._currentValue,I=I.parent!==B?{parent:B,pool:B}:I):I=Jp(),A={baseLanes:A.baseLanes|a,cachePool:I}),h.memoizedState=A,h.childLanes=Vf(e,v,a),i.memoizedState=Of,o):(_r(i),a=e.child,e=a.sibling,a=xi(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function kf(e,i){return i=$u({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function $u(e,i){return e=mn(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Pf(e,i,a){return xa(i,e.child,null,a),e=kf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function dy(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),Wh(e.return,i,a)}function Uf(e,i,a,o,h){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=a,d.tailMode=h)}function my(e,i,a){var o=i.pendingProps,h=o.revealOrder,d=o.tail;if(Le(e,i,o.children,a),o=Ne.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dy(e,a,i);else if(e.tag===19)dy(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(Y(Ne,o),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&Fu(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Uf(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Fu(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Uf(i,!0,a,null,d);break;case"together":Uf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Vi(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Sr|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Ho(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=xi(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=xi(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Lf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Nu(e)))}function B1(e,i,a){switch(i.tag){case 3:Et(i,i.stateNode.containerInfo),dr(i,Ie,e.memoizedState.cache),Bo();break;case 27:case 5:yo(i);break;case 4:Et(i,i.stateNode.containerInfo);break;case 10:dr(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(_r(i),i.flags|=128,null):(a&i.child.childLanes)!==0?fy(e,i,a):(_r(i),e=Vi(e,i,a),e!==null?e.sibling:null);_r(i);break;case 19:var h=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Ho(e,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return my(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Y(Ne,Ne.current),o)break;return null;case 22:case 23:return i.lanes=0,oy(e,i,a);case 24:dr(i,Ie,e.memoizedState.cache)}return Vi(e,i,a)}function py(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Me=!0;else{if(!Lf(e,a)&&(i.flags&128)===0)return Me=!1,B1(e,i,a);Me=(e.flags&131072)!==0}else Me=!1,Ft&&(i.flags&1048576)!==0&&Fp(i,Iu,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")Qh(o)?(e=Os(o,e),i.tag=1,i=cy(null,i,o,e,a)):(i.tag=0,i=Df(null,i,o,e,a));else{if(o!=null){if(h=o.$$typeof,h===jt){i.tag=11,i=ry(null,i,o,e,a);break t}else if(h===O){i.tag=14,i=sy(null,i,o,e,a);break t}}throw i=Dt(o)||o,Error(s(306,i,""))}}return i;case 0:return Df(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=Os(o,i.pendingProps),cy(e,i,o,h,a);case 3:t:{if(Et(i,i.stateNode.containerInfo),e===null)throw Error(s(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,of(e,i),Xo(i,o,null,a);var v=i.memoizedState;if(o=v.cache,dr(i,Ie,o),o!==d.cache&&tf(i,[Ie],a,!0),$o(),o=v.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=hy(e,i,o,a);break t}else if(o!==h){h=Rn(Error(s(424)),i),qo(h),i=hy(e,i,o,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ce=Gn(e.firstChild),rn=i,Ft=!0,Rs=null,si=!0,a=Yg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Bo(),o===h){i=Vi(e,i,a);break t}Le(e,i,o,a)}i=i.child}return i;case 26:return Ku(e,i),e===null?(a=v_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ft||(a=i.type,e=i.pendingProps,o=uc(rt.current).createElement(a),o[me]=i,o[Ue]=e,ze(o,a,e),pe(o),i.stateNode=o):i.memoizedState=v_(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return yo(i),e===null&&Ft&&(o=i.stateNode=g_(i.type,i.pendingProps,rt.current),rn=i,si=!0,h=ce,Ir(i.type)?(_d=h,ce=Gn(o.firstChild)):ce=h),Le(e,i,i.pendingProps.children,a),Ku(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Ft&&((h=o=ce)&&(o=pb(o,i.type,i.pendingProps,si),o!==null?(i.stateNode=o,rn=i,ce=Gn(o.firstChild),si=!1,h=!0):h=!1),h||xs(i)),yo(i),h=i.type,d=i.pendingProps,v=e!==null?e.memoizedProps:null,o=d.children,md(h,d)?o=null:v!==null&&md(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=df(e,i,M1,null,null,a),_l._currentValue=h),Ku(e,i),Le(e,i,o,a),i.child;case 6:return e===null&&Ft&&((e=a=ce)&&(a=gb(a,i.pendingProps,si),a!==null?(i.stateNode=a,rn=i,ce=null,e=!0):e=!1),e||xs(i)),null;case 13:return fy(e,i,a);case 4:return Et(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=xa(i,null,o,a):Le(e,i,o,a),i.child;case 11:return ry(e,i,i.type,i.pendingProps,a);case 7:return Le(e,i,i.pendingProps,a),i.child;case 8:return Le(e,i,i.pendingProps.children,a),i.child;case 12:return Le(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,dr(i,i.type,o.value),Le(e,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Ns(i),h=Ye(h),o=o(h),i.flags|=1,Le(e,i,o,a),i.child;case 14:return sy(e,i,i.type,i.pendingProps,a);case 15:return ay(e,i,i.type,i.pendingProps,a);case 19:return my(e,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},e===null?(a=$u(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=xi(e.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return oy(e,i,a);case 24:return Ns(i),o=Ye(Ie),e===null?(h=rf(),h===null&&(h=ie,d=ef(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:o,cache:h},af(i),dr(i,Ie,h)):((e.lanes&a)!==0&&(of(e,i),Xo(i,null,null,a),$o()),h=e.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),dr(i,Ie,o)):(o=d.cache,dr(i,Ie,o),o!==h.cache&&tf(i,[Ie],a,!0))),Le(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ki(e){e.flags|=4}function gy(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!S_(i)){if(i=Cn.current,i!==null&&((Bt&4194048)===Bt?ai!==null:(Bt&62914560)!==Bt&&(Bt&536870912)===0||i!==ai))throw Yo=sf,Wp;e.flags|=8192}}function Xu(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?tr():536870912,e.lanes|=i,Da|=i)}function il(e,i){if(!Ft)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function le(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function q1(e,i,a){var o=i.pendingProps;switch(Xh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return le(i),null;case 1:return le(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Di(Ie),hn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(zo(i)?ki(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Kp())),le(i),null;case 26:return a=i.memoizedState,e===null?(ki(i),a!==null?(le(i),gy(i,a)):(le(i),i.flags&=-16777217)):a?a!==e.memoizedState?(ki(i),le(i),gy(i,a)):(le(i),i.flags&=-16777217):(e.memoizedProps!==o&&ki(i),le(i),i.flags&=-16777217),null;case 27:Xs(i),a=rt.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==o&&ki(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return le(i),null}e=it.current,zo(i)?Qp(i):(e=g_(h,o,a),i.stateNode=e,ki(i))}return le(i),null;case 5:if(Xs(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&ki(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return le(i),null}if(e=it.current,zo(i))Qp(i);else{switch(h=uc(rt.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}e[me]=i,e[Ue]=o;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(ze(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&ki(i)}}return le(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&ki(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(e=rt.current,zo(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,h=rn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[me]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||u_(e.nodeValue,a)),e||xs(i)}else e=uc(e).createTextNode(o),e[me]=i,i.stateNode=e}return le(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=zo(i),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[me]=i}else Bo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;le(i),h=!1}else h=Kp(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Mi(i),i):(Mi(i),null)}if(Mi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var d=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),Xu(i,i.updateQueue),le(i),null;case 4:return hn(),e===null&&ud(i.stateNode.containerInfo),le(i),null;case 10:return Di(i.type),le(i),null;case 19:if(Z(Ne),h=i.memoizedState,h===null)return le(i),null;if(o=(i.flags&128)!==0,d=h.rendering,d===null)if(o)il(h,!1);else{if(he!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=Fu(e),d!==null){for(i.flags|=128,il(h,!1),e=d.updateQueue,i.updateQueue=e,Xu(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Gp(a,e),a=a.sibling;return Y(Ne,Ne.current&1|2),i.child}e=e.sibling}h.tail!==null&&sn()>Wu&&(i.flags|=128,o=!0,il(h,!1),i.lanes=4194304)}else{if(!o)if(e=Fu(d),e!==null){if(i.flags|=128,o=!0,e=e.updateQueue,i.updateQueue=e,Xu(i,e),il(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Ft)return le(i),null}else 2*sn()-h.renderingStartTime>Wu&&a!==536870912&&(i.flags|=128,o=!0,il(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(e=h.last,e!==null?e.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=sn(),i.sibling=null,e=Ne.current,Y(Ne,o?e&1|2:e&1),i):(le(i),null);case 22:case 23:return Mi(i),hf(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(le(i),i.subtreeFlags&6&&(i.flags|=8192)):le(i),a=i.updateQueue,a!==null&&Xu(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&Z(Cs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Di(Ie),le(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function H1(e,i){switch(Xh(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Di(Ie),hn(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Xs(i),null;case 13:if(Mi(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Bo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return Z(Ne),null;case 4:return hn(),null;case 10:return Di(i.type),null;case 22:case 23:return Mi(i),hf(),e!==null&&Z(Cs),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Di(Ie),null;case 25:return null;default:return null}}function yy(e,i){switch(Xh(i),i.tag){case 3:Di(Ie),hn();break;case 26:case 27:case 5:Xs(i);break;case 4:hn();break;case 13:Mi(i);break;case 19:Z(Ne);break;case 10:Di(i.type);break;case 22:case 23:Mi(i),hf(),e!==null&&Z(Cs);break;case 24:Di(Ie)}}function rl(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var d=a.create,v=a.inst;o=d(),v.destroy=o}a=a.next}while(a!==h)}}catch(A){te(i,i.return,A)}}function Er(e,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&e)===e){var v=o.inst,A=v.destroy;if(A!==void 0){v.destroy=void 0,h=i;var I=a,B=A;try{B()}catch(Q){te(h,I,Q)}}}o=o.next}while(o!==d)}}catch(Q){te(i,i.return,Q)}}function _y(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{sg(i,a)}catch(o){te(e,e.return,o)}}}function vy(e,i,a){a.props=Os(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){te(e,i,o)}}function sl(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){te(e,i,h)}}function oi(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){te(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){te(e,i,h)}else a.current=null}function Ey(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){te(e,e.return,h)}}function jf(e,i,a){try{var o=e.stateNode;cb(o,e.type,a,i),o[Ue]=i}catch(h){te(e,e.return,h)}}function Ty(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ir(e.type)||e.tag===4}function zf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Ty(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ir(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Bf(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=lc));else if(o!==4&&(o===27&&Ir(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Bf(e,i,a),e=e.sibling;e!==null;)Bf(e,i,a),e=e.sibling}function Zu(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(o===27&&Ir(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Zu(e,i,a),e=e.sibling;e!==null;)Zu(e,i,a),e=e.sibling}function by(e){var i=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);ze(i,o,a),i[me]=e,i[Ue]=a}catch(d){te(e,e.return,d)}}var Pi=!1,_e=!1,qf=!1,Ay=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function G1(e,i){if(e=e.containerInfo,fd=pc,e=Vp(e),jh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,A=-1,I=-1,B=0,Q=0,J=e,q=null;e:for(;;){for(var H;J!==a||h!==0&&J.nodeType!==3||(A=v+h),J!==d||o!==0&&J.nodeType!==3||(I=v+o),J.nodeType===3&&(v+=J.nodeValue.length),(H=J.firstChild)!==null;)q=J,J=H;for(;;){if(J===e)break e;if(q===a&&++B===h&&(A=v),q===d&&++Q===o&&(I=v),(H=J.nextSibling)!==null)break;J=q,q=J.parentNode}J=H}a=A===-1||I===-1?null:{start:A,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(dd={focusedElem:e,selectionRange:a},pc=!1,Ve=i;Ve!==null;)if(i=Ve,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,Ve=e;else for(;Ve!==null;){switch(i=Ve,d=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var Tt=Os(a.type,h,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(Tt,d),o.__reactInternalSnapshotBeforeUpdate=e}catch(yt){te(a,a.return,yt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)gd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Ve=e;break}Ve=i.return}}function Sy(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Tr(e,a),o&4&&rl(5,a);break;case 1:if(Tr(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){te(a,a.return,v)}else{var h=Os(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){te(a,a.return,v)}}o&64&&_y(a),o&512&&sl(a,a.return);break;case 3:if(Tr(e,a),o&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{sg(e,i)}catch(v){te(a,a.return,v)}}break;case 27:i===null&&o&4&&by(a);case 26:case 5:Tr(e,a),i===null&&o&4&&Ey(a),o&512&&sl(a,a.return);break;case 12:Tr(e,a);break;case 13:Tr(e,a),o&4&&xy(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=W1.bind(null,a),yb(e,a))));break;case 22:if(o=a.memoizedState!==null||Pi,!o){i=i!==null&&i.memoizedState!==null||_e,h=Pi;var d=_e;Pi=o,(_e=i)&&!d?br(e,a,(a.subtreeFlags&8772)!==0):Tr(e,a),Pi=h,_e=d}break;case 30:break;default:Tr(e,a)}}function wy(e){var i=e.alternate;i!==null&&(e.alternate=null,wy(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&ea(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ae=null,on=!1;function Ui(e,i,a){for(a=a.child;a!==null;)Ry(e,i,a),a=a.sibling}function Ry(e,i,a){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(Zi,a)}catch{}switch(a.tag){case 26:_e||oi(a,i),Ui(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:_e||oi(a,i);var o=ae,h=on;Ir(a.type)&&(ae=a.stateNode,on=!1),Ui(e,i,a),ml(a.stateNode),ae=o,on=h;break;case 5:_e||oi(a,i);case 6:if(o=ae,h=on,ae=null,Ui(e,i,a),ae=o,on=h,ae!==null)if(on)try{(ae.nodeType===9?ae.body:ae.nodeName==="HTML"?ae.ownerDocument.body:ae).removeChild(a.stateNode)}catch(d){te(a,i,d)}else try{ae.removeChild(a.stateNode)}catch(d){te(a,i,d)}break;case 18:ae!==null&&(on?(e=ae,m_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),bl(e)):m_(ae,a.stateNode));break;case 4:o=ae,h=on,ae=a.stateNode.containerInfo,on=!0,Ui(e,i,a),ae=o,on=h;break;case 0:case 11:case 14:case 15:_e||Er(2,a,i),_e||Er(4,a,i),Ui(e,i,a);break;case 1:_e||(oi(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&vy(a,i,o)),Ui(e,i,a);break;case 21:Ui(e,i,a);break;case 22:_e=(o=_e)||a.memoizedState!==null,Ui(e,i,a),_e=o;break;default:Ui(e,i,a)}}function xy(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{bl(e)}catch(a){te(i,i.return,a)}}function F1(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Ay),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Ay),i;default:throw Error(s(435,e.tag))}}function Hf(e,i){var a=F1(e);i.forEach(function(o){var h=tb.bind(null,e,o);a.has(o)||(a.add(o),o.then(h,h))})}function pn(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=e,v=i,A=v;t:for(;A!==null;){switch(A.tag){case 27:if(Ir(A.type)){ae=A.stateNode,on=!1;break t}break;case 5:ae=A.stateNode,on=!1;break t;case 3:case 4:ae=A.stateNode.containerInfo,on=!0;break t}A=A.return}if(ae===null)throw Error(s(160));Ry(d,v,h),ae=null,on=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Iy(i,e),i=i.sibling}var Hn=null;function Iy(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:pn(i,e),gn(e),o&4&&(Er(3,e,e.return),rl(3,e),Er(5,e,e.return));break;case 1:pn(i,e),gn(e),o&512&&(_e||a===null||oi(a,a.return)),o&64&&Pi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Hn;if(pn(i,e),gn(e),o&512&&(_e||a===null||oi(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ir]||d[me]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),ze(d,o,a),d[me]=e,pe(d),o=d;break t;case"link":var v=b_("link","href",h).get(o+(a.href||""));if(v){for(var A=0;A<v.length;A++)if(d=v[A],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(A,1);break e}}d=h.createElement(o),ze(d,o,a),h.head.appendChild(d);break;case"meta":if(v=b_("meta","content",h).get(o+(a.content||""))){for(A=0;A<v.length;A++)if(d=v[A],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(A,1);break e}}d=h.createElement(o),ze(d,o,a),h.head.appendChild(d);break;default:throw Error(s(468,o))}d[me]=e,pe(d),o=d}e.stateNode=o}else A_(h,e.type,e.stateNode);else e.stateNode=T_(h,o,e.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?A_(h,e.type,e.stateNode):T_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&jf(e,e.memoizedProps,a.memoizedProps)}break;case 27:pn(i,e),gn(e),o&512&&(_e||a===null||oi(a,a.return)),a!==null&&o&4&&jf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(pn(i,e),gn(e),o&512&&(_e||a===null||oi(a,a.return)),e.flags&32){h=e.stateNode;try{Sn(h,"")}catch(H){te(e,e.return,H)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,jf(e,h,a!==null?a.memoizedProps:h)),o&1024&&(qf=!0);break;case 6:if(pn(i,e),gn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(H){te(e,e.return,H)}}break;case 3:if(fc=null,h=Hn,Hn=cc(i.containerInfo),pn(i,e),Hn=h,gn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{bl(i.containerInfo)}catch(H){te(e,e.return,H)}qf&&(qf=!1,Ny(e));break;case 4:o=Hn,Hn=cc(e.stateNode.containerInfo),pn(i,e),gn(e),Hn=o;break;case 12:pn(i,e),gn(e);break;case 13:pn(i,e),gn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&($f=sn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Hf(e,o)));break;case 22:h=e.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,B=Pi,Q=_e;if(Pi=B||h,_e=Q||I,pn(i,e),_e=Q,Pi=B,gn(e),o&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||I||Pi||_e||Ms(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){I=a=i;try{if(d=I.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{A=I.stateNode;var J=I.memoizedProps.style,q=J!=null&&J.hasOwnProperty("display")?J.display:null;A.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(H){te(I,I.return,H)}}}else if(i.tag===6){if(a===null){I=i;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(H){te(I,I.return,H)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Hf(e,a))));break;case 19:pn(i,e),gn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Hf(e,o)));break;case 30:break;case 21:break;default:pn(i,e),gn(e)}}function gn(e){var i=e.flags;if(i&2){try{for(var a,o=e.return;o!==null;){if(Ty(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=zf(e);Zu(e,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(Sn(v,""),a.flags&=-33);var A=zf(e);Zu(e,A,v);break;case 3:case 4:var I=a.stateNode.containerInfo,B=zf(e);Bf(e,B,I);break;default:throw Error(s(161))}}catch(Q){te(e,e.return,Q)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Ny(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Ny(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Tr(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Sy(e,i.alternate,i),i=i.sibling}function Ms(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Er(4,i,i.return),Ms(i);break;case 1:oi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&vy(i,i.return,a),Ms(i);break;case 27:ml(i.stateNode);case 26:case 5:oi(i,i.return),Ms(i);break;case 22:i.memoizedState===null&&Ms(i);break;case 30:Ms(i);break;default:Ms(i)}e=e.sibling}}function br(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=e,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:br(h,d,a),rl(4,d);break;case 1:if(br(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){te(o,o.return,B)}if(o=d,h=o.updateQueue,h!==null){var A=o.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)rg(I[h],A)}catch(B){te(o,o.return,B)}}a&&v&64&&_y(d),sl(d,d.return);break;case 27:by(d);case 26:case 5:br(h,d,a),a&&o===null&&v&4&&Ey(d),sl(d,d.return);break;case 12:br(h,d,a);break;case 13:br(h,d,a),a&&v&4&&xy(h,d);break;case 22:d.memoizedState===null&&br(h,d,a),sl(d,d.return);break;case 30:break;default:br(h,d,a)}i=i.sibling}}function Gf(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Go(a))}function Ff(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Go(e))}function li(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Cy(e,i,a,o),i=i.sibling}function Cy(e,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:li(e,i,a,o),h&2048&&rl(9,i);break;case 1:li(e,i,a,o);break;case 3:li(e,i,a,o),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Go(e)));break;case 12:if(h&2048){li(e,i,a,o),e=i.stateNode;try{var d=i.memoizedProps,v=d.id,A=d.onPostCommit;typeof A=="function"&&A(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(I){te(i,i.return,I)}}else li(e,i,a,o);break;case 13:li(e,i,a,o);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?li(e,i,a,o):al(e,i):d._visibility&2?li(e,i,a,o):(d._visibility|=2,Ia(e,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&Gf(v,i);break;case 24:li(e,i,a,o),h&2048&&Ff(i.alternate,i);break;default:li(e,i,a,o)}}function Ia(e,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=e,v=i,A=a,I=o,B=v.flags;switch(v.tag){case 0:case 11:case 15:Ia(d,v,A,I,h),rl(8,v);break;case 23:break;case 22:var Q=v.stateNode;v.memoizedState!==null?Q._visibility&2?Ia(d,v,A,I,h):al(d,v):(Q._visibility|=2,Ia(d,v,A,I,h)),h&&B&2048&&Gf(v.alternate,v);break;case 24:Ia(d,v,A,I,h),h&&B&2048&&Ff(v.alternate,v);break;default:Ia(d,v,A,I,h)}i=i.sibling}}function al(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,h=o.flags;switch(o.tag){case 22:al(a,o),h&2048&&Gf(o.alternate,o);break;case 24:al(a,o),h&2048&&Ff(o.alternate,o);break;default:al(a,o)}i=i.sibling}}var ol=8192;function Na(e){if(e.subtreeFlags&ol)for(e=e.child;e!==null;)Dy(e),e=e.sibling}function Dy(e){switch(e.tag){case 26:Na(e),e.flags&ol&&e.memoizedState!==null&&Cb(Hn,e.memoizedState,e.memoizedProps);break;case 5:Na(e);break;case 3:case 4:var i=Hn;Hn=cc(e.stateNode.containerInfo),Na(e),Hn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=ol,ol=16777216,Na(e),ol=i):Na(e));break;default:Na(e)}}function Oy(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function ll(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Ve=o,Vy(o,e)}Oy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)My(e),e=e.sibling}function My(e){switch(e.tag){case 0:case 11:case 15:ll(e),e.flags&2048&&Er(9,e,e.return);break;case 3:ll(e);break;case 12:ll(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Ju(e)):ll(e);break;default:ll(e)}}function Ju(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Ve=o,Vy(o,e)}Oy(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Er(8,i,i.return),Ju(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Ju(i));break;default:Ju(i)}e=e.sibling}}function Vy(e,i){for(;Ve!==null;){var a=Ve;switch(a.tag){case 0:case 11:case 15:Er(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Go(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Ve=o;else t:for(a=e;Ve!==null;){o=Ve;var h=o.sibling,d=o.return;if(wy(o),o===a){Ve=null;break t}if(h!==null){h.return=d,Ve=h;break t}Ve=d}}}var Q1={getCacheForType:function(e){var i=Ye(Ie),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},Y1=typeof WeakMap=="function"?WeakMap:Map,Kt=0,ie=null,Vt=null,Bt=0,$t=0,yn=null,Ar=!1,Ca=!1,Qf=!1,Li=0,he=0,Sr=0,Vs=0,Yf=0,Dn=0,Da=0,ul=null,ln=null,Kf=!1,$f=0,Wu=1/0,tc=null,wr=null,je=0,Rr=null,Oa=null,Ma=0,Xf=0,Zf=null,ky=null,cl=0,Jf=null;function _n(){if((Kt&2)!==0&&Bt!==0)return Bt&-Bt;if(F.T!==null){var e=Ea;return e!==0?e:sd()}return Ei()}function Py(){Dn===0&&(Dn=(Bt&536870912)===0||Ft?Eo():536870912);var e=Cn.current;return e!==null&&(e.flags|=32),Dn}function vn(e,i,a){(e===ie&&($t===2||$t===9)||e.cancelPendingCommit!==null)&&(Va(e,0),xr(e,Bt,Dn,!1)),de(e,a),((Kt&2)===0||e!==ie)&&(e===ie&&((Kt&2)===0&&(Vs|=a),he===4&&xr(e,Bt,Dn,!1)),ui(e))}function Uy(e,i,a){if((Kt&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&e.expiredLanes)===0||Wi(e,i),h=o?X1(e,i):ed(e,i,!0),d=o;do{if(h===0){Ca&&!o&&xr(e,i,0,!1);break}else{if(a=e.current.alternate,d&&!K1(a)){h=ed(e,i,!1),d=!1;continue}if(h===2){if(d=i,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var A=e;h=ul;var I=A.current.memoizedState.isDehydrated;if(I&&(Va(A,v).flags|=256),v=ed(A,v,!1),v!==2){if(Qf&&!I){A.errorRecoveryDisabledLanes|=d,Vs|=d,h=4;break t}d=ln,ln=h,d!==null&&(ln===null?ln=d:ln.push.apply(ln,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Va(e,0),xr(e,i,0,!0);break}t:{switch(o=e,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:xr(o,i,Dn,!Ar);break t;case 2:ln=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=$f+300-sn(),10<h)){if(xr(o,i,Dn,!Ar),bn(o,0,!0)!==0)break t;o.timeoutHandle=f_(Ly.bind(null,o,a,ln,tc,Kf,i,Dn,Vs,Da,Ar,d,2,-0,0),h);break t}Ly(o,a,ln,tc,Kf,i,Dn,Vs,Da,Ar,d,0,-0,0)}}break}while(!0);ui(e)}function Ly(e,i,a,o,h,d,v,A,I,B,Q,J,q,H){if(e.timeoutHandle=-1,J=i.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(yl={stylesheets:null,count:0,unsuspend:Nb},Dy(i),J=Db(),J!==null)){e.cancelPendingCommit=J(Fy.bind(null,e,i,d,a,o,h,v,A,I,Q,1,q,H)),xr(e,d,v,!B);return}Fy(e,i,d,a,o,h,v,A,I)}function K1(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!dn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function xr(e,i,a,o){i&=~Yf,i&=~Vs,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var h=i;0<h;){var d=31-We(h),v=1<<d;o[d]=-1,h&=~v}a!==0&&er(e,a,i)}function ec(){return(Kt&6)===0?(hl(0),!1):!0}function Wf(){if(Vt!==null){if($t===0)var e=Vt.return;else e=Vt,Ci=Is=null,gf(e),Ra=null,el=0,e=Vt;for(;e!==null;)yy(e.alternate,e),e=e.return;Vt=null}}function Va(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,fb(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Wf(),ie=e,Vt=a=xi(e.current,null),Bt=i,$t=0,yn=null,Ar=!1,Ca=Wi(e,i),Qf=!1,Da=Dn=Yf=Vs=Sr=he=0,ln=ul=null,Kf=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var h=31-We(o),d=1<<h;i|=e[h],o&=~d}return Li=i,Au(),a}function jy(e,i){Nt=null,F.H=qu,i===Qo||i===Ou?(i=ng(),$t=3):i===Wp?(i=ng(),$t=4):$t=i===iy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,yn=i,Vt===null&&(he=1,Yu(e,Rn(i,e.current)))}function zy(){var e=F.H;return F.H=qu,e===null?qu:e}function By(){var e=F.A;return F.A=Q1,e}function td(){he=4,Ar||(Bt&4194048)!==Bt&&Cn.current!==null||(Ca=!0),(Sr&134217727)===0&&(Vs&134217727)===0||ie===null||xr(ie,Bt,Dn,!1)}function ed(e,i,a){var o=Kt;Kt|=2;var h=zy(),d=By();(ie!==e||Bt!==i)&&(tc=null,Va(e,i)),i=!1;var v=he;t:do try{if($t!==0&&Vt!==null){var A=Vt,I=yn;switch($t){case 8:Wf(),v=6;break t;case 3:case 2:case 9:case 6:Cn.current===null&&(i=!0);var B=$t;if($t=0,yn=null,ka(e,A,I,B),a&&Ca){v=0;break t}break;default:B=$t,$t=0,yn=null,ka(e,A,I,B)}}$1(),v=he;break}catch(Q){jy(e,Q)}while(!0);return i&&e.shellSuspendCounter++,Ci=Is=null,Kt=o,F.H=h,F.A=d,Vt===null&&(ie=null,Bt=0,Au()),v}function $1(){for(;Vt!==null;)qy(Vt)}function X1(e,i){var a=Kt;Kt|=2;var o=zy(),h=By();ie!==e||Bt!==i?(tc=null,Wu=sn()+500,Va(e,i)):Ca=Wi(e,i);t:do try{if($t!==0&&Vt!==null){i=Vt;var d=yn;e:switch($t){case 1:$t=0,yn=null,ka(e,i,d,1);break;case 2:case 9:if(tg(d)){$t=0,yn=null,Hy(i);break}i=function(){$t!==2&&$t!==9||ie!==e||($t=7),ui(e)},d.then(i,i);break t;case 3:$t=7;break t;case 4:$t=5;break t;case 7:tg(d)?($t=0,yn=null,Hy(i)):($t=0,yn=null,ka(e,i,d,7));break;case 5:var v=null;switch(Vt.tag){case 26:v=Vt.memoizedState;case 5:case 27:var A=Vt;if(!v||S_(v)){$t=0,yn=null;var I=A.sibling;if(I!==null)Vt=I;else{var B=A.return;B!==null?(Vt=B,nc(B)):Vt=null}break e}}$t=0,yn=null,ka(e,i,d,5);break;case 6:$t=0,yn=null,ka(e,i,d,6);break;case 8:Wf(),he=6;break t;default:throw Error(s(462))}}Z1();break}catch(Q){jy(e,Q)}while(!0);return Ci=Is=null,F.H=o,F.A=h,Kt=a,Vt!==null?0:(ie=null,Bt=0,Au(),he)}function Z1(){for(;Vt!==null&&!Ih();)qy(Vt)}function qy(e){var i=py(e.alternate,e,Li);e.memoizedProps=e.pendingProps,i===null?nc(e):Vt=i}function Hy(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=uy(a,i,i.pendingProps,i.type,void 0,Bt);break;case 11:i=uy(a,i,i.pendingProps,i.type.render,i.ref,Bt);break;case 5:gf(i);default:yy(a,i),i=Vt=Gp(i,Li),i=py(a,i,Li)}e.memoizedProps=e.pendingProps,i===null?nc(e):Vt=i}function ka(e,i,a,o){Ci=Is=null,gf(i),Ra=null,el=0;var h=i.return;try{if(z1(e,h,i,a,Bt)){he=1,Yu(e,Rn(a,e.current)),Vt=null;return}}catch(d){if(h!==null)throw Vt=h,d;he=1,Yu(e,Rn(a,e.current)),Vt=null;return}i.flags&32768?(Ft||o===1?e=!0:Ca||(Bt&536870912)!==0?e=!1:(Ar=e=!0,(o===2||o===9||o===3||o===6)&&(o=Cn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Gy(i,e)):nc(i)}function nc(e){var i=e;do{if((i.flags&32768)!==0){Gy(i,Ar);return}e=i.return;var a=q1(i.alternate,i,Li);if(a!==null){Vt=a;return}if(i=i.sibling,i!==null){Vt=i;return}Vt=i=e}while(i!==null);he===0&&(he=5)}function Gy(e,i){do{var a=H1(e.alternate,e);if(a!==null){a.flags&=32767,Vt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Vt=e;return}Vt=e=a}while(e!==null);he=6,Vt=null}function Fy(e,i,a,o,h,d,v,A,I){e.cancelPendingCommit=null;do ic();while(je!==0);if((Kt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Gh,au(e,a,d,v,A,I),e===ie&&(Vt=ie=null,Bt=0),Oa=i,Rr=e,Ma=a,Xf=d,Zf=h,ky=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,eb(vi,function(){return Xy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=F.T,F.T=null,h=st.p,st.p=2,v=Kt,Kt|=4;try{G1(e,i,a)}finally{Kt=v,st.p=h,F.T=o}}je=1,Qy(),Yy(),Ky()}}function Qy(){if(je===1){je=0;var e=Rr,i=Oa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var o=st.p;st.p=2;var h=Kt;Kt|=4;try{Iy(i,e);var d=dd,v=Vp(e.containerInfo),A=d.focusedElem,I=d.selectionRange;if(v!==A&&A&&A.ownerDocument&&Mp(A.ownerDocument.documentElement,A)){if(I!==null&&jh(A)){var B=I.start,Q=I.end;if(Q===void 0&&(Q=B),"selectionStart"in A)A.selectionStart=B,A.selectionEnd=Math.min(Q,A.value.length);else{var J=A.ownerDocument||document,q=J&&J.defaultView||window;if(q.getSelection){var H=q.getSelection(),Tt=A.textContent.length,yt=Math.min(I.start,Tt),Wt=I.end===void 0?yt:Math.min(I.end,Tt);!H.extend&&yt>Wt&&(v=Wt,Wt=yt,yt=v);var U=Op(A,yt),M=Op(A,Wt);if(U&&M&&(H.rangeCount!==1||H.anchorNode!==U.node||H.anchorOffset!==U.offset||H.focusNode!==M.node||H.focusOffset!==M.offset)){var j=J.createRange();j.setStart(U.node,U.offset),H.removeAllRanges(),yt>Wt?(H.addRange(j),H.extend(M.node,M.offset)):(j.setEnd(M.node,M.offset),H.addRange(j))}}}}for(J=[],H=A;H=H.parentNode;)H.nodeType===1&&J.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<J.length;A++){var K=J[A];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}pc=!!fd,dd=fd=null}finally{Kt=h,st.p=o,F.T=a}}e.current=i,je=2}}function Yy(){if(je===2){je=0;var e=Rr,i=Oa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var o=st.p;st.p=2;var h=Kt;Kt|=4;try{Sy(e,i.alternate,i)}finally{Kt=h,st.p=o,F.T=a}}je=3}}function Ky(){if(je===4||je===3){je=0,_o();var e=Rr,i=Oa,a=Ma,o=ky;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?je=5:(je=0,Oa=Rr=null,$y(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(wr=null),bo(a),i=i.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(Zi,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=F.T,h=st.p,st.p=2,F.T=null;try{for(var d=e.onRecoverableError,v=0;v<o.length;v++){var A=o[v];d(A.value,{componentStack:A.stack})}}finally{F.T=i,st.p=h}}(Ma&3)!==0&&ic(),ui(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===Jf?cl++:(cl=0,Jf=e):cl=0,hl(0)}}function $y(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Go(i)))}function ic(e){return Qy(),Yy(),Ky(),Xy()}function Xy(){if(je!==5)return!1;var e=Rr,i=Xf;Xf=0;var a=bo(Ma),o=F.T,h=st.p;try{st.p=32>a?32:a,F.T=null,a=Zf,Zf=null;var d=Rr,v=Ma;if(je=0,Oa=Rr=null,Ma=0,(Kt&6)!==0)throw Error(s(331));var A=Kt;if(Kt|=4,My(d.current),Cy(d,d.current,v,a),Kt=A,hl(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(Zi,d)}catch{}return!0}finally{st.p=h,F.T=o,$y(e,i)}}function Zy(e,i,a){i=Rn(a,i),i=Cf(e.stateNode,i,2),e=gr(e,i,2),e!==null&&(de(e,2),ui(e))}function te(e,i,a){if(e.tag===3)Zy(e,e,a);else for(;i!==null;){if(i.tag===3){Zy(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(wr===null||!wr.has(o))){e=Rn(a,e),a=ey(2),o=gr(i,a,2),o!==null&&(ny(a,o,i,e),de(o,2),ui(o));break}}i=i.return}}function nd(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new Y1;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(Qf=!0,h.add(a),e=J1.bind(null,e,i,a),i.then(e,e))}function J1(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ie===e&&(Bt&a)===a&&(he===4||he===3&&(Bt&62914560)===Bt&&300>sn()-$f?(Kt&2)===0&&Va(e,0):Yf|=a,Da===Bt&&(Da=0)),ui(e)}function Jy(e,i){i===0&&(i=tr()),e=ga(e,i),e!==null&&(de(e,i),ui(e))}function W1(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Jy(e,a)}function tb(e,i){var a=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),Jy(e,a)}function eb(e,i){return Wr(e,i)}var rc=null,Pa=null,id=!1,sc=!1,rd=!1,ks=0;function ui(e){e!==Pa&&e.next===null&&(Pa===null?rc=Pa=e:Pa=Pa.next=e),sc=!0,id||(id=!0,ib())}function hl(e,i){if(!rd&&sc){rd=!0;do for(var a=!1,o=rc;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var v=o.suspendedLanes,A=o.pingedLanes;d=(1<<31-We(42|e)+1)-1,d&=h&~(v&~A),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,n_(o,d))}else d=Bt,d=bn(o,o===ie?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||Wi(o,d)||(a=!0,n_(o,d));o=o.next}while(a);rd=!1}}function nb(){Wy()}function Wy(){sc=id=!1;var e=0;ks!==0&&(hb()&&(e=ks),ks=0);for(var i=sn(),a=null,o=rc;o!==null;){var h=o.next,d=t_(o,i);d===0?(o.next=null,a===null?rc=h:a.next=h,h===null&&(Pa=a)):(a=o,(e!==0||(d&3)!==0)&&(sc=!0)),o=h}hl(e)}function t_(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-We(d),A=1<<v,I=h[v];I===-1?((A&a)===0||(A&o)!==0)&&(h[v]=Ws(A,i)):I<=i&&(e.expiredLanes|=A),d&=~A}if(i=ie,a=Bt,a=bn(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===i&&($t===2||$t===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Js(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Wi(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&Js(o),bo(a)){case 2:case 8:a=De;break;case 32:a=vi;break;case 268435456:a=vo;break;default:a=vi}return o=e_.bind(null,e),a=Wr(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&Js(o),e.callbackPriority=2,e.callbackNode=null,2}function e_(e,i){if(je!==0&&je!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(ic()&&e.callbackNode!==a)return null;var o=Bt;return o=bn(e,e===ie?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Uy(e,o,i),t_(e,sn()),e.callbackNode!=null&&e.callbackNode===a?e_.bind(null,e):null)}function n_(e,i){if(ic())return null;Uy(e,i,!0)}function ib(){db(function(){(Kt&6)!==0?Wr(Re,nb):Wy()})}function sd(){return ks===0&&(ks=Eo()),ks}function i_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ln(""+e)}function r_(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function rb(e,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var d=i_((h[Ue]||null).action),v=o.submitter;v&&(i=(i=v[Ue]||null)?i_(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var A=new ms("action","action",null,o,h);e.push({event:A,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ks!==0){var I=v?r_(h,v):new FormData(h);wf(a,{pending:!0,data:I,method:h.method,action:d},null,I)}}else typeof d=="function"&&(A.preventDefault(),I=v?r_(h,v):new FormData(h),wf(a,{pending:!0,data:I,method:h.method,action:d},d,I))},currentTarget:h}]})}}for(var ad=0;ad<Hh.length;ad++){var od=Hh[ad],sb=od.toLowerCase(),ab=od[0].toUpperCase()+od.slice(1);qn(sb,"on"+ab)}qn(Up,"onAnimationEnd"),qn(Lp,"onAnimationIteration"),qn(jp,"onAnimationStart"),qn("dblclick","onDoubleClick"),qn("focusin","onFocus"),qn("focusout","onBlur"),qn(A1,"onTransitionRun"),qn(S1,"onTransitionStart"),qn(w1,"onTransitionCancel"),qn(zp,"onTransitionEnd"),ei("onMouseEnter",["mouseout","mouseover"]),ei("onMouseLeave",["mouseout","mouseover"]),ei("onPointerEnter",["pointerout","pointerover"]),ei("onPointerLeave",["pointerout","pointerover"]),ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ob=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fl));function s_(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var d=void 0;if(i)for(var v=o.length-1;0<=v;v--){var A=o[v],I=A.instance,B=A.currentTarget;if(A=A.listener,I!==d&&h.isPropagationStopped())break t;d=A,h.currentTarget=B;try{d(h)}catch(Q){Qu(Q)}h.currentTarget=null,d=I}else for(v=0;v<o.length;v++){if(A=o[v],I=A.instance,B=A.currentTarget,A=A.listener,I!==d&&h.isPropagationStopped())break t;d=A,h.currentTarget=B;try{d(h)}catch(Q){Qu(Q)}h.currentTarget=null,d=I}}}}function kt(e,i){var a=i[es];a===void 0&&(a=i[es]=new Set);var o=e+"__bubble";a.has(o)||(a_(i,e,2,!1),a.add(o))}function ld(e,i,a){var o=0;i&&(o|=4),a_(a,e,o,i)}var ac="_reactListening"+Math.random().toString(36).slice(2);function ud(e){if(!e[ac]){e[ac]=!0,ou.forEach(function(a){a!=="selectionchange"&&(ob.has(a)||ld(a,!1,e),ld(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[ac]||(i[ac]=!0,ld("selectionchange",!1,i))}}function a_(e,i,a,o){switch(C_(i)){case 2:var h=Vb;break;case 8:h=kb;break;default:h=Ad}a=h.bind(null,i,a,e),h=void 0,!wi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function cd(e,i,a,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var A=o.stateNode.containerInfo;if(A===h)break;if(v===4)for(v=o.return;v!==null;){var I=v.tag;if((I===3||I===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;A!==null;){if(v=Jn(A),v===null)return;if(I=v.tag,I===5||I===6||I===26||I===27){o=d=v;continue t}A=A.parentNode}}o=o.return}hs(function(){var B=d,Q=No(a),J=[];t:{var q=Bp.get(e);if(q!==void 0){var H=ms,Tt=e;switch(e){case"keypress":if(fs(a)===0)break t;case"keydown":case"keyup":H=fa;break;case"focusin":Tt="focus",H=ua;break;case"focusout":Tt="blur",H=ua;break;case"beforeblur":case"afterblur":H=ua;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=vs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=mu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=fr;break;case Up:case Lp:case jp:H=Do;break;case zp:H=m;break;case"scroll":case"scrollend":H=gs;break;case"wheel":H=S;break;case"copy":case"cut":case"paste":H=gu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Vo;break;case"toggle":case"beforetoggle":H=G}var yt=(i&4)!==0,Wt=!yt&&(e==="scroll"||e==="scrollend"),U=yt?q!==null?q+"Capture":null:q;yt=[];for(var M=B,j;M!==null;){var K=M;if(j=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||j===null||U===null||(K=cr(M,U),K!=null&&yt.push(dl(M,K,j))),Wt)break;M=M.return}0<yt.length&&(q=new H(q,Tt,null,a,Q),J.push({event:q,listeners:yt}))}}if((i&7)===0){t:{if(q=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",q&&a!==Io&&(Tt=a.relatedTarget||a.fromElement)&&(Jn(Tt)||Tt[Ti]))break t;if((H||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,H?(Tt=a.relatedTarget||a.toElement,H=B,Tt=Tt?Jn(Tt):null,Tt!==null&&(Wt=c(Tt),yt=Tt.tag,Tt!==Wt||yt!==5&&yt!==27&&yt!==6)&&(Tt=null)):(H=null,Tt=B),H!==Tt)){if(yt=vs,K="onMouseLeave",U="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(yt=Vo,K="onPointerLeave",U="onPointerEnter",M="pointer"),Wt=H==null?q:rr(H),j=Tt==null?q:rr(Tt),q=new yt(K,M+"leave",H,a,Q),q.target=Wt,q.relatedTarget=j,K=null,Jn(Q)===B&&(yt=new yt(U,M+"enter",Tt,a,Q),yt.target=j,yt.relatedTarget=Wt,K=yt),Wt=K,H&&Tt)e:{for(yt=H,U=Tt,M=0,j=yt;j;j=Ua(j))M++;for(j=0,K=U;K;K=Ua(K))j++;for(;0<M-j;)yt=Ua(yt),M--;for(;0<j-M;)U=Ua(U),j--;for(;M--;){if(yt===U||U!==null&&yt===U.alternate)break e;yt=Ua(yt),U=Ua(U)}yt=null}else yt=null;H!==null&&o_(J,q,H,yt,!1),Tt!==null&&Wt!==null&&o_(J,Wt,Tt,yt,!0)}}t:{if(q=B?rr(B):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var ct=Rp;else if(Sp(q))if(xp)ct=E1;else{ct=_1;var Ot=y1}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&aa(B.elementType)&&(ct=Rp):ct=v1;if(ct&&(ct=ct(e,B))){wp(J,ct,a,Q);break t}Ot&&Ot(e,q,B),e==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&wo(q,"number",q.value)}switch(Ot=B?rr(B):window,e){case"focusin":(Sp(Ot)||Ot.contentEditable==="true")&&(da=Ot,zh=B,jo=null);break;case"focusout":jo=zh=da=null;break;case"mousedown":Bh=!0;break;case"contextmenu":case"mouseup":case"dragend":Bh=!1,kp(J,a,Q);break;case"selectionchange":if(b1)break;case"keydown":case"keyup":kp(J,a,Q)}var pt;if(St)t:{switch(e){case"compositionstart":var _t="onCompositionStart";break t;case"compositionend":_t="onCompositionEnd";break t;case"compositionupdate":_t="onCompositionUpdate";break t}_t=void 0}else Bn?jn(e,a)&&(_t="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(_t="onCompositionStart");_t&&(ge&&a.locale!=="ko"&&(Bn||_t!=="onCompositionStart"?_t==="onCompositionEnd"&&Bn&&(pt=du()):(wn=Q,ne="value"in wn?wn.value:wn.textContent,Bn=!0)),Ot=oc(B,_t),0<Ot.length&&(_t=new Mo(_t,e,null,a,Q),J.push({event:_t,listeners:Ot}),pt?_t.data=pt:(pt=zn(a),pt!==null&&(_t.data=pt)))),(pt=Yt?ko(e,a):m1(e,a))&&(_t=oc(B,"onBeforeInput"),0<_t.length&&(Ot=new Mo("onBeforeInput","beforeinput",null,a,Q),J.push({event:Ot,listeners:_t}),Ot.data=pt)),rb(J,e,B,a,Q)}s_(J,i)})}function dl(e,i,a){return{instance:e,listener:i,currentTarget:a}}function oc(e,i){for(var a=i+"Capture",o=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=cr(e,a),h!=null&&o.unshift(dl(e,h,d)),h=cr(e,i),h!=null&&o.push(dl(e,h,d))),e.tag===3)return o;e=e.return}return[]}function Ua(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function o_(e,i,a,o,h){for(var d=i._reactName,v=[];a!==null&&a!==o;){var A=a,I=A.alternate,B=A.stateNode;if(A=A.tag,I!==null&&I===o)break;A!==5&&A!==26&&A!==27||B===null||(I=B,h?(B=cr(a,d),B!=null&&v.unshift(dl(a,B,I))):h||(B=cr(a,d),B!=null&&v.push(dl(a,B,I)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var lb=/\r\n?/g,ub=/\u0000|\uFFFD/g;function l_(e){return(typeof e=="string"?e:""+e).replace(lb,`
`).replace(ub,"")}function u_(e,i){return i=l_(i),l_(e)===i}function lc(){}function Jt(e,i,a,o,h,d){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||Sn(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&Sn(e,""+o);break;case"className":as(e,"class",o);break;case"tabIndex":as(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":as(e,a,o);break;case"style":xo(e,o,d);break;case"data":if(i!=="object"){as(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Ln(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Jt(e,i,"name",h.name,h,null),Jt(e,i,"formEncType",h.formEncType,h,null),Jt(e,i,"formMethod",h.formMethod,h,null),Jt(e,i,"formTarget",h.formTarget,h,null)):(Jt(e,i,"encType",h.encType,h,null),Jt(e,i,"method",h.method,h,null),Jt(e,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Ln(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=lc);break;case"onScroll":o!=null&&kt("scroll",e);break;case"onScrollEnd":o!=null&&kt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Ln(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":kt("beforetoggle",e),kt("toggle",e),ss(e,"popover",o);break;case"xlinkActuate":An(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":An(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":An(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":An(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":An(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":An(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":An(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":An(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":An(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ss(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=cu.get(a)||a,ss(e,a,o))}}function hd(e,i,a,o,h,d){switch(a){case"style":xo(e,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Sn(e,o):(typeof o=="number"||typeof o=="bigint")&&Sn(e,""+o);break;case"onScroll":o!=null&&kt("scroll",e);break;case"onScrollEnd":o!=null&&kt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=lc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!is.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=e[Ue]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):ss(e,a,o)}}}function ze(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kt("error",e),kt("load",e);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Jt(e,i,d,v,a,null)}}h&&Jt(e,i,"srcSet",a.srcSet,a,null),o&&Jt(e,i,"src",a.src,a,null);return;case"input":kt("invalid",e);var A=d=v=h=null,I=null,B=null;for(o in a)if(a.hasOwnProperty(o)){var Q=a[o];if(Q!=null)switch(o){case"name":h=Q;break;case"type":v=Q;break;case"checked":I=Q;break;case"defaultChecked":B=Q;break;case"value":d=Q;break;case"defaultValue":A=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:Jt(e,i,o,Q,a,null)}}So(e,d,A,I,B,v,h,!1),or(e);return;case"select":kt("invalid",e),o=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(A=a[h],A!=null))switch(h){case"value":d=A;break;case"defaultValue":v=A;break;case"multiple":o=A;default:Jt(e,i,h,A,a,null)}i=d,a=v,e.multiple=!!o,i!=null?lr(e,!!o,i,!1):a!=null&&lr(e,!!o,a,!0);return;case"textarea":kt("invalid",e),d=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(A=a[v],A!=null))switch(v){case"value":o=A;break;case"defaultValue":h=A;break;case"children":d=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:Jt(e,i,v,A,a,null)}uu(e,o,h,d),or(e);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(o=a[I],o!=null))switch(I){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Jt(e,i,I,o,a,null)}return;case"dialog":kt("beforetoggle",e),kt("toggle",e),kt("cancel",e),kt("close",e);break;case"iframe":case"object":kt("load",e);break;case"video":case"audio":for(o=0;o<fl.length;o++)kt(fl[o],e);break;case"image":kt("error",e),kt("load",e);break;case"details":kt("toggle",e);break;case"embed":case"source":case"link":kt("error",e),kt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(o=a[B],o!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Jt(e,i,B,o,a,null)}return;default:if(aa(i)){for(Q in a)a.hasOwnProperty(Q)&&(o=a[Q],o!==void 0&&hd(e,i,Q,o,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(o=a[A],o!=null&&Jt(e,i,A,o,a,null))}function cb(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,A=null,I=null,B=null,Q=null;for(H in a){var J=a[H];if(a.hasOwnProperty(H)&&J!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":I=J;default:o.hasOwnProperty(H)||Jt(e,i,H,null,o,J)}}for(var q in o){var H=o[q];if(J=a[q],o.hasOwnProperty(q)&&(H!=null||J!=null))switch(q){case"type":d=H;break;case"name":h=H;break;case"checked":B=H;break;case"defaultChecked":Q=H;break;case"value":v=H;break;case"defaultValue":A=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:H!==J&&Jt(e,i,q,H,o,J)}}Ao(e,v,A,I,B,Q,d,h);return;case"select":H=v=A=q=null;for(d in a)if(I=a[d],a.hasOwnProperty(d)&&I!=null)switch(d){case"value":break;case"multiple":H=I;default:o.hasOwnProperty(d)||Jt(e,i,d,null,o,I)}for(h in o)if(d=o[h],I=a[h],o.hasOwnProperty(h)&&(d!=null||I!=null))switch(h){case"value":q=d;break;case"defaultValue":A=d;break;case"multiple":v=d;default:d!==I&&Jt(e,i,h,d,o,I)}i=A,a=v,o=H,q!=null?lr(e,!!a,q,!1):!!o!=!!a&&(i!=null?lr(e,!!a,i,!0):lr(e,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(A in a)if(h=a[A],a.hasOwnProperty(A)&&h!=null&&!o.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Jt(e,i,A,null,o,h)}for(v in o)if(h=o[v],d=a[v],o.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":q=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&Jt(e,i,v,h,o,d)}lu(e,q,H);return;case"option":for(var Tt in a)if(q=a[Tt],a.hasOwnProperty(Tt)&&q!=null&&!o.hasOwnProperty(Tt))switch(Tt){case"selected":e.selected=!1;break;default:Jt(e,i,Tt,null,o,q)}for(I in o)if(q=o[I],H=a[I],o.hasOwnProperty(I)&&q!==H&&(q!=null||H!=null))switch(I){case"selected":e.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Jt(e,i,I,q,o,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in a)q=a[yt],a.hasOwnProperty(yt)&&q!=null&&!o.hasOwnProperty(yt)&&Jt(e,i,yt,null,o,q);for(B in o)if(q=o[B],H=a[B],o.hasOwnProperty(B)&&q!==H&&(q!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:Jt(e,i,B,q,o,H)}return;default:if(aa(i)){for(var Wt in a)q=a[Wt],a.hasOwnProperty(Wt)&&q!==void 0&&!o.hasOwnProperty(Wt)&&hd(e,i,Wt,void 0,o,q);for(Q in o)q=o[Q],H=a[Q],!o.hasOwnProperty(Q)||q===H||q===void 0&&H===void 0||hd(e,i,Q,q,o,H);return}}for(var U in a)q=a[U],a.hasOwnProperty(U)&&q!=null&&!o.hasOwnProperty(U)&&Jt(e,i,U,null,o,q);for(J in o)q=o[J],H=a[J],!o.hasOwnProperty(J)||q===H||q==null&&H==null||Jt(e,i,J,q,o,H)}var fd=null,dd=null;function uc(e){return e.nodeType===9?e:e.ownerDocument}function c_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h_(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function md(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var pd=null;function hb(){var e=window.event;return e&&e.type==="popstate"?e===pd?!1:(pd=e,!0):(pd=null,!1)}var f_=typeof setTimeout=="function"?setTimeout:void 0,fb=typeof clearTimeout=="function"?clearTimeout:void 0,d_=typeof Promise=="function"?Promise:void 0,db=typeof queueMicrotask=="function"?queueMicrotask:typeof d_<"u"?function(e){return d_.resolve(null).then(e).catch(mb)}:f_;function mb(e){setTimeout(function(){throw e})}function Ir(e){return e==="head"}function m_(e,i){var a=i,o=0,h=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&ml(v.documentElement),a&2&&ml(v.body),a&4)for(a=v.head,ml(a),v=a.firstChild;v;){var A=v.nextSibling,I=v.nodeName;v[ir]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=A}}if(h===0){e.removeChild(d),bl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=d}while(a);bl(i)}function gd(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":gd(a),ea(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function pb(e,i,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ir])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Gn(e.nextSibling),e===null)break}return null}function gb(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Gn(e.nextSibling),e===null))return null;return e}function yd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function yb(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Gn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var _d=null;function p_(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function g_(e,i,a){switch(i=uc(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function ml(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);ea(e)}var On=new Map,y_=new Set;function cc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ji=st.d;st.d={f:_b,r:vb,D:Eb,C:Tb,L:bb,m:Ab,X:wb,S:Sb,M:Rb};function _b(){var e=ji.f(),i=ec();return e||i}function vb(e){var i=Wn(e);i!==null&&i.tag===5&&i.type==="form"?Ug(i):ji.r(e)}var La=typeof document>"u"?null:document;function __(e,i,a){var o=La;if(o&&typeof i=="string"&&i){var h=Oe(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),y_.has(h)||(y_.add(h),e={rel:e,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),ze(i,"link",e),pe(i),o.head.appendChild(i)))}}function Eb(e){ji.D(e),__("dns-prefetch",e,null)}function Tb(e,i){ji.C(e,i),__("preconnect",e,i)}function bb(e,i,a){ji.L(e,i,a);var o=La;if(o&&e&&i){var h='link[rel="preload"][as="'+Oe(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Oe(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Oe(a.imageSizes)+'"]')):h+='[href="'+Oe(e)+'"]';var d=h;switch(i){case"style":d=ja(e);break;case"script":d=za(e)}On.has(d)||(e=b({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),On.set(d,e),o.querySelector(h)!==null||i==="style"&&o.querySelector(pl(d))||i==="script"&&o.querySelector(gl(d))||(i=o.createElement("link"),ze(i,"link",e),pe(i),o.head.appendChild(i)))}}function Ab(e,i){ji.m(e,i);var a=La;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Oe(o)+'"][href="'+Oe(e)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=za(e)}if(!On.has(d)&&(e=b({rel:"modulepreload",href:e},i),On.set(d,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(gl(d)))return}o=a.createElement("link"),ze(o,"link",e),pe(o),a.head.appendChild(o)}}}function Sb(e,i,a){ji.S(e,i,a);var o=La;if(o&&e){var h=sr(o).hoistableStyles,d=ja(e);i=i||"default";var v=h.get(d);if(!v){var A={loading:0,preload:null};if(v=o.querySelector(pl(d)))A.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":i},a),(a=On.get(d))&&vd(e,a);var I=v=o.createElement("link");pe(I),ze(I,"link",e),I._p=new Promise(function(B,Q){I.onload=B,I.onerror=Q}),I.addEventListener("load",function(){A.loading|=1}),I.addEventListener("error",function(){A.loading|=2}),A.loading|=4,hc(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:A},h.set(d,v)}}}function wb(e,i){ji.X(e,i);var a=La;if(a&&e){var o=sr(a).hoistableScripts,h=za(e),d=o.get(h);d||(d=a.querySelector(gl(h)),d||(e=b({src:e,async:!0},i),(i=On.get(h))&&Ed(e,i),d=a.createElement("script"),pe(d),ze(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function Rb(e,i){ji.M(e,i);var a=La;if(a&&e){var o=sr(a).hoistableScripts,h=za(e),d=o.get(h);d||(d=a.querySelector(gl(h)),d||(e=b({src:e,async:!0,type:"module"},i),(i=On.get(h))&&Ed(e,i),d=a.createElement("script"),pe(d),ze(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function v_(e,i,a,o){var h=(h=rt.current)?cc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ja(a.href),a=sr(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=ja(a.href);var d=sr(h).hoistableStyles,v=d.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=h.querySelector(pl(e)))&&!d._p&&(v.instance=d,v.state.loading=5),On.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},On.set(e,a),d||xb(h,e,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=za(a),a=sr(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function ja(e){return'href="'+Oe(e)+'"'}function pl(e){return'link[rel="stylesheet"]['+e+"]"}function E_(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function xb(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),ze(i,"link",a),pe(i),e.head.appendChild(i))}function za(e){return'[src="'+Oe(e)+'"]'}function gl(e){return"script[async]"+e}function T_(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+Oe(a.href)+'"]');if(o)return i.instance=o,pe(o),o;var h=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),pe(o),ze(o,"style",h),hc(o,a.precedence,e),i.instance=o;case"stylesheet":h=ja(a.href);var d=e.querySelector(pl(h));if(d)return i.state.loading|=4,i.instance=d,pe(d),d;o=E_(a),(h=On.get(h))&&vd(o,h),d=(e.ownerDocument||e).createElement("link"),pe(d);var v=d;return v._p=new Promise(function(A,I){v.onload=A,v.onerror=I}),ze(d,"link",o),i.state.loading|=4,hc(d,a.precedence,e),i.instance=d;case"script":return d=za(a.src),(h=e.querySelector(gl(d)))?(i.instance=h,pe(h),h):(o=a,(h=On.get(d))&&(o=b({},a),Ed(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),pe(h),ze(h,"link",o),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,hc(o,a.precedence,e));return i.instance}function hc(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,v=0;v<o.length;v++){var A=o[v];if(A.dataset.precedence===i)d=A;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function vd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Ed(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var fc=null;function b_(e,i,a){if(fc===null){var o=new Map,h=fc=new Map;h.set(a,o)}else h=fc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[ir]||d[me]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=e+v;var A=o.get(v);A?A.push(d):o.set(v,[d])}}return o}function A_(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function Ib(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function S_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var yl=null;function Nb(){}function Cb(e,i,a){if(yl===null)throw Error(s(475));var o=yl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=ja(a.href),d=e.querySelector(pl(h));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=dc.bind(o),e.then(o,o)),i.state.loading|=4,i.instance=d,pe(d);return}d=e.ownerDocument||e,a=E_(a),(h=On.get(h))&&vd(a,h),d=d.createElement("link"),pe(d);var v=d;v._p=new Promise(function(A,I){v.onload=A,v.onerror=I}),ze(d,"link",a),i.instance=d}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=dc.bind(o),e.addEventListener("load",i),e.addEventListener("error",i))}}function Db(){if(yl===null)throw Error(s(475));var e=yl;return e.stylesheets&&e.count===0&&Td(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&Td(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function dc(){if(this.count--,this.count===0){if(this.stylesheets)Td(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var mc=null;function Td(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,mc=new Map,i.forEach(Ob,e),mc=null,dc.call(e))}function Ob(e,i){if(!(i.state.loading&4)){var a=mc.get(e);if(a)var o=a.get(null);else{a=new Map,mc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||o,d===o&&a.set(null,h),a.set(v,h),this.count++,o=dc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var _l={$$typeof:ht,Provider:null,Consumer:null,_currentValue:mt,_currentValue2:mt,_threadCount:0};function Mb(e,i,a,o,h,d,v,A){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ta(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ta(0),this.hiddenUpdates=ta(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function w_(e,i,a,o,h,d,v,A,I,B,Q,J){return e=new Mb(e,i,a,v,A,I,B,J),i=1,d===!0&&(i|=24),d=mn(3,null,null,i),e.current=d,d.stateNode=e,i=ef(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:i},af(d),e}function R_(e){return e?(e=ya,e):ya}function x_(e,i,a,o,h,d){h=R_(h),o.context===null?o.context=h:o.pendingContext=h,o=pr(i),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=gr(e,o,i),a!==null&&(vn(a,e,i),Ko(a,e,i))}function I_(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function bd(e,i){I_(e,i),(e=e.alternate)&&I_(e,i)}function N_(e){if(e.tag===13){var i=ga(e,67108864);i!==null&&vn(i,e,67108864),bd(e,67108864)}}var pc=!0;function Vb(e,i,a,o){var h=F.T;F.T=null;var d=st.p;try{st.p=2,Ad(e,i,a,o)}finally{st.p=d,F.T=h}}function kb(e,i,a,o){var h=F.T;F.T=null;var d=st.p;try{st.p=8,Ad(e,i,a,o)}finally{st.p=d,F.T=h}}function Ad(e,i,a,o){if(pc){var h=Sd(o);if(h===null)cd(e,i,o,gc,a),D_(e,o);else if(Ub(h,e,i,a,o))o.stopPropagation();else if(D_(e,o),i&4&&-1<Pb.indexOf(e)){for(;h!==null;){var d=Wn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=kn(d.pendingLanes);if(v!==0){var A=d;for(A.pendingLanes|=2,A.entangledLanes|=2;v;){var I=1<<31-We(v);A.entanglements[1]|=I,v&=~I}ui(d),(Kt&6)===0&&(Wu=sn()+500,hl(0))}}break;case 13:A=ga(d,2),A!==null&&vn(A,d,2),ec(),bd(d,2)}if(d=Sd(o),d===null&&cd(e,i,o,gc,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else cd(e,i,o,null,a)}}function Sd(e){return e=No(e),wd(e)}var gc=null;function wd(e){if(gc=null,e=Jn(e),e!==null){var i=c(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=f(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return gc=e,null}function C_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(iu()){case Re:return 2;case De:return 8;case vi:case Nh:return 32;case vo:return 268435456;default:return 32}default:return 32}}var Rd=!1,Nr=null,Cr=null,Dr=null,vl=new Map,El=new Map,Or=[],Pb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function D_(e,i){switch(e){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":vl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":El.delete(i.pointerId)}}function Tl(e,i,a,o,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Wn(i),i!==null&&N_(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function Ub(e,i,a,o,h){switch(i){case"focusin":return Nr=Tl(Nr,e,i,a,o,h),!0;case"dragenter":return Cr=Tl(Cr,e,i,a,o,h),!0;case"mouseover":return Dr=Tl(Dr,e,i,a,o,h),!0;case"pointerover":var d=h.pointerId;return vl.set(d,Tl(vl.get(d)||null,e,i,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,El.set(d,Tl(El.get(d)||null,e,i,a,o,h)),!0}return!1}function O_(e){var i=Jn(e.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){e.blockedOn=i,Oh(e.priority,function(){if(a.tag===13){var o=_n();o=To(o);var h=ga(a,o);h!==null&&vn(h,a,o),bd(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=Sd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Io=o,a.target.dispatchEvent(o),Io=null}else return i=Wn(a),i!==null&&N_(i),e.blockedOn=a,!1;i.shift()}return!0}function M_(e,i,a){yc(e)&&a.delete(i)}function Lb(){Rd=!1,Nr!==null&&yc(Nr)&&(Nr=null),Cr!==null&&yc(Cr)&&(Cr=null),Dr!==null&&yc(Dr)&&(Dr=null),vl.forEach(M_),El.forEach(M_)}function _c(e,i){e.blockedOn===i&&(e.blockedOn=null,Rd||(Rd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Lb)))}var vc=null;function V_(e){vc!==e&&(vc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){vc===e&&(vc=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],h=e[i+2];if(typeof o!="function"){if(wd(o||a)===null)continue;break}var d=Wn(a);d!==null&&(e.splice(i,3),i-=3,wf(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function bl(e){function i(I){return _c(I,e)}Nr!==null&&_c(Nr,e),Cr!==null&&_c(Cr,e),Dr!==null&&_c(Dr,e),vl.forEach(i),El.forEach(i);for(var a=0;a<Or.length;a++){var o=Or[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Or.length&&(a=Or[0],a.blockedOn===null);)O_(a),a.blockedOn===null&&Or.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],v=h[Ue]||null;if(typeof d=="function")v||V_(a);else if(v){var A=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Ue]||null)A=v.formAction;else if(wd(h)!==null)continue}else A=v.action;typeof A=="function"?a[o+1]=A:(a.splice(o,3),o-=3),V_(a)}}}function xd(e){this._internalRoot=e}Ec.prototype.render=xd.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=_n();x_(a,o,e,i,null,null)},Ec.prototype.unmount=xd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;x_(e.current,2,null,e,null,null),ec(),i[Ti]=null}};function Ec(e){this._internalRoot=e}Ec.prototype.unstable_scheduleHydration=function(e){if(e){var i=Ei();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Or.length&&i!==0&&i<Or[a].priority;a++);Or.splice(a,0,e),a===0&&O_(e)}};var k_=t.version;if(k_!=="19.1.1")throw Error(s(527,k_,"19.1.1"));st.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(i),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var jb={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tc.isDisabled&&Tc.supportsFiber)try{Zi=Tc.inject(jb),Fe=Tc}catch{}}return Sl.createRoot=function(e,i){if(!l(e))throw Error(s(299));var a=!1,o="",h=Zg,d=Jg,v=Wg,A=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks)),i=w_(e,1,!1,null,null,a,o,h,d,v,A,null),e[Ti]=i.current,ud(e),new xd(i)},Sl.hydrateRoot=function(e,i,a){if(!l(e))throw Error(s(299));var o=!1,h="",d=Zg,v=Jg,A=Wg,I=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(I=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),i=w_(e,1,!0,i,a??null,o,h,d,v,A,I,B),i.context=R_(null),a=i.current,o=_n(),o=To(o),h=pr(o),h.callback=null,gr(a,h,o),a=o,i.current.lanes=a,de(i,a),ui(i),e[Ti]=i.current,ud(e),new Ec(i)},Sl.version="19.1.1",Sl}var F_;function $b(){if(F_)return Cd.exports;F_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Cd.exports=Kb(),Cd.exports}var Xb=$b();const Zb=w0(Xb);var Vd={exports:{}},It={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function Jb(){if(Q_)return It;Q_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.iterator;function x(T){return T===null||typeof T!="object"?null:(T=w&&T[w]||T["@@iterator"],typeof T=="function"?T:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,X={};function tt(T,V,Z){this.props=T,this.context=V,this.refs=X,this.updater=Z||L}tt.prototype.isReactComponent={},tt.prototype.setState=function(T,V){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,V,"setState")},tt.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function nt(){}nt.prototype=tt.prototype;function ft(T,V,Z){this.props=T,this.context=V,this.refs=X,this.updater=Z||L}var ht=ft.prototype=new nt;ht.constructor=ft,W(ht,tt.prototype),ht.isPureReactComponent=!0;var jt=Array.isArray,ot={H:null,A:null,T:null,S:null,V:null},Mt=Object.prototype.hasOwnProperty;function O(T,V,Z,Y,it,dt){return Z=dt.ref,{$$typeof:r,type:T,key:V,ref:Z!==void 0?Z:null,props:dt}}function R(T,V){return O(T.type,V,void 0,void 0,void 0,T.props)}function C(T){return typeof T=="object"&&T!==null&&T.$$typeof===r}function k(T){var V={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(Z){return V[Z]})}var D=/\/+/g;function P(T,V){return typeof T=="object"&&T!==null&&T.key!=null?k(""+T.key):V.toString(36)}function N(){}function Dt(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(N,N):(T.status="pending",T.then(function(V){T.status==="pending"&&(T.status="fulfilled",T.value=V)},function(V){T.status==="pending"&&(T.status="rejected",T.reason=V)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function Rt(T,V,Z,Y,it){var dt=typeof T;(dt==="undefined"||dt==="boolean")&&(T=null);var rt=!1;if(T===null)rt=!0;else switch(dt){case"bigint":case"string":case"number":rt=!0;break;case"object":switch(T.$$typeof){case r:case t:rt=!0;break;case b:return rt=T._init,Rt(rt(T._payload),V,Z,Y,it)}}if(rt)return it=it(T),rt=Y===""?"."+P(T,0):Y,jt(it)?(Z="",rt!=null&&(Z=rt.replace(D,"$&/")+"/"),Rt(it,V,Z,"",function(hn){return hn})):it!=null&&(C(it)&&(it=R(it,Z+(it.key==null||T&&T.key===it.key?"":(""+it.key).replace(D,"$&/")+"/")+rt)),V.push(it)),1;rt=0;var ee=Y===""?".":Y+":";if(jt(T))for(var Et=0;Et<T.length;Et++)Y=T[Et],dt=ee+P(Y,Et),rt+=Rt(Y,V,Z,dt,it);else if(Et=x(T),typeof Et=="function")for(T=Et.call(T),Et=0;!(Y=T.next()).done;)Y=Y.value,dt=ee+P(Y,Et++),rt+=Rt(Y,V,Z,dt,it);else if(dt==="object"){if(typeof T.then=="function")return Rt(Dt(T),V,Z,Y,it);throw V=String(T),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return rt}function F(T,V,Z){if(T==null)return T;var Y=[],it=0;return Rt(T,Y,"","",function(dt){return V.call(Z,dt,it++)}),Y}function st(T){if(T._status===-1){var V=T._result;V=V(),V.then(function(Z){(T._status===0||T._status===-1)&&(T._status=1,T._result=Z)},function(Z){(T._status===0||T._status===-1)&&(T._status=2,T._result=Z)}),T._status===-1&&(T._status=0,T._result=V)}if(T._status===1)return T._result.default;throw T._result}var mt=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function zt(){}return It.Children={map:F,forEach:function(T,V,Z){F(T,function(){V.apply(this,arguments)},Z)},count:function(T){var V=0;return F(T,function(){V++}),V},toArray:function(T){return F(T,function(V){return V})||[]},only:function(T){if(!C(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},It.Component=tt,It.Fragment=n,It.Profiler=l,It.PureComponent=ft,It.StrictMode=s,It.Suspense=g,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ot,It.__COMPILER_RUNTIME={__proto__:null,c:function(T){return ot.H.useMemoCache(T)}},It.cache=function(T){return function(){return T.apply(null,arguments)}},It.cloneElement=function(T,V,Z){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var Y=W({},T.props),it=T.key,dt=void 0;if(V!=null)for(rt in V.ref!==void 0&&(dt=void 0),V.key!==void 0&&(it=""+V.key),V)!Mt.call(V,rt)||rt==="key"||rt==="__self"||rt==="__source"||rt==="ref"&&V.ref===void 0||(Y[rt]=V[rt]);var rt=arguments.length-2;if(rt===1)Y.children=Z;else if(1<rt){for(var ee=Array(rt),Et=0;Et<rt;Et++)ee[Et]=arguments[Et+2];Y.children=ee}return O(T.type,it,void 0,void 0,dt,Y)},It.createContext=function(T){return T={$$typeof:f,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:c,_context:T},T},It.createElement=function(T,V,Z){var Y,it={},dt=null;if(V!=null)for(Y in V.key!==void 0&&(dt=""+V.key),V)Mt.call(V,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(it[Y]=V[Y]);var rt=arguments.length-2;if(rt===1)it.children=Z;else if(1<rt){for(var ee=Array(rt),Et=0;Et<rt;Et++)ee[Et]=arguments[Et+2];it.children=ee}if(T&&T.defaultProps)for(Y in rt=T.defaultProps,rt)it[Y]===void 0&&(it[Y]=rt[Y]);return O(T,dt,void 0,void 0,null,it)},It.createRef=function(){return{current:null}},It.forwardRef=function(T){return{$$typeof:p,render:T}},It.isValidElement=C,It.lazy=function(T){return{$$typeof:b,_payload:{_status:-1,_result:T},_init:st}},It.memo=function(T,V){return{$$typeof:y,type:T,compare:V===void 0?null:V}},It.startTransition=function(T){var V=ot.T,Z={};ot.T=Z;try{var Y=T(),it=ot.S;it!==null&&it(Z,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(zt,mt)}catch(dt){mt(dt)}finally{ot.T=V}},It.unstable_useCacheRefresh=function(){return ot.H.useCacheRefresh()},It.use=function(T){return ot.H.use(T)},It.useActionState=function(T,V,Z){return ot.H.useActionState(T,V,Z)},It.useCallback=function(T,V){return ot.H.useCallback(T,V)},It.useContext=function(T){return ot.H.useContext(T)},It.useDebugValue=function(){},It.useDeferredValue=function(T,V){return ot.H.useDeferredValue(T,V)},It.useEffect=function(T,V,Z){var Y=ot.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(T,V)},It.useId=function(){return ot.H.useId()},It.useImperativeHandle=function(T,V,Z){return ot.H.useImperativeHandle(T,V,Z)},It.useInsertionEffect=function(T,V){return ot.H.useInsertionEffect(T,V)},It.useLayoutEffect=function(T,V){return ot.H.useLayoutEffect(T,V)},It.useMemo=function(T,V){return ot.H.useMemo(T,V)},It.useOptimistic=function(T,V){return ot.H.useOptimistic(T,V)},It.useReducer=function(T,V,Z){return ot.H.useReducer(T,V,Z)},It.useRef=function(T){return ot.H.useRef(T)},It.useState=function(T){return ot.H.useState(T)},It.useSyncExternalStore=function(T,V,Z){return ot.H.useSyncExternalStore(T,V,Z)},It.useTransition=function(){return ot.H.useTransition()},It.version="19.1.1",It}var Y_;function Wb(){return Y_||(Y_=1,Vd.exports=Jb()),Vd.exports}var Nl=Wb();/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),eA=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),K_=r=>{const t=eA(r);return t.charAt(0).toUpperCase()+t.slice(1)},R0=(...r)=>r.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),nA=r=>{for(const t in r)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=Nl.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:l="",children:c,iconNode:f,...p},g)=>Nl.createElement("svg",{ref:g,...iA,width:t,height:t,stroke:r,strokeWidth:s?Number(n)*24/Number(t):n,className:R0("lucide",l),...!c&&!nA(p)&&{"aria-hidden":"true"},...p},[...f.map(([y,b])=>Nl.createElement(y,b)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=(r,t)=>{const n=Nl.forwardRef(({className:s,...l},c)=>Nl.createElement(rA,{ref:c,iconNode:t,className:R0(`lucide-${tA(K_(r))}`,`lucide-${r}`,s),...l}));return n.displayName=K_(r),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],x0=fe("arrow-left",sA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Xa=fe("calendar",aA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],lA=fe("check",oA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],I0=fe("circle-plus",uA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],hA=fe("crown",cA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],N0=fe("external-link",fA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],$_=fe("file-pen",dA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],pA=fe("funnel",mA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],C0=fe("image",gA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],_A=fe("layout-dashboard",yA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Pl=fe("loader",vA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Kd=fe("log-in",EA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],bA=fe("log-out",TA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Gi=fe("map-pin",AA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],wA=fe("plane",SA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],$d=fe("plus",RA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Xd=fe("search",xA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],NA=fe("square-pen",IA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],D0=fe("tag",CA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],O0=fe("trash-2",DA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ul=fe("users",OA);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],VA=fe("x",MA),Za=({children:r,onClick:t,variant:n="primary",icon:s,disabled:l=!1,type:c="button",className:f=""})=>{const p="px-6 py-3 rounded-xl font-medium transition duration-200 flex items-center justify-center gap-2",g={primary:"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:shadow-lg transform hover:scale-105",secondary:"bg-white text-gray-700 border-2 border-gray-200 hover:border-purple-400",danger:"bg-red-500 text-white hover:bg-red-600",success:"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:shadow-lg transform hover:scale-105"};return E.jsxs("button",{type:c,onClick:t,disabled:l,className:`${p} ${g[n]} ${l?"opacity-50 cursor-not-allowed":""} ${f}`,children:[s&&E.jsx(s,{size:20}),r]})},kA=({onLogin:r,onBack:t})=>{const[n,s]=Ct.useState(""),l=c=>{c.preventDefault(),n.trim()&&r(n.trim())};return E.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-600 via-pink-500 to-orange-400"}),E.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"url(https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?w=1600)",backgroundSize:"cover",backgroundPosition:"center"}}),E.jsxs("div",{className:"relative z-10 w-full max-w-md",children:[E.jsxs("button",{type:"button",onClick:t,className:"mb-6 flex items-center gap-2 text-white hover:text-white/80 transition",children:[E.jsx(x0,{size:20}),"Back"]}),E.jsx("div",{className:"bg-white/95 backdrop-blur rounded-3xl shadow-2xl p-8",children:E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("div",{style:{textAlign:"center",fontSize:"38px",marginLeft:"20px",marginBottom:"10px"},children:"Welcome Back!"}),E.jsxs("form",{onSubmit:l,className:"space-y-6",children:[E.jsxs("span",{children:[E.jsx("label",{htmlFor:"tripId",className:"block text-sm font-large text-gray-700 mb-1",children:"Enter your Trip ID"}),E.jsx("input",{type:"text",id:"tripId",value:n,onChange:c=>s(c.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"e.g., trip123",required:!0}),E.jsx(Kd,{className:"mx-auto mb-4 text-purple-600",size:48})]}),E.jsxs(Za,{type:"submit",className:"w-full flex items-center justify-center gap-2",children:[E.jsx(Kd,{size:16}),"Log In"]})]})]})})]})]})},PA=({onCreateTrip:r,onBack:t})=>{const[n,s]=Ct.useState({name:"",destination:"",timezone:"America/New_York",startDate:"",endDate:""}),[l,c]=Ct.useState({}),[f,p]=Ct.useState(!1),[g,y]=Ct.useState(null),b=["America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Toronto","America/Vancouver","America/Halifax","America/St_Johns","America/Winnipeg","America/Regina","America/Edmonton","Europe/London","Europe/Paris","Europe/Berlin","Europe/Frankfurt","Europe/Madrid","Europe/Cologne","Europe/Amsterdam","Europe/Zurich","Europe/Warsaw","Europe/Prague","Europe/Vienna","Europe/Madrid","Europe/Rome","Europe/Amsterdam","Europe/Zurich","Europe/Warsaw","Europe/Prague","Europe/Vienna","Asia/Tokyo","Asia/Dubai","Australia/Sydney"],w=()=>{const L={};return n.name.trim()||(L.name="Trip name is required"),n.destination.trim()||(L.destination="Destination is required"),n.startDate||(L.startDate="Start date is required"),n.endDate||(L.endDate="End date is required"),n.startDate&&n.endDate&&new Date(n.endDate)<new Date(n.startDate)&&(L.endDate="End date must be after start date"),c(L),Object.keys(L).length===0},x=async L=>{if(L.preventDefault(),!!w()){p(!0);try{const W=await r(n);alert(`Trip created! Trip ID: ${W}

Share this ID with others to invite them.`),y(null)}catch(W){console.error("Error creating trip:",W),y(W&&W.message||"Failed to create trip. Please try again.")}finally{p(!1)}}};return E.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-600 via-pink-500 to-orange-400"}),E.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"url(https://images.unsplash.com/photo-1530789253388-582c481c54b0?w=1600)",backgroundSize:"cover",backgroundPosition:"center"}}),E.jsxs("div",{className:"relative z-10 w-full max-w-2xl",children:[g&&E.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-800 rounded-md",children:[E.jsx("strong",{className:"block font-medium",children:"Error"}),E.jsx("p",{className:"text-sm",children:g}),E.jsx("button",{className:"mt-2 text-xs text-red-600 underline",onClick:()=>y(null),children:"Dismiss"})]}),E.jsxs("button",{onClick:t,className:"mb-6 flex items-center gap-2 text-white hover:text-white/80 transition",children:[E.jsx(x0,{size:20}),"Back"]}),E.jsxs("div",{className:"bg-white/95 backdrop-blur rounded-3xl shadow-2xl p-8",children:[E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Create New Trip"}),E.jsx("p",{className:"text-gray-600",children:"Set up your trip and invite friends to join"})]}),E.jsxs("form",{onSubmit:x,className:"space-y-6",children:[E.jsxs("div",{children:[E.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Trip Name ",E.jsx("span",{className:"text-red-500",children:"*"})]}),E.jsx("input",{type:"text",value:n.name,onChange:L=>s({...n,name:L.target.value}),placeholder:"e.g., European Adventure 2025",className:`input ${l.name?"border-red-500":""}`}),l.name&&E.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.name})]}),E.jsxs("div",{children:[E.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Destination ",E.jsx("span",{className:"text-red-500",children:"*"})]}),E.jsx("input",{type:"text",value:n.destination,onChange:L=>s({...n,destination:L.target.value}),placeholder:"e.g., Paris, France",className:`input ${l.destination?"border-red-500":""}`}),l.destination&&E.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.destination})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),E.jsx("select",{value:n.timezone,onChange:L=>s({...n,timezone:L.target.value}),className:"input",children:b.map(L=>E.jsx("option",{value:L,children:L.replace(/_/g," ")},L))})]}),E.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[E.jsxs("div",{children:[E.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Start Date ",E.jsx("span",{className:"text-red-500",children:"*"})]}),E.jsx("input",{type:"date",value:n.startDate,onChange:L=>s({...n,startDate:L.target.value}),className:`input ${l.startDate?"border-red-500":""}`}),l.startDate&&E.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.startDate})]}),E.jsxs("div",{children:[E.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["End Date ",E.jsx("span",{className:"text-red-500",children:"*"})]}),E.jsx("input",{type:"date",value:n.endDate,onChange:L=>s({...n,endDate:L.target.value}),className:`input ${l.endDate?"border-red-500":""}`}),l.endDate&&E.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.endDate})]})]}),E.jsx(Za,{type:"submit",variant:"primary",icon:f?Pl:I0,disabled:f,className:"w-full",children:f?"Creating Trip...":"Create Trip"})]}),E.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:E.jsx("p",{className:"text-sm text-gray-600 text-center",children:" After creating, you'll receive a Trip ID to share with others"})})]})]})]})},UA=({onLogin:r,onCreateTrip:t})=>{const[n,s]=Ct.useState("splash");return n==="login"?E.jsx(kA,{onLogin:r,onBack:()=>s("splash")}):n==="create"?E.jsx(PA,{onCreateTrip:t,onBack:()=>s("splash")}):E.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-600 via-pink-500 to-orange-400 animate-gradient-xy"}),E.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"url(https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=1600)",backgroundSize:"cover",backgroundPosition:"center"}}),E.jsxs("div",{className:"relative z-10 max-w-2xl w-full",children:[E.jsxs("div",{className:"text-center mb-12 animate-fade-in",children:[E.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-white rounded-full shadow-2xl mb-6 transform hover:scale-110 transition duration-300",children:E.jsx(wA,{size:48,className:"text-purple-600"})}),E.jsx("h1",{className:"text-6xl font-bold text-white mb-4 drop-shadow-lg",children:"TripTogether"}),E.jsx("p",{className:"text-2xl text-white/90 drop-shadow",children:"Plan adventures with friends & family"})]}),E.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[E.jsx("button",{onClick:()=>s("login"),className:"group bg-white/95 backdrop-blur rounded-3xl p-8 shadow-2xl hover:shadow-purple-500/50 transform hover:scale-105 transition duration-300",children:E.jsxs("div",{className:"flex flex-col items-center text-center",children:[E.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mb-4 group-hover:rotate-12 transition duration-300",children:E.jsx(Kd,{size:32,className:"text-white"})}),E.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Join a Trip"}),E.jsx("p",{className:"text-gray-600",children:"Already have a trip ID? Sign in with Google to join your friends!"})]})}),E.jsx("button",{onClick:()=>s("create"),className:"group bg-white/95 backdrop-blur rounded-3xl p-8 shadow-2xl hover:shadow-orange-500/50 transform hover:scale-105 transition duration-300",children:E.jsxs("div",{className:"flex flex-col items-center text-center",children:[E.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-pink-500 rounded-2xl flex items-center justify-center mb-4 group-hover:rotate-12 transition duration-300",children:E.jsx(I0,{size:32,className:"text-white"})}),E.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create a Trip"}),E.jsx("p",{className:"text-gray-600",children:"Start planning a new adventure and invite others to join!"})]})})]}),E.jsx("div",{className:"mt-12 bg-white/10 backdrop-blur rounded-2xl p-6",children:E.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center text-white",children:[E.jsxs("div",{children:[E.jsx("div",{className:"text-3xl font-bold mb-1",children:""}),E.jsx("div",{className:"text-sm",children:"Collaborative Planning"})]}),E.jsxs("div",{children:[E.jsx("div",{className:"text-3xl font-bold mb-1",children:""}),E.jsx("div",{className:"text-sm",children:"Activity Management"})]}),E.jsxs("div",{children:[E.jsx("div",{className:"text-3xl font-bold mb-1",children:""}),E.jsx("div",{className:"text-sm",children:"Fun & Exciting"})]})]})})]}),E.jsx("style",{children:`
        @keyframes gradient-xy {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient-xy {
          animation: gradient-xy 15s ease infinite;
          background-size: 400% 400%;
        }
        @keyframes fade-in {
          from { opacity: 0; transform: translateY(-20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
          animation: fade-in 0.6s ease-out;
        }
      `})]})},LA=({trip:r,user:t,memberCount:n,onLogout:s})=>{const l=()=>{const c=new Date(r.startDate).toLocaleDateString("en-US",{month:"short",day:"numeric"}),f=new Date(r.endDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${c} - ${f}`};return E.jsx("div",{className:"relative bg-white/95 backdrop-blur shadow-lg",children:E.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("h1",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:r.name}),E.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-1 text-sm text-gray-600",children:[E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(Gi,{size:14}),E.jsx("span",{children:r.destination})]}),E.jsx("span",{className:"hidden sm:inline",children:""}),E.jsx("span",{children:l()}),E.jsx("span",{className:"hidden sm:inline",children:""}),E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(Ul,{size:14}),E.jsxs("span",{children:[n," members"]})]})]})]}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsxs("div",{className:"hidden md:flex items-center gap-2 px-4 py-2 bg-purple-50 rounded-lg",children:[E.jsx("img",{src:t.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(t.displayName)}`,alt:t.displayName,className:"w-8 h-8 rounded-full"}),E.jsx("span",{className:"text-sm font-medium text-gray-700",children:t.displayName})]}),E.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition",children:[E.jsx(bA,{size:18}),E.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})})})},jA=({currentView:r,onViewChange:t})=>{const n=[{id:"dashboard",label:"My Dashboard",icon:_A},{id:"browse",label:"Browse Activities",icon:Xd}];return E.jsx("div",{className:"relative max-w-7xl mx-auto px-4 py-4",children:E.jsxs("div",{className:"flex gap-2 flex-wrap",children:[n.map(s=>{const l=s.icon;return E.jsxs("button",{onClick:()=>t(s.id),className:`px-6 py-2 rounded-lg font-medium transition flex items-center gap-2 ${r===s.id?"bg-white text-purple-600 shadow-lg":"bg-white/80 text-gray-700 hover:bg-white"}`,children:[E.jsx(l,{size:18}),E.jsx("span",{className:"hidden sm:inline",children:s.label})]},s.id)}),E.jsxs("button",{onClick:()=>t("create"),className:"ml-auto px-6 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg font-medium hover:shadow-lg transform hover:scale-105 transition flex items-center gap-2",children:[E.jsx($d,{size:18}),E.jsx("span",{className:"hidden sm:inline",children:"Create Activity"})]})]})})},zA=r=>new Date(r).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),BA=r=>new Date(r).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),M0=r=>`${zA(r)} at ${BA(r)}`,Lc=r=>{try{return new URL(r),!0}catch{return!1}},Zd=(r,t="09:00")=>{if(!r)return"";if(r.includes("T"))return new Date(r).toISOString().substring(0,16);if(/^\d{4}-\d{2}-\d{2}$/.test(r))return`${r}T${t}`;try{return new Date(r).toISOString().substring(0,16)}catch{return""}},qA="modulepreload",HA=function(r){return"/"+r},X_={},Jd=function(t,n,s){let l=Promise.resolve();if(n&&n.length>0){let g=function(y){return Promise.all(y.map(b=>Promise.resolve(b).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=f?.nonce||f?.getAttribute("nonce");l=g(n.map(y=>{if(y=HA(y),y in X_)return;X_[y]=!0;const b=y.endsWith(".css"),w=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${w}`))return;const x=document.createElement("link");if(x.rel=b?"stylesheet":qA,b||(x.as="script"),x.crossOrigin="",x.href=y,p&&x.setAttribute("nonce",p),document.head.appendChild(x),b)return new Promise((L,W)=>{x.addEventListener("load",L),x.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${y}`)))})}))}function c(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return l.then(f=>{for(const p of f||[])p.status==="rejected"&&c(p.reason);return t().catch(c)})};function V0({html:r,className:t}){const[n,s]=Ct.useState("");return Ct.useEffect(()=>{let l=!0;if(!r){s("");return}return Jd(()=>import("./purify.es-aGzT-_H7.js"),[]).then(c=>{if(!l)return;const f=(c.default||c).sanitize;s(f(r,{ALLOWED_TAGS:["p","br","strong","em","u","a","ul","ol","li"]}))}).catch(()=>{const c=r.replace(/<script[\s\S]*?>[\s\S]*?<\/script>/gi,"");s(c)}),()=>{l=!1}},[r]),n?E.jsx("div",{className:t,dangerouslySetInnerHTML:{__html:n}}):null}const GA=({activity:r,currentUser:t,onToggleOptIn:n,onDeleteActivity:s,onEditActivity:l,canEdit:c})=>(r.optedInUsers.includes(t.id),E.jsx("div",{className:"border-2 border-gray-200 rounded-xl p-4 hover:border-purple-400 transition",children:E.jsxs("div",{className:"flex gap-4",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx("img",{src:r.thumbnailUrl,alt:r.name,className:"w-32 h-32 object-cover rounded-lg shadow-md",onError:f=>{f.target.src="https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?w=400"}})}),E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsxs("div",{className:"flex items-start justify-between gap-4",children:[E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsx("h5",{className:"text-xl font-bold text-gray-800 mb-1",children:r.name}),E.jsx("div",{className:"text-md text-black-600 mb-3",children:E.jsx(V0,{html:r.description??""})})]}),E.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[c&&E.jsx("button",{onClick:()=>{l(r.id)},className:"p-2 text-orange-900 hover:bg-red-50 rounded-lg transition",title:"Edit activity",children:E.jsx(NA,{size:18})}),c&&E.jsx("button",{onClick:()=>{confirm("Are you sure you want to delete this activity?")&&s(r.id)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition",title:"Delete activity",children:E.jsx(O0,{size:18})})]})]}),E.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600 mb-3",children:[E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(Xa,{size:16}),E.jsx("span",{children:M0(r.dateTime)})]}),E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(Gi,{size:16}),E.jsx("span",{className:"truncate",children:r.location})]}),E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(Ul,{size:16}),E.jsxs("span",{children:[r.optedInUsers.length," joined"]})]})]}),E.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:r.tags.map(f=>E.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-xs rounded-full font-medium",children:f},f))}),r.mapsLink&&E.jsxs("a",{href:r.mapsLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700 font-extra-large",children:[E.jsx(Gi,{size:14}),"View on Google Maps",E.jsx(N0,{size:12})]})]})]})})),FA=({activities:r,currentUser:t,onToggleOptIn:n,onDeleteActivity:s,onEditActivity:l,isOwner:c})=>{const f=r.filter(p=>p.optedInUsers.includes(t.id)).sort((p,g)=>new Date(p.dateTime).getTime()-new Date(g.dateTime).getTime());return E.jsx("div",{className:"relative max-w-7xl mx-auto px-4 pb-8",children:E.jsxs("div",{className:"bg-white/95 backdrop-blur rounded-2xl shadow-xl p-6",children:[E.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[E.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl",children:E.jsx(Xa,{className:"text-white",size:24})}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"My Activities"}),E.jsxs("p",{className:"text-lg text-gray-600",children:[f.length," ",f.length===1?"activity":"activities"," you're joining"]})]})]}),f.length===0?E.jsxs("div",{className:"text-center py-12",children:[E.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:E.jsx(Xa,{size:40,className:"text-gray-400"})}),E.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No activities yet"}),E.jsx("p",{className:"text-gray-500 mb-6",children:"Browse activities to join the fun!"})]}):E.jsx("div",{className:"grid gap-4",children:f.map(p=>E.jsx(GA,{activity:p,currentUser:t,onToggleOptIn:n,onDeleteActivity:s,onEditActivity:l,canEdit:p.creatorId===t.id||c},p.id))})]})})},QA=({activity:r,currentUser:t,onToggleOptIn:n,onDeleteActivity:s,canEdit:l})=>{const c=r.optedInUsers.includes(t.id);return E.jsx("div",{className:"border-2 border-gray-200 rounded-xl p-4 hover:border-purple-400 transition bg-white",children:E.jsxs("div",{className:"flex gap-4",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsx("img",{src:r.thumbnailUrl,alt:r.name,className:"w-40 h-40 object-cover rounded-lg shadow-md",onError:f=>{f.target.src="https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?w=400"}})}),E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:r.name}),E.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Created by ",r.creatorName]}),E.jsx(V0,{html:r.description??""})]}),E.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[E.jsx("button",{onClick:()=>n(r.id,!c),className:`px-4 py-2 rounded-lg font-medium transition flex items-center gap-2 ${c?"bg-green-500 text-white hover:bg-green-600":"bg-purple-500 text-white hover:bg-purple-600"}`,children:c?E.jsxs(E.Fragment,{children:[E.jsx(lA,{size:18}),"Joined"]}):E.jsxs(E.Fragment,{children:[E.jsx(Ul,{size:18}),"Join"]})}),l&&E.jsx("button",{onClick:()=>{confirm("Are you sure you want to delete this activity?")&&s(r.id)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition",title:"Delete activity",children:E.jsx(O0,{size:18})})]})]}),E.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600 mb-3",children:[E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(Xa,{size:16}),E.jsx("span",{children:M0(r.dateTime)})]}),E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(Gi,{size:16}),E.jsx("span",{className:"truncate",children:r.location})]}),E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(Ul,{size:16}),E.jsxs("span",{children:[r.optedInUsers.length," joined"]})]})]}),E.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:r.tags.map(f=>E.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-xs rounded-full font-medium",children:f},f))}),r.mapsLink&&E.jsxs("a",{href:r.mapsLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700",children:[E.jsx(Gi,{size:14}),"View on Google Maps",E.jsx(N0,{size:12})]})]})]})})},xm=["sightseeing","museum","concert","hike","shopping","food","art","culture","cruise","evening","romantic","adventure","landmark","beach","sports","family time","get together","nightlife"],YA=({filterDate:r,filterMember:t,filterTags:n,members:s,onFilterDateChange:l,onFilterMemberChange:c,onFilterTagsChange:f})=>{const p=b=>{n.includes(b)?f(n.filter(w=>w!==b)):f([...n,b])},g=()=>{l(""),c(""),f([])},y=r||t||n.length>0;return E.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-4 bg-gray-50",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(pA,{size:20,className:"text-gray-600"}),E.jsx("h3",{className:"font-semibold text-gray-800",children:"Filters"})]}),y&&E.jsxs("button",{onClick:g,className:"text-sm text-purple-600 hover:text-purple-700 font-medium flex items-center gap-1",children:[E.jsx(VA,{size:16}),"Clear all"]})]}),E.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Date"}),E.jsx("input",{type:"date",value:r,onChange:b=>l(b.target.value),className:"input"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Creator"}),E.jsxs("select",{value:t,onChange:b=>c(b.target.value),className:"input",children:[E.jsx("option",{value:"",children:"All members"}),s.map(b=>E.jsx("option",{value:b.id,children:b.displayName},b.id))]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Active Filters"}),E.jsxs("div",{className:"flex flex-wrap gap-2",children:[!y&&E.jsx("span",{className:"text-sm text-gray-500 italic",children:"No filters applied"}),r&&E.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-full",children:["Date: ",new Date(r).toLocaleDateString()]}),t&&E.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-sm rounded-full",children:s.find(b=>b.id===t)?.displayName})]})]})]}),E.jsxs("div",{className:"mt-4",children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Tags"}),E.jsx("div",{className:"flex flex-wrap gap-2",children:xm.map(b=>E.jsx("button",{onClick:()=>p(b),className:`px-4 py-2 rounded-lg text-sm font-medium transition ${n.includes(b)?"bg-purple-500 text-white":"bg-white text-gray-700 border-2 border-gray-200 hover:border-purple-300"}`,children:b},b))})]})]})},KA=({activities:r,currentUser:t,members:n,onToggleOptIn:s,onDeleteActivity:l,isOwner:c,filterDate:f,filterMember:p,filterTags:g,onFilterDateChange:y,onFilterMemberChange:b,onFilterTagsChange:w})=>{const x=r.filter(L=>!(f&&!L.dateTime.startsWith(f)||p&&L.creatorId!==p||g.length>0&&!g.some(W=>L.tags.includes(W))));return E.jsx("div",{className:"relative max-w-7xl mx-auto px-4 pb-8",children:E.jsxs("div",{className:"bg-white/95 backdrop-blur rounded-2xl shadow-xl p-6",children:[E.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[E.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-500 rounded-xl",children:E.jsx(Xd,{className:"text-white",size:24})}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Browse Activities"}),E.jsxs("p",{className:"text-sm text-gray-600",children:[x.length," ",x.length===1?"activity":"activities"," found"]})]})]}),E.jsx(YA,{filterDate:f,filterMember:p,filterTags:g,members:n,onFilterDateChange:y,onFilterMemberChange:b,onFilterTagsChange:w}),x.length===0?E.jsxs("div",{className:"text-center py-12",children:[E.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:E.jsx(Xd,{size:40,className:"text-gray-400"})}),E.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No activities found"}),E.jsx("p",{className:"text-gray-500",children:"Try adjusting your filters or create a new activity!"})]}):E.jsx("div",{className:"grid gap-4 mt-6",children:x.map(L=>E.jsx(QA,{activity:L,currentUser:t,onToggleOptIn:s,onDeleteActivity:l,canEdit:L.creatorId===t.id||c},L.id))})]})})};function k0({value:r,onChange:t,placeholder:n}){const s=Ct.useRef(null),l=Ct.useRef(null),[c,f]=Ct.useState(!1);return Ct.useEffect(()=>{let p=!0;return Promise.all([Jd(()=>import("./quill-Dk8zq1li.js"),[]),Jd(()=>Promise.resolve({}),__vite__mapDeps([0]))]).then(([g])=>{if(!p)return;const y=g&&(g.default||g);if(!s.current)return;const b=new y(s.current,{theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"]]}});b.root.innerHTML=r||"";const w=()=>{const x=b.root.innerHTML;t(x==="<p><br></p>"?"":x)};b.on("text-change",w),l.current={editor:b,handler:w},f(!0)}).catch(()=>{f(!1)}),()=>{if(p=!1,l.current){try{l.current.editor.off("text-change",l.current.handler)}catch{}l.current=null}}},[]),Ct.useEffect(()=>{const p=l.current;if(p&&p.editor){const g=p.editor.root.innerHTML;(r||"")!==g&&(p.editor.root.innerHTML=r||"")}},[r]),c?E.jsx("div",{ref:s}):E.jsx("textarea",{value:r,onChange:p=>t(p.target.value),placeholder:n,rows:4,className:"input resize-none"})}const $A=({onCreateActivity:r,onCancel:t,activeTrip:n})=>{const[s,l]=Ct.useState(!1),[c,f]=Ct.useState(null);if(!n)throw new Error("CreateActivity requires an activeTrip prop (Trip).");const[p,g]=Ct.useState({name:"",description:"",thumbnailUrl:"",mapsLink:"",dateTime:Zd(n.startDate),location:"",tags:[]});Rm.useEffect(()=>{g(X=>({...X,dateTime:Zd(n.startDate)}))},[n.startDate]);const[y,b]=Ct.useState({}),w=X=>{g(tt=>({...tt,tags:tt.tags.includes(X)?tt.tags.filter(nt=>nt!==X):[...tt.tags,X]}))},x=()=>{const X={};if(p.name.trim()||(X.name="Activity name is required"),p.dateTime||(X.dateTime="Date and time are required"),p.dateTime&&n){const tt=new Date(p.dateTime).getTime(),nt=new Date(n.startDate).getTime(),ft=new Date(n.endDate).getTime();n.name,tt>ft&&(X.dateTime=`Activity date is later than the end of this trip (${new Date(ft).toDateString()}).`),tt<nt&&(X.dateTime=`Activity date is earlier than the start of this trip (${new Date(nt).toDateString()}).`)}return p.location.trim()||(X.location="Location is required"),p.thumbnailUrl&&!Lc(p.thumbnailUrl)&&(X.thumbnailUrl="Please enter a valid image URL"),p.mapsLink&&!Lc(p.mapsLink)&&(X.mapsLink="Please enter a valid Google Maps URL"),b(X),Object.keys(X).length===0},L=X=>{if(X.preventDefault(),!x())return;(async()=>{l(!0),f(null);try{await Promise.resolve(r(p))}catch(nt){console.error("Create activity failed",nt),f(nt&&nt.message||"Failed to create activity.")}finally{l(!1)}})()},W=n.name.charAt(0).toUpperCase()+n.name.slice(1)+" ("+new Date(n.startDate).toDateString()+" - "+new Date(n.endDate).toDateString()+")";return E.jsx("div",{className:"relative max-w-4xl mx-auto px-4 pb-8",children:E.jsxs("div",{className:"bg-white/95 backdrop-blur rounded-2xl shadow-xl p-6",children:[E.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[E.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl",children:E.jsx($d,{className:"text-white",size:24})}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Create New Activity"}),E.jsxs("p",{className:"text-sm text-gray-600",children:["Add a new activity to trip ",W]})]})]}),c&&E.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-800 rounded-md",children:[E.jsx("strong",{className:"block font-medium",children:"Error"}),E.jsx("p",{className:"text-sm",children:c})]}),E.jsxs("form",{onSubmit:L,className:"space-y-6",children:[E.jsxs("div",{children:[E.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Activity Name ",E.jsx("span",{className:"text-red-500",children:"*"})]}),E.jsx("input",{type:"text",value:p.name,onChange:X=>g({...p,name:X.target.value}),placeholder:"e.g., EiffelTower Visit",className:`input ${y.name?"border-red-500":""}`}),y.name&&E.jsx("p",{className:"mt-1 text-sm text-red-500",children:y.name})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),E.jsx(k0,{value:p.description,onChange:X=>g({...p,description:X}),placeholder:"Describe the activity..."})]}),E.jsxs("div",{children:[E.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[E.jsx(C0,{size:16}),"Thumbnail Image URL"]}),E.jsx("input",{type:"url",value:p.thumbnailUrl,onChange:X=>g({...p,thumbnailUrl:X.target.value}),placeholder:"https://example.com/image.jpg",className:`input ${y.thumbnailUrl?"border-red-500":""}`}),y.thumbnailUrl&&E.jsx("p",{className:"mt-1 text-sm text-red-500",children:y.thumbnailUrl}),p.thumbnailUrl&&!y.thumbnailUrl&&E.jsx("div",{className:"mt-2",children:E.jsx("img",{src:p.thumbnailUrl,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg",onError:X=>{b({...y,thumbnailUrl:"Invalid image URL"})}})})]}),E.jsxs("div",{children:[E.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[E.jsx(Xa,{size:16}),"Date and Time ",E.jsx("span",{className:"text-red-500",children:"*"})]}),E.jsx("input",{type:"datetime-local",value:p.dateTime,onChange:X=>g({...p,dateTime:X.target.value}),className:`input ${y.dateTime?"border-red-500":""}`}),y.dateTime&&E.jsx("p",{className:"mt-1 text-sm text-red-500",children:y.dateTime})]}),E.jsxs("div",{children:[E.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[E.jsx(Gi,{size:16}),"Location ",E.jsx("span",{className:"text-red-500",children:"*"})]}),E.jsx("input",{type:"text",value:p.location,onChange:X=>g({...p,location:X.target.value}),placeholder:"e.g., Champ de Mars, Paris",className:`input ${y.location?"border-red-500":""}`}),y.location&&E.jsx("p",{className:"mt-1 text-sm text-red-500",children:y.location})]}),E.jsxs("div",{children:[E.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[E.jsx(Gi,{size:16}),"Google Maps Link"]}),E.jsx("input",{type:"url",value:p.mapsLink,onChange:X=>g({...p,mapsLink:X.target.value}),placeholder:"https://maps.google.com/?q=...",className:`input ${y.mapsLink?"border-red-500":""}`}),y.mapsLink&&E.jsx("p",{className:"mt-1 text-sm text-red-500",children:y.mapsLink}),E.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Paste a Google Maps link for easy navigation"})]}),E.jsxs("div",{children:[E.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[E.jsx(D0,{size:16}),"Tags"]}),E.jsx("div",{className:"flex flex-wrap gap-2",children:xm.map(X=>E.jsx("button",{type:"button",onClick:()=>w(X),className:`px-4 py-2 rounded-lg text-sm font-medium transition ${p.tags.includes(X)?"bg-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:X},X))})]}),E.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[E.jsx(Za,{type:"submit",variant:"success",icon:s?Pl:$d,className:"flex-1",disabled:s,children:s?"Creating...":"Create Activity"}),E.jsx(Za,{type:"button",variant:"secondary",onClick:t,className:"flex-1",children:"Cancel"})]})]})]})})},XA=({activity:r,onEditActivity:t,onCancel:n,activeTrip:s})=>{const[l,c]=Ct.useState(!1),[f,p]=Ct.useState(null);if(!s)throw new Error("EditActivity requires an activeTrip prop (Trip).");const[g,y]=Ct.useState(()=>({name:r?.name||"",description:r?.description||"",thumbnailUrl:r?.thumbnailUrl||"",mapsLink:r?.mapsLink||"",dateTime:r?.dateTime||"",location:r?.location||"",tags:r?.tags?[...r.tags]:[]})),[b,w]=Ct.useState({});Rm.useEffect(()=>{y({name:r?.name||"",description:r?.description||"",thumbnailUrl:r?.thumbnailUrl||"",mapsLink:r?.mapsLink||"",dateTime:r?.dateTime||Zd(s.startDate),location:r?.location||"",tags:r?.tags?[...r.tags]:[]})},[r]);const x=nt=>{y(ft=>({...ft,tags:ft.tags.includes(nt)?ft.tags.filter(ht=>ht!==nt):[...ft.tags,nt]}))},L=()=>{const nt={};if(g.name.trim()||(nt.name="Activity name is required"),g.dateTime||(nt.dateTime="Date and time are required"),g.dateTime&&s){const ft=new Date(g.dateTime).getTime(),ht=new Date(s.startDate).getTime(),jt=new Date(s.endDate).getTime();s.name,ft>jt&&(nt.dateTime=`Activity date is later than the end of this trip (${new Date(jt).toDateString()}).`),ft<ht&&(nt.dateTime=`Activity date is earlier than the start of this trip (${new Date(ht).toDateString()}).`)}return g.location.trim()||(nt.location="Location is required"),g.thumbnailUrl&&!Lc(g.thumbnailUrl)&&(nt.thumbnailUrl="Please enter a valid image URL"),g.mapsLink&&!Lc(g.mapsLink)&&(nt.mapsLink="Please enter a valid Google Maps URL"),w(nt),Object.keys(nt).length===0},W=nt=>{if(nt.preventDefault(),!L())return;(async()=>{c(!0),p(null);try{await Promise.resolve(t(r.id,g))}catch(ht){console.error("Edit activity failed",ht),p(ht&&ht.message||"Failed to edit activity.")}finally{c(!1)}})()},X=s.name.charAt(0).toUpperCase()+s.name.slice(1)+" ("+new Date(s.startDate).toDateString()+" - "+new Date(s.endDate).toDateString()+")",tt=g.name?`"${g.name}"`:"this activity";return E.jsx("div",{className:"relative max-w-4xl mx-auto px-4 pb-8",children:E.jsxs("div",{className:"bg-white/95 backdrop-blur rounded-2xl shadow-xl p-6",children:[E.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[E.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl",children:E.jsx($_,{className:"text-white",size:24})}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Activity"}),E.jsxs("p",{className:"text-sm text-gray-600",children:["Change activity details for ",tt," (",X,")"]})]})]}),f&&E.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-800 rounded-md",children:[E.jsx("strong",{className:"block font-medium",children:"Error"}),E.jsx("p",{className:"text-sm",children:f})]}),E.jsxs("form",{onSubmit:W,className:"space-y-6",children:[E.jsxs("div",{children:[E.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Activity Name ",E.jsx("span",{className:"text-red-500",children:"*"})]}),E.jsx("input",{type:"text",value:g.name,onChange:nt=>y({...g,name:nt.target.value}),placeholder:"e.g., EiffelTower Visit",className:`input ${b.name?"border-red-500":""}`}),b.name&&E.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.name})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),E.jsx(k0,{value:g.description,onChange:nt=>y({...g,description:nt}),placeholder:"Describe the activity..."})]}),E.jsxs("div",{children:[E.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[E.jsx(C0,{size:16}),"Thumbnail Image URL"]}),E.jsx("input",{type:"url",value:g.thumbnailUrl,onChange:nt=>y({...g,thumbnailUrl:nt.target.value}),placeholder:"https://example.com/image.jpg",className:`input ${b.thumbnailUrl?"border-red-500":""}`}),b.thumbnailUrl&&E.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.thumbnailUrl}),g.thumbnailUrl&&!b.thumbnailUrl&&E.jsx("div",{className:"mt-2",children:E.jsx("img",{src:g.thumbnailUrl,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg",onError:nt=>{w({...b,thumbnailUrl:"Invalid image URL"})}})})]}),E.jsxs("div",{children:[E.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[E.jsx(Xa,{size:16}),"Date and Time ",E.jsx("span",{className:"text-red-500",children:"*"})]}),E.jsx("input",{type:"datetime-local",value:g.dateTime,onChange:nt=>y({...g,dateTime:nt.target.value}),className:`input ${b.dateTime?"border-red-500":""}`}),b.dateTime&&E.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.dateTime})]}),E.jsxs("div",{children:[E.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[E.jsx(Gi,{size:16}),"Location ",E.jsx("span",{className:"text-red-500",children:"*"})]}),E.jsx("input",{type:"text",value:g.location,onChange:nt=>y({...g,location:nt.target.value}),placeholder:"e.g., Champ de Mars, Paris",className:`input ${b.location?"border-red-500":""}`}),b.location&&E.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.location})]}),E.jsxs("div",{children:[E.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[E.jsx(Gi,{size:16}),"Google Maps Link"]}),E.jsx("input",{type:"url",value:g.mapsLink,onChange:nt=>y({...g,mapsLink:nt.target.value}),placeholder:"https://maps.google.com/?q=...",className:`input ${b.mapsLink?"border-red-500":""}`}),b.mapsLink&&E.jsx("p",{className:"mt-1 text-sm text-red-500",children:b.mapsLink}),E.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Paste a Google Maps link for easy navigation"})]}),E.jsxs("div",{children:[E.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[E.jsx(D0,{size:16}),"Tags"]}),E.jsx("div",{className:"flex flex-wrap gap-2",children:xm.map(nt=>E.jsx("button",{type:"button",onClick:()=>x(nt),className:`px-4 py-2 rounded-lg text-sm font-medium transition ${g.tags.includes(nt)?"bg-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:nt},nt))})]}),E.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[E.jsx(Za,{type:"submit",variant:"success",icon:l?Pl:$_,className:"flex-1",disabled:l,children:l?"Updating...":"Update Activity"}),E.jsx(Za,{type:"button",variant:"secondary",onClick:n,className:"flex-1",children:"Cancel"})]})]})]})})},ZA=({members:r,ownerId:t,currentUserId:n})=>E.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[E.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[E.jsx(Ul,{size:20,className:"text-purple-600"}),E.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Trip Members"}),E.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[r.length," members"]})]}),E.jsx("div",{className:"space-y-3",children:r.map(s=>E.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition",children:[E.jsx("img",{src:s.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(s.displayName)}`,alt:s.displayName,className:"w-10 h-10 rounded-full"}),E.jsxs("div",{className:"flex-1",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("p",{className:"font-medium text-gray-800",children:s.displayName}),s.id===t&&E.jsx(hA,{size:16,className:"text-yellow-500",title:"Trip Owner"}),s.id===n&&E.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:"You"})]}),E.jsx("p",{className:"text-sm text-gray-500",children:s.email})]})]},s.id))})]}),JA=()=>{};var Z_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},WA=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];t[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],f=r[n++],p=r[n++],g=((l&7)<<18|(c&63)<<12|(f&63)<<6|p&63)-65536;t[s++]=String.fromCharCode(55296+(g>>10)),t[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[n++],f=r[n++];t[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return t.join("")},U0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],f=l+1<r.length,p=f?r[l+1]:0,g=l+2<r.length,y=g?r[l+2]:0,b=c>>2,w=(c&3)<<4|p>>4;let x=(p&15)<<2|y>>6,L=y&63;g||(L=64,f||(x=64)),s.push(n[b],n[w],n[x],n[L])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(P0(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):WA(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],p=l<r.length?n[r.charAt(l)]:0;++l;const y=l<r.length?n[r.charAt(l)]:64;++l;const w=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||p==null||y==null||w==null)throw new tS;const x=c<<2|p>>4;if(s.push(x),y!==64){const L=p<<4&240|y>>2;if(s.push(L),w!==64){const W=y<<6&192|w;s.push(W)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class tS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eS=function(r){const t=P0(r);return U0.encodeByteArray(t,!0)},jc=function(r){return eS(r).replace(/\./g,"")},L0=function(r){try{return U0.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=()=>nS().__FIREBASE_DEFAULTS__,rS=()=>{if(typeof process>"u"||typeof Z_>"u")return;const r=Z_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},sS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&L0(r[1]);return t&&JSON.parse(t)},rh=()=>{try{return JA()||iS()||rS()||sS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},j0=r=>rh()?.emulatorHosts?.[r],aS=r=>{const t=j0(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},z0=()=>rh()?.config,B0=r=>rh()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function q0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[jc(JSON.stringify(n)),jc(JSON.stringify(f)),""].join(".")}const Cl={};function uS(){const r={prod:[],emulator:[]};for(const t of Object.keys(Cl))Cl[t]?r.emulator.push(t):r.prod.push(t);return r}function cS(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let J_=!1;function H0(r,t){if(typeof window>"u"||typeof document>"u"||!lo(window.location.host)||Cl[r]===t||Cl[r]||J_)return;Cl[r]=t;function n(x){return`__firebase__banner__${x}`}const s="__firebase__banner",c=uS().prod.length>0;function f(){const x=document.getElementById(s);x&&x.remove()}function p(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function g(x,L){x.setAttribute("width","24"),x.setAttribute("id",L),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function y(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{J_=!0,f()},x}function b(x,L){x.setAttribute("id",L),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function w(){const x=cS(s),L=n("text"),W=document.getElementById(L)||document.createElement("span"),X=n("learnmore"),tt=document.getElementById(X)||document.createElement("a"),nt=n("preprendIcon"),ft=document.getElementById(nt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const ht=x.element;p(ht),b(tt,X);const jt=y();g(ft,nt),ht.append(ft,W,tt,jt),document.body.appendChild(ht)}c?(W.innerText="Preview backend disconnected.",ft.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ft.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function fS(){const r=rh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function pS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gS(){const r=Je();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function yS(){return!fS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _S(){try{return typeof indexedDB=="object"}catch{return!1}}function vS(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="FirebaseError";class Xi extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=ES,Object.setPrototypeOf(this,Xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fl.prototype.create)}}class Fl{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},l=`${this.service}/${t}`,c=this.errors[t],f=c?TS(c,s):"Error",p=`${this.serviceName}: ${f} (${l}).`;return new Xi(l,p,s)}}function TS(r,t){return r.replace(bS,(n,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const bS=/\{\$([^}]+)}/g;function AS(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Fi(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const l of n){if(!s.includes(l))return!1;const c=r[l],f=t[l];if(W_(c)&&W_(f)){if(!Fi(c,f))return!1}else if(c!==f)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function W_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function SS(r,t){const n=new wS(r,t);return n.subscribe.bind(n)}class wS{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let l;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");RS(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:s},l.next===void 0&&(l.next=kd),l.error===void 0&&(l.error=kd),l.complete===void 0&&(l.complete=kd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RS(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function kd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(r){return r&&r._delegate?r._delegate:r}class Bs{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new oS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(NS(t))try{this.getOrInitializeService({instanceIdentifier:Ps})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(t=Ps){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ps){return this.instances.has(t)}getOptions(t=Ps){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);s===p&&f.resolve(l)}return l}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&t(c,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:IS(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Ps){return this.component?this.component.multipleInstances?t:Ps:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IS(r){return r===Ps?void 0:r}function NS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new xS(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Pt||(Pt={}));const DS={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},OS=Pt.INFO,MS={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},VS=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=MS[t];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Im{constructor(t){this.name=t,this._logLevel=OS,this._logHandler=VS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?DS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}const kS=(r,t)=>t.some(n=>r instanceof n);let tv,ev;function PS(){return tv||(tv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function US(){return ev||(ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const G0=new WeakMap,Wd=new WeakMap,F0=new WeakMap,Pd=new WeakMap,Nm=new WeakMap;function LS(r){const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",f)},c=()=>{n(jr(r.result)),l()},f=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",f)});return t.then(n=>{n instanceof IDBCursor&&G0.set(n,r)}).catch(()=>{}),Nm.set(t,r),t}function jS(r){if(Wd.has(r))return;const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",f),r.removeEventListener("abort",f)},c=()=>{n(),l()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",f),r.addEventListener("abort",f)});Wd.set(r,t)}let tm={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return Wd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||F0.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jr(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function zS(r){tm=r(tm)}function BS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(Ud(this),t,...n);return F0.set(s,t.sort?t.sort():[t]),jr(s)}:US().includes(r)?function(...t){return r.apply(Ud(this),t),jr(G0.get(this))}:function(...t){return jr(r.apply(Ud(this),t))}}function qS(r){return typeof r=="function"?BS(r):(r instanceof IDBTransaction&&jS(r),kS(r,PS())?new Proxy(r,tm):r)}function jr(r){if(r instanceof IDBRequest)return LS(r);if(Pd.has(r))return Pd.get(r);const t=qS(r);return t!==r&&(Pd.set(r,t),Nm.set(t,r)),t}const Ud=r=>Nm.get(r);function HS(r,t,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const f=indexedDB.open(r,t),p=jr(f);return s&&f.addEventListener("upgradeneeded",g=>{s(jr(f.result),g.oldVersion,g.newVersion,jr(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const GS=["get","getKey","getAll","getAllKeys","count"],FS=["put","add","delete","clear"],Ld=new Map;function nv(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Ld.get(t))return Ld.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=FS.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||GS.includes(n)))return;const c=async function(f,...p){const g=this.transaction(f,l?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return Ld.set(t,c),c}zS(r=>({...r,get:(t,n,s)=>nv(t,n)||r.get(t,n,s),has:(t,n)=>!!nv(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YS(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function YS(r){return r.getComponent()?.type==="VERSION"}const em="@firebase/app",iv="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new Im("@firebase/app"),KS="@firebase/app-compat",$S="@firebase/analytics-compat",XS="@firebase/analytics",ZS="@firebase/app-check-compat",JS="@firebase/app-check",WS="@firebase/auth",tw="@firebase/auth-compat",ew="@firebase/database",nw="@firebase/data-connect",iw="@firebase/database-compat",rw="@firebase/functions",sw="@firebase/functions-compat",aw="@firebase/installations",ow="@firebase/installations-compat",lw="@firebase/messaging",uw="@firebase/messaging-compat",cw="@firebase/performance",hw="@firebase/performance-compat",fw="@firebase/remote-config",dw="@firebase/remote-config-compat",mw="@firebase/storage",pw="@firebase/storage-compat",gw="@firebase/firestore",yw="@firebase/ai",_w="@firebase/firestore-compat",vw="firebase",Ew="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="[DEFAULT]",Tw={[em]:"fire-core",[KS]:"fire-core-compat",[XS]:"fire-analytics",[$S]:"fire-analytics-compat",[JS]:"fire-app-check",[ZS]:"fire-app-check-compat",[WS]:"fire-auth",[tw]:"fire-auth-compat",[ew]:"fire-rtdb",[nw]:"fire-data-connect",[iw]:"fire-rtdb-compat",[rw]:"fire-fn",[sw]:"fire-fn-compat",[aw]:"fire-iid",[ow]:"fire-iid-compat",[lw]:"fire-fcm",[uw]:"fire-fcm-compat",[cw]:"fire-perf",[hw]:"fire-perf-compat",[fw]:"fire-rc",[dw]:"fire-rc-compat",[mw]:"fire-gcs",[pw]:"fire-gcs-compat",[gw]:"fire-fst",[_w]:"fire-fst-compat",[yw]:"fire-vertex","fire-js":"fire-js",[vw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=new Map,bw=new Map,im=new Map;function rv(r,t){try{r.container.addComponent(t)}catch(n){Qi.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function Ja(r){const t=r.name;if(im.has(t))return Qi.debug(`There were multiple attempts to register component ${t}.`),!1;im.set(t,r);for(const n of zc.values())rv(n,r);for(const n of bw.values())rv(n,r);return!0}function Cm(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function Fn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zr=new Fl("app","Firebase",Aw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=Ew;function Q0(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:nm,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw zr.create("bad-app-name",{appName:String(l)});if(n||(n=z0()),!n)throw zr.create("no-options");const c=zc.get(l);if(c){if(Fi(n,c.options)&&Fi(s,c.config))return c;throw zr.create("duplicate-app",{appName:l})}const f=new CS(l);for(const g of im.values())f.addComponent(g);const p=new Sw(n,s,f);return zc.set(l,p),p}function Y0(r=nm){const t=zc.get(r);if(!t&&r===nm&&z0())return Q0();if(!t)throw zr.create("no-app",{appName:r});return t}function Br(r,t,n){let s=Tw[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const f=[`Unable to register library "${s}" with version "${t}":`];l&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Qi.warn(f.join(" "));return}Ja(new Bs(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="firebase-heartbeat-database",Rw=1,Ll="firebase-heartbeat-store";let jd=null;function K0(){return jd||(jd=HS(ww,Rw,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Ll)}catch(n){console.warn(n)}}}}).catch(r=>{throw zr.create("idb-open",{originalErrorMessage:r.message})})),jd}async function xw(r){try{const n=(await K0()).transaction(Ll),s=await n.objectStore(Ll).get($0(r));return await n.done,s}catch(t){if(t instanceof Xi)Qi.warn(t.message);else{const n=zr.create("idb-get",{originalErrorMessage:t?.message});Qi.warn(n.message)}}}async function sv(r,t){try{const s=(await K0()).transaction(Ll,"readwrite");await s.objectStore(Ll).put(t,$0(r)),await s.done}catch(n){if(n instanceof Xi)Qi.warn(n.message);else{const s=zr.create("idb-set",{originalErrorMessage:n?.message});Qi.warn(s.message)}}}function $0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=1024,Nw=30;class Cw{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ow(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=av();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>Nw){const l=Mw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Qi.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=av(),{heartbeatsToSend:n,unsentEntries:s}=Dw(this._heartbeatsCache.heartbeats),l=jc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Qi.warn(t),""}}}function av(){return new Date().toISOString().substring(0,10)}function Dw(r,t=Iw){const n=[];let s=r.slice();for(const l of r){const c=n.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),ov(n)>t){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),ov(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Ow{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _S()?vS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xw(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return sv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return sv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function ov(r){return jc(JSON.stringify({version:2,heartbeats:r})).length}function Mw(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(r){Ja(new Bs("platform-logger",t=>new QS(t),"PRIVATE")),Ja(new Bs("heartbeat",t=>new Cw(t),"PRIVATE")),Br(em,iv,r),Br(em,iv,"esm2020"),Br("fire-js","")}Vw("");function X0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kw=X0,Z0=new Fl("auth","Firebase",X0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new Im("@firebase/auth");function Pw(r,...t){Bc.logLevel<=Pt.WARN&&Bc.warn(`Auth (${uo}): ${r}`,...t)}function Ic(r,...t){Bc.logLevel<=Pt.ERROR&&Bc.error(`Auth (${uo}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(r,...t){throw Om(r,...t)}function Yn(r,...t){return Om(r,...t)}function Dm(r,t,n){const s={...kw(),[t]:n};return new Fl("auth","Firebase",s).create(t,{appName:r.name})}function js(r){return Dm(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Uw(r,t,n){const s=n;if(!(t instanceof s))throw s.name!==t.constructor.name&&gi(r,"argument-error"),Dm(r,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Om(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return Z0.create(r,...t)}function bt(r,t,...n){if(!r)throw Om(t,...n)}function Bi(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Ic(t),new Error(t)}function Yi(r,t){r||Bi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(){return typeof self<"u"&&self.location?.href||""}function Lw(){return lv()==="http:"||lv()==="https:"}function lv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Lw()||mS()||"connection"in navigator)?navigator.onLine:!0}function zw(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(t,n){this.shortDelay=t,this.longDelay=n,Yi(n>t,"Short delay should be less than long delay!"),this.isMobile=hS()||pS()}get(){return jw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(r,t){Yi(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Hw=new Yl(3e4,6e4);function Vm(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function co(r,t,n,s,l={}){return W0(r,l,async()=>{let c={},f={};s&&(t==="GET"?f=s:c={body:JSON.stringify(s)});const p=Ql({key:r.config.apiKey,...f}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:t,headers:g,...c};return dS()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&lo(r.emulatorConfig.host)&&(y.credentials="include"),J0.fetch()(await tE(r,r.config.apiHost,n,p),y)})}async function W0(r,t,n){r._canInitEmulator=!1;const s={...Bw,...t};try{const l=new Fw(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw bc(r,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const p=c.ok?f.errorMessage:f.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw bc(r,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw bc(r,"email-already-in-use",f);if(g==="USER_DISABLED")throw bc(r,"user-disabled",f);const b=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Dm(r,b,y);gi(r,b)}}catch(l){if(l instanceof Xi)throw l;gi(r,"network-request-failed",{message:String(l)})}}async function Gw(r,t,n,s,l={}){const c=await co(r,t,n,s,l);return"mfaPendingCredential"in c&&gi(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function tE(r,t,n,s){const l=`${t}${n}?${s}`,c=r,f=c.config.emulator?Mm(r.config,l):`${r.config.apiScheme}://${l}`;return qw.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}class Fw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Yn(this.auth,"network-request-failed")),Hw.get())})}}function bc(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=Yn(r,t,s);return l.customData._tokenResponse=n,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qw(r,t){return co(r,"POST","/v1/accounts:delete",t)}async function qc(r,t){return co(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Yw(r,t=!1){const n=He(r),s=await n.getIdToken(t),l=km(s);bt(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,f=c?.sign_in_provider;return{claims:l,token:s,authTime:Dl(zd(l.auth_time)),issuedAtTime:Dl(zd(l.iat)),expirationTime:Dl(zd(l.exp)),signInProvider:f||null,signInSecondFactor:c?.sign_in_second_factor||null}}function zd(r){return Number(r)*1e3}function km(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return Ic("JWT malformed, contained fewer than 3 sections"),null;try{const l=L0(n);return l?JSON.parse(l):(Ic("Failed to decode base64 JWT payload"),null)}catch(l){return Ic("Caught error parsing JWT payload as JSON",l?.toString()),null}}function uv(r){const t=km(r);return bt(t,"internal-error"),bt(typeof t.exp<"u","internal-error"),bt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Xi&&Kw(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Kw({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dl(this.lastLoginAt),this.creationTime=Dl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hc(r){const t=r.auth,n=await r.getIdToken(),s=await jl(r,qc(t,{idToken:n}));bt(s?.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?eE(l.providerUserInfo):[],f=Zw(r.providerData,c),p=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!f?.length,y=p?g:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new sm(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(r,b)}async function Xw(r){const t=He(r);await Hc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Zw(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function eE(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jw(r,t){const n=await W0(r,{},async()=>{const s=Ql({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,f=await tE(r,l,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&lo(r.emulatorConfig.host)&&(g.credentials="include"),J0.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ww(r,t){return co(r,"POST","/v2/accounts:revokeToken",Vm(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){bt(t.idToken,"internal-error"),bt(typeof t.idToken<"u","internal-error"),bt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):uv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){bt(t.length!==0,"internal-error");const n=uv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(bt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await Jw(t,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,f=new Fa;return s&&(bt(typeof s=="string","internal-error",{appName:t}),f.refreshToken=s),l&&(bt(typeof l=="string","internal-error",{appName:t}),f.accessToken=l),c&&(bt(typeof c=="number","internal-error",{appName:t}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Fa,this.toJSON())}_performRefresh(){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(r,t){bt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Qn{constructor({uid:t,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new $w(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new sm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await jl(this,this.stsTokenManager.getToken(this.auth,t));return bt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Yw(this,t)}reload(){return Xw(this)}_assign(t){this!==t&&(bt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Qn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Hc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fn(this.auth.app))return Promise.reject(js(this.auth));const t=await this.getIdToken();return await jl(this,Qw(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,f=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:w,emailVerified:x,isAnonymous:L,providerData:W,stsTokenManager:X}=n;bt(w&&X,t,"internal-error");const tt=Fa.fromJSON(this.name,X);bt(typeof w=="string",t,"internal-error"),Vr(s,t.name),Vr(l,t.name),bt(typeof x=="boolean",t,"internal-error"),bt(typeof L=="boolean",t,"internal-error"),Vr(c,t.name),Vr(f,t.name),Vr(p,t.name),Vr(g,t.name),Vr(y,t.name),Vr(b,t.name);const nt=new Qn({uid:w,auth:t,email:l,emailVerified:x,displayName:s,isAnonymous:L,photoURL:f,phoneNumber:c,tenantId:p,stsTokenManager:tt,createdAt:y,lastLoginAt:b});return W&&Array.isArray(W)&&(nt.providerData=W.map(ft=>({...ft}))),g&&(nt._redirectEventId=g),nt}static async _fromIdTokenResponse(t,n,s=!1){const l=new Fa;l.updateFromServerResponse(n);const c=new Qn({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await Hc(c),c}static async _fromGetAccountInfoResponse(t,n,s){const l=n.users[0];bt(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?eE(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!c?.length,p=new Fa;p.updateFromIdToken(s);const g=new Qn({uid:l.localId,auth:t,stsTokenManager:p,isAnonymous:f}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new sm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=new Map;function qi(r){Yi(r instanceof Function,"Expected a class definition");let t=cv.get(r);return t?(Yi(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,cv.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}nE.type="NONE";const hv=nE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(r,t,n){return`firebase:${r}:${t}:${n}`}class Qa{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Nc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Nc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await qc(this.auth,{idToken:t}).catch(()=>{});return n?Qn._fromGetAccountInfoResponse(this.auth,n,t):null}return Qn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Qa(qi(hv),t,s);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||qi(hv);const f=Nc(s,t.config.apiKey,t.name);let p=null;for(const y of n)try{const b=await y._get(f);if(b){let w;if(typeof b=="string"){const x=await qc(t,{idToken:b}).catch(()=>{});if(!x)break;w=await Qn._fromGetAccountInfoResponse(t,x,b)}else w=Qn._fromJSON(t,b);y!==c&&(p=w),c=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Qa(c,t,s):(c=g[0],p&&await c._set(f,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(f)}catch{}})),new Qa(c,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(aE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(iE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(lE(t))return"Blackberry";if(uE(t))return"Webos";if(rE(t))return"Safari";if((t.includes("chrome/")||sE(t))&&!t.includes("edge/"))return"Chrome";if(oE(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function iE(r=Je()){return/firefox\//i.test(r)}function rE(r=Je()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function sE(r=Je()){return/crios\//i.test(r)}function aE(r=Je()){return/iemobile/i.test(r)}function oE(r=Je()){return/android/i.test(r)}function lE(r=Je()){return/blackberry/i.test(r)}function uE(r=Je()){return/webos/i.test(r)}function Pm(r=Je()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function tR(r=Je()){return Pm(r)&&!!window.navigator?.standalone}function eR(){return gS()&&document.documentMode===10}function cE(r=Je()){return Pm(r)||oE(r)||uE(r)||lE(r)||/windows phone/i.test(r)||aE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(r,t=[]){let n;switch(r){case"Browser":n=fv(Je());break;case"Worker":n=`${fv(Je())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${uo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=c=>new Promise((f,p)=>{try{const g=t(c);f(g)}catch(g){p(g)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(r,t={}){return co(r,"GET","/v2/passwordPolicy",Vm(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=6;class sR{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(t,n,s,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dv(this),this.idTokenSubscription=new dv(this),this.beforeStateQueue=new nR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Z0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=qi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Qa.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await qc(this,{idToken:t}),s=await Qn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Fn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,f=s?._redirectEventId,p=await this.tryRedirectSignIn(t);(!c||c===f)&&p?.user&&(s=p.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Hc(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=zw()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Fn(this.app))return Promise.reject(js(this));const n=t?He(t):null;return n&&bt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&bt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Fn(this.app)?Promise.reject(js(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Fn(this.app)?Promise.reject(js(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await iR(this),n=new sR(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Fl("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Ww(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&qi(t)||this._popupRedirectResolver;bt(n,this,"argument-error"),this.redirectPersistenceManager=await Qa.create(this,[qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(bt(p,this,"internal-error"),p.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,s,l);return()=>{f=!0,g()}}else{const g=t.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=hE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(Fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&Pw(`Error while retrieving App Check token: ${t.error}`),t?.token}}function sh(r){return He(r)}class dv{constructor(t){this.auth=t,this.observer=null,this.addObserver=SS(n=>this.observer=n)}get next(){return bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Um={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oR(r){Um=r}function lR(r){return Um.loadJS(r)}function uR(){return Um.gapiScript}function cR(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(r,t){const n=Cm(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Fi(c,t??{}))return l;gi(l,"already-initialized")}return n.initialize({options:t})}function fR(r,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(qi);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function dR(r,t,n){const s=sh(r);bt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,c=fE(t),{host:f,port:p}=mR(t),g=p===null?"":`:${p}`,y={url:`${c}//${f}${g}/`},b=Object.freeze({host:f,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){bt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),bt(Fi(y,s.config.emulator)&&Fi(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,lo(f)?(q0(`${c}//${f}${g}`),H0("Auth",!0)):pR()}function fE(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function mR(r){const t=fE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:mv(s.substr(c.length+1))}}else{const[c,f]=s.split(":");return{host:c,port:mv(f)}}}function mv(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function pR(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Bi("not implemented")}_getIdTokenResponse(t){return Bi("not implemented")}_linkToIdToken(t,n){return Bi("not implemented")}_getReauthenticationResolver(t){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(r,t){return Gw(r,"POST","/v1/accounts:signInWithIdp",Vm(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="http://localhost";class qs extends dE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new qs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):gi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l,...c}=n;if(!s||!l)return null;const f=new qs(s,l);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(t){const n=this.buildRequest();return Ya(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Ya(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ya(t,n)}buildRequest(){const t={requestUri:gR,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Ql(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends Lm{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Kl{constructor(){super("facebook.com")}static credential(t){return qs._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return kr.credentialFromTaggedObject(t)}static credentialFromError(t){return kr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return kr.credential(t.oauthAccessToken)}catch{return null}}}kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Kl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return qs._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return zi.credentialFromTaggedObject(t)}static credentialFromError(t){return zi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return zi.credential(n,s)}catch{return null}}}zi.GOOGLE_SIGN_IN_METHOD="google.com";zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Kl{constructor(){super("github.com")}static credential(t){return qs._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Pr.credentialFromTaggedObject(t)}static credentialFromError(t){return Pr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Pr.credential(t.oauthAccessToken)}catch{return null}}}Pr.GITHUB_SIGN_IN_METHOD="github.com";Pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends Kl{constructor(){super("twitter.com")}static credential(t,n){return qs._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ur.credentialFromTaggedObject(t)}static credentialFromError(t){return Ur.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Ur.credential(n,s)}catch{return null}}}Ur.TWITTER_SIGN_IN_METHOD="twitter.com";Ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,l=!1){const c=await Qn._fromIdTokenResponse(t,s,l),f=pv(s);return new Wa({user:c,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const l=pv(s);return new Wa({user:t,providerId:l,_tokenResponse:s,operationType:n})}}function pv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends Xi{constructor(t,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Gc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,l){return new Gc(t,n,s,l)}}function mE(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Gc._fromErrorAndOperation(r,c,t,s):c})}async function yR(r,t,n=!1){const s=await jl(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return Wa._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(r,t,n=!1){const{auth:s}=r;if(Fn(s.app))return Promise.reject(js(s));const l="reauthenticate";try{const c=await jl(r,mE(s,l,t,r),n);bt(c.idToken,s,"internal-error");const f=km(c.idToken);bt(f,s,"internal-error");const{sub:p}=f;return bt(r.uid===p,s,"user-mismatch"),Wa._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&gi(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(r,t,n=!1){if(Fn(r.app))return Promise.reject(js(r));const s="signIn",l=await mE(r,s,t),c=await Wa._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}function ER(r,t,n,s){return He(r).onIdTokenChanged(t,n,s)}function TR(r,t,n){return He(r).beforeAuthStateChanged(t,n)}function bR(r,t,n,s){return He(r).onAuthStateChanged(t,n,s)}function AR(r){return He(r).signOut()}const Fc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fc,"1"),this.storage.removeItem(Fc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=1e3,wR=10;class gE extends pE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&t(n,l,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((f,p,g)=>{this.notifyListeners(f,g)});return}const s=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},c=this.storage.getItem(s);eR()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,wR):l()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},SR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}gE.type="LOCAL";const RR=gE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE extends pE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}yE.type="SESSION";const _E=yE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const s=new ah(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:l,data:c}=n.data,f=this.handlersMap[l];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const p=Array.from(f).map(async y=>y(n.origin,c)),g=await xR(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ah.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,f;return new Promise((p,g)=>{const y=jm("",20);l.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},s);f={messageChannel:l,onMessage(w){const x=w;if(x.data.eventId===y)switch(x.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(x.data.response);break;default:clearTimeout(b),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:y,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(){return window}function NR(r){hi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(){return typeof hi().WorkerGlobalScope<"u"&&typeof hi().importScripts=="function"}async function CR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DR(){return navigator?.serviceWorker?.controller||null}function OR(){return vE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="firebaseLocalStorageDb",MR=1,Qc="firebaseLocalStorage",TE="fbase_key";class $l{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function oh(r,t){return r.transaction([Qc],t?"readwrite":"readonly").objectStore(Qc)}function VR(){const r=indexedDB.deleteDatabase(EE);return new $l(r).toPromise()}function am(){const r=indexedDB.open(EE,MR);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Qc,{keyPath:TE})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Qc)?t(s):(s.close(),await VR(),t(await am()))})})}async function gv(r,t,n){const s=oh(r,!0).put({[TE]:t,value:n});return new $l(s).toPromise()}async function kR(r,t){const n=oh(r,!1).get(t),s=await new $l(n).toPromise();return s===void 0?null:s.value}function yv(r,t){const n=oh(r,!0).delete(t);return new $l(n).toPromise()}const PR=800,UR=3;class bE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await am(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>UR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ah._getInstance(OR()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await CR(),!this.activeServiceWorker)return;this.sender=new IR(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||DR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await am();return await gv(t,Fc,"1"),await yv(t,Fc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>gv(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>kR(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>yv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=oh(l,!1).getAll();return new $l(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bE.type="LOCAL";const LR=bE;new Yl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(r,t){return t?qi(t):(bt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm extends dE{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ya(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ya(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ya(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function jR(r){return vR(r.auth,new zm(r),r.bypassAuthState)}function zR(r){const{auth:t,user:n}=r;return bt(n,t,"internal-error"),_R(n,new zm(r),r.bypassAuthState)}async function BR(r){const{auth:t,user:n}=r;return bt(n,t,"internal-error"),yR(n,new zm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(t,n,s,l,c=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:f,type:p}=t;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return jR;case"linkViaPopup":case"linkViaRedirect":return BR;case"reauthViaPopup":case"reauthViaRedirect":return zR;default:gi(this.auth,"internal-error")}}resolve(t){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=new Yl(2e3,1e4);async function HR(r,t,n){if(Fn(r.app))return Promise.reject(Yn(r,"operation-not-supported-in-this-environment"));const s=sh(r);Uw(r,t,Lm);const l=AE(s,n);return new Us(s,"signInViaPopup",t,l).executeNotNull()}class Us extends SE{constructor(t,n,s,l,c){super(t,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Us.currentPopupAction&&Us.currentPopupAction.cancel(),Us.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return bt(t,this.auth,"internal-error"),t}async onExecution(){Yi(this.filter.length===1,"Popup operations only handle one event");const t=jm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Us.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,qR.get())};t()}}Us.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="pendingRedirect",Cc=new Map;class FR extends SE{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Cc.get(this.auth._key());if(!t){try{const s=await QR(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Cc.set(this.auth._key(),t)}return this.bypassAuthState||Cc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QR(r,t){const n=$R(t),s=KR(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function YR(r,t){Cc.set(r._key(),t)}function KR(r){return qi(r._redirectPersistence)}function $R(r){return Nc(GR,r.config.apiKey,r.name)}async function XR(r,t,n=!1){if(Fn(r.app))return Promise.reject(js(r));const s=sh(r),l=AE(s,t),f=await new FR(s,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,t)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=600*1e3;class JR{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!WR(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!wE(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Yn(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=ZR&&this.cachedEventUids.clear(),this.cachedEventUids.has(_v(t))}saveEventToCache(t){this.cachedEventUids.add(_v(t)),this.lastProcessedEventTime=Date.now()}}function _v(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function wE({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function WR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(r,t={}){return co(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n2=/^https?/;async function i2(r){if(r.config.emulator)return;const{authorizedDomains:t}=await t2(r);for(const n of t)try{if(r2(n))return}catch{}gi(r,"unauthorized-domain")}function r2(r){const t=rm(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!n2.test(n))return!1;if(e2.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=new Yl(3e4,6e4);function vv(){const r=hi().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function a2(r){return new Promise((t,n)=>{function s(){vv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{vv(),n(Yn(r,"network-request-failed"))},timeout:s2.get()})}if(hi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(hi().gapi?.load)s();else{const l=cR("iframefcb");return hi()[l]=()=>{gapi.load?s():n(Yn(r,"network-request-failed"))},lR(`${uR()}?onload=${l}`).catch(c=>n(c))}}).catch(t=>{throw Dc=null,t})}let Dc=null;function o2(r){return Dc=Dc||a2(r),Dc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=new Yl(5e3,15e3),u2="__/auth/iframe",c2="emulator/auth/iframe",h2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},f2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function d2(r){const t=r.config;bt(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?Mm(t,c2):`https://${r.config.authDomain}/${u2}`,s={apiKey:t.apiKey,appName:r.name,v:uo},l=f2.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Ql(s).slice(1)}`}async function m2(r){const t=await o2(r),n=hi().gapi;return bt(n,r,"internal-error"),t.open({where:document.body,url:d2(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:h2,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const f=Yn(r,"network-request-failed"),p=hi().setTimeout(()=>{c(f)},l2.get());function g(){hi().clearTimeout(p),l(s)}s.ping(g).then(g,()=>{c(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g2=500,y2=600,_2="_blank",v2="http://localhost";class Ev{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function E2(r,t,n,s=g2,l=y2){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g={...p2,width:s.toString(),height:l.toString(),top:c,left:f},y=Je().toLowerCase();n&&(p=sE(y)?_2:n),iE(y)&&(t=t||v2,g.scrollbars="yes");const b=Object.entries(g).reduce((x,[L,W])=>`${x}${L}=${W},`,"");if(tR(y)&&p!=="_self")return T2(t||"",p),new Ev(null);const w=window.open(t||"",p,b);bt(w,r,"popup-blocked");try{w.focus()}catch{}return new Ev(w)}function T2(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="__/auth/handler",A2="emulator/auth/handler",S2=encodeURIComponent("fac");async function Tv(r,t,n,s,l,c){bt(r.config.authDomain,r,"auth-domain-config-required"),bt(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:uo,eventId:l};if(t instanceof Lm){t.setDefaultLanguage(r.languageCode),f.providerId=t.providerId||"",AS(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[b,w]of Object.entries({}))f[b]=w}if(t instanceof Kl){const b=t.getScopes().filter(w=>w!=="");b.length>0&&(f.scopes=b.join(","))}r.tenantId&&(f.tid=r.tenantId);const p=f;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await r._getAppCheckToken(),y=g?`#${S2}=${encodeURIComponent(g)}`:"";return`${w2(r)}?${Ql(p).slice(1)}${y}`}function w2({config:r}){return r.emulator?Mm(r,A2):`https://${r.authDomain}/${b2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="webStorageSupport";class R2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_E,this._completeRedirectFn=XR,this._overrideRedirectResult=YR}async _openPopup(t,n,s,l){Yi(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Tv(t,n,s,rm(),l);return E2(t,c,jm())}async _openRedirect(t,n,s,l){await this._originValidation(t);const c=await Tv(t,n,s,rm(),l);return NR(c),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Yi(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await m2(t),s=new JR(t);return n.register("authEvent",l=>(bt(l?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Bd,{type:Bd},l=>{const c=l?.[0]?.[Bd];c!==void 0&&n(!!c),gi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=i2(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return cE()||rE()||Pm()}}const x2=R2;var bv="@firebase/auth",Av="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function C2(r){Ja(new Bs("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=s.options;bt(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:f,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hE(r)},y=new aR(s,l,c,g);return fR(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Ja(new Bs("auth-internal",t=>{const n=sh(t.getProvider("auth").getImmediate());return(s=>new I2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Br(bv,Av,N2(r)),Br(bv,Av,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=300,O2=B0("authIdTokenMaxAge")||D2;let Sv=null;const M2=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>O2)return;const l=n?.token;Sv!==l&&(Sv=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function V2(r=Y0()){const t=Cm(r,"auth");if(t.isInitialized())return t.getImmediate();const n=hR(r,{popupRedirectResolver:x2,persistence:[LR,RR,_E]}),s=B0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const f=M2(c.toString());TR(n,f,()=>f(n.currentUser)),ER(n,p=>f(p))}}const l=j0("auth");return l&&dR(n,`http://${l}`),n}function k2(){return document.getElementsByTagName("head")?.[0]??document}oR({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const c=Yn("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",k2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});C2("Browser");var P2="firebase",U2="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Br(P2,U2,"app");var wv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qr,RE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,R){function C(){}C.prototype=R.prototype,O.F=R.prototype,O.prototype=new C,O.prototype.constructor=O,O.D=function(k,D,P){for(var N=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)N[Dt-2]=arguments[Dt];return R.prototype[D].apply(k,N)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(O,R,C){C||(C=0);const k=Array(16);if(typeof R=="string")for(var D=0;D<16;++D)k[D]=R.charCodeAt(C++)|R.charCodeAt(C++)<<8|R.charCodeAt(C++)<<16|R.charCodeAt(C++)<<24;else for(D=0;D<16;++D)k[D]=R[C++]|R[C++]<<8|R[C++]<<16|R[C++]<<24;R=O.g[0],C=O.g[1],D=O.g[2];let P=O.g[3],N;N=R+(P^C&(D^P))+k[0]+3614090360&4294967295,R=C+(N<<7&4294967295|N>>>25),N=P+(D^R&(C^D))+k[1]+3905402710&4294967295,P=R+(N<<12&4294967295|N>>>20),N=D+(C^P&(R^C))+k[2]+606105819&4294967295,D=P+(N<<17&4294967295|N>>>15),N=C+(R^D&(P^R))+k[3]+3250441966&4294967295,C=D+(N<<22&4294967295|N>>>10),N=R+(P^C&(D^P))+k[4]+4118548399&4294967295,R=C+(N<<7&4294967295|N>>>25),N=P+(D^R&(C^D))+k[5]+1200080426&4294967295,P=R+(N<<12&4294967295|N>>>20),N=D+(C^P&(R^C))+k[6]+2821735955&4294967295,D=P+(N<<17&4294967295|N>>>15),N=C+(R^D&(P^R))+k[7]+4249261313&4294967295,C=D+(N<<22&4294967295|N>>>10),N=R+(P^C&(D^P))+k[8]+1770035416&4294967295,R=C+(N<<7&4294967295|N>>>25),N=P+(D^R&(C^D))+k[9]+2336552879&4294967295,P=R+(N<<12&4294967295|N>>>20),N=D+(C^P&(R^C))+k[10]+4294925233&4294967295,D=P+(N<<17&4294967295|N>>>15),N=C+(R^D&(P^R))+k[11]+2304563134&4294967295,C=D+(N<<22&4294967295|N>>>10),N=R+(P^C&(D^P))+k[12]+1804603682&4294967295,R=C+(N<<7&4294967295|N>>>25),N=P+(D^R&(C^D))+k[13]+4254626195&4294967295,P=R+(N<<12&4294967295|N>>>20),N=D+(C^P&(R^C))+k[14]+2792965006&4294967295,D=P+(N<<17&4294967295|N>>>15),N=C+(R^D&(P^R))+k[15]+1236535329&4294967295,C=D+(N<<22&4294967295|N>>>10),N=R+(D^P&(C^D))+k[1]+4129170786&4294967295,R=C+(N<<5&4294967295|N>>>27),N=P+(C^D&(R^C))+k[6]+3225465664&4294967295,P=R+(N<<9&4294967295|N>>>23),N=D+(R^C&(P^R))+k[11]+643717713&4294967295,D=P+(N<<14&4294967295|N>>>18),N=C+(P^R&(D^P))+k[0]+3921069994&4294967295,C=D+(N<<20&4294967295|N>>>12),N=R+(D^P&(C^D))+k[5]+3593408605&4294967295,R=C+(N<<5&4294967295|N>>>27),N=P+(C^D&(R^C))+k[10]+38016083&4294967295,P=R+(N<<9&4294967295|N>>>23),N=D+(R^C&(P^R))+k[15]+3634488961&4294967295,D=P+(N<<14&4294967295|N>>>18),N=C+(P^R&(D^P))+k[4]+3889429448&4294967295,C=D+(N<<20&4294967295|N>>>12),N=R+(D^P&(C^D))+k[9]+568446438&4294967295,R=C+(N<<5&4294967295|N>>>27),N=P+(C^D&(R^C))+k[14]+3275163606&4294967295,P=R+(N<<9&4294967295|N>>>23),N=D+(R^C&(P^R))+k[3]+4107603335&4294967295,D=P+(N<<14&4294967295|N>>>18),N=C+(P^R&(D^P))+k[8]+1163531501&4294967295,C=D+(N<<20&4294967295|N>>>12),N=R+(D^P&(C^D))+k[13]+2850285829&4294967295,R=C+(N<<5&4294967295|N>>>27),N=P+(C^D&(R^C))+k[2]+4243563512&4294967295,P=R+(N<<9&4294967295|N>>>23),N=D+(R^C&(P^R))+k[7]+1735328473&4294967295,D=P+(N<<14&4294967295|N>>>18),N=C+(P^R&(D^P))+k[12]+2368359562&4294967295,C=D+(N<<20&4294967295|N>>>12),N=R+(C^D^P)+k[5]+4294588738&4294967295,R=C+(N<<4&4294967295|N>>>28),N=P+(R^C^D)+k[8]+2272392833&4294967295,P=R+(N<<11&4294967295|N>>>21),N=D+(P^R^C)+k[11]+1839030562&4294967295,D=P+(N<<16&4294967295|N>>>16),N=C+(D^P^R)+k[14]+4259657740&4294967295,C=D+(N<<23&4294967295|N>>>9),N=R+(C^D^P)+k[1]+2763975236&4294967295,R=C+(N<<4&4294967295|N>>>28),N=P+(R^C^D)+k[4]+1272893353&4294967295,P=R+(N<<11&4294967295|N>>>21),N=D+(P^R^C)+k[7]+4139469664&4294967295,D=P+(N<<16&4294967295|N>>>16),N=C+(D^P^R)+k[10]+3200236656&4294967295,C=D+(N<<23&4294967295|N>>>9),N=R+(C^D^P)+k[13]+681279174&4294967295,R=C+(N<<4&4294967295|N>>>28),N=P+(R^C^D)+k[0]+3936430074&4294967295,P=R+(N<<11&4294967295|N>>>21),N=D+(P^R^C)+k[3]+3572445317&4294967295,D=P+(N<<16&4294967295|N>>>16),N=C+(D^P^R)+k[6]+76029189&4294967295,C=D+(N<<23&4294967295|N>>>9),N=R+(C^D^P)+k[9]+3654602809&4294967295,R=C+(N<<4&4294967295|N>>>28),N=P+(R^C^D)+k[12]+3873151461&4294967295,P=R+(N<<11&4294967295|N>>>21),N=D+(P^R^C)+k[15]+530742520&4294967295,D=P+(N<<16&4294967295|N>>>16),N=C+(D^P^R)+k[2]+3299628645&4294967295,C=D+(N<<23&4294967295|N>>>9),N=R+(D^(C|~P))+k[0]+4096336452&4294967295,R=C+(N<<6&4294967295|N>>>26),N=P+(C^(R|~D))+k[7]+1126891415&4294967295,P=R+(N<<10&4294967295|N>>>22),N=D+(R^(P|~C))+k[14]+2878612391&4294967295,D=P+(N<<15&4294967295|N>>>17),N=C+(P^(D|~R))+k[5]+4237533241&4294967295,C=D+(N<<21&4294967295|N>>>11),N=R+(D^(C|~P))+k[12]+1700485571&4294967295,R=C+(N<<6&4294967295|N>>>26),N=P+(C^(R|~D))+k[3]+2399980690&4294967295,P=R+(N<<10&4294967295|N>>>22),N=D+(R^(P|~C))+k[10]+4293915773&4294967295,D=P+(N<<15&4294967295|N>>>17),N=C+(P^(D|~R))+k[1]+2240044497&4294967295,C=D+(N<<21&4294967295|N>>>11),N=R+(D^(C|~P))+k[8]+1873313359&4294967295,R=C+(N<<6&4294967295|N>>>26),N=P+(C^(R|~D))+k[15]+4264355552&4294967295,P=R+(N<<10&4294967295|N>>>22),N=D+(R^(P|~C))+k[6]+2734768916&4294967295,D=P+(N<<15&4294967295|N>>>17),N=C+(P^(D|~R))+k[13]+1309151649&4294967295,C=D+(N<<21&4294967295|N>>>11),N=R+(D^(C|~P))+k[4]+4149444226&4294967295,R=C+(N<<6&4294967295|N>>>26),N=P+(C^(R|~D))+k[11]+3174756917&4294967295,P=R+(N<<10&4294967295|N>>>22),N=D+(R^(P|~C))+k[2]+718787259&4294967295,D=P+(N<<15&4294967295|N>>>17),N=C+(P^(D|~R))+k[9]+3951481745&4294967295,O.g[0]=O.g[0]+R&4294967295,O.g[1]=O.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,O.g[2]=O.g[2]+D&4294967295,O.g[3]=O.g[3]+P&4294967295}s.prototype.v=function(O,R){R===void 0&&(R=O.length);const C=R-this.blockSize,k=this.C;let D=this.h,P=0;for(;P<R;){if(D==0)for(;P<=C;)l(this,O,P),P+=this.blockSize;if(typeof O=="string"){for(;P<R;)if(k[D++]=O.charCodeAt(P++),D==this.blockSize){l(this,k),D=0;break}}else for(;P<R;)if(k[D++]=O[P++],D==this.blockSize){l(this,k),D=0;break}}this.h=D,this.o+=R},s.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var R=1;R<O.length-8;++R)O[R]=0;R=this.o*8;for(var C=O.length-8;C<O.length;++C)O[C]=R&255,R/=256;for(this.v(O),O=Array(16),R=0,C=0;C<4;++C)for(let k=0;k<32;k+=8)O[R++]=this.g[C]>>>k&255;return O};function c(O,R){var C=p;return Object.prototype.hasOwnProperty.call(C,O)?C[O]:C[O]=R(O)}function f(O,R){this.h=R;const C=[];let k=!0;for(let D=O.length-1;D>=0;D--){const P=O[D]|0;k&&P==R||(C[D]=P,k=!1)}this.g=C}var p={};function g(O){return-128<=O&&O<128?c(O,function(R){return new f([R|0],R<0?-1:0)}):new f([O|0],O<0?-1:0)}function y(O){if(isNaN(O)||!isFinite(O))return w;if(O<0)return tt(y(-O));const R=[];let C=1;for(let k=0;O>=C;k++)R[k]=O/C|0,C*=4294967296;return new f(R,0)}function b(O,R){if(O.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(O.charAt(0)=="-")return tt(b(O.substring(1),R));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(R,8));let k=w;for(let P=0;P<O.length;P+=8){var D=Math.min(8,O.length-P);const N=parseInt(O.substring(P,P+D),R);D<8?(D=y(Math.pow(R,D)),k=k.j(D).add(y(N))):(k=k.j(C),k=k.add(y(N)))}return k}var w=g(0),x=g(1),L=g(16777216);r=f.prototype,r.m=function(){if(X(this))return-tt(this).m();let O=0,R=1;for(let C=0;C<this.g.length;C++){const k=this.i(C);O+=(k>=0?k:4294967296+k)*R,R*=4294967296}return O},r.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(W(this))return"0";if(X(this))return"-"+tt(this).toString(O);const R=y(Math.pow(O,6));var C=this;let k="";for(;;){const D=jt(C,R).g;C=nt(C,D.j(R));let P=((C.g.length>0?C.g[0]:C.h)>>>0).toString(O);if(C=D,W(C))return P+k;for(;P.length<6;)P="0"+P;k=P+k}},r.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function W(O){if(O.h!=0)return!1;for(let R=0;R<O.g.length;R++)if(O.g[R]!=0)return!1;return!0}function X(O){return O.h==-1}r.l=function(O){return O=nt(this,O),X(O)?-1:W(O)?0:1};function tt(O){const R=O.g.length,C=[];for(let k=0;k<R;k++)C[k]=~O.g[k];return new f(C,~O.h).add(x)}r.abs=function(){return X(this)?tt(this):this},r.add=function(O){const R=Math.max(this.g.length,O.g.length),C=[];let k=0;for(let D=0;D<=R;D++){let P=k+(this.i(D)&65535)+(O.i(D)&65535),N=(P>>>16)+(this.i(D)>>>16)+(O.i(D)>>>16);k=N>>>16,P&=65535,N&=65535,C[D]=N<<16|P}return new f(C,C[C.length-1]&-2147483648?-1:0)};function nt(O,R){return O.add(tt(R))}r.j=function(O){if(W(this)||W(O))return w;if(X(this))return X(O)?tt(this).j(tt(O)):tt(tt(this).j(O));if(X(O))return tt(this.j(tt(O)));if(this.l(L)<0&&O.l(L)<0)return y(this.m()*O.m());const R=this.g.length+O.g.length,C=[];for(var k=0;k<2*R;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(let D=0;D<O.g.length;D++){const P=this.i(k)>>>16,N=this.i(k)&65535,Dt=O.i(D)>>>16,Rt=O.i(D)&65535;C[2*k+2*D]+=N*Rt,ft(C,2*k+2*D),C[2*k+2*D+1]+=P*Rt,ft(C,2*k+2*D+1),C[2*k+2*D+1]+=N*Dt,ft(C,2*k+2*D+1),C[2*k+2*D+2]+=P*Dt,ft(C,2*k+2*D+2)}for(O=0;O<R;O++)C[O]=C[2*O+1]<<16|C[2*O];for(O=R;O<2*R;O++)C[O]=0;return new f(C,0)};function ft(O,R){for(;(O[R]&65535)!=O[R];)O[R+1]+=O[R]>>>16,O[R]&=65535,R++}function ht(O,R){this.g=O,this.h=R}function jt(O,R){if(W(R))throw Error("division by zero");if(W(O))return new ht(w,w);if(X(O))return R=jt(tt(O),R),new ht(tt(R.g),tt(R.h));if(X(R))return R=jt(O,tt(R)),new ht(tt(R.g),R.h);if(O.g.length>30){if(X(O)||X(R))throw Error("slowDivide_ only works with positive integers.");for(var C=x,k=R;k.l(O)<=0;)C=ot(C),k=ot(k);var D=Mt(C,1),P=Mt(k,1);for(k=Mt(k,2),C=Mt(C,2);!W(k);){var N=P.add(k);N.l(O)<=0&&(D=D.add(C),P=N),k=Mt(k,1),C=Mt(C,1)}return R=nt(O,D.j(R)),new ht(D,R)}for(D=w;O.l(R)>=0;){for(C=Math.max(1,Math.floor(O.m()/R.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),P=y(C),N=P.j(R);X(N)||N.l(O)>0;)C-=k,P=y(C),N=P.j(R);W(P)&&(P=x),D=D.add(P),O=nt(O,N)}return new ht(D,O)}r.B=function(O){return jt(this,O).h},r.and=function(O){const R=Math.max(this.g.length,O.g.length),C=[];for(let k=0;k<R;k++)C[k]=this.i(k)&O.i(k);return new f(C,this.h&O.h)},r.or=function(O){const R=Math.max(this.g.length,O.g.length),C=[];for(let k=0;k<R;k++)C[k]=this.i(k)|O.i(k);return new f(C,this.h|O.h)},r.xor=function(O){const R=Math.max(this.g.length,O.g.length),C=[];for(let k=0;k<R;k++)C[k]=this.i(k)^O.i(k);return new f(C,this.h^O.h)};function ot(O){const R=O.g.length+1,C=[];for(let k=0;k<R;k++)C[k]=O.i(k)<<1|O.i(k-1)>>>31;return new f(C,O.h)}function Mt(O,R){const C=R>>5;R%=32;const k=O.g.length-C,D=[];for(let P=0;P<k;P++)D[P]=R>0?O.i(P+C)>>>R|O.i(P+C+1)<<32-R:O.i(P+C);return new f(D,O.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,RE=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=b,qr=f}).apply(typeof wv<"u"?wv:typeof self<"u"?self:typeof window<"u"?window:{});var Ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xE,wl,IE,Oc,om,NE,CE,DE;(function(){var r,t=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ac=="object"&&Ac];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)t:{var _=s;u=u.split(".");for(var S=0;S<u.length-1;S++){var z=u[S];if(!(z in _))break t;_=_[z]}u=u[u.length-1],S=_[u],m=m(S),m!=S&&m!=null&&t(_,u,{configurable:!0,writable:!0,value:m})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(m){var _=[],S;for(S in m)Object.prototype.hasOwnProperty.call(m,S)&&_.push([S,m[S]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function p(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,_){return u.call.apply(u.bind,arguments)}function y(u,m,_){return y=g,y.apply(null,arguments)}function b(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function w(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(S,z,G){for(var at=Array(arguments.length-2),St=2;St<arguments.length;St++)at[St-2]=arguments[St];return m.prototype[z].apply(S,at)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function L(u){const m=u.length;if(m>0){const _=Array(m);for(let S=0;S<m;S++)_[S]=u[S];return _}return[]}function W(u,m){for(let S=1;S<arguments.length;S++){const z=arguments[S];var _=typeof z;if(_=_!="object"?_:z?Array.isArray(z)?"array":_:"null",_=="array"||_=="object"&&typeof z.length=="number"){_=u.length||0;const G=z.length||0;u.length=_+G;for(let at=0;at<G;at++)u[_+at]=z[at]}else u.push(z)}}class X{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function tt(u){f.setTimeout(()=>{throw u},0)}function nt(){var u=O;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ft{constructor(){this.h=this.g=null}add(m,_){const S=ht.get();S.set(m,_),this.h?this.h.next=S:this.g=S,this.h=S}}var ht=new X(()=>new jt,u=>u.reset());class jt{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,Mt=!1,O=new ft,R=()=>{const u=Promise.resolve(void 0);ot=()=>{u.then(C)}};function C(){for(var u;u=nt();){try{u.h.call(u.g)}catch(_){tt(_)}var m=ht;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}Mt=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};f.addEventListener("test",_,m),f.removeEventListener("test",_,m)}catch{}return u})();function N(u){return/^[\s\xa0]*$/.test(u)}function Dt(u,m){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}w(Dt,D),Dt.prototype.init=function(u,m){const _=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Dt.Z.h.call(this)},Dt.prototype.h=function(){Dt.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Rt="closure_listenable_"+(Math.random()*1e6|0),F=0;function st(u,m,_,S,z){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!S,this.ha=z,this.key=++F,this.da=this.fa=!1}function mt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function zt(u,m,_){for(const S in u)m.call(_,u[S],S,u)}function T(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function V(u){const m={};for(const _ in u)m[_]=u[_];return m}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(u,m){let _,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(_ in S)u[_]=S[_];for(let G=0;G<Z.length;G++)_=Z[G],Object.prototype.hasOwnProperty.call(S,_)&&(u[_]=S[_])}}function it(u){this.src=u,this.g={},this.h=0}it.prototype.add=function(u,m,_,S,z){const G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);const at=rt(u,m,S,z);return at>-1?(m=u[at],_||(m.fa=!1)):(m=new st(m,this.src,G,!!S,z),m.fa=_,u.push(m)),m};function dt(u,m){const _=m.type;if(_ in u.g){var S=u.g[_],z=Array.prototype.indexOf.call(S,m,void 0),G;(G=z>=0)&&Array.prototype.splice.call(S,z,1),G&&(mt(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function rt(u,m,_,S){for(let z=0;z<u.length;++z){const G=u[z];if(!G.da&&G.listener==m&&G.capture==!!_&&G.ha==S)return z}return-1}var ee="closure_lm_"+(Math.random()*1e6|0),Et={};function hn(u,m,_,S,z){if(Array.isArray(m)){for(let G=0;G<m.length;G++)hn(u,m[G],_,S,z);return null}return _=iu(_),u&&u[Rt]?u.J(m,_,p(S)?!!S.capture:!1,z):yo(u,m,_,!1,S,z)}function yo(u,m,_,S,z,G){if(!m)throw Error("Invalid event type");const at=p(z)?!!z.capture:!!z;let St=_o(u);if(St||(u[ee]=St=new it(u)),_=St.add(m,_,S,at,G),_.proxy)return _;if(S=Xs(),_.proxy=S,S.src=u,S.listener=_,u.addEventListener)P||(z=at),z===void 0&&(z=!1),u.addEventListener(m.toString(),S,z);else if(u.attachEvent)u.attachEvent(Js(m.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Xs(){function u(_){return m.call(u.src,u.listener,_)}const m=Ih;return u}function Zs(u,m,_,S,z){if(Array.isArray(m))for(var G=0;G<m.length;G++)Zs(u,m[G],_,S,z);else S=p(S)?!!S.capture:!!S,_=iu(_),u&&u[Rt]?(u=u.i,G=String(m).toString(),G in u.g&&(m=u.g[G],_=rt(m,_,S,z),_>-1&&(mt(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[G],u.h--)))):u&&(u=_o(u))&&(m=u.g[m.toString()],u=-1,m&&(u=rt(m,_,S,z)),(_=u>-1?m[u]:null)&&Wr(_))}function Wr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Rt])dt(m.i,u);else{var _=u.type,S=u.proxy;m.removeEventListener?m.removeEventListener(_,S,u.capture):m.detachEvent?m.detachEvent(Js(_),S):m.addListener&&m.removeListener&&m.removeListener(S),(_=_o(m))?(dt(_,u),_.h==0&&(_.src=null,m[ee]=null)):mt(u)}}}function Js(u){return u in Et?Et[u]:Et[u]="on"+u}function Ih(u,m){if(u.da)u=!0;else{m=new Dt(m,this);const _=u.listener,S=u.ha||u.src;u.fa&&Wr(u),u=_.call(S,m)}return u}function _o(u){return u=u[ee],u instanceof it?u:null}var sn="__closure_events_fn_"+(Math.random()*1e9>>>0);function iu(u){return typeof u=="function"?u:(u[sn]||(u[sn]=function(m){return u.handleEvent(m)}),u[sn])}function Re(){k.call(this),this.i=new it(this),this.M=this,this.G=null}w(Re,k),Re.prototype[Rt]=!0,Re.prototype.removeEventListener=function(u,m,_,S){Zs(this,u,m,_,S)};function De(u,m){var _,S=u.G;if(S)for(_=[];S;S=S.G)_.push(S);if(u=u.M,S=m.type||m,typeof m=="string")m=new D(m,u);else if(m instanceof D)m.target=m.target||u;else{var z=m;m=new D(S,u),Y(m,z)}z=!0;let G,at;if(_)for(at=_.length-1;at>=0;at--)G=m.g=_[at],z=vi(G,S,!0,m)&&z;if(G=m.g=u,z=vi(G,S,!0,m)&&z,z=vi(G,S,!1,m)&&z,_)for(at=0;at<_.length;at++)G=m.g=_[at],z=vi(G,S,!1,m)&&z}Re.prototype.N=function(){if(Re.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let S=0;S<_.length;S++)mt(_[S]);delete u.g[m],u.h--}}this.G=null},Re.prototype.J=function(u,m,_,S){return this.i.add(String(u),m,!1,_,S)},Re.prototype.K=function(u,m,_,S){return this.i.add(String(u),m,!0,_,S)};function vi(u,m,_,S){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let z=!0;for(let G=0;G<m.length;++G){const at=m[G];if(at&&!at.da&&at.capture==_){const St=at.listener,se=at.ha||at.src;at.fa&&dt(u.i,at),z=St.call(se,S)!==!1&&z}}return z&&!S.defaultPrevented}function Nh(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:f.setTimeout(u,m||0)}function vo(u){u.g=Nh(()=>{u.g=null,u.i&&(u.i=!1,vo(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Ch extends k{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:vo(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ts(u){k.call(this),this.h=u,this.g={}}w(ts,k);var Zi=[];function Fe(u){zt(u.g,function(m,_){this.g.hasOwnProperty(_)&&Wr(m)},u),u.g={}}ts.prototype.N=function(){ts.Z.N.call(this),Fe(this)},ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tn=f.JSON.stringify,We=f.JSON.parse,Dh=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function ru(){}function su(){}var Xn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ji(){D.call(this,"d")}w(Ji,D);function kn(){D.call(this,"c")}w(kn,D);var bn={},Wi=null;function Ws(){return Wi=Wi||new Re}bn.Ia="serverreachability";function Eo(u){D.call(this,bn.Ia,u)}w(Eo,D);function tr(u){const m=Ws();De(m,new Eo(m))}bn.STAT_EVENT="statevent";function ta(u,m){D.call(this,bn.STAT_EVENT,u),this.stat=m}w(ta,D);function de(u){const m=Ws();De(m,new ta(m,u))}bn.Ja="timingevent";function au(u,m){D.call(this,bn.Ja,u),this.size=m}w(au,D);function er(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},m)}function nr(){this.g=!0}nr.prototype.ua=function(){this.g=!1};function To(u,m,_,S,z,G){u.info(function(){if(u.g)if(G){var at="",St=G.split("&");for(let Yt=0;Yt<St.length;Yt++){var se=St[Yt].split("=");if(se.length>1){const ge=se[0];se=se[1];const fn=ge.split("_");at=fn.length>=2&&fn[1]=="type"?at+(ge+"="+se+"&"):at+(ge+"=redacted&")}}}else at=null;else at=G;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+m+`
`+_+`
`+at})}function bo(u,m,_,S,z,G,at){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+m+`
`+_+`
`+G+" "+at})}function Ei(u,m,_,S){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Zn(u,_)+(S?" "+S:"")})}function Oh(u,m){u.info(function(){return"TIMEOUT: "+m})}nr.prototype.info=function(){};function Zn(u,m){if(!u.g)return m;if(!m)return null;try{const G=JSON.parse(m);if(G){for(u=0;u<G.length;u++)if(Array.isArray(G[u])){var _=G[u];if(!(_.length<2)){var S=_[1];if(Array.isArray(S)&&!(S.length<1)){var z=S[0];if(z!="noop"&&z!="stop"&&z!="close")for(let at=1;at<S.length;at++)S[at]=""}}}}return Tn(G)}catch{return m}}var me={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ue={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ti;function es(){}w(es,ru),es.prototype.g=function(){return new XMLHttpRequest},Ti=new es;function ns(u){return encodeURIComponent(String(u))}function Mh(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function Pn(u,m,_,S){this.j=u,this.i=m,this.l=_,this.S=S||1,this.V=new ts(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ir}function ir(){this.i=null,this.g="",this.h=!1}var ea={},Jn={};function Wn(u,m,_){u.M=1,u.A=Ai(oe(m)),u.u=_,u.R=!0,rr(u,null)}function rr(u,m){u.F=Date.now(),is(u),u.B=oe(u.A);var _=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),cu(_.i,"t",S),u.C=0,_=u.j.L,u.h=new ir,u.g=ha(u.j,_?m:null,!u.u),u.P>0&&(u.O=new Ch(y(u.Y,u,u.g),u.P)),m=u.V,_=u.g,S=u.ba;var z="readystatechange";Array.isArray(z)||(z&&(Zi[0]=z.toString()),z=Zi);for(let G=0;G<z.length;G++){const at=hn(_,z[G],S||m.handleEvent,!1,m.h||m);if(!at)break;m.g[at.key]=at}m=u.J?V(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),tr(),To(u.i,u.v,u.B,u.l,u.S,u.u)}Pn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Qe(u)==3?m.j():this.Y(u)},Pn.prototype.Y=function(u){try{if(u==this.g)t:{const St=Qe(this.g),se=this.g.ya(),Yt=this.g.ca();if(!(St<3)&&(St!=3||this.g&&(this.h.h||this.g.la()||ms(this.g)))){this.K||St!=4||se==7||(se==8||Yt<=0?tr(3):tr(2)),ei(this);var m=this.g.ca();this.X=m;var _=sr(this);if(this.o=m==200,bo(this.i,this.v,this.B,this.l,this.S,St,m),this.o){if(this.U&&!this.L){e:{if(this.g){var S,z=this.g;if((S=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(S)){var G=S;break e}}G=null}if(u=G)Ei(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,na(this,u);else{this.o=!1,this.m=3,de(12),ni(this),rs(this);break t}}if(this.R){u=!0;let ge;for(;!this.K&&this.C<_.length;)if(ge=ou(this,_),ge==Jn){St==4&&(this.m=4,de(14),u=!1),Ei(this.i,this.l,null,"[Incomplete Response]");break}else if(ge==ea){this.m=4,de(15),Ei(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Ei(this.i,this.l,ge,null),na(this,ge);if(pe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||_.length!=0||this.h.h||(this.m=1,de(16),u=!1),this.o=this.o&&u,!u)Ei(this.i,this.l,_,"[Invalid Chunked Response]"),ni(this),rs(this);else if(_.length>0&&!this.W){this.W=!0;var at=this.j;at.g==this&&at.aa&&!at.P&&(at.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Oo(at),at.P=!0,de(11))}}else Ei(this.i,this.l,_,null),na(this,_);St==4&&ni(this),this.o&&!this.K&&(St==4?Mo(this.j,this):(this.o=!1,is(this)))}else ps(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,de(12)):(this.m=0,de(13)),ni(this),rs(this)}}}catch{}finally{}};function sr(u){if(!pe(u))return u.g.la();const m=ms(u.g);if(m==="")return"";let _="";const S=m.length,z=Qe(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ni(u),rs(u),"";u.h.i=new f.TextDecoder}for(let G=0;G<S;G++)u.h.h=!0,_+=u.h.i.decode(m[G],{stream:!(z&&G==S-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function pe(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function ou(u,m){var _=u.C,S=m.indexOf(`
`,_);return S==-1?Jn:(_=Number(m.substring(_,S)),isNaN(_)?ea:(S+=1,S+_>m.length?Jn:(m=m.slice(S,S+_),u.C=S+_,m)))}Pn.prototype.cancel=function(){this.K=!0,ni(this)};function is(u){u.T=Date.now()+u.H,ti(u,u.H)}function ti(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=er(y(u.aa,u),m)}function ei(u){u.D&&(f.clearTimeout(u.D),u.D=null)}Pn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Oh(this.i,this.B),this.M!=2&&(tr(),de(17)),ni(this),this.m=2,rs(this)):ti(this,this.T-u)};function rs(u){u.j.I==0||u.K||Mo(u.j,u)}function ni(u){ei(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Fe(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function na(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||os(_.h,u))){if(!u.L&&os(_.h,u)&&_.I==3){try{var S=_.Ba.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){t:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)ca(_),ii(_);else break t;Do(_),de(18)}}else _.xa=z[1],0<_.xa-_.K&&z[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=er(y(_.Va,_),6e3));An(_.h)<=1&&_.ta&&(_.ta=void 0)}else Ri(_,11)}else if((u.L||_.g==u)&&ca(_),!N(m))for(z=_.Ba.g.parse(m),m=0;m<z.length;m++){let Yt=z[m];const ge=Yt[0];if(!(ge<=_.K))if(_.K=ge,Yt=Yt[1],_.I==2)if(Yt[0]=="c"){_.M=Yt[1],_.ba=Yt[2];const fn=Yt[3];fn!=null&&(_.ka=fn,_.j.info("VER="+_.ka));const ri=Yt[4];ri!=null&&(_.za=ri,_.j.info("SVER="+_.za));const jn=Yt[5];jn!=null&&typeof jn=="number"&&jn>0&&(S=1.5*jn,_.O=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const zn=u.g;if(zn){const Bn=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bn){var G=S.h;G.g||Bn.indexOf("spdy")==-1&&Bn.indexOf("quic")==-1&&Bn.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(ia(G,G.h),G.h=null))}if(S.G){const ko=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;ko&&(S.wa=ko,Xt(S.J,S.G,ko))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),S=_;var at=u;if(S.na=vu(S,S.L?S.ba:null,S.W),at.L){bi(S.h,at);var St=at,se=S.O;se&&(St.H=se),St.D&&(ei(St),is(St)),S.g=at}else pu(S);_.i.length>0&&vs(_)}else Yt[0]!="stop"&&Yt[0]!="close"||Ri(_,7);else _.I==3&&(Yt[0]=="stop"||Yt[0]=="close"?Yt[0]=="stop"?Ri(_,7):ys(_):Yt[0]!="noop"&&_.l&&_.l.qa(Yt),_.A=0)}}tr(4)}catch{}}var Vh=class{constructor(u,m){this.g=u,this.map=m}};function ss(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function as(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function An(u){return u.h?1:u.g?u.g.size:0}function os(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ia(u,m){u.g?u.g.add(m):u.h=m}function bi(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}ss.prototype.cancel=function(){if(this.i=ra(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ra(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return L(u.i)}var sa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kh(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const S=u[_].indexOf("=");let z,G=null;S>=0?(z=u[_].substring(0,S),G=u[_].substring(S+1)):z=u[_],m(z,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Un(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Un?(this.l=u.l,ar(this,u.j),this.o=u.o,this.g=u.g,ls(this,u.u),this.h=u.h,or(this,hu(u.i)),this.m=u.m):u&&(m=String(u).match(sa))?(this.l=!1,ar(this,m[1]||"",!0),this.o=us(m[2]||""),this.g=us(m[3]||"",!0),ls(this,m[4]),this.h=us(m[5]||"",!0),or(this,m[6]||"",!0),this.m=us(m[7]||"")):(this.l=!1,this.i=new Sn(null,this.l))}Un.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Oe(m,So,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Oe(m,So,!0),"@"),u.push(ns(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Oe(_,_.charAt(0)=="/"?lr:wo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Oe(_,uu)),u.join("")},Un.prototype.resolve=function(u){const m=oe(this);let _=!!u.j;_?ar(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var S=u.h;if(_)ls(m,u.u);else if(_=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var z=m.h.lastIndexOf("/");z!=-1&&(S=m.h.slice(0,z+1)+S)}if(z=S,z==".."||z==".")S="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){S=z.lastIndexOf("/",0)==0,z=z.split("/");const G=[];for(let at=0;at<z.length;){const St=z[at++];St=="."?S&&at==z.length&&G.push(""):St==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),S&&at==z.length&&G.push("")):(G.push(St),S=!0)}S=G.join("/")}else S=z}return _?m.h=S:_=u.i.toString()!=="",_?or(m,hu(u.i)):_=!!u.m,_&&(m.m=u.m),m};function oe(u){return new Un(u)}function ar(u,m,_){u.j=_?us(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function ls(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function or(u,m,_){m instanceof Sn?(u.i=m,Io(u.i,u.l)):(_||(m=Oe(m,lu)),u.i=new Sn(m,u.l))}function Xt(u,m,_){u.i.set(m,_)}function Ai(u){return Xt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function us(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Oe(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Ao),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ao(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var So=/[#\/\?@]/g,wo=/[#\?:]/g,lr=/[#\?]/g,lu=/[#\?@]/g,uu=/#/g;function Sn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Si(u){u.g||(u.g=new Map,u.h=0,u.i&&kh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Sn.prototype,r.add=function(u,m){Si(this),this.i=null,u=Ln(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Ro(u,m){Si(u),m=Ln(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function xo(u,m){return Si(u),m=Ln(u,m),u.g.has(m)}r.forEach=function(u,m){Si(this),this.g.forEach(function(_,S){_.forEach(function(z){u.call(m,z,S,this)},this)},this)};function aa(u,m){Si(u);let _=[];if(typeof m=="string")xo(u,m)&&(_=_.concat(u.g.get(Ln(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}r.set=function(u,m){return Si(this),this.i=null,u=Ln(this,u),xo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=aa(this,u),u.length>0?String(u[0]):m):m};function cu(u,m,_){Ro(u,m),_.length>0&&(u.i=null,u.g.set(Ln(u,m),L(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let S=0;S<m.length;S++){var _=m[S];const z=ns(_);_=aa(this,_);for(let G=0;G<_.length;G++){let at=z;_[G]!==""&&(at+="="+ns(_[G])),u.push(at)}}return this.i=u.join("&")};function hu(u){const m=new Sn;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Ln(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Io(u,m){m&&!u.j&&(Si(u),u.i=null,u.g.forEach(function(_,S){const z=S.toLowerCase();S!=z&&(Ro(this,S),cu(this,z,_))},u)),u.j=m}function No(u,m){const _=new nr;if(f.Image){const S=new Image;S.onload=b(tn,_,"TestLoadImage: loaded",!0,m,S),S.onerror=b(tn,_,"TestLoadImage: error",!1,m,S),S.onabort=b(tn,_,"TestLoadImage: abort",!1,m,S),S.ontimeout=b(tn,_,"TestLoadImage: timeout",!1,m,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else m(!1)}function ur(u,m){const _=new nr,S=new AbortController,z=setTimeout(()=>{S.abort(),tn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:S.signal}).then(G=>{clearTimeout(z),G.ok?tn(_,"TestPingServer: ok",!0,m):tn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(z),tn(_,"TestPingServer: error",!1,m)})}function tn(u,m,_,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(_)}catch{}}function fu(){this.g=new Dh}function cs(u){this.i=u.Sb||null,this.h=u.ab||!1}w(cs,ru),cs.prototype.g=function(){return new hs(this.i,this.h)};function hs(u,m){Re.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(hs,Re),r=hs.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,wi(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||f).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,en(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,wi(this)),this.g&&(this.readyState=3,wi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;cr(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function cr(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?en(this):wi(this),this.readyState==3&&cr(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,en(this))},r.Na=function(u){this.g&&(this.response=u,en(this))},r.ga=function(){this.g&&en(this)};function en(u){u.readyState=4,u.l=null,u.j=null,u.B=null,wi(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function wi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(hs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function hr(u){let m="";return zt(u,function(_,S){m+=S,m+=":",m+=_,m+=`\r
`}),m}function wn(u,m,_){t:{for(S in _){var S=!1;break t}S=!0}S||(_=hr(_),typeof u=="string"?_!=null&&ns(_):Xt(u,m,_))}function ne(u){Re.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(ne,Re);var oa=/^https?$/i,du=["POST","PUT"];r=ne.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ti.g(),this.g.onreadystatechange=x(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(G){fs(this,G);return}if(u=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)_.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const G of S.keys())_.set(G,S.get(G));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(G=>G.toLowerCase()=="content-type"),z=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(du,m,void 0)>=0)||S||z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,at]of _)this.g.setRequestHeader(G,at);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(G){fs(this,G)}};function fs(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,ds(u),xe(u)}function ds(u){u.A||(u.A=!0,De(u,"complete"),De(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,De(this,"complete"),De(this,"abort"),xe(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xe(this,!0)),ne.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Co(this):this.Xa())},r.Xa=function(){Co(this)};function Co(u){if(u.h&&typeof c<"u"){if(u.v&&Qe(u)==4)setTimeout(u.Ca.bind(u),0);else if(De(u,"readystatechange"),Qe(u)==4){u.h=!1;try{const G=u.ca();t:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var _;if(!(_=m)){var S;if(S=G===0){let at=String(u.D).match(sa)[1]||null;!at&&f.self&&f.self.location&&(at=f.self.location.protocol.slice(0,-1)),S=!oa.test(at?at.toLowerCase():"")}_=S}if(_)De(u,"complete"),De(u,"success");else{u.o=6;try{var z=Qe(u)>2?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.ca()+"]",ds(u)}}finally{xe(u)}}}}function xe(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||De(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Qe(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Qe(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),We(m)}};function ms(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ps(u){const m={};u=(u.g&&Qe(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(N(u[S]))continue;var _=Mh(u[S]);const z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const G=m[z]||[];m[z]=G,G.push(_)}T(m,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function gs(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function la(u){this.za=0,this.i=[],this.j=new nr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=gs("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=gs("baseRetryDelayMs",5e3,u),this.Za=gs("retryDelaySeedMs",1e4,u),this.Ta=gs("forwardChannelMaxRetries",2,u),this.va=gs("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new ss(u&&u.concurrentRequestLimit),this.Ba=new fu,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=la.prototype,r.ka=8,r.I=1,r.connect=function(u,m,_,S){de(0),this.W=u,this.H=m||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.J=vu(this,null,this.W),vs(this)};function ys(u){if(_s(u),u.I==3){var m=u.V++,_=oe(u.J);if(Xt(_,"SID",u.M),Xt(_,"RID",m),Xt(_,"TYPE","terminate"),Es(u,_),m=new Pn(u,u.j,m),m.M=2,m.A=Ai(oe(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&f.Image&&(new Image().src=m.A,_=!0),_||(m.g=ha(m.j,null),m.g.ea(m.A)),m.F=Date.now(),is(m)}_u(u)}function ii(u){u.g&&(Oo(u),u.g.cancel(),u.g=null)}function _s(u){ii(u),u.v&&(f.clearTimeout(u.v),u.v=null),ca(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function vs(u){if(!as(u.h)&&!u.m){u.m=!0;var m=u.Ea;ot||R(),Mt||(ot(),Mt=!0),O.add(m,u),u.D=0}}function Ph(u,m){return An(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=er(y(u.Ea,u,m),yu(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const z=new Pn(this,this.j,u);let G=this.o;if(this.U&&(G?(G=V(G),Y(G,this.U)):G=this.U),this.u!==null||this.R||(z.J=G,G=null),this.S)t:{for(var m=0,_=0;_<this.i.length;_++){e:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break e}S=void 0}if(S===void 0)break;if(m+=S,m>4096){m=_;break t}if(m===4096||_===this.i.length-1){m=_+1;break t}}m=1e3}else m=1e3;m=ua(this,z,m),_=oe(this.J),Xt(_,"RID",u),Xt(_,"CVER",22),this.G&&Xt(_,"X-HTTP-Session-Id",this.G),Es(this,_),G&&(this.R?m="headers="+ns(hr(G))+"&"+m:this.u&&wn(_,this.u,G)),ia(this.h,z),this.Ra&&Xt(_,"TYPE","init"),this.S?(Xt(_,"$req",m),Xt(_,"SID","null"),z.U=!0,Wn(z,_,null)):Wn(z,_,m),this.I=2}}else this.I==3&&(u?mu(this,u):this.i.length==0||as(this.h)||mu(this))};function mu(u,m){var _;m?_=m.l:_=u.V++;const S=oe(u.J);Xt(S,"SID",u.M),Xt(S,"RID",_),Xt(S,"AID",u.K),Es(u,S),u.u&&u.o&&wn(S,u.u,u.o),_=new Pn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=ua(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ia(u.h,_),Wn(_,S,m)}function Es(u,m){u.H&&zt(u.H,function(_,S){Xt(m,S,_)}),u.l&&zt({},function(_,S){Xt(m,S,_)})}function ua(u,m,_){_=Math.min(u.i.length,_);const S=u.l?y(u.l.Ka,u.l,u):null;t:{var z=u.i;let St=-1;for(;;){const se=["count="+_];St==-1?_>0?(St=z[0].g,se.push("ofs="+St)):St=0:se.push("ofs="+St);let Yt=!0;for(let ge=0;ge<_;ge++){var G=z[ge].g;const fn=z[ge].map;if(G-=St,G<0)St=Math.max(0,z[ge].g-100),Yt=!1;else try{G="req"+G+"_"||"";try{var at=fn instanceof Map?fn:Object.entries(fn);for(const[ri,jn]of at){let zn=jn;p(jn)&&(zn=Tn(jn)),se.push(G+ri+"="+encodeURIComponent(zn))}}catch(ri){throw se.push(G+"type="+encodeURIComponent("_badmap")),ri}}catch{S&&S(fn)}}if(Yt){at=se.join("&");break t}}at=void 0}return u=u.i.splice(0,_),m.G=u,at}function pu(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;ot||R(),Mt||(ot(),Mt=!0),O.add(m,u),u.A=0}}function Do(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=er(y(u.Da,u),yu(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,gu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=er(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,de(10),ii(this),gu(this))};function Oo(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function gu(u){u.g=new Pn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=oe(u.na);Xt(m,"RID","rpc"),Xt(m,"SID",u.M),Xt(m,"AID",u.K),Xt(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Xt(m,"TO",u.ia),Xt(m,"TYPE","xmlhttp"),Es(u,m),u.u&&u.o&&wn(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Ai(oe(m)),_.u=null,_.R=!0,rr(_,u)}r.Va=function(){this.C!=null&&(this.C=null,ii(this),Do(this),de(19))};function ca(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Mo(u,m){var _=null;if(u.g==m){ca(u),Oo(u),u.g=null;var S=2}else if(os(u.h,m))_=m.G,bi(u.h,m),S=1;else return;if(u.I!=0){if(m.o)if(S==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var z=u.D;S=Ws(),De(S,new au(S,_)),vs(u)}else pu(u);else if(z=m.m,z==3||z==0&&m.X>0||!(S==1&&Ph(u,m)||S==2&&Do(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),z){case 1:Ri(u,5);break;case 4:Ri(u,10);break;case 3:Ri(u,6);break;default:Ri(u,2)}}}function yu(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function Ri(u,m){if(u.j.info("Error code "+m),m==2){var _=y(u.bb,u),S=u.Ua;const z=!S;S=new Un(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||ar(S,"https"),Ai(S),z?No(S.toString(),_):ur(S.toString(),_)}else de(2);u.I=0,u.l&&u.l.pa(m),_u(u),_s(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),de(2)):(this.j.info("Failed to ping google.com"),de(1))};function _u(u){if(u.I=0,u.ja=[],u.l){const m=ra(u.h);(m.length!=0||u.i.length!=0)&&(W(u.ja,m),W(u.ja,u.i),u.h.i.length=0,L(u.i),u.i.length=0),u.l.oa()}}function vu(u,m,_){var S=_ instanceof Un?oe(_):new Un(_);if(S.g!="")m&&(S.g=m+"."+S.g),ls(S,S.u);else{var z=f.location;S=z.protocol,m=m?m+"."+z.hostname:z.hostname,z=+z.port;const G=new Un(null);S&&ar(G,S),m&&(G.g=m),z&&ls(G,z),_&&(G.h=_),S=G}return _=u.G,m=u.wa,_&&m&&Xt(S,_,m),Xt(S,"VER",u.ka),Es(u,S),S}function ha(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new ne(new cs({ab:_})):new ne(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eu(){}r=Eu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function fa(){}fa.prototype.g=function(u,m){return new nn(u,m)};function nn(u,m){Re.call(this),this.g=new la(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!N(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!N(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new fr(this)}w(nn,Re),nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){ys(this.g)},nn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Tn(u),u=_);m.i.push(new Vh(m.Ya++,u)),m.I==3&&vs(m)},nn.prototype.N=function(){this.g.l=null,delete this.j,ys(this.g),delete this.g,nn.Z.N.call(this)};function Vo(u){Ji.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const _ in m){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}w(Vo,Ji);function Tu(){kn.call(this),this.status=1}w(Tu,kn);function fr(u){this.g=u}w(fr,Eu),fr.prototype.ra=function(){De(this.g,"a")},fr.prototype.qa=function(u){De(this.g,new Vo(u))},fr.prototype.pa=function(u){De(this.g,new Tu)},fr.prototype.oa=function(){De(this.g,"b")},fa.prototype.createWebChannel=fa.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,DE=function(){return new fa},CE=function(){return Ws()},NE=bn,om={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},me.NO_ERROR=0,me.TIMEOUT=8,me.HTTP_ERROR=6,Oc=me,Ue.COMPLETE="complete",IE=Ue,su.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",Re.prototype.listen=Re.prototype.J,wl=su,ne.prototype.listenOnce=ne.prototype.K,ne.prototype.getLastError=ne.prototype.Ha,ne.prototype.getLastErrorCode=ne.prototype.ya,ne.prototype.getStatus=ne.prototype.ca,ne.prototype.getResponseJson=ne.prototype.La,ne.prototype.getResponseText=ne.prototype.la,ne.prototype.send=ne.prototype.ea,ne.prototype.setWithCredentials=ne.prototype.Fa,xE=ne}).apply(typeof Ac<"u"?Ac:typeof self<"u"?self:typeof window<"u"?window:{});const Rv="@firebase/firestore",xv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ho="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=new Im("@firebase/firestore");function Ba(){return Hs.logLevel}function ut(r,...t){if(Hs.logLevel<=Pt.DEBUG){const n=t.map(Bm);Hs.debug(`Firestore (${ho}): ${r}`,...n)}}function Ki(r,...t){if(Hs.logLevel<=Pt.ERROR){const n=t.map(Bm);Hs.error(`Firestore (${ho}): ${r}`,...n)}}function to(r,...t){if(Hs.logLevel<=Pt.WARN){const n=t.map(Bm);Hs.warn(`Firestore (${ho}): ${r}`,...n)}}function Bm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,OE(r,s,n)}function OE(r,t,n){let s=`FIRESTORE (${ho}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ki(s),new Error(s)}function Qt(r,t,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||OE(t,l,s)}function wt(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends Xi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class L2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Xe.UNAUTHENTICATED)))}shutdown(){}}class j2{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class z2{constructor(t){this.t=t,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Qt(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new Hi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Hi,t.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const g=c;t.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Hi)}}),0),f()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Qt(typeof s.accessToken=="string",31837,{l:s}),new ME(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Qt(t===null||typeof t=="string",2055,{h:t}),new Xe(t)}}class B2{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class q2{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new B2(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Xe.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Iv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H2{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Fn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Qt(this.o===void 0,3512);const s=c=>{c.error!=null&&ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,ut("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>s(c)))};const l=c=>{ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Iv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Qt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Iv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=G2(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=t.charAt(l[c]%62))}return s}}function Ut(r,t){return r<t?-1:r>t?1:0}function lm(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const l=r.charAt(s),c=t.charAt(s);if(l!==c)return qd(l)===qd(c)?Ut(l,c):qd(l)?1:-1}return Ut(r.length,t.length)}const F2=55296,Q2=57343;function qd(r){const t=r.charCodeAt(0);return t>=F2&&t<=Q2}function eo(r,t,n){return r.length===t.length&&r.every(((s,l)=>n(s,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="__name__";class ci{constructor(t,n,s){n===void 0?n=0:n>t.length&&vt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&vt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return ci.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ci?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let l=0;l<s;l++){const c=ci.compareSegments(t.get(l),n.get(l));if(c!==0)return c}return Ut(t.length,n.length)}static compareSegments(t,n){const s=ci.isNumericId(t),l=ci.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?ci.extractNumericId(t).compare(ci.extractNumericId(n)):lm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return qr.fromString(t.substring(4,t.length-2))}}class re extends ci{construct(t,n,s){return new re(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new lt($.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new re(n)}static emptyPath(){return new re([])}}const Y2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qe extends ci{construct(t,n,s){return new qe(t,n,s)}static isValidIdentifier(t){return Y2.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qe.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Nv}static keyField(){return new qe([Nv])}static fromServerFormat(t){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new lt($.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;l<t.length;){const p=t[l];if(p==="\\"){if(l+1===t.length)throw new lt($.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new lt($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=g,l+=2}else p==="`"?(f=!f,l++):p!=="."||f?(s+=p,l++):(c(),l++)}if(c(),f)throw new lt($.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new qe(n)}static emptyPath(){return new qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(t){this.path=t}static fromPath(t){return new gt(re.fromString(t))}static fromName(t){return new gt(re.fromString(t).popFirst(5))}static empty(){return new gt(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&re.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return re.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new gt(new re(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(r,t,n){if(!n)throw new lt($.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function K2(r,t,n,s){if(t===!0&&s===!0)throw new lt($.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Cv(r){if(!gt.isDocumentKey(r))throw new lt($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Dv(r){if(gt.isDocumentKey(r))throw new lt($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function kE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function lh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":vt(12329,{type:typeof r})}function Kn(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new lt($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lh(r);throw new lt($.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(r,t){const n={typeString:r};return t&&(n.value=t),n}function Xl(r,t){if(!kE(r))throw new lt($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const l=t[s].typeString,c="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(l&&typeof f!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new lt($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=-62135596800,Mv=1e6;class Gt{static now(){return Gt.fromMillis(Date.now())}static fromDate(t){return Gt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*Mv);return new Gt(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new lt($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new lt($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Ov)throw new lt($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new lt($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Mv}_compareTo(t){return this.seconds===t.seconds?Ut(this.nanoseconds,t.nanoseconds):Ut(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Xl(t,Gt._jsonSchema))return new Gt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Ov;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Gt._jsonSchemaVersion="firestore/timestamp/1.0",Gt._jsonSchema={type:we("string",Gt._jsonSchemaVersion),seconds:we("number"),nanoseconds:we("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{static fromTimestamp(t){return new At(t)}static min(){return new At(new Gt(0,0))}static max(){return new At(new Gt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=-1;function $2(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=At.fromTimestamp(s===1e9?new Gt(n+1,0):new Gt(n,s));return new Gr(l,gt.empty(),t)}function X2(r){return new Gr(r.readTime,r.key,zl)}class Gr{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Gr(At.min(),gt.empty(),zl)}static max(){return new Gr(At.max(),gt.empty(),zl)}}function Z2(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=gt.comparator(r.documentKey,t.documentKey),n!==0?n:Ut(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class W2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(r){if(r.code!==$.FAILED_PRECONDITION||r.message!==J2)throw r;ut("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new et(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof et?n:et.resolve(n)}catch(n){return et.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):et.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):et.reject(n)}static resolve(t){return new et(((n,s)=>{n(t)}))}static reject(t){return new et(((n,s)=>{s(t)}))}static waitFor(t){return new et(((n,s)=>{let l=0,c=0,f=!1;t.forEach((p=>{++l,p.next((()=>{++c,f&&c===l&&n()}),(g=>s(g)))})),f=!0,c===l&&n()}))}static or(t){let n=et.resolve(!1);for(const s of t)n=n.next((l=>l?et.resolve(l):s()));return n}static forEach(t,n){const s=[];return t.forEach(((l,c)=>{s.push(n.call(this,l,c))})),this.waitFor(s)}static mapArray(t,n){return new et(((s,l)=>{const c=t.length,f=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(t[y]).next((b=>{f[y]=b,++p,p===c&&s(f)}),(b=>l(b)))}}))}static doWhile(t,n){return new et(((s,l)=>{const c=()=>{t()===!0?n().next((()=>{c()}),l):s()};c()}))}}function tx(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function mo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}uh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=-1;function ch(r){return r==null}function Yc(r){return r===0&&1/r==-1/0}function ex(r){return typeof r=="number"&&Number.isInteger(r)&&!Yc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="";function nx(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=Vv(t)),t=ix(r.get(n),t);return Vv(t)}function ix(r,t){let n=t;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case PE:n+="";break;default:n+=c}}return n}function Vv(r){return r+PE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function Xr(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function UE(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t,n){this.comparator=t,this.root=n||Be.EMPTY}insert(t,n){return new ue(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Be.BLACK,null,null))}remove(t){return new ue(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Be.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Sc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Sc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Sc(this.root,t,this.comparator,!0)}}class Sc{constructor(t,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=n?s(t.key,n):1,n&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Be{constructor(t,n,s,l,c){this.key=t,this.value=n,this.color=s??Be.RED,this.left=l??Be.EMPTY,this.right=c??Be.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,l,c){return new Be(t??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const c=s(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Be.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return Be.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Be.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw vt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw vt(27949);return t+(this.isRed()?0:1)}}Be.EMPTY=null,Be.RED=!0,Be.BLACK=!1;Be.EMPTY=new class{constructor(){this.size=0}get key(){throw vt(57766)}get value(){throw vt(16141)}get color(){throw vt(16727)}get left(){throw vt(29726)}get right(){throw vt(36894)}copy(t,n,s,l,c){return this}insert(t,n,s){return new Be(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.comparator=t,this.data=new ue(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Pv(this.data.getIterator())}getIteratorFrom(t){return new Pv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof Ce)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Ce(this.comparator);return n.data=t,n}}class Pv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this.fields=t,t.sort(qe.comparator)}static empty(){return new En([])}unionWith(t){let n=new Ce(qe.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new En(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return eo(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new LE("Invalid base64 string: "+c):c}})(t);return new Ge(n)}static fromUint8Array(t){const n=(function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c})(t);return new Ge(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ut(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ge.EMPTY_BYTE_STRING=new Ge("");const rx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(r){if(Qt(!!r,39018),typeof r=="string"){let t=0;const n=rx.exec(r);if(Qt(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ve(r.seconds),nanos:ve(r.nanos)}}function ve(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Qr(r){return typeof r=="string"?Ge.fromBase64String(r):Ge.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="server_timestamp",zE="__type__",BE="__previous_value__",qE="__local_write_time__";function Gm(r){return(r?.mapValue?.fields||{})[zE]?.stringValue===jE}function hh(r){const t=r.mapValue.fields[BE];return Gm(t)?hh(t):t}function Bl(r){const t=Fr(r.mapValue.fields[qE].timestampValue);return new Gt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(t,n,s,l,c,f,p,g,y,b){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b}}const Kc="(default)";class ql{constructor(t,n){this.projectId=t,this.database=n||Kc}static empty(){return new ql("","")}get isDefaultDatabase(){return this.database===Kc}isEqual(t){return t instanceof ql&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="__type__",ax="__max__",wc={mapValue:{}},GE="__vector__",$c="value";function Yr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Gm(r)?4:lx(r)?9007199254740991:ox(r)?10:11:vt(28295,{value:r})}function yi(r,t){if(r===t)return!0;const n=Yr(r);if(n!==Yr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Bl(r).isEqual(Bl(t));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=Fr(l.timestampValue),p=Fr(c.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(l,c){return Qr(l.bytesValue).isEqual(Qr(c.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(l,c){return ve(l.geoPointValue.latitude)===ve(c.geoPointValue.latitude)&&ve(l.geoPointValue.longitude)===ve(c.geoPointValue.longitude)})(r,t);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return ve(l.integerValue)===ve(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=ve(l.doubleValue),p=ve(c.doubleValue);return f===p?Yc(f)===Yc(p):isNaN(f)&&isNaN(p)}return!1})(r,t);case 9:return eo(r.arrayValue.values||[],t.arrayValue.values||[],yi);case 10:case 11:return(function(l,c){const f=l.mapValue.fields||{},p=c.mapValue.fields||{};if(kv(f)!==kv(p))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(p[g]===void 0||!yi(f[g],p[g])))return!1;return!0})(r,t);default:return vt(52216,{left:r})}}function Hl(r,t){return(r.values||[]).find((n=>yi(n,t)))!==void 0}function no(r,t){if(r===t)return 0;const n=Yr(r),s=Yr(t);if(n!==s)return Ut(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ut(r.booleanValue,t.booleanValue);case 2:return(function(c,f){const p=ve(c.integerValue||c.doubleValue),g=ve(f.integerValue||f.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,t);case 3:return Uv(r.timestampValue,t.timestampValue);case 4:return Uv(Bl(r),Bl(t));case 5:return lm(r.stringValue,t.stringValue);case 6:return(function(c,f){const p=Qr(c),g=Qr(f);return p.compareTo(g)})(r.bytesValue,t.bytesValue);case 7:return(function(c,f){const p=c.split("/"),g=f.split("/");for(let y=0;y<p.length&&y<g.length;y++){const b=Ut(p[y],g[y]);if(b!==0)return b}return Ut(p.length,g.length)})(r.referenceValue,t.referenceValue);case 8:return(function(c,f){const p=Ut(ve(c.latitude),ve(f.latitude));return p!==0?p:Ut(ve(c.longitude),ve(f.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return Lv(r.arrayValue,t.arrayValue);case 10:return(function(c,f){const p=c.fields||{},g=f.fields||{},y=p[$c]?.arrayValue,b=g[$c]?.arrayValue,w=Ut(y?.values?.length||0,b?.values?.length||0);return w!==0?w:Lv(y,b)})(r.mapValue,t.mapValue);case 11:return(function(c,f){if(c===wc.mapValue&&f===wc.mapValue)return 0;if(c===wc.mapValue)return 1;if(f===wc.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=f.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let w=0;w<g.length&&w<b.length;++w){const x=lm(g[w],b[w]);if(x!==0)return x;const L=no(p[g[w]],y[b[w]]);if(L!==0)return L}return Ut(g.length,b.length)})(r.mapValue,t.mapValue);default:throw vt(23264,{he:n})}}function Uv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Ut(r,t);const n=Fr(r),s=Fr(t),l=Ut(n.seconds,s.seconds);return l!==0?l:Ut(n.nanos,s.nanos)}function Lv(r,t){const n=r.values||[],s=t.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=no(n[l],s[l]);if(c)return c}return Ut(n.length,s.length)}function io(r){return um(r)}function um(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Fr(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Qr(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return gt.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=um(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const f of s)c?c=!1:l+=",",l+=`${f}:${um(n.fields[f])}`;return l+"}"})(r.mapValue):vt(61005,{value:r})}function Mc(r){switch(Yr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=hh(r);return t?16+Mc(t):16;case 5:return 2*r.stringValue.length;case 6:return Qr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+Mc(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return Xr(s.fields,((c,f)=>{l+=c.length+Mc(f)})),l})(r.mapValue);default:throw vt(13486,{value:r})}}function jv(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function cm(r){return!!r&&"integerValue"in r}function Fm(r){return!!r&&"arrayValue"in r}function zv(r){return!!r&&"nullValue"in r}function Bv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Vc(r){return!!r&&"mapValue"in r}function ox(r){return(r?.mapValue?.fields||{})[HE]?.stringValue===GE}function Ol(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Xr(r.mapValue.fields,((n,s)=>t.mapValue.fields[n]=Ol(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ol(r.arrayValue.values[n]);return t}return{...r}}function lx(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===ax}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t){this.value=t}static empty(){return new cn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Vc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ol(n)}setAll(t){let n=qe.emptyPath(),s={},l=[];t.forEach(((f,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,s,l),s={},l=[],n=p.popLast()}f?s[p.lastSegment()]=Ol(f):l.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(t){const n=this.field(t.popLast());Vc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return yi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=n.mapValue.fields[t.get(s)];Vc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,s){Xr(n,((l,c)=>t[l]=c));for(const l of s)delete t[l]}clone(){return new cn(Ol(this.value))}}function FE(r){const t=[];return Xr(r.fields,((n,s)=>{const l=new qe([n]);if(Vc(s)){const c=FE(s.mapValue).fields;if(c.length===0)t.push(l);else for(const f of c)t.push(l.child(f))}else t.push(l)})),new En(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t,n,s,l,c,f,p){this.key=t,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=f,this.documentState=p}static newInvalidDocument(t){return new Ze(t,0,At.min(),At.min(),At.min(),cn.empty(),0)}static newFoundDocument(t,n,s,l){return new Ze(t,1,n,At.min(),s,l,0)}static newNoDocument(t,n){return new Ze(t,2,n,At.min(),At.min(),cn.empty(),0)}static newUnknownDocument(t,n){return new Ze(t,3,n,At.min(),At.min(),cn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ze&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(t,n){this.position=t,this.inclusive=n}}function qv(r,t,n){let s=0;for(let l=0;l<r.position.length;l++){const c=t[l],f=r.position[l];if(c.field.isKeyField()?s=gt.comparator(gt.fromName(f.referenceValue),n.key):s=no(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Hv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!yi(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(t,n="asc"){this.field=t,this.dir=n}}function ux(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{}class Se extends QE{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new hx(t,n,s):n==="array-contains"?new mx(t,s):n==="in"?new px(t,s):n==="not-in"?new gx(t,s):n==="array-contains-any"?new yx(t,s):new Se(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new fx(t,s):new dx(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(no(n,this.value)):n!==null&&Yr(this.value)===Yr(n)&&this.matchesComparison(no(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends QE{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new $n(t,n)}matches(t){return YE(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function YE(r){return r.op==="and"}function KE(r){return cx(r)&&YE(r)}function cx(r){for(const t of r.filters)if(t instanceof $n)return!1;return!0}function hm(r){if(r instanceof Se)return r.field.canonicalString()+r.op.toString()+io(r.value);if(KE(r))return r.filters.map((t=>hm(t))).join(",");{const t=r.filters.map((n=>hm(n))).join(",");return`${r.op}(${t})`}}function $E(r,t){return r instanceof Se?(function(s,l){return l instanceof Se&&s.op===l.op&&s.field.isEqual(l.field)&&yi(s.value,l.value)})(r,t):r instanceof $n?(function(s,l){return l instanceof $n&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,f,p)=>c&&$E(f,l.filters[p])),!0):!1})(r,t):void vt(19439)}function XE(r){return r instanceof Se?(function(n){return`${n.field.canonicalString()} ${n.op} ${io(n.value)}`})(r):r instanceof $n?(function(n){return n.op.toString()+" {"+n.getFilters().map(XE).join(" ,")+"}"})(r):"Filter"}class hx extends Se{constructor(t,n,s){super(t,n,s),this.key=gt.fromName(s.referenceValue)}matches(t){const n=gt.comparator(t.key,this.key);return this.matchesComparison(n)}}class fx extends Se{constructor(t,n){super(t,"in",n),this.keys=ZE("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class dx extends Se{constructor(t,n){super(t,"not-in",n),this.keys=ZE("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function ZE(r,t){return(t.arrayValue?.values||[]).map((n=>gt.fromName(n.referenceValue)))}class mx extends Se{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Fm(n)&&Hl(n.arrayValue,this.value)}}class px extends Se{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Hl(this.value.arrayValue,n)}}class gx extends Se{constructor(t,n){super(t,"not-in",n)}matches(t){if(Hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Hl(this.value.arrayValue,n)}}class yx extends Se{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Fm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Hl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(t,n=null,s=[],l=[],c=null,f=null,p=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=f,this.endAt=p,this.Te=null}}function Gv(r,t=null,n=[],s=[],l=null,c=null,f=null){return new _x(r,t,n,s,l,c,f)}function Qm(r){const t=wt(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>hm(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),ch(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>io(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>io(s))).join(",")),t.Te=n}return t.Te}function Ym(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!ux(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!$E(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Hv(r.startAt,t.startAt)&&Hv(r.endAt,t.endAt)}function fm(r){return gt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(t,n=null,s=[],l=[],c=null,f="F",p=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=f,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function vx(r,t,n,s,l,c,f,p){return new po(r,t,n,s,l,c,f,p)}function Km(r){return new po(r)}function Fv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function JE(r){return r.collectionGroup!==null}function Ml(r){const t=wt(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),n.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Ce(qe.comparator);return f.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(t).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new Gl(c,s))})),n.has(qe.keyField().canonicalString())||t.Ie.push(new Gl(qe.keyField(),s))}return t.Ie}function fi(r){const t=wt(r);return t.Ee||(t.Ee=Ex(t,Ml(r))),t.Ee}function Ex(r,t){if(r.limitType==="F")return Gv(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new Gl(l.field,c)}));const n=r.endAt?new Xc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Xc(r.startAt.position,r.startAt.inclusive):null;return Gv(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function dm(r,t){const n=r.filters.concat([t]);return new po(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function mm(r,t,n){return new po(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function fh(r,t){return Ym(fi(r),fi(t))&&r.limitType===t.limitType}function WE(r){return`${Qm(fi(r))}|lt:${r.limitType}`}function qa(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>XE(l))).join(", ")}]`),ch(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>io(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>io(l))).join(",")),`Target(${s})`})(fi(r))}; limitType=${r.limitType})`}function dh(r,t){return t.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):gt.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,t)&&(function(s,l){for(const c of Ml(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,t)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,t)&&(function(s,l){return!(s.startAt&&!(function(f,p,g){const y=qv(f,p,g);return f.inclusive?y<=0:y<0})(s.startAt,Ml(s),l)||s.endAt&&!(function(f,p,g){const y=qv(f,p,g);return f.inclusive?y>=0:y>0})(s.endAt,Ml(s),l))})(r,t)}function Tx(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function tT(r){return(t,n)=>{let s=!1;for(const l of Ml(r)){const c=bx(l,t,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function bx(r,t,n){const s=r.field.isKeyField()?gt.comparator(t.key,n.key):(function(c,f,p){const g=f.data.field(c),y=p.data.field(c);return g!==null&&y!==null?no(g,y):vt(42886)})(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return vt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Xr(this.inner,((n,s)=>{for(const[l,c]of s)t(l,c)}))}isEmpty(){return UE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=new ue(gt.comparator);function $i(){return Ax}const eT=new ue(gt.comparator);function Rl(...r){let t=eT;for(const n of r)t=t.insert(n.key,n);return t}function nT(r){let t=eT;return r.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function Ls(){return Vl()}function iT(){return Vl()}function Vl(){return new Fs((r=>r.toString()),((r,t)=>r.isEqual(t)))}const Sx=new ue(gt.comparator),wx=new Ce(gt.comparator);function Lt(...r){let t=wx;for(const n of r)t=t.add(n);return t}const Rx=new Ce(Ut);function xx(){return Rx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yc(t)?"-0":t}}function rT(r){return{integerValue:""+r}}function Ix(r,t){return ex(t)?rT(t):$m(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(){this._=void 0}}function Nx(r,t,n){return r instanceof Zc?(function(l,c){const f={fields:{[zE]:{stringValue:jE},[qE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Gm(c)&&(c=hh(c)),c&&(f.fields[BE]=c),{mapValue:f}})(n,t):r instanceof ro?aT(r,t):r instanceof so?oT(r,t):(function(l,c){const f=sT(l,c),p=Qv(f)+Qv(l.Ae);return cm(f)&&cm(l.Ae)?rT(p):$m(l.serializer,p)})(r,t)}function Cx(r,t,n){return r instanceof ro?aT(r,t):r instanceof so?oT(r,t):n}function sT(r,t){return r instanceof Jc?(function(s){return cm(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(t)?t:{integerValue:0}:null}class Zc extends mh{}class ro extends mh{constructor(t){super(),this.elements=t}}function aT(r,t){const n=lT(t);for(const s of r.elements)n.some((l=>yi(l,s)))||n.push(s);return{arrayValue:{values:n}}}class so extends mh{constructor(t){super(),this.elements=t}}function oT(r,t){let n=lT(t);for(const s of r.elements)n=n.filter((l=>!yi(l,s)));return{arrayValue:{values:n}}}class Jc extends mh{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Qv(r){return ve(r.integerValue||r.doubleValue)}function lT(r){return Fm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(t,n){this.field=t,this.transform=n}}function Dx(r,t){return r.field.isEqual(t.field)&&(function(s,l){return s instanceof ro&&l instanceof ro||s instanceof so&&l instanceof so?eo(s.elements,l.elements,yi):s instanceof Jc&&l instanceof Jc?yi(s.Ae,l.Ae):s instanceof Zc&&l instanceof Zc})(r.transform,t.transform)}class Ox{constructor(t,n){this.version=t,this.transformResults=n}}class Vn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Vn}static exists(t){return new Vn(void 0,t)}static updateTime(t){return new Vn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function kc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class ph{}function cT(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Xm(r.key,Vn.none()):new Zl(r.key,r.data,Vn.none());{const n=r.data,s=cn.empty();let l=new Ce(qe.comparator);for(let c of t.fields)if(!l.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),l=l.add(c)}return new Zr(r.key,s,new En(l.toArray()),Vn.none())}}function Mx(r,t,n){r instanceof Zl?(function(l,c,f){const p=l.value.clone(),g=Kv(l.fieldTransforms,c,f.transformResults);p.setAll(g),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(r,t,n):r instanceof Zr?(function(l,c,f){if(!kc(l.precondition,c))return void c.convertToUnknownDocument(f.version);const p=Kv(l.fieldTransforms,c,f.transformResults),g=c.data;g.setAll(hT(l)),g.setAll(p),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(r,t,n):(function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,t,n)}function kl(r,t,n,s){return r instanceof Zl?(function(c,f,p,g){if(!kc(c.precondition,f))return p;const y=c.value.clone(),b=$v(c.fieldTransforms,g,f);return y.setAll(b),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(r,t,n,s):r instanceof Zr?(function(c,f,p,g){if(!kc(c.precondition,f))return p;const y=$v(c.fieldTransforms,g,f),b=f.data;return b.setAll(hT(c)),b.setAll(y),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(r,t,n,s):(function(c,f,p){return kc(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(r,t,n)}function Vx(r,t){let n=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),c=sT(s.transform,l||null);c!=null&&(n===null&&(n=cn.empty()),n.set(s.field,c))}return n||null}function Yv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&eo(s,l,((c,f)=>Dx(c,f)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Zl extends ph{constructor(t,n,s,l=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Zr extends ph{constructor(t,n,s,l,c=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function hT(r){const t=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}})),t}function Kv(r,t,n){const s=new Map;Qt(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const c=r[l],f=c.transform,p=t.data.field(c.field);s.set(c.field,Cx(f,p,n[l]))}return s}function $v(r,t,n){const s=new Map;for(const l of r){const c=l.transform,f=n.data.field(l.field);s.set(l.field,Nx(c,f,t))}return s}class Xm extends ph{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kx extends ph{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(t,n,s,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&Mx(c,t,s[l])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=kl(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=kl(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=iT();return this.mutations.forEach((l=>{const c=t.get(l.key),f=c.overlayedDocument;let p=this.applyToLocalView(f,c.mutatedFields);p=n.has(l.key)?null:p;const g=cT(f,p);g!==null&&s.set(l.key,g),f.isValidDocument()||f.convertToNoDocument(At.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Lt())}isEqual(t){return this.batchId===t.batchId&&eo(this.mutations,t.mutations,((n,s)=>Yv(n,s)))&&eo(this.baseMutations,t.baseMutations,((n,s)=>Yv(n,s)))}}class Zm{constructor(t,n,s,l){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(t,n,s){Qt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=(function(){return Sx})();const c=t.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,s[f].version);return new Zm(t,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae,qt;function jx(r){switch(r){case $.OK:return vt(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return vt(15467,{code:r})}}function fT(r){if(r===void 0)return Ki("GRPC error has no .code"),$.UNKNOWN;switch(r){case Ae.OK:return $.OK;case Ae.CANCELLED:return $.CANCELLED;case Ae.UNKNOWN:return $.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return $.INTERNAL;case Ae.UNAVAILABLE:return $.UNAVAILABLE;case Ae.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Ae.NOT_FOUND:return $.NOT_FOUND;case Ae.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Ae.ABORTED:return $.ABORTED;case Ae.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Ae.DATA_LOSS:return $.DATA_LOSS;default:return vt(39323,{code:r})}}(qt=Ae||(Ae={}))[qt.OK=0]="OK",qt[qt.CANCELLED=1]="CANCELLED",qt[qt.UNKNOWN=2]="UNKNOWN",qt[qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qt[qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qt[qt.NOT_FOUND=5]="NOT_FOUND",qt[qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",qt[qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",qt[qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",qt[qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qt[qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qt[qt.ABORTED=10]="ABORTED",qt[qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",qt[qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",qt[qt.INTERNAL=13]="INTERNAL",qt[qt.UNAVAILABLE=14]="UNAVAILABLE",qt[qt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=new qr([4294967295,4294967295],0);function Xv(r){const t=zx().encode(r),n=new RE;return n.update(t),new Uint8Array(n.digest())}function Zv(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new qr([n,s],0),new qr([l,c],0)]}class Jm{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new xl(`Invalid padding: ${n}`);if(s<0)throw new xl(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new xl(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new xl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=qr.fromNumber(this.ge)}ye(t,n,s){let l=t.add(n.multiply(qr.fromNumber(s)));return l.compare(Bx)===1&&(l=new qr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Xv(t),[s,l]=Zv(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,l,c);if(!this.we(f))return!1}return!0}static create(t,n,s){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),f=new Jm(c,l,n);return s.forEach((p=>f.insert(p))),f}insert(t){if(this.ge===0)return;const n=Xv(t),[s,l]=Zv(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,l,c);this.Se(f)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class xl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(t,n,s,l,c){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const l=new Map;return l.set(t,Jl.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new gh(At.min(),l,new ue(Ut),$i(),Lt())}}class Jl{constructor(t,n,s,l,c){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Jl(s,n,Lt(),Lt(),Lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(t,n,s,l){this.be=t,this.removedTargetIds=n,this.key=s,this.De=l}}class dT{constructor(t,n){this.targetId=t,this.Ce=n}}class mT{constructor(t,n,s=Ge.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=l}}class Jv{constructor(){this.ve=0,this.Fe=Wv(),this.Me=Ge.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Lt(),n=Lt(),s=Lt();return this.Fe.forEach(((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:vt(38017,{changeType:c})}})),new Jl(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=Wv()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qx{constructor(t){this.Ge=t,this.ze=new Map,this.je=$i(),this.Je=Rc(),this.He=Rc(),this.Ye=new ue(Ut)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:vt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,s=t.Ce.count,l=this.ot(n);if(l){const c=l.target;if(fm(c))if(s===0){const f=new gt(c.path);this.et(n,f,Ze.newNoDocument(f,At.min()))}else Qt(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const p=this.ut(t),g=p?this.ct(p,t,f):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let f,p;try{f=Qr(s).toUint8Array()}catch(g){if(g instanceof LE)return to("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Jm(f,l,c)}catch(g){return to(g instanceof xl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((c=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;t.mightContain(p)||(this.et(n,c,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((c,f)=>{const p=this.ot(f);if(p){if(c.current&&fm(p.target)){const g=new gt(p.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,Ze.newNoDocument(g,t))}c.Be&&(n.set(f,c.ke()),c.qe())}}));let s=Lt();this.He.forEach(((c,f)=>{let p=!0;f.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(t)));const l=new gh(t,n,this.Ye,this.je,s);return this.je=$i(),this.Je=Rc(),this.He=Rc(),this.Ye=new ue(Ut),l}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Jv,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Ce(Ut),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Ce(Ut),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||ut("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Jv),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Rc(){return new ue(gt.comparator)}function Wv(){return new ue(gt.comparator)}const Hx={asc:"ASCENDING",desc:"DESCENDING"},Gx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fx={and:"AND",or:"OR"};class Qx{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function pm(r,t){return r.useProto3Json||ch(t)?t:{value:t}}function Wc(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function pT(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function Yx(r,t){return Wc(r,t.toTimestamp())}function di(r){return Qt(!!r,49232),At.fromTimestamp((function(n){const s=Fr(n);return new Gt(s.seconds,s.nanos)})(r))}function Wm(r,t){return gm(r,t).canonicalString()}function gm(r,t){const n=(function(l){return new re(["projects",l.projectId,"databases",l.database])})(r).child("documents");return t===void 0?n:n.child(t)}function gT(r){const t=re.fromString(r);return Qt(TT(t),10190,{key:t.toString()}),t}function ym(r,t){return Wm(r.databaseId,t.path)}function Hd(r,t){const n=gT(t);if(n.get(1)!==r.databaseId.projectId)throw new lt($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new lt($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new gt(_T(n))}function yT(r,t){return Wm(r.databaseId,t)}function Kx(r){const t=gT(r);return t.length===4?re.emptyPath():_T(t)}function _m(r){return new re(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function _T(r){return Qt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function t0(r,t,n){return{name:ym(r,t),fields:n.value.mapValue.fields}}function $x(r,t){let n;if("targetChange"in t){t.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:vt(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=(function(y,b){return y.useProto3Json?(Qt(b===void 0||typeof b=="string",58123),Ge.fromBase64String(b||"")):(Qt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Ge.fromUint8Array(b||new Uint8Array))})(r,t.targetChange.resumeToken),f=t.targetChange.cause,p=f&&(function(y){const b=y.code===void 0?$.UNKNOWN:fT(y.code);return new lt(b,y.message||"")})(f);n=new mT(s,l,c,p||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=Hd(r,s.document.name),c=di(s.document.updateTime),f=s.document.createTime?di(s.document.createTime):At.min(),p=new cn({mapValue:{fields:s.document.fields}}),g=Ze.newFoundDocument(l,c,f,p),y=s.targetIds||[],b=s.removedTargetIds||[];n=new Pc(y,b,g.key,g)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=Hd(r,s.document),c=s.readTime?di(s.readTime):At.min(),f=Ze.newNoDocument(l,c),p=s.removedTargetIds||[];n=new Pc([],p,f.key,f)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=Hd(r,s.document),c=s.removedTargetIds||[];n=new Pc([],c,l,null)}else{if(!("filter"in t))return vt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,f=new Lx(l,c),p=s.targetId;n=new dT(p,f)}}return n}function Xx(r,t){let n;if(t instanceof Zl)n={update:t0(r,t.key,t.value)};else if(t instanceof Xm)n={delete:ym(r,t.key)};else if(t instanceof Zr)n={update:t0(r,t.key,t.data),updateMask:sI(t.fieldMask)};else{if(!(t instanceof kx))return vt(16599,{Vt:t.type});n={verify:ym(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(c,f){const p=f.transform;if(p instanceof Zc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ro)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof so)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Jc)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw vt(20930,{transform:f.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:Yx(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:vt(27497)})(r,t.precondition)),n}function Zx(r,t){return r&&r.length>0?(Qt(t!==void 0,14353),r.map((n=>(function(l,c){let f=l.updateTime?di(l.updateTime):di(c);return f.isEqual(At.min())&&(f=di(c)),new Ox(f,l.transformResults||[])})(n,t)))):[]}function Jx(r,t){return{documents:[yT(r,t.path)]}}function Wx(r,t){const n={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=yT(r,l);const c=(function(y){if(y.length!==0)return ET($n.create(y,"and"))})(t.filters);c&&(n.structuredQuery.where=c);const f=(function(y){if(y.length!==0)return y.map((b=>(function(x){return{field:Ha(x.field),direction:nI(x.dir)}})(b)))})(t.orderBy);f&&(n.structuredQuery.orderBy=f);const p=pm(r,t.limit);return p!==null&&(n.structuredQuery.limit=p),t.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:n,parent:l}}function tI(r){let t=Kx(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Qt(s===1,65062);const b=n.from[0];b.allDescendants?l=b.collectionId:t=t.child(b.collectionId)}let c=[];n.where&&(c=(function(w){const x=vT(w);return x instanceof $n&&KE(x)?x.getFilters():[x]})(n.where));let f=[];n.orderBy&&(f=(function(w){return w.map((x=>(function(W){return new Gl(Ga(W.field),(function(tt){switch(tt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(x)))})(n.orderBy));let p=null;n.limit&&(p=(function(w){let x;return x=typeof w=="object"?w.value:w,ch(x)?null:x})(n.limit));let g=null;n.startAt&&(g=(function(w){const x=!!w.before,L=w.values||[];return new Xc(L,x)})(n.startAt));let y=null;return n.endAt&&(y=(function(w){const x=!w.before,L=w.values||[];return new Xc(L,x)})(n.endAt)),vx(t,l,f,c,p,"F",g,y)}function eI(r,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function vT(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ga(n.unaryFilter.field);return Se.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Ga(n.unaryFilter.field);return Se.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ga(n.unaryFilter.field);return Se.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ga(n.unaryFilter.field);return Se.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return vt(61313);default:return vt(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Se.create(Ga(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return vt(58110);default:return vt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return $n.create(n.compositeFilter.filters.map((s=>vT(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return vt(1026)}})(n.compositeFilter.op))})(r):vt(30097,{filter:r})}function nI(r){return Hx[r]}function iI(r){return Gx[r]}function rI(r){return Fx[r]}function Ha(r){return{fieldPath:r.canonicalString()}}function Ga(r){return qe.fromServerFormat(r.fieldPath)}function ET(r){return r instanceof Se?(function(n){if(n.op==="=="){if(Bv(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NAN"}};if(zv(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Bv(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NAN"}};if(zv(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ha(n.field),op:iI(n.op),value:n.value}}})(r):r instanceof $n?(function(n){const s=n.getFilters().map((l=>ET(l)));return s.length===1?s[0]:{compositeFilter:{op:rI(n.op),filters:s}}})(r):vt(54877,{filter:r})}function sI(r){const t=[];return r.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function TT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(t,n,s,l,c=At.min(),f=At.min(),p=Ge.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(t){return new Lr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(t){this.yt=t}}function oI(r){const t=tI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?mm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.Cn=new uI}addToCollectionParentIndex(t,n){return this.Cn.add(n),et.resolve()}getCollectionParents(t,n){return et.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return et.resolve()}deleteFieldIndex(t,n){return et.resolve()}deleteAllFieldIndexes(t){return et.resolve()}createTargetIndexes(t,n){return et.resolve()}getDocumentsMatchingTarget(t,n){return et.resolve(null)}getIndexType(t,n){return et.resolve(0)}getFieldIndexes(t,n){return et.resolve([])}getNextCollectionGroupToUpdate(t){return et.resolve(null)}getMinOffset(t,n){return et.resolve(Gr.min())}getMinOffsetFromCollectionGroup(t,n){return et.resolve(Gr.min())}updateCollectionGroup(t,n,s){return et.resolve()}updateIndexEntries(t,n){return et.resolve()}}class uI{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n]||new Ce(re.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Ce(re.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bT=41943040;class un{static withCacheSize(t){return new un(t,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(bT,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ao(0)}static cr(){return new ao(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="LruGarbageCollector",cI=1048576;function i0([r,t],[n,s]){const l=Ut(r,n);return l===0?Ut(t,s):l}class hI{constructor(t){this.Ir=t,this.buffer=new Ce(i0),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();i0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fI{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ut(n0,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){mo(n)?ut(n0,"Ignoring IndexedDB error during garbage collection: ",n):await fo(n)}await this.Vr(3e5)}))}}class dI{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return et.resolve(uh.ce);const s=new hI(n);return this.mr.forEachTarget(t,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(ut("LruGarbageCollector","Garbage collection skipped; disabled"),et.resolve(e0)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(ut("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),e0):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,l,c,f,p,g,y;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ut("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,f=Date.now(),this.nthSequenceNumber(t,l)))).next((w=>(s=w,p=Date.now(),this.removeTargets(t,s,n)))).next((w=>(c=w,g=Date.now(),this.removeOrphanedDocuments(t,s)))).next((w=>(y=Date.now(),Ba()<=Pt.DEBUG&&ut("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-b}ms
	Determined least recently used ${l} in `+(p-f)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${w} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),et.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:w}))))}}function mI(r,t){return new dI(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(){this.changes=new Fs((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ze.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?et.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(t,n,s,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(s!==null&&kl(s.mutation,l,En.empty(),Gt.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,Lt()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=Lt()){const l=Ls();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,s).next((c=>{let f=Rl();return c.forEach(((p,g)=>{f=f.insert(p,g.overlayedDocument)})),f}))))}getOverlayedDocuments(t,n){const s=Ls();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,Lt())))}populateOverlays(t,n,s){const l=[];return s.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(t,l).next((c=>{c.forEach(((f,p)=>{n.set(f,p)}))}))}computeViews(t,n,s,l){let c=$i();const f=Vl(),p=(function(){return Vl()})();return n.forEach(((g,y)=>{const b=s.get(y.key);l.has(y.key)&&(b===void 0||b.mutation instanceof Zr)?c=c.insert(y.key,y):b!==void 0?(f.set(y.key,b.mutation.getFieldMask()),kl(b.mutation,y,b.mutation.getFieldMask(),Gt.now())):f.set(y.key,En.empty())})),this.recalculateAndSaveOverlays(t,c).next((g=>(g.forEach(((y,b)=>f.set(y,b))),n.forEach(((y,b)=>p.set(y,new gI(b,f.get(y)??null)))),p)))}recalculateAndSaveOverlays(t,n){const s=Vl();let l=new ue(((f,p)=>f-p)),c=Lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((f=>{for(const p of f)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let b=s.get(g)||En.empty();b=p.applyToLocalView(y,b),s.set(g,b);const w=(l.get(p.batchId)||Lt()).add(g);l=l.insert(p.batchId,w)}))})).next((()=>{const f=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,b=g.value,w=iT();b.forEach((x=>{if(!c.has(x)){const L=cT(n.get(x),s.get(x));L!==null&&w.set(x,L),c=c.add(x)}})),f.push(this.documentOverlayCache.saveOverlays(t,y,w))}return et.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,l){return(function(f){return gt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):JE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,l):this.getDocumentsMatchingCollectionQuery(t,n,s,l)}getNextDocuments(t,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,l).next((c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,l-c.size):et.resolve(Ls());let p=zl,g=c;return f.next((y=>et.forEach(y,((b,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),c.get(b)?et.resolve():this.remoteDocumentCache.getEntry(t,b).next((x=>{g=g.insert(b,x)}))))).next((()=>this.populateOverlays(t,y,c))).next((()=>this.computeViews(t,g,y,Lt()))).next((b=>({batchId:p,changes:nT(b)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new gt(n)).next((s=>{let l=Rl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,l){const c=n.collectionGroup;let f=Rl();return this.indexManager.getCollectionParents(t,c).next((p=>et.forEach(p,(g=>{const y=(function(w,x){return new po(x,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(t,y,s,l).next((b=>{b.forEach(((w,x)=>{f=f.insert(w,x)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(t,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,c,l)))).next((f=>{c.forEach(((g,y)=>{const b=y.getKey();f.get(b)===null&&(f=f.insert(b,Ze.newInvalidDocument(b)))}));let p=Rl();return f.forEach(((g,y)=>{const b=c.get(g);b!==void 0&&kl(b.mutation,y,En.empty(),Gt.now()),dh(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return et.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:di(l.createTime)}})(n)),et.resolve()}getNamedQuery(t,n){return et.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:oI(l.bundledQuery),readTime:di(l.readTime)}})(n)),et.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.overlays=new ue(gt.comparator),this.qr=new Map}getOverlay(t,n){return et.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Ls();return et.forEach(n,(l=>this.getOverlay(t,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((l,c)=>{this.St(t,n,c)})),et.resolve()}removeOverlaysForBatchId(t,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),et.resolve()}getOverlaysForCollection(t,n,s){const l=Ls(),c=n.length+1,f=new gt(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return et.resolve(l)}getOverlaysForCollectionGroup(t,n,s,l){let c=new ue(((y,b)=>y-b));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let b=c.get(y.largestBatchId);b===null&&(b=Ls(),c=c.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=Ls(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=l)););return et.resolve(p)}St(t,n,s){const l=this.overlays.get(s.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new Ux(n,s));let c=this.qr.get(n);c===void 0&&(c=Lt(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(t){return et.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,et.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(){this.Qr=new Ce(Pe.$r),this.Ur=new Ce(Pe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new Pe(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new Pe(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new gt(new re([])),s=new Pe(n,t),l=new Pe(n,t+1),c=[];return this.Ur.forEachInRange([s,l],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new gt(new re([])),s=new Pe(n,t),l=new Pe(n,t+1);let c=Lt();return this.Ur.forEachInRange([s,l],(f=>{c=c.add(f.key)})),c}containsKey(t){const n=new Pe(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Pe{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return gt.comparator(t.key,n.key)||Ut(t.Yr,n.Yr)}static Kr(t,n){return Ut(t.Yr,n.Yr)||gt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ce(Pe.$r)}checkEmpty(t){return et.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new Px(c,n,s,l);this.mutationQueue.push(f);for(const p of l)this.Zr=this.Zr.add(new Pe(p.key,c)),this.indexManager.addToCollectionParentIndex(t,p.key.path.popLast());return et.resolve(f)}lookupMutationBatch(t,n){return et.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,l=this.ei(s),c=l<0?0:l;return et.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return et.resolve(this.mutationQueue.length===0?Hm:this.tr-1)}getAllMutationBatches(t){return et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Pe(n,0),l=new Pe(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(f=>{const p=this.Xr(f.Yr);c.push(p)})),et.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ce(Ut);return n.forEach((l=>{const c=new Pe(l,0),f=new Pe(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(p=>{s=s.add(p.Yr)}))})),et.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,l=s.length+1;let c=s;gt.isDocumentKey(c)||(c=c.child(""));const f=new Pe(new gt(c),0);let p=new Ce(Ut);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Yr)),!0)}),f),et.resolve(this.ti(p))}ti(t){const n=[];return t.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){Qt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return et.forEach(n.mutations,(l=>{const c=new Pe(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new Pe(n,0),l=this.Zr.firstAfterOrEqual(s);return et.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,et.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(t){this.ri=t,this.docs=(function(){return new ue(gt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return et.resolve(s?s.document.mutableCopy():Ze.newInvalidDocument(n))}getEntries(t,n){let s=$i();return n.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():Ze.newInvalidDocument(l))})),et.resolve(s)}getDocumentsMatchingQuery(t,n,s,l){let c=$i();const f=n.path,p=new gt(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||Z2(X2(b),s)<=0||(l.has(b.key)||dh(n,b))&&(c=c.insert(b.key,b.mutableCopy()))}return et.resolve(c)}getAllFromCollectionGroup(t,n,s,l){vt(9500)}ii(t,n){return et.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new AI(this)}getSize(t){return et.resolve(this.size)}}class AI extends pI{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)})),et.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(t){this.persistence=t,this.si=new Fs((n=>Qm(n)),Ym),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.oi=0,this._i=new tp,this.targetCount=0,this.ai=ao.ur()}forEachTarget(t,n){return this.si.forEach(((s,l)=>n(l))),et.resolve()}getLastRemoteSnapshotVersion(t){return et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return et.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),et.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),et.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new ao(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,et.resolve()}updateTargetData(t,n){return this.Pr(n),et.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,et.resolve()}removeTargets(t,n,s){let l=0;const c=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(t,p.targetId)),l++)})),et.waitFor(c).next((()=>l))}getTargetCount(t){return et.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return et.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),et.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((f=>{c.push(l.markPotentiallyOrphaned(t,f))})),et.waitFor(c)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),et.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return et.resolve(s)}containsKey(t,n){return et.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(t,n){this.ui={},this.overlays={},this.ci=new uh(0),this.li=!1,this.li=!0,this.hi=new EI,this.referenceDelegate=t(this),this.Pi=new SI(this),this.indexManager=new lI,this.remoteDocumentCache=(function(l){return new bI(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new aI(n),this.Ii=new _I(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new vI,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new TI(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){ut("MemoryPersistence","Starting transaction:",t);const l=new wI(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(t,n){return et.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class wI extends W2{constructor(t){super(),this.currentSequenceNumber=t}}class ep{constructor(t){this.persistence=t,this.Ri=new tp,this.Vi=null}static mi(t){return new ep(t)}get fi(){if(this.Vi)return this.Vi;throw vt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),et.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),et.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),et.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return et.forEach(this.fi,(s=>{const l=gt.fromPath(s);return this.gi(t,l).next((c=>{c||n.removeEntry(l,At.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return et.or([()=>et.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class th{constructor(t,n){this.persistence=t,this.pi=new Fs((s=>nx(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=mI(this,n)}static mi(t,n){return new th(t,n)}Ei(){}di(t){return et.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((l=>s+l))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return et.forEach(this.pi,((s,l)=>this.br(t,s,l).next((c=>c?et.resolve():n(l)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(t,(f=>this.br(t,f,n).next((p=>{p||(s++,c.removeEntry(f,At.min()))})))).next((()=>c.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),et.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),et.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),et.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),et.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Mc(t.data.value)),n}br(t,n,s){return et.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return et.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(t,n,s,l){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=l}static As(t,n){let s=Lt(),l=Lt();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new np(t,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return yS()?8:tx(Je())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,l){const c={result:null};return this.ys(t,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(t,n,l,s).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new RI;return this.Ss(t,n,f).next((p=>{if(c.result=p,this.Vs)return this.bs(t,n,f,p.size)}))})).next((()=>c.result))}bs(t,n,s,l){return s.documentReadCount<this.fs?(Ba()<=Pt.DEBUG&&ut("QueryEngine","SDK will not create cache indexes for query:",qa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),et.resolve()):(Ba()<=Pt.DEBUG&&ut("QueryEngine","Query:",qa(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Ba()<=Pt.DEBUG&&ut("QueryEngine","The SDK decides to create cache indexes for query:",qa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,fi(n))):et.resolve())}ys(t,n){if(Fv(n))return et.resolve(null);let s=fi(n);return this.indexManager.getIndexType(t,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=mm(n,null,"F"),s=fi(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((c=>{const f=Lt(...c);return this.ps.getDocuments(t,f).next((p=>this.indexManager.getMinOffset(t,s).next((g=>{const y=this.Ds(n,p);return this.Cs(n,y,f,g.readTime)?this.ys(t,mm(n,null,"F")):this.vs(t,y,n,g)}))))})))))}ws(t,n,s,l){return Fv(n)||l.isEqual(At.min())?et.resolve(null):this.ps.getDocuments(t,s).next((c=>{const f=this.Ds(n,c);return this.Cs(n,f,s,l)?et.resolve(null):(Ba()<=Pt.DEBUG&&ut("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),qa(n)),this.vs(t,f,n,$2(l,zl)).next((p=>p)))}))}Ds(t,n){let s=new Ce(tT(t));return n.forEach(((l,c)=>{dh(t,c)&&(s=s.add(c))})),s}Cs(t,n,s,l){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const c=t.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(t,n,s){return Ba()<=Pt.DEBUG&&ut("QueryEngine","Using full collection scan to execute query:",qa(n)),this.ps.getDocumentsMatchingQuery(t,n,Gr.min(),s)}vs(t,n,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="LocalStore",II=3e8;class NI{constructor(t,n,s,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new ue(Ut),this.xs=new Fs((c=>Qm(c)),Ym),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new yI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function CI(r,t,n,s){return new NI(r,t,n,s)}async function ST(r,t){const n=wt(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const f=[],p=[];let g=Lt();for(const y of l){f.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of c){p.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return n.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:p})))}))}))}function DI(r,t){const n=wt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=t.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,b){const w=y.batch,x=w.keys();let L=et.resolve();return x.forEach((W=>{L=L.next((()=>b.getEntry(g,W))).next((X=>{const tt=y.docVersions.get(W);Qt(tt!==null,48541),X.version.compareTo(tt)<0&&(w.applyToRemoteDocument(X,y),X.isValidDocument()&&(X.setReadTime(y.commitVersion),b.addEntry(X)))}))})),L.next((()=>p.mutationQueue.removeMutationBatch(g,w)))})(n,s,t,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let g=Lt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(t)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function wT(r){const t=wt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function OI(r,t){const n=wt(r),s=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];t.targetChanges.forEach(((b,w)=>{const x=l.get(w);if(!x)return;p.push(n.Pi.removeMatchingKeys(c,b.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(c,b.addedDocuments,w))));let L=x.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(w)!==null?L=L.withResumeToken(Ge.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):b.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(b.resumeToken,s)),l=l.insert(w,L),(function(X,tt,nt){return X.resumeToken.approximateByteSize()===0||tt.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=II?!0:nt.addedDocuments.size+nt.modifiedDocuments.size+nt.removedDocuments.size>0})(x,L,b)&&p.push(n.Pi.updateTargetData(c,L))}));let g=$i(),y=Lt();if(t.documentUpdates.forEach((b=>{t.resolvedLimboDocuments.has(b)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,b))})),p.push(MI(c,f,t.documentUpdates).next((b=>{g=b.ks,y=b.qs}))),!s.isEqual(At.min())){const b=n.Pi.getLastRemoteSnapshotVersion(c).next((w=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));p.push(b)}return et.waitFor(p).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.Ms=l,c)))}function MI(r,t,n){let s=Lt(),l=Lt();return n.forEach((c=>s=s.add(c))),t.getEntries(r,s).next((c=>{let f=$i();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(At.min())?(t.removeEntry(p,g.readTime),f=f.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(g),f=f.insert(p,g)):ut(ip,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:f,qs:l}}))}function VI(r,t){const n=wt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Hm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function kI(r,t){const n=wt(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,t).next((c=>c?(l=c,et.resolve(l)):n.Pi.allocateTargetId(s).next((f=>(l=new Lr(t,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function vm(r,t,n){const s=wt(r),l=s.Ms.get(t),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(f=>s.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!mo(f))throw f;ut(ip,`Failed to update sequence numbers for target ${t}: ${f}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function r0(r,t,n){const s=wt(r);let l=At.min(),c=Lt();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(g,y,b){const w=wt(g),x=w.xs.get(b);return x!==void 0?et.resolve(w.Ms.get(x)):w.Pi.getTargetData(y,b)})(s,f,fi(t)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,p.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,t,n?l:At.min(),n?c:Lt()))).next((p=>(PI(s,Tx(t),p),{documents:p,Qs:c})))))}function PI(r,t,n){let s=r.Os.get(t)||At.min();n.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(t,s)}class s0{constructor(){this.activeTargetIds=xx()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class UI{constructor(){this.Mo=new s0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new s0,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="ConnectivityMonitor";class o0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ut(a0,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ut(a0,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xc=null;function Em(){return xc===null?xc=(function(){return 268435456+Math.round(2147483648*Math.random())})():xc++,"0x"+xc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="RestConnection",jI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zI{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Kc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,n,s,l,c){const f=Em(),p=this.zo(t,n.toUriEncodedString());ut(Gd,`Sending RPC '${t}' ${f}:`,p,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:y}=new URL(p),b=lo(y);return this.Jo(t,p,g,s,b).then((w=>(ut(Gd,`Received RPC '${t}' ${f}: `,w),w)),(w=>{throw to(Gd,`RPC '${t}' ${f} failed with error: `,w,"url: ",p,"request:",s),w}))}Ho(t,n,s,l,c,f){return this.Go(t,n,s,l,c)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ho})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>t[c]=l)),s&&s.headers.forEach(((l,c)=>t[c]=l))}zo(t,n){const s=jI[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e="WebChannelConnection";class qI extends zI{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,l,c){const f=Em();return new Promise(((p,g)=>{const y=new xE;y.setWithCredentials(!0),y.listenOnce(IE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Oc.NO_ERROR:const w=y.getResponseJson();ut($e,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(w)),p(w);break;case Oc.TIMEOUT:ut($e,`RPC '${t}' ${f} timed out`),g(new lt($.DEADLINE_EXCEEDED,"Request time out"));break;case Oc.HTTP_ERROR:const x=y.getStatus();if(ut($e,`RPC '${t}' ${f} failed with status:`,x,"response text:",y.getResponseText()),x>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const W=L?.error;if(W&&W.status&&W.message){const X=(function(nt){const ft=nt.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(ft)>=0?ft:$.UNKNOWN})(W.status);g(new lt(X,W.message))}else g(new lt($.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new lt($.UNAVAILABLE,"Connection failed."));break;default:vt(9055,{l_:t,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ut($e,`RPC '${t}' ${f} completed.`)}}));const b=JSON.stringify(l);ut($e,`RPC '${t}' ${f} sending request:`,l),y.send(n,"POST",b,s,15)}))}T_(t,n,s){const l=Em(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=DE(),p=CE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const b=c.join("");ut($e,`Creating RPC '${t}' stream ${l}: ${b}`,g);const w=f.createWebChannel(b,g);this.I_(w);let x=!1,L=!1;const W=new BI({Yo:tt=>{L?ut($e,`Not sending because RPC '${t}' stream ${l} is closed:`,tt):(x||(ut($e,`Opening RPC '${t}' stream ${l} transport.`),w.open(),x=!0),ut($e,`RPC '${t}' stream ${l} sending:`,tt),w.send(tt))},Zo:()=>w.close()}),X=(tt,nt,ft)=>{tt.listen(nt,(ht=>{try{ft(ht)}catch(jt){setTimeout((()=>{throw jt}),0)}}))};return X(w,wl.EventType.OPEN,(()=>{L||(ut($e,`RPC '${t}' stream ${l} transport opened.`),W.o_())})),X(w,wl.EventType.CLOSE,(()=>{L||(L=!0,ut($e,`RPC '${t}' stream ${l} transport closed`),W.a_(),this.E_(w))})),X(w,wl.EventType.ERROR,(tt=>{L||(L=!0,to($e,`RPC '${t}' stream ${l} transport errored. Name:`,tt.name,"Message:",tt.message),W.a_(new lt($.UNAVAILABLE,"The operation could not be completed")))})),X(w,wl.EventType.MESSAGE,(tt=>{if(!L){const nt=tt.data[0];Qt(!!nt,16349);const ft=nt,ht=ft?.error||ft[0]?.error;if(ht){ut($e,`RPC '${t}' stream ${l} received error:`,ht);const jt=ht.status;let ot=(function(R){const C=Ae[R];if(C!==void 0)return fT(C)})(jt),Mt=ht.message;ot===void 0&&(ot=$.INTERNAL,Mt="Unknown error status: "+jt+" with message "+ht.message),L=!0,W.a_(new lt(ot,Mt)),w.close()}else ut($e,`RPC '${t}' stream ${l} received:`,nt),W.u_(nt)}})),X(p,NE.STAT_EVENT,(tt=>{tt.stat===om.PROXY?ut($e,`RPC '${t}' stream ${l} detected buffering proxy`):tt.stat===om.NOPROXY&&ut($e,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{W.__()}),0),W}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Fd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(r){return new Qx(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(t,n,s=1e3,l=1.5,c=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&ut("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="PersistentStream";class xT{constructor(t,n,s,l,c,f,p,g){this.Mi=t,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new RT(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Ki(n.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{t((()=>{const l=new lt($.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return ut(l0,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(ut(l0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class HI extends xT{constructor(t,n,s,l,c,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=$x(this.serializer,t),s=(function(c){if(!("targetChange"in c))return At.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?At.min():f.readTime?di(f.readTime):At.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=_m(this.serializer),n.addTarget=(function(c,f){let p;const g=f.target;if(p=fm(g)?{documents:Jx(c,g)}:{query:Wx(c,g).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=pT(c,f.resumeToken);const y=pm(c,f.expectedCount);y!==null&&(p.expectedCount=y)}else if(f.snapshotVersion.compareTo(At.min())>0){p.readTime=Wc(c,f.snapshotVersion.toTimestamp());const y=pm(c,f.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,t);const s=eI(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=_m(this.serializer),n.removeTarget=t,this.q_(n)}}class GI extends xT{constructor(t,n,s,l,c,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Qt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Qt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Qt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=Zx(t.writeResults,t.commitTime),s=di(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=_m(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>Xx(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{}class QI extends FI{constructor(t,n,s,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new lt($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(t,gm(n,s),l,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new lt($.UNKNOWN,c.toString())}))}Ho(t,n,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(t,gm(n,s),l,f,p,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new lt($.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class YI{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ki(n),this.aa=!1):ut("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="RemoteStore";class KI{constructor(t,n,s,l,c){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{Qs(this)&&(ut(Gs,"Restarting streams for network reachability change."),await(async function(g){const y=wt(g);y.Ea.add(4),await Wl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await _h(y)})(this))}))})),this.Ra=new YI(s,l)}}async function _h(r){if(Qs(r))for(const t of r.da)await t(!0)}async function Wl(r){for(const t of r.da)await t(!1)}function IT(r,t){const n=wt(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),op(n)?ap(n):go(n).O_()&&sp(n,t))}function rp(r,t){const n=wt(r),s=go(n);n.Ia.delete(t),s.O_()&&NT(n,t),n.Ia.size===0&&(s.O_()?s.L_():Qs(n)&&n.Ra.set("Unknown"))}function sp(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(At.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}go(r).Y_(t)}function NT(r,t){r.Va.Ue(t),go(r).Z_(t)}function ap(r){r.Va=new qx({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),go(r).start(),r.Ra.ua()}function op(r){return Qs(r)&&!go(r).x_()&&r.Ia.size>0}function Qs(r){return wt(r).Ea.size===0}function CT(r){r.Va=void 0}async function $I(r){r.Ra.set("Online")}async function XI(r){r.Ia.forEach(((t,n)=>{sp(r,t)}))}async function ZI(r,t){CT(r),op(r)?(r.Ra.ha(t),ap(r)):r.Ra.set("Unknown")}async function JI(r,t,n){if(r.Ra.set("Online"),t instanceof mT&&t.state===2&&t.cause)try{await(async function(l,c){const f=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,f),l.Ia.delete(p),l.Va.removeTarget(p))})(r,t)}catch(s){ut(Gs,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await eh(r,s)}else if(t instanceof Pc?r.Va.Ze(t):t instanceof dT?r.Va.st(t):r.Va.tt(t),!n.isEqual(At.min()))try{const s=await wT(r.localStore);n.compareTo(s)>=0&&await(function(c,f){const p=c.Va.Tt(f);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=c.Ia.get(y);b&&c.Ia.set(y,b.withResumeToken(g.resumeToken,f))}})),p.targetMismatches.forEach(((g,y)=>{const b=c.Ia.get(g);if(!b)return;c.Ia.set(g,b.withResumeToken(Ge.EMPTY_BYTE_STRING,b.snapshotVersion)),NT(c,g);const w=new Lr(b.target,g,y,b.sequenceNumber);sp(c,w)})),c.remoteSyncer.applyRemoteEvent(p)})(r,n)}catch(s){ut(Gs,"Failed to raise snapshot:",s),await eh(r,s)}}async function eh(r,t,n){if(!mo(t))throw t;r.Ea.add(1),await Wl(r),r.Ra.set("Offline"),n||(n=()=>wT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ut(Gs,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await _h(r)}))}function DT(r,t){return t().catch((n=>eh(r,n,t)))}async function vh(r){const t=wt(r),n=Kr(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Hm;for(;WI(t);)try{const l=await VI(t.localStore,s);if(l===null){t.Ta.length===0&&n.L_();break}s=l.batchId,tN(t,l)}catch(l){await eh(t,l)}OT(t)&&MT(t)}function WI(r){return Qs(r)&&r.Ta.length<10}function tN(r,t){r.Ta.push(t);const n=Kr(r);n.O_()&&n.X_&&n.ea(t.mutations)}function OT(r){return Qs(r)&&!Kr(r).x_()&&r.Ta.length>0}function MT(r){Kr(r).start()}async function eN(r){Kr(r).ra()}async function nN(r){const t=Kr(r);for(const n of r.Ta)t.ea(n.mutations)}async function iN(r,t,n){const s=r.Ta.shift(),l=Zm.from(s,t,n);await DT(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await vh(r)}async function rN(r,t){t&&Kr(r).X_&&await(async function(s,l){if((function(f){return jx(f)&&f!==$.ABORTED})(l.code)){const c=s.Ta.shift();Kr(s).B_(),await DT(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await vh(s)}})(r,t),OT(r)&&MT(r)}async function u0(r,t){const n=wt(r);n.asyncQueue.verifyOperationInProgress(),ut(Gs,"RemoteStore received new credentials");const s=Qs(n);n.Ea.add(3),await Wl(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await _h(n)}async function sN(r,t){const n=wt(r);t?(n.Ea.delete(2),await _h(n)):t||(n.Ea.add(2),await Wl(n),n.Ra.set("Unknown"))}function go(r){return r.ma||(r.ma=(function(n,s,l){const c=wt(n);return c.sa(),new HI(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:$I.bind(null,r),t_:XI.bind(null,r),r_:ZI.bind(null,r),H_:JI.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),op(r)?ap(r):r.Ra.set("Unknown")):(await r.ma.stop(),CT(r))}))),r.ma}function Kr(r){return r.fa||(r.fa=(function(n,s,l){const c=wt(n);return c.sa(),new GI(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:eN.bind(null,r),r_:rN.bind(null,r),ta:nN.bind(null,r),na:iN.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await vh(r)):(await r.fa.stop(),r.Ta.length>0&&(ut(Gs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(t,n,s,l,c){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,l,c){const f=Date.now()+s,p=new lp(t,n,f,l,c);return p.start(s),p}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt($.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function up(r,t){if(Ki("AsyncQueue",`${t}: ${r}`),mo(r))return new lt($.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{static emptySet(t){return new Ka(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||gt.comparator(n.key,s.key):(n,s)=>gt.comparator(n.key,s.key),this.keyedMap=Rl(),this.sortedSet=new ue(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ka)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Ka;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.ga=new ue(gt.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):vt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class oo{constructor(t,n,s,l,c,f,p,g,y){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(t,n,s,l,c){const f=[];return n.forEach((p=>{f.push({type:0,doc:p})})),new oo(t,n,Ka.emptySet(n),f,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&fh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class oN{constructor(){this.queries=h0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=wt(n),c=l.queries;l.queries=h0(),c.forEach(((f,p)=>{for(const g of p.Sa)g.onError(s)}))})(this,new lt($.ABORTED,"Firestore shutting down"))}}function h0(){return new Fs((r=>WE(r)),fh)}async function VT(r,t){const n=wt(r);let s=3;const l=t.query;let c=n.queries.get(l);c?!c.ba()&&t.Da()&&(s=2):(c=new aN,s=t.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const p=up(f,`Initialization of query '${qa(t.query)}' failed`);return void t.onError(p)}n.queries.set(l,c),c.Sa.push(t),t.va(n.onlineState),c.wa&&t.Fa(c.wa)&&cp(n)}async function kT(r,t){const n=wt(r),s=t.query;let l=3;const c=n.queries.get(s);if(c){const f=c.Sa.indexOf(t);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?l=t.Da()?0:1:!c.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function lN(r,t){const n=wt(r);let s=!1;for(const l of t){const c=l.query,f=n.queries.get(c);if(f){for(const p of f.Sa)p.Fa(l)&&(s=!0);f.wa=l}}s&&cp(n)}function uN(r,t,n){const s=wt(r),l=s.queries.get(t);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(t)}function cp(r){r.Ca.forEach((t=>{t.next()}))}var Tm,f0;(f0=Tm||(Tm={})).Ma="default",f0.Cache="cache";class PT{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new oo(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=oo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Tm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(t){this.key=t}}class LT{constructor(t){this.key=t}}class cN{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Lt(),this.mutatedKeys=Lt(),this.eu=tT(t),this.tu=new Ka(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new c0,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((b,w)=>{const x=l.get(b),L=dh(this.query,w)?w:null,W=!!x&&this.mutatedKeys.has(x.key),X=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let tt=!1;x&&L?x.data.isEqual(L.data)?W!==X&&(s.track({type:3,doc:L}),tt=!0):this.su(x,L)||(s.track({type:2,doc:L}),tt=!0,(g&&this.eu(L,g)>0||y&&this.eu(L,y)<0)&&(p=!0)):!x&&L?(s.track({type:0,doc:L}),tt=!0):x&&!L&&(s.track({type:1,doc:x}),tt=!0,(g||y)&&(p=!0)),tt&&(L?(f=f.add(L),c=X?c.add(b):c.delete(b)):(f=f.delete(b),c=c.delete(b)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const b=this.query.limitType==="F"?f.last():f.first();f=f.delete(b.key),c=c.delete(b.key),s.track({type:1,doc:b})}return{tu:f,iu:s,Cs:p,mutatedKeys:c}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,l){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort(((b,w)=>(function(L,W){const X=tt=>{switch(tt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt(20277,{Rt:tt})}};return X(L)-X(W)})(b.type,w.type)||this.eu(b.doc,w.doc))),this.ou(s),l=l??!1;const p=n&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,y=g!==this.Za;return this.Za=g,f.length!==0||y?{snapshot:new oo(this.query,t.tu,c,f,t.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new c0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Lt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new LT(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new UT(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=Lt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return oo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const hp="SyncEngine";class hN{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class fN{constructor(t){this.key=t,this.hu=!1}}class dN{constructor(t,n,s,l,c,f){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Fs((p=>WE(p)),fh),this.Iu=new Map,this.Eu=new Set,this.du=new ue(gt.comparator),this.Au=new Map,this.Ru=new tp,this.Vu={},this.mu=new Map,this.fu=ao.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function mN(r,t,n=!0){const s=GT(r);let l;const c=s.Tu.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await jT(s,t,n,!0),l}async function pN(r,t){const n=GT(r);await jT(n,t,!0,!1)}async function jT(r,t,n,s){const l=await kI(r.localStore,fi(t)),c=l.targetId,f=r.sharedClientState.addLocalQueryTarget(c,n);let p;return s&&(p=await gN(r,t,c,f==="current",l.resumeToken)),r.isPrimaryClient&&n&&IT(r.remoteStore,l),p}async function gN(r,t,n,s,l){r.pu=(w,x,L)=>(async function(X,tt,nt,ft){let ht=tt.view.ru(nt);ht.Cs&&(ht=await r0(X.localStore,tt.query,!1).then((({documents:O})=>tt.view.ru(O,ht))));const jt=ft&&ft.targetChanges.get(tt.targetId),ot=ft&&ft.targetMismatches.get(tt.targetId)!=null,Mt=tt.view.applyChanges(ht,X.isPrimaryClient,jt,ot);return m0(X,tt.targetId,Mt.au),Mt.snapshot})(r,w,x,L);const c=await r0(r.localStore,t,!0),f=new cN(t,c.Qs),p=f.ru(c.documents),g=Jl.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),y=f.applyChanges(p,r.isPrimaryClient,g);m0(r,n,y.au);const b=new hN(t,n,f);return r.Tu.set(t,b),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),y.snapshot}async function yN(r,t,n){const s=wt(r),l=s.Tu.get(t),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((f=>!fh(f,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await vm(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&rp(s.remoteStore,l.targetId),bm(s,l.targetId)})).catch(fo)):(bm(s,l.targetId),await vm(s.localStore,l.targetId,!0))}async function _N(r,t){const n=wt(r),s=n.Tu.get(t),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),rp(n.remoteStore,s.targetId))}async function vN(r,t,n){const s=RN(r);try{const l=await(function(f,p){const g=wt(f),y=Gt.now(),b=p.reduce(((L,W)=>L.add(W.key)),Lt());let w,x;return g.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let W=$i(),X=Lt();return g.Ns.getEntries(L,b).next((tt=>{W=tt,W.forEach(((nt,ft)=>{ft.isValidDocument()||(X=X.add(nt))}))})).next((()=>g.localDocuments.getOverlayedDocuments(L,W))).next((tt=>{w=tt;const nt=[];for(const ft of p){const ht=Vx(ft,w.get(ft.key).overlayedDocument);ht!=null&&nt.push(new Zr(ft.key,ht,FE(ht.value.mapValue),Vn.exists(!0)))}return g.mutationQueue.addMutationBatch(L,y,nt,p)})).next((tt=>{x=tt;const nt=tt.applyToLocalDocumentSet(w,X);return g.documentOverlayCache.saveOverlays(L,tt.batchId,nt)}))})).then((()=>({batchId:x.batchId,changes:nT(w)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),(function(f,p,g){let y=f.Vu[f.currentUser.toKey()];y||(y=new ue(Ut)),y=y.insert(p,g),f.Vu[f.currentUser.toKey()]=y})(s,l.batchId,n),await tu(s,l.changes),await vh(s.remoteStore)}catch(l){const c=up(l,"Failed to persist write");n.reject(c)}}async function zT(r,t){const n=wt(r);try{const s=await OI(n.localStore,t);t.targetChanges.forEach(((l,c)=>{const f=n.Au.get(c);f&&(Qt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?Qt(f.hu,14607):l.removedDocuments.size>0&&(Qt(f.hu,42227),f.hu=!1))})),await tu(n,s,t)}catch(s){await fo(s)}}function d0(r,t,n){const s=wt(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((c,f)=>{const p=f.view.va(t);p.snapshot&&l.push(p.snapshot)})),(function(f,p){const g=wt(f);g.onlineState=p;let y=!1;g.queries.forEach(((b,w)=>{for(const x of w.Sa)x.va(p)&&(y=!0)})),y&&cp(g)})(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function EN(r,t,n){const s=wt(r);s.sharedClientState.updateQueryState(t,"rejected",n);const l=s.Au.get(t),c=l&&l.key;if(c){let f=new ue(gt.comparator);f=f.insert(c,Ze.newNoDocument(c,At.min()));const p=Lt().add(c),g=new gh(At.min(),new Map,new ue(Ut),f,p);await zT(s,g),s.du=s.du.remove(c),s.Au.delete(t),fp(s)}else await vm(s.localStore,t,!1).then((()=>bm(s,t,n))).catch(fo)}async function TN(r,t){const n=wt(r),s=t.batch.batchId;try{const l=await DI(n.localStore,t);qT(n,s,null),BT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await tu(n,l)}catch(l){await fo(l)}}async function bN(r,t,n){const s=wt(r);try{const l=await(function(f,p){const g=wt(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,p).next((w=>(Qt(w!==null,37113),b=w.keys(),g.mutationQueue.removeMutationBatch(y,w)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(s.localStore,t);qT(s,t,n),BT(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await tu(s,l)}catch(l){await fo(l)}}function BT(r,t){(r.mu.get(t)||[]).forEach((n=>{n.resolve()})),r.mu.delete(t)}function qT(r,t,n){const s=wt(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(t);c&&(n?c.reject(n):c.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function bm(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||HT(r,s)}))}function HT(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(rp(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),fp(r))}function m0(r,t,n){for(const s of n)s instanceof UT?(r.Ru.addReference(s.key,t),AN(r,s)):s instanceof LT?(ut(hp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||HT(r,s.key)):vt(19791,{wu:s})}function AN(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(ut(hp,"New document in limbo: "+n),r.Eu.add(s),fp(r))}function fp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new gt(re.fromString(t)),s=r.fu.next();r.Au.set(s,new fN(n)),r.du=r.du.insert(n,s),IT(r.remoteStore,new Lr(fi(Km(n.path)),s,"TargetPurposeLimboResolution",uh.ce))}}async function tu(r,t,n){const s=wt(r),l=[],c=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,g)=>{f.push(s.pu(g,t,n).then((y=>{if((y||n)&&s.isPrimaryClient){const b=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(y){l.push(y);const b=np.As(g.targetId,y);c.push(b)}})))})),await Promise.all(f),s.Pu.H_(l),await(async function(g,y){const b=wt(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>et.forEach(y,(x=>et.forEach(x.Es,(L=>b.persistence.referenceDelegate.addReference(w,x.targetId,L))).next((()=>et.forEach(x.ds,(L=>b.persistence.referenceDelegate.removeReference(w,x.targetId,L)))))))))}catch(w){if(!mo(w))throw w;ut(ip,"Failed to update sequence numbers: "+w)}for(const w of y){const x=w.targetId;if(!w.fromCache){const L=b.Ms.get(x),W=L.snapshotVersion,X=L.withLastLimboFreeSnapshotVersion(W);b.Ms=b.Ms.insert(x,X)}}})(s.localStore,c))}async function SN(r,t){const n=wt(r);if(!n.currentUser.isEqual(t)){ut(hp,"User change. New user:",t.toKey());const s=await ST(n.localStore,t);n.currentUser=t,(function(c,f){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new lt($.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await tu(n,s.Ls)}}function wN(r,t){const n=wt(r),s=n.Au.get(t);if(s&&s.hu)return Lt().add(s.key);{let l=Lt();const c=n.Iu.get(t);if(!c)return l;for(const f of c){const p=n.Tu.get(f);l=l.unionWith(p.view.nu)}return l}}function GT(r){const t=wt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=zT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=wN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=EN.bind(null,t),t.Pu.H_=lN.bind(null,t.eventManager),t.Pu.yu=uN.bind(null,t.eventManager),t}function RN(r){const t=wt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=TN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bN.bind(null,t),t}class nh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=yh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return CI(this.persistence,new xI,t.initialUser,this.serializer)}Cu(t){return new AT(ep.mi,this.serializer)}Du(t){return new UI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nh.provider={build:()=>new nh};class xN extends nh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Qt(this.persistence.referenceDelegate instanceof th,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new fI(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new AT((s=>th.mi(s,n)),this.serializer)}}class Am{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>d0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=SN.bind(null,this.syncEngine),await sN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new oN})()}createDatastore(t){const n=yh(t.databaseInfo.databaseId),s=(function(c){return new qI(c)})(t.databaseInfo);return(function(c,f,p,g){return new QI(c,f,p,g)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,l,c,f,p){return new KI(s,l,c,f,p)})(this.localStore,this.datastore,t.asyncQueue,(n=>d0(this.syncEngine,n,0)),(function(){return o0.v()?new o0:new LI})())}createSyncEngine(t,n){return(function(l,c,f,p,g,y,b){const w=new dN(l,c,f,p,g,y);return b&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=wt(n);ut(Gs,"RemoteStore shutting down."),s.Ea.add(5),await Wl(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Am.provider={build:()=>new Am};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ki("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="FirestoreClient";class IN{constructor(t,n,s,l,c){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=Xe.UNAUTHENTICATED,this.clientId=qm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async f=>{ut($r,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(ut($r,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=up(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function Qd(r,t){r.asyncQueue.verifyOperationInProgress(),ut($r,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await ST(t.localStore,l),s=l)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function p0(r,t){r.asyncQueue.verifyOperationInProgress();const n=await NN(r);ut($r,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener((s=>u0(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>u0(t.remoteStore,l))),r._onlineComponents=t}async function NN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ut($r,"Using user provided OfflineComponentProvider");try{await Qd(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===$.FAILED_PRECONDITION||l.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;to("Error using user provided cache. Falling back to memory cache: "+n),await Qd(r,new nh)}}else ut($r,"Using default OfflineComponentProvider"),await Qd(r,new xN(void 0));return r._offlineComponents}async function QT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ut($r,"Using user provided OnlineComponentProvider"),await p0(r,r._uninitializedComponentsProvider._online)):(ut($r,"Using default OnlineComponentProvider"),await p0(r,new Am))),r._onlineComponents}function CN(r){return QT(r).then((t=>t.syncEngine))}async function YT(r){const t=await QT(r),n=t.eventManager;return n.onListen=mN.bind(null,t.syncEngine),n.onUnlisten=yN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=pN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=_N.bind(null,t.syncEngine),n}function DN(r,t,n={}){const s=new Hi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,p,g,y){const b=new FT({next:x=>{b.Nu(),f.enqueueAndForget((()=>kT(c,w)));const L=x.docs.has(p);!L&&x.fromCache?y.reject(new lt($.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&x.fromCache&&g&&g.source==="server"?y.reject(new lt($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),w=new PT(Km(p.path),b,{includeMetadataChanges:!0,qa:!0});return VT(c,w)})(await YT(r),r.asyncQueue,t,n,s))),s.promise}function ON(r,t,n={}){const s=new Hi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,f,p,g,y){const b=new FT({next:x=>{b.Nu(),f.enqueueAndForget((()=>kT(c,w))),x.fromCache&&g.source==="server"?y.reject(new lt($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),w=new PT(p,b,{includeMetadataChanges:!0,qa:!0});return VT(c,w)})(await YT(r),r.asyncQueue,t,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="firestore.googleapis.com",y0=!0;class _0{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new lt($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$T,this.ssl=y0}else this.host=t.host,this.ssl=t.ssl??y0;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=bT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<cI)throw new lt($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}K2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KT(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new lt($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new lt($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new lt($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Eh{constructor(t,n,s,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new lt($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new lt($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new L2;switch(s.type){case"firstParty":return new q2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new lt($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=g0.get(n);s&&(ut("ComponentProvider","Removing Datastore"),g0.delete(n),s.terminate())})(this),Promise.resolve()}}function MN(r,t,n,s={}){r=Kn(r,Eh);const l=lo(t),c=r._getSettings(),f={...c,emulatorOptions:r._getEmulatorOptions()},p=`${t}:${n}`;l&&(q0(`https://${p}`),H0("Firestore",!0)),c.host!==$T&&c.host!==p&&to("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:l,emulatorOptions:s};if(!Fi(g,f)&&(r._setSettings(g),s.mockUserToken)){let y,b;if(typeof s.mockUserToken=="string")y=s.mockUserToken,b=Xe.MOCK_USER;else{y=lS(s.mockUserToken,r._app?.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new lt($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Xe(w)}r._authCredentials=new j2(new ME(y,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Ys(this.firestore,t,this._query)}}class Ee{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ee(this.firestore,t,this._key)}toJSON(){return{type:Ee._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(Xl(n,Ee._jsonSchema))return new Ee(t,s||null,new gt(re.fromString(n.referencePath)))}}Ee._jsonSchemaVersion="firestore/documentReference/1.0",Ee._jsonSchema={type:we("string",Ee._jsonSchemaVersion),referencePath:we("string")};class Hr extends Ys{constructor(t,n,s){super(t,n,Km(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ee(this.firestore,null,new gt(t))}withConverter(t){return new Hr(this.firestore,t,this._path)}}function dp(r,t,...n){if(r=He(r),VE("collection","path",t),r instanceof Eh){const s=re.fromString(t,...n);return Dv(s),new Hr(r,null,s)}{if(!(r instanceof Ee||r instanceof Hr))throw new lt($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(re.fromString(t,...n));return Dv(s),new Hr(r.firestore,null,s)}}function Jr(r,t,...n){if(r=He(r),arguments.length===1&&(t=qm.newId()),VE("doc","path",t),r instanceof Eh){const s=re.fromString(t,...n);return Cv(s),new Ee(r,null,new gt(s))}{if(!(r instanceof Ee||r instanceof Hr))throw new lt($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(re.fromString(t,...n));return Cv(s),new Ee(r.firestore,r instanceof Hr?r.converter:null,new gt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="AsyncQueue";class E0{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new RT(this,"async_queue_retry"),this._c=()=>{const s=Fd();s&&ut(v0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Fd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Fd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Hi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!mo(t))throw t;ut(v0,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Ki("INTERNAL UNHANDLED ERROR: ",T0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=lp.createAndSchedule(this,t,n,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&vt(47125,{Pc:T0(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function T0(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}class Ks extends Eh{constructor(t,n,s,l){super(t,n,s,l),this.type="firestore",this._queue=new E0,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new E0(t),this._firestoreClient=void 0,await t}}}function VN(r,t){const n=typeof r=="object"?r:Y0(),s=typeof r=="string"?r:Kc,l=Cm(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=aS("firestore");c&&MN(l,...c)}return l}function mp(r){if(r._terminated)throw new lt($.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||kN(r),r._firestoreClient}function kN(r){const t=r._freezeSettings(),n=(function(l,c,f,p){return new sx(l,c,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,KT(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new IN(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Mn(Ge.fromBase64String(t))}catch(n){throw new lt($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Mn(Ge.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Mn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Xl(t,Mn._jsonSchema))return Mn.fromBase64String(t.bytes)}}Mn._jsonSchemaVersion="firestore/bytes/1.0",Mn._jsonSchema={type:we("string",Mn._jsonSchemaVersion),bytes:we("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new lt($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new lt($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new lt($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ut(this._lat,t._lat)||Ut(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mi._jsonSchemaVersion}}static fromJSON(t){if(Xl(t,mi._jsonSchema))return new mi(t.latitude,t.longitude)}}mi._jsonSchemaVersion="firestore/geoPoint/1.0",mi._jsonSchema={type:we("string",mi._jsonSchemaVersion),latitude:we("number"),longitude:we("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Xl(t,pi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new pi(t.vectorValues);throw new lt($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pi._jsonSchemaVersion="firestore/vectorValue/1.0",pi._jsonSchema={type:we("string",pi._jsonSchemaVersion),vectorValues:we("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=/^__.*__$/;class UN{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Zr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Zl(t,this.data,n,this.fieldTransforms)}}class XT{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new Zr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function ZT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt(40011,{Ac:r})}}class bh{constructor(t,n,s,l,c,f){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new bh({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return ih(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(ZT(this.Ac)&&PN.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class LN{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||yh(t)}Cc(t,n,s,l=!1){return new bh({Ac:t,methodName:n,Dc:s,path:qe.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ah(r){const t=r._freezeSettings(),n=yh(r._databaseId);return new LN(r._databaseId,!!t.ignoreUndefinedProperties,n)}function JT(r,t,n,s,l,c={}){const f=r.Cc(c.merge||c.mergeFields?2:0,t,n,l);yp("Data must be an object, but it was:",f,s);const p=t1(s,f);let g,y;if(c.merge)g=new En(f.fieldMask),y=f.fieldTransforms;else if(c.mergeFields){const b=[];for(const w of c.mergeFields){const x=Sm(t,w,n);if(!f.contains(x))throw new lt($.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);n1(b,x)||b.push(x)}g=new En(b),y=f.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,y=f.fieldTransforms;return new UN(new cn(p),g,y)}class Sh extends eu{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Sh}}function WT(r,t,n){return new bh({Ac:3,Dc:t.settings.Dc,methodName:r._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class pp extends eu{constructor(t,n){super(t),this.vc=n}_toFieldTransform(t){const n=WT(this,t,!0),s=this.vc.map((c=>$s(c,n))),l=new ro(s);return new uT(t.path,l)}isEqual(t){return t instanceof pp&&Fi(this.vc,t.vc)}}class gp extends eu{constructor(t,n){super(t),this.vc=n}_toFieldTransform(t){const n=WT(this,t,!0),s=this.vc.map((c=>$s(c,n))),l=new so(s);return new uT(t.path,l)}isEqual(t){return t instanceof gp&&Fi(this.vc,t.vc)}}function jN(r,t,n,s){const l=r.Cc(1,t,n);yp("Data must be an object, but it was:",l,s);const c=[],f=cn.empty();Xr(s,((g,y)=>{const b=_p(t,g,n);y=He(y);const w=l.yc(b);if(y instanceof Sh)c.push(b);else{const x=$s(y,w);x!=null&&(c.push(b),f.set(b,x))}}));const p=new En(c);return new XT(f,p,l.fieldTransforms)}function zN(r,t,n,s,l,c){const f=r.Cc(1,t,n),p=[Sm(t,s,n)],g=[l];if(c.length%2!=0)throw new lt($.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<c.length;x+=2)p.push(Sm(t,c[x])),g.push(c[x+1]);const y=[],b=cn.empty();for(let x=p.length-1;x>=0;--x)if(!n1(y,p[x])){const L=p[x];let W=g[x];W=He(W);const X=f.yc(L);if(W instanceof Sh)y.push(L);else{const tt=$s(W,X);tt!=null&&(y.push(L),b.set(L,tt))}}const w=new En(y);return new XT(b,w,f.fieldTransforms)}function BN(r,t,n,s=!1){return $s(n,r.Cc(s?4:3,t))}function $s(r,t){if(e1(r=He(r)))return yp("Unsupported field value:",t,r),t1(r,t);if(r instanceof eu)return(function(s,l){if(!ZT(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let f=0;for(const p of s){let g=$s(p,l.wc(f));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),f++}return{arrayValue:{values:c}}})(r,t)}return(function(s,l){if((s=He(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Ix(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Gt.fromDate(s);return{timestampValue:Wc(l.serializer,c)}}if(s instanceof Gt){const c=new Gt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Wc(l.serializer,c)}}if(s instanceof mi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Mn)return{bytesValue:pT(l.serializer,s._byteString)};if(s instanceof Ee){const c=l.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Wm(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof pi)return(function(f,p){return{mapValue:{fields:{[HE]:{stringValue:GE},[$c]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return $m(p.serializer,y)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${lh(s)}`)})(r,t)}function t1(r,t){const n={};return UE(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xr(r,((s,l)=>{const c=$s(l,t.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function e1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Gt||r instanceof mi||r instanceof Mn||r instanceof Ee||r instanceof eu||r instanceof pi)}function yp(r,t,n){if(!e1(n)||!kE(n)){const s=lh(n);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function Sm(r,t,n){if((t=He(t))instanceof Th)return t._internalPath;if(typeof t=="string")return _p(r,t);throw ih("Field path arguments must be of type string or ",r,!1,void 0,n)}const qN=new RegExp("[~\\*/\\[\\]]");function _p(r,t,n){if(t.search(qN)>=0)throw ih(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Th(...t.split("."))._internalPath}catch{throw ih(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function ih(r,t,n,s,l){const c=s&&!s.isEmpty(),f=l!==void 0;let p=`Function ${t}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||f)&&(g+=" (found",c&&(g+=` in field ${s}`),f&&(g+=` in document ${l}`),g+=")"),new lt($.INVALID_ARGUMENT,p+r+g)}function n1(r,t){return r.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(t,n,s,l,c){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ee(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new HN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(wh("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HN extends i1{data(){return super.data()}}function wh(r,t){return typeof t=="string"?_p(r,t):t instanceof Th?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new lt($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vp{}class r1 extends vp{}function FN(r,t,...n){let s=[];t instanceof vp&&s.push(t),s=s.concat(n),(function(c){const f=c.filter((g=>g instanceof Ep)).length,p=c.filter((g=>g instanceof Rh)).length;if(f>1||f>0&&p>0)throw new lt($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class Rh extends r1{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new Rh(t,n,s)}_apply(t){const n=this._parse(t);return s1(t._query,n),new Ys(t.firestore,t.converter,dm(t._query,n))}_parse(t){const n=Ah(t.firestore);return(function(c,f,p,g,y,b,w){let x;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new lt($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){A0(w,b);const W=[];for(const X of w)W.push(b0(g,c,X));x={arrayValue:{values:W}}}else x=b0(g,c,w)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||A0(w,b),x=BN(p,f,w,b==="in"||b==="not-in");return Se.create(y,b,x)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function QN(r,t,n){const s=t,l=wh("where",r);return Rh._create(l,s,n)}class Ep extends vp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Ep(t,n)}_parse(t){const n=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:$n.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(l,c){let f=l;const p=c.getFlattenedFilters();for(const g of p)s1(f,g),f=dm(f,g)})(t._query,n),new Ys(t.firestore,t.converter,dm(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Tp extends r1{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Tp(t,n)}_apply(t){const n=(function(l,c,f){if(l.startAt!==null)throw new lt($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new lt($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gl(c,f)})(t._query,this._field,this._direction);return new Ys(t.firestore,t.converter,(function(l,c){const f=l.explicitOrderBy.concat([c]);return new po(l.path,l.collectionGroup,f,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(t._query,n))}}function YN(r,t="asc"){const n=t,s=wh("orderBy",r);return Tp._create(s,n)}function b0(r,t,n){if(typeof(n=He(n))=="string"){if(n==="")throw new lt($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JE(t)&&n.indexOf("/")!==-1)throw new lt($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(re.fromString(n));if(!gt.isDocumentKey(s))throw new lt($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return jv(r,new gt(s))}if(n instanceof Ee)return jv(r,n._key);throw new lt($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lh(n)}.`)}function A0(r,t){if(!Array.isArray(r)||r.length===0)throw new lt($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function s1(r,t){const n=(function(l,c){for(const f of l)for(const p of f.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new lt($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new lt($.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class KN{convertValue(t,n="none"){switch(Yr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ve(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Qr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw vt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Xr(t,((l,c)=>{s[l]=this.convertValue(c,n)})),s}convertVectorValue(t){const n=t.fields?.[$c].arrayValue?.values?.map((s=>ve(s.doubleValue)));return new pi(n)}convertGeoPoint(t){return new mi(ve(t.latitude),ve(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=hh(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Bl(t));default:return null}}convertTimestamp(t){const n=Fr(t);return new Gt(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=re.fromString(t);Qt(TT(s),9688,{name:t});const l=new ql(s.get(1),s.get(3)),c=new gt(s.popFirst(5));return l.isEqual(n)||Ki(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(r,t,n){let s;return s=r?r.toFirestore(t):t,s}class Il{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class zs extends i1{constructor(t,n,s,l,c,f){super(t,n,s,l,f),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(wh("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new lt($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=zs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}zs._jsonSchemaVersion="firestore/documentSnapshot/1.0",zs._jsonSchema={type:we("string",zs._jsonSchemaVersion),bundleSource:we("string","DocumentSnapshot"),bundleName:we("string"),bundle:we("string")};class Uc extends zs{data(t={}){return super.data(t)}}class $a{constructor(t,n,s,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new Il(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new Uc(this._firestore,this._userDataWriter,s.key,s,new Il(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new lt($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((p=>{const g=new Uc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Il(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new Uc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Il(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,b=-1;return p.type!==0&&(y=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),b=f.indexOf(p.doc.key)),{type:$N(p.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new lt($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=$a._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=qm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function $N(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(r){r=Kn(r,Ee);const t=Kn(r.firestore,Ks);return DN(mp(t),r._key).then((n=>WN(t,r,n)))}$a._jsonSchemaVersion="firestore/querySnapshot/1.0",$a._jsonSchema={type:we("string",$a._jsonSchemaVersion),bundleSource:we("string","QuerySnapshot"),bundleName:we("string"),bundle:we("string")};class l1 extends KN{constructor(t){super(),this.firestore=t}convertBytes(t){return new Mn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ee(this.firestore,null,n)}}function XN(r){r=Kn(r,Ys);const t=Kn(r.firestore,Ks),n=mp(t),s=new l1(t);return GN(r._query),ON(n,r._query).then((l=>new $a(t,s,r,l)))}function ZN(r,t,n){r=Kn(r,Ee);const s=Kn(r.firestore,Ks),l=a1(r.converter,t);return xh(s,[JT(Ah(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,Vn.none())])}function bp(r,t,n,...s){r=Kn(r,Ee);const l=Kn(r.firestore,Ks),c=Ah(l);let f;return f=typeof(t=He(t))=="string"||t instanceof Th?zN(c,"updateDoc",r._key,t,n,s):jN(c,"updateDoc",r._key,t),xh(l,[f.toMutation(r._key,Vn.exists(!0))])}function JN(r){return xh(Kn(r.firestore,Ks),[new Xm(r._key,Vn.none())])}function u1(r,t){const n=Kn(r.firestore,Ks),s=Jr(r),l=a1(r.converter,t);return xh(n,[JT(Ah(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,Vn.exists(!1))]).then((()=>s))}function xh(r,t){return(function(s,l){const c=new Hi;return s.asyncQueue.enqueueAndForget((async()=>vN(await CN(s),l,c))),c.promise})(mp(r),t)}function WN(r,t,n){const s=n.docs.get(t._key),l=new l1(r);return new zs(r,l,t._key,s,new Il(n.hasPendingWrites,n.fromCache),t.converter)}function c1(...r){return new pp("arrayUnion",r)}function tC(...r){return new gp("arrayRemove",r)}(function(t,n=!0){(function(l){ho=l})(uo),Ja(new Bs("firestore",((s,{instanceIdentifier:l,options:c})=>{const f=s.getProvider("app").getImmediate(),p=new Ks(new z2(s.getProvider("auth-internal")),new H2(f,s.getProvider("app-check-internal")),(function(y,b){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new lt($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ql(y.options.projectId,b)})(f,l),f);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Br(Rv,xv,t),Br(Rv,xv,"esm2020")})();const eC={apiKey:"AIzaSyDoTiH6E-xnygIzDsJ65_ENvI87IRzFOpo",authDomain:"trip-together-planner.firebaseapp.com",projectId:"trip-together-planner",storageBucket:"trip-together-planner.firebasestorage.app",messagingSenderId:"848679252517",appId:"1:848679252517:web:e56bc9f0eeb918ad3b45cc"},h1=Q0(eC),Yd=V2(h1),_i=VN(h1),f1=new zi;f1.setCustomParameters({prompt:"select_account"});const Ap="trips",nu="activities",d1="users",nC=async r=>(await u1(dp(_i,Ap),{...r,createdAt:Gt.now(),updatedAt:Gt.now()})).id,iC=async r=>{const t=await o1(Jr(_i,Ap,r));return t.exists()?{id:t.id,...t.data()}:null},rC=async(r,t)=>{await bp(Jr(_i,Ap,r),{memberIds:c1(t),updatedAt:Gt.now()})},sC=async r=>(await u1(dp(_i,nu),{...r,createdAt:Gt.now(),updatedAt:Gt.now()})).id,aC=async r=>{const t=FN(dp(_i,nu),QN("tripId","==",r),YN("dateTime","asc"));return(await XN(t)).docs.map(s=>({id:s.id,...s.data()}))},S0=async(r,t)=>{await bp(Jr(_i,nu,r),{...t,updatedAt:Gt.now()})},oC=async r=>{await JN(Jr(_i,nu,r))},lC=async(r,t,n)=>{await bp(Jr(_i,nu,r),{optedInUsers:n?c1(t):tC(t),updatedAt:Gt.now()})},uC=async r=>{await ZN(Jr(_i,d1,r.id),r)},cC=async r=>{const t=await o1(Jr(_i,d1,r));return t.exists()?t.data():null},hC=async r=>{if(r.length===0)return[];const t=[];for(const n of r){const s=await cC(n);s&&t.push(s)}return t},fC=()=>{const[r,t]=Ct.useState(null),[n,s]=Ct.useState(!0);return Ct.useEffect(()=>{const f=bR(Yd,async p=>{if(p){const g={id:p.uid,email:p.email||"",displayName:p.displayName||"Anonymous",photoURL:p.photoURL||void 0};await uC(g),t(g)}else t(null);s(!1)});return()=>f()},[]),{user:r,loading:n,signInWithGoogle:async()=>{try{await HR(Yd,f1)}catch(f){throw console.error("Error signing in with Google:",f),f}},signOut:async()=>{try{await AR(Yd)}catch(f){throw console.error("Error signing out:",f),f}}}},dC=(r,t)=>{const[n,s]=Ct.useState(null),[l,c]=Ct.useState([]),[f,p]=Ct.useState(!1),[g,y]=Ct.useState(null);return Ct.useEffect(()=>{if(!r||!t){s(null),c([]);return}(async()=>{p(!0),y(null);try{const w=await iC(r);if(!w){y("Trip not found"),s(null),c([]);return}w.memberIds.includes(t)||(await rC(r,t),w.memberIds.push(t)),s(w);const x=await hC(w.memberIds);c(x)}catch(w){console.error("Error loading trip:",w),y("Failed to load trip")}finally{p(!1)}})()},[r,t]),{currentTrip:n,members:l,loading:f,error:g}},mC=r=>{const[t,n]=Ct.useState([]),[s,l]=Ct.useState(!1),c=async()=>{if(!r){n([]);return}l(!0);try{const w=await aC(r);n(w)}catch(w){console.error("Error loading activities:",w)}finally{l(!1)}};return Ct.useEffect(()=>{c()},[r]),{activities:t,loading:s,createActivity:async w=>{try{await sC(w),await c()}catch(x){throw console.error("Error creating activity:",x),x}},updateActivity:async(w,x)=>{try{await S0(w,x),await c()}catch(L){throw console.error("Error updating activity:",L),L}},editActivity:async(w,x)=>{try{await S0(w,x),await c()}catch(L){throw console.error("Error editing activity:",L),L}},deleteActivity:async w=>{try{await oC(w),await c()}catch(x){throw console.error("Error deleting activity:",x),x}},toggleOptIn:async(w,x,L)=>{try{await lC(w,x,L),await c()}catch(W){throw console.error("Error toggling opt-in:",W),W}},refresh:c}};function pC(){const{user:r,loading:t,signInWithGoogle:n}=fC(),[s,l]=Ct.useState(null),{currentTrip:c,members:f,loading:p}=dC(s,r?.id||null),{activities:g,createActivity:y,deleteActivity:b,toggleOptIn:w,editActivity:x}=mC(s),[L,W]=Ct.useState("dashboard"),[X,tt]=Ct.useState(null),[nt,ft]=Ct.useState(""),[ht,jt]=Ct.useState(""),[ot,Mt]=Ct.useState([]);if(t)return E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-600 to-pink-600",children:E.jsxs("div",{className:"text-center",children:[E.jsx(Pl,{className:"animate-spin text-white mx-auto mb-4",size:48}),E.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})});if(!r||!s){const Dt=async F=>{try{await n(),l(F)}catch(st){console.error("Login error:",st),alert("Failed to login. Please try again.")}},Rt=async F=>{try{await n();const st=await nC({...F,ownerId:r.id,memberIds:[r.id]});return l(st),st}catch(st){throw console.error("Create trip error:",st),st}};return E.jsx(UA,{onLogin:Dt,onCreateTrip:Rt})}if(p||!c)return E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-600 to-pink-600",children:E.jsxs("div",{className:"text-center",children:[E.jsx(Pl,{className:"animate-spin text-white mx-auto mb-4",size:48}),E.jsx("p",{className:"text-white text-lg",children:"Loading trip..."})]})});const O=c.ownerId===r.id,R=async Dt=>{try{await y({...Dt,tripId:c.id,creatorId:r.id,creatorName:r.displayName,optedInUsers:[r.id]}),W("dashboard")}catch(Rt){console.error("Error creating activity:",Rt),alert("Failed to create activity. Please try again.")}},C=async(Dt,Rt)=>{try{await w(Dt,r.id,Rt)}catch(F){console.error("Error toggling opt-in:",F),alert("Failed to update activity. Please try again.")}},k=async Dt=>{try{await b(Dt)}catch(Rt){console.error("Error deleting activity:",Rt),alert("Failed to delete activity. Please try again.")}},D=Dt=>{tt(Dt),W("edit")},P=async(Dt,Rt)=>{try{await x(Dt,Rt),W("dashboard"),tt(null)}catch(F){console.error("Error saving edited activity:",F),alert("Failed to save changes. Please try again.")}},N=()=>{l(null),W("dashboard")};return E.jsxs("div",{className:"min-h-screen",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[E.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"url(https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1600)",backgroundSize:"cover",backgroundPosition:"center"}}),E.jsx(LA,{trip:c,user:r,memberCount:f.length,onLogout:N}),E.jsx(jA,{currentView:L,onViewChange:W}),E.jsxs("div",{className:"relative",children:[L==="dashboard"&&E.jsxs("div",{className:"grid lg:grid-cols-3 gap-6 max-w-7xl mx-auto px-4 pb-8",children:[E.jsx("div",{className:"lg:col-span-2",children:E.jsx(FA,{activities:g,currentUser:r,onToggleOptIn:C,onDeleteActivity:k,onEditActivity:D,isOwner:O})}),E.jsx("div",{children:E.jsx(ZA,{members:f,ownerId:c.ownerId,currentUserId:r.id})})]}),L==="browse"&&E.jsx(KA,{activities:g,currentUser:r,members:f,onToggleOptIn:C,onDeleteActivity:k,isOwner:O,filterDate:nt,filterMember:ht,filterTags:ot,onFilterDateChange:ft,onFilterMemberChange:jt,onFilterTagsChange:Mt}),L==="create"&&E.jsx($A,{onCreateActivity:R,onCancel:()=>W("dashboard"),activeTrip:c}),L==="edit"&&X&&E.jsx(XA,{activity:g.find(Dt=>Dt.id===X),onEditActivity:P,onCancel:()=>{W("dashboard"),tt(null)},activeTrip:c})]})]})}Zb.createRoot(document.getElementById("root")).render(E.jsx(Rm.StrictMode,{children:E.jsx(pC,{})}));export{gC as c,w0 as g};
